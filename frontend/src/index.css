@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* === Accent Color Palettes (HSL values) === */
  :root {
    /* Default: Sage Green (pastel) */
    --primary-50: 142 45% 96%;
    --primary-100: 142 40% 91%;
    --primary-200: 142 35% 84%;
    --primary-300: 142 30% 75%;
    --primary-400: 142 27% 68%;
    --primary-500: 142 27% 62%;
    --primary-600: 142 30% 51%;
    --primary-700: 142 35% 40%;
    --primary-800: 142 42% 31%;
    --primary-900: 142 50% 22%;

    /* Semantic colors: pastel sage/rose/sky */
    --income-50:  142 45% 96%;
    --income-100: 142 38% 90%;
    --income-300: 142 34% 62%;
    --income-600: 142 32% 43%;
    --income-900: 142 35% 18%;

    --expense-50:  350 60% 97%;
    --expense-100: 350 50% 92%;
    --expense-300: 350 40% 65%;
    --expense-600: 350 42% 48%;
    --expense-900: 350 38% 20%;

    --net-50:  212 55% 96%;
    --net-100: 212 48% 91%;
    --net-300: 213 40% 62%;
    --net-600: 214 42% 46%;
    --net-900: 215 40% 20%;

    --font-numbers: 'DM Mono', monospace;
  }

  /* Accent: Powder Blue (pastel) */
  :root[data-accent="blue"] {
    --primary-50: 210 70% 97%;
    --primary-100: 210 60% 92%;
    --primary-200: 210 52% 85%;
    --primary-300: 210 45% 77%;
    --primary-400: 212 40% 70%;
    --primary-500: 213 38% 65%;
    --primary-600: 215 42% 54%;
    --primary-700: 218 48% 44%;
    --primary-800: 220 55% 35%;
    --primary-900: 222 62% 26%;
  }

  /* Accent: Soft Mauve (pastel) */
  :root[data-accent="purple"] {
    --primary-50: 270 65% 97%;
    --primary-100: 270 58% 92%;
    --primary-200: 270 52% 86%;
    --primary-300: 270 45% 78%;
    --primary-400: 270 38% 71%;
    --primary-500: 270 35% 67%;
    --primary-600: 270 40% 56%;
    --primary-700: 271 46% 45%;
    --primary-800: 272 54% 35%;
    --primary-900: 274 62% 25%;
  }

  /* Accent: Soft Peach (pastel) */
  :root[data-accent="orange"] {
    --primary-50: 30 85% 97%;
    --primary-100: 30 75% 93%;
    --primary-200: 28 65% 87%;
    --primary-300: 27 55% 79%;
    --primary-400: 26 48% 72%;
    --primary-500: 25 45% 68%;
    --primary-600: 22 50% 57%;
    --primary-700: 18 56% 46%;
    --primary-800: 15 62% 36%;
    --primary-900: 12 68% 27%;
  }

  /* Accent: Dusty Rose (pastel) */
  :root[data-accent="rose"] {
    --primary-50: 350 80% 97%;
    --primary-100: 350 68% 93%;
    --primary-200: 350 58% 87%;
    --primary-300: 350 50% 79%;
    --primary-400: 350 43% 72%;
    --primary-500: 350 40% 68%;
    --primary-600: 348 46% 57%;
    --primary-700: 345 53% 46%;
    --primary-800: 343 60% 36%;
    --primary-900: 342 68% 26%;
  }

  /* Accent: Soft Mint (pastel) */
  :root[data-accent="teal"] {
    --primary-50: 172 55% 96%;
    --primary-100: 172 48% 91%;
    --primary-200: 172 42% 84%;
    --primary-300: 172 36% 75%;
    --primary-400: 173 32% 67%;
    --primary-500: 173 30% 62%;
    --primary-600: 174 35% 51%;
    --primary-700: 175 42% 40%;
    --primary-800: 176 50% 31%;
    --primary-900: 176 58% 22%;
  }

  /* === Color Theme Variables (HSL format, matching --primary-* pattern) === */

  /* === Catppuccin Latte (Light) — Peach/Coral accent === */
  :root[data-theme="catppuccin-latte"] {
    --primary-50: 20 65% 95%;
    --primary-100: 20 60% 90%;
    --primary-200: 20 58% 82%;
    --primary-300: 20 60% 72%;
    --primary-400: 20 62% 62%;
    --primary-500: 20 65% 58%;
    --primary-600: 20 68% 48%;
    --primary-700: 20 72% 39%;
    --primary-800: 20 75% 31%;
    --primary-900: 20 78% 23%;
    /* Surface: Latte palette — light theme, gray scale maps dark-to-light */
    --gray-50: 220 23% 95%;    /* Base #eff1f5 */
    --gray-100: 220 22% 92%;   /* Mantle #e6e9ef */
    --gray-200: 223 16% 83%;   /* Surface0 #ccd0da */
    --gray-300: 225 14% 77%;   /* Surface1 #bcc0cc */
    --gray-400: 228 11% 65%;   /* Overlay0 #9ca0b0 */
    --gray-500: 231 10% 59%;   /* Overlay1 #8c8fa1 */
    --gray-600: 233 10% 47%;   /* Subtext0 #6c6f85 */
    --gray-700: 233 13% 41%;   /* Subtext1 #5c5f77 */
    --gray-800: 234 16% 35%;   /* Text #4c4f69 */
    --gray-900: 234 16% 35%;   /* Text #4c4f69 */

  }

  /* === Catppuccin Frappe (Dark) — Teal accent === */
  :root[data-theme="catppuccin-frappe"] {
    --primary-50: 173 50% 95%;
    --primary-100: 173 46% 88%;
    --primary-200: 173 48% 78%;
    --primary-300: 173 50% 68%;
    --primary-400: 173 50% 58%;
    --primary-500: 173 50% 50%;
    --primary-600: 173 54% 42%;
    --primary-700: 173 58% 34%;
    --primary-800: 173 62% 26%;
    --primary-900: 173 65% 19%;
    /* Surface: Frappe palette — dark theme, gray scale maps light-to-dark */
    --gray-50: 227 70% 87%;    /* Text #c6d0f5 */
    --gray-100: 227 44% 80%;   /* Subtext1 #b5bfe2 */
    --gray-200: 228 29% 73%;   /* Subtext0 #a5adce */
    --gray-300: 227 17% 58%;   /* Overlay1 #838ba7 */
    --gray-400: 229 13% 52%;   /* Overlay0 #737994 */
    --gray-500: 228 13% 44%;   /* Surface2 #626880 */
    --gray-600: 227 15% 37%;   /* Surface1 #51576d */
    --gray-700: 230 16% 30%;   /* Surface0 #414559 */
    --gray-800: 229 19% 23%;   /* Base #303446 */
    --gray-900: 229 20% 17%;   /* Crust #232634 */
  }

  /* === Catppuccin Macchiato (Dark) — Mauve/Pink accent === */
  :root[data-theme="catppuccin-macchiato"] {
    --primary-50: 322 60% 95%;
    --primary-100: 322 55% 88%;
    --primary-200: 322 58% 78%;
    --primary-300: 322 60% 68%;
    --primary-400: 322 60% 60%;
    --primary-500: 322 60% 54%;
    --primary-600: 322 62% 45%;
    --primary-700: 322 65% 37%;
    --primary-800: 322 68% 29%;
    --primary-900: 322 70% 21%;
    /* Surface: Macchiato palette */
    --gray-50: 227 68% 88%;    /* Text #cad3f5 */
    --gray-100: 228 39% 80%;   /* Subtext1 #b8c0e0 */
    --gray-200: 227 27% 72%;   /* Subtext0 #a5adcb */
    --gray-300: 228 15% 57%;   /* Overlay1 #8087a2 */
    --gray-400: 230 12% 49%;   /* Overlay0 #6e738d */
    --gray-500: 230 14% 41%;   /* Surface2 #5b6078 */
    --gray-600: 231 16% 34%;   /* Surface1 #494d64 */
    --gray-700: 230 19% 26%;   /* Surface0 #363a4f */
    --gray-800: 232 23% 18%;   /* Base #24273a */
    --gray-900: 236 23% 12%;   /* Crust #181926 */
  }

  /* === Catppuccin Mocha (Dark) — Sky Blue accent === */
  :root[data-theme="catppuccin-mocha"] {
    --primary-50: 189 65% 95%;
    --primary-100: 189 60% 88%;
    --primary-200: 189 62% 78%;
    --primary-300: 189 65% 68%;
    --primary-400: 189 65% 58%;
    --primary-500: 189 65% 52%;
    --primary-600: 189 68% 43%;
    --primary-700: 189 72% 35%;
    --primary-800: 189 75% 27%;
    --primary-900: 189 78% 20%;
    /* Surface: Mocha palette */
    --gray-50: 226 64% 88%;    /* Text #cdd6f4 */
    --gray-100: 227 35% 80%;   /* Subtext1 #bac2de */
    --gray-200: 228 24% 72%;   /* Subtext0 #a6adc8 */
    --gray-300: 230 13% 55%;   /* Overlay1 #7f849c */
    --gray-400: 231 11% 47%;   /* Overlay0 #6c7086 */
    --gray-500: 232 12% 39%;   /* Surface2 #585b70 */
    --gray-600: 234 13% 31%;   /* Surface1 #45475a */
    --gray-700: 237 16% 23%;   /* Surface0 #313244 */
    --gray-800: 240 21% 15%;   /* Base #1e1e2e */
    --gray-900: 240 23% 9%;    /* Crust #11111b */
  }

  /* === Dracula (Dark) — Dracula Cyan accent === */
  :root[data-theme="dracula"] {
    --primary-50: 191 75% 95%;
    --primary-100: 191 70% 88%;
    --primary-200: 191 72% 78%;
    --primary-300: 191 75% 68%;
    --primary-400: 191 75% 60%;
    --primary-500: 191 75% 54%;
    --primary-600: 191 78% 44%;
    --primary-700: 191 82% 36%;
    --primary-800: 191 85% 28%;
    --primary-900: 191 88% 20%;
    /* Surface: Dracula palette */
    --gray-50: 60 30% 96%;     /* Foreground #f8f8f2 */
    --gray-100: 60 20% 88%;    /* Foreground dimmed */
    --gray-200: 60 10% 75%;    /* Foreground muted */
    --gray-300: 225 27% 60%;   /* Comment lighter */
    --gray-400: 225 27% 51%;   /* Comment #6272a4 */
    --gray-500: 231 10% 29%;   /* Bg lighter #424450 */
    --gray-600: 230 15% 24%;   /* Bg light #343746 */
    --gray-700: 232 14% 31%;   /* Current Line #44475a */
    --gray-800: 231 15% 18%;   /* Background #282a36 */
    --gray-900: 232 14% 11%;   /* Bg darker #191a21 */
  }

  /* === Dracula Light / Alucard (Light) — Dracula Pink accent === */
  :root[data-theme="dracula-light"] {
    --primary-50: 326 55% 96%;
    --primary-100: 326 50% 90%;
    --primary-200: 326 52% 82%;
    --primary-300: 326 55% 72%;
    --primary-400: 326 55% 62%;
    --primary-500: 326 55% 56%;
    --primary-600: 326 58% 46%;
    --primary-700: 326 62% 38%;
    --primary-800: 326 65% 30%;
    --primary-900: 326 68% 22%;
    /* Surface: Alucard palette — light theme */
    --gray-50: 48 100% 96%;    /* Background #fffbeb */
    --gray-100: 54 37% 90%;    /* Bg light #efeddc */
    --gray-200: 52 19% 84%;    /* Current Line #dedccf */
    --gray-300: 51 13% 78%;    /* Bg dark #ceccc0 */
    --gray-400: 49 18% 36%;    /* Comment #6c664b */
    --gray-500: 49 14% 46%;    /* Comment lighter */
    --gray-600: 0 0% 35%;      /* Fg muted */
    --gray-700: 0 0% 22%;      /* Fg dimmed */
    --gray-800: 0 0% 12%;      /* Foreground #1f1f1f */
    --gray-900: 0 0% 12%;      /* Foreground #1f1f1f */
  }

  html {
    @apply font-sans;
  }

  body {
    @apply bg-gray-50 text-gray-900 antialiased;
    @apply dark:bg-gray-900 dark:text-gray-100;
    line-height: 1.7;
  }

  /* Dark mode focus ring adjustment */
  .dark .focus-ring {
    @apply focus:ring-offset-gray-900;
  }
}

@layer utilities {
  /* Number formatting with DM Mono */
  .font-numbers {
    font-family: var(--font-numbers);
    font-variant-numeric: tabular-nums;
  }

  /* Monospace for CSV preview */
  .font-csv {
    font-family: var(--font-numbers);
  }

  /* Focus styles for accessibility */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  /* Smooth transitions */
  .transition-default {
    @apply transition-all duration-200 ease-out;
  }

  /* Card hover effect */
  .card-hover {
    @apply hover:shadow-md transition-shadow duration-200;
  }

  /* Chat message subtle fade-up */
  @keyframes chatSlideUp {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Bottom nav slide-up animation */
  .animate-slide-up {
    animation: slideUp 0.2s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Safe area for mobile devices with notch/home indicator */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Fade in animation */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Bounce in animation for level up modal — refined spring, no overshoot */
  .animate-bounce-in {
    animation: bounceIn 0.45s cubic-bezier(0.34, 1.56, 0.64, 1);
  }

  @keyframes bounceIn {
    0% {
      transform: scale(0.4);
      opacity: 0;
    }
    60% {
      transform: scale(1.03);
      opacity: 1;
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Staggered entry animation using CSS custom property */
  .animate-stagger-in {
    opacity: 0;
    animation: staggerFadeSlideUp 0.4s ease-out forwards;
    animation-delay: calc(var(--stagger-index, 0) * 60ms);
  }

  @keyframes staggerFadeSlideUp {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Progress bar fill animation on mount — GPU-composited via scaleX */
  .animate-progress-fill {
    transform-origin: left center;
    animation: progressFill 0.8s cubic-bezier(0.22, 1, 0.36, 1) 0.3s both;
  }

  @keyframes progressFill {
    from { transform: scaleX(0); }
    to   { transform: scaleX(1); }
  }

  /* AI shimmer loading effect — uses active theme accent color */
  .animate-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(var(--primary-500) / 0.10) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  .dark .animate-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsl(var(--primary-500) / 0.18) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Sparkle animation for AI button — idles most of the time, subtle periodic wiggle */
  .animate-sparkle {
    animation: sparkleRotate 4s ease-in-out infinite;
  }

  @keyframes sparkleRotate {
    0%, 70%, 100% { transform: rotate(0deg) scale(1); }
    80%  { transform: rotate(-8deg) scale(1.08); }
    90%  { transform: rotate(8deg)  scale(1.08); }
  }

  /* Success checkmark pop — clean ease-out, confident not bouncy */
  .animate-success-pop {
    animation: successPop 0.35s cubic-bezier(0.22, 1, 0.36, 1);
  }

  @keyframes successPop {
    0%   { opacity: 0; transform: scale(0.2); }
    60%  { opacity: 1; transform: scale(1.05); }
    100% { opacity: 1; transform: scale(1); }
  }

  /* Hide scrollbar utility */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
