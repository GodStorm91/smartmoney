@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* === Accent Color Palettes (HSL values) === */
  :root {
    /* Default: Emerald */
    --primary-50: 138 50% 93%;
    --primary-100: 141 49% 80%;
    --primary-200: 142 45% 72%;
    --primary-300: 143 41% 63%;
    --primary-400: 142 43% 56%;
    --primary-500: 122 39% 49%;
    --primary-600: 123 38% 44%;
    --primary-700: 125 39% 37%;
    --primary-800: 127 42% 30%;
    --primary-900: 130 49% 23%;
  }

  /* Accent: Ocean Blue */
  :root[data-accent="blue"] {
    --primary-50: 214 100% 95%;
    --primary-100: 214 95% 85%;
    --primary-200: 213 90% 75%;
    --primary-300: 212 85% 65%;
    --primary-400: 213 90% 58%;
    --primary-500: 217 91% 60%;
    --primary-600: 221 83% 53%;
    --primary-700: 224 76% 48%;
    --primary-800: 226 71% 40%;
    --primary-900: 224 64% 33%;
  }

  /* Accent: Royal Purple */
  :root[data-accent="purple"] {
    --primary-50: 270 100% 96%;
    --primary-100: 269 100% 88%;
    --primary-200: 269 85% 78%;
    --primary-300: 270 70% 68%;
    --primary-400: 271 69% 61%;
    --primary-500: 271 76% 53%;
    --primary-600: 271 72% 46%;
    --primary-700: 272 68% 39%;
    --primary-800: 273 65% 32%;
    --primary-900: 274 66% 25%;
  }

  /* Accent: Sunset Orange */
  :root[data-accent="orange"] {
    --primary-50: 33 100% 95%;
    --primary-100: 34 100% 85%;
    --primary-200: 32 95% 72%;
    --primary-300: 31 90% 62%;
    --primary-400: 27 96% 54%;
    --primary-500: 25 95% 53%;
    --primary-600: 21 90% 48%;
    --primary-700: 17 88% 40%;
    --primary-800: 15 79% 34%;
    --primary-900: 15 75% 28%;
  }

  /* Accent: Rose Pink */
  :root[data-accent="rose"] {
    --primary-50: 356 100% 96%;
    --primary-100: 356 100% 90%;
    --primary-200: 353 96% 82%;
    --primary-300: 353 95% 72%;
    --primary-400: 351 95% 64%;
    --primary-500: 350 89% 60%;
    --primary-600: 347 77% 50%;
    --primary-700: 345 83% 41%;
    --primary-800: 343 80% 35%;
    --primary-900: 342 75% 28%;
  }

  /* Accent: Teal */
  :root[data-accent="teal"] {
    --primary-50: 166 76% 94%;
    --primary-100: 167 85% 81%;
    --primary-200: 168 76% 68%;
    --primary-300: 171 77% 56%;
    --primary-400: 172 66% 50%;
    --primary-500: 173 80% 40%;
    --primary-600: 175 84% 32%;
    --primary-700: 175 77% 26%;
    --primary-800: 176 69% 22%;
    --primary-900: 176 61% 19%;
  }

  /* === Color Theme Variables (HSL format, matching --primary-* pattern) === */

  /* === Catppuccin Latte (Light) === */
  :root[data-theme="catppuccin-latte"] {
    --primary-50: 266 55% 96%;
    --primary-100: 266 65% 90%;
    --primary-200: 266 75% 80%;
    --primary-300: 266 85% 70%;
    --primary-400: 266 85% 60%;
    --primary-500: 266 85% 58%;
    --primary-600: 266 85% 43%;
    --primary-700: 266 90% 36%;
    --primary-800: 266 90% 29%;
    --primary-900: 266 90% 22%;
    /* Surface: Latte palette — light theme, gray scale maps dark-to-light */
    --gray-50: 220 23% 95%;    /* Base #eff1f5 */
    --gray-100: 220 22% 92%;   /* Mantle #e6e9ef */
    --gray-200: 223 16% 83%;   /* Surface0 #ccd0da */
    --gray-300: 225 14% 77%;   /* Surface1 #bcc0cc */
    --gray-400: 228 11% 65%;   /* Overlay0 #9ca0b0 */
    --gray-500: 231 10% 59%;   /* Overlay1 #8c8fa1 */
    --gray-600: 233 10% 47%;   /* Subtext0 #6c6f85 */
    --gray-700: 233 13% 41%;   /* Subtext1 #5c5f77 */
    --gray-800: 234 16% 35%;   /* Text #4c4f69 */
    --gray-900: 234 16% 35%;   /* Text #4c4f69 */

  }

  /* === Catppuccin Frappe (Dark) === */
  :root[data-theme="catppuccin-frappe"] {
    --primary-50: 277 30% 95%;
    --primary-100: 277 44% 88%;
    --primary-200: 277 59% 80%;
    --primary-300: 277 59% 72%;
    --primary-400: 277 59% 64%;
    --primary-500: 277 59% 56%;
    --primary-600: 277 59% 48%;
    --primary-700: 277 64% 40%;
    --primary-800: 277 64% 32%;
    --primary-900: 277 64% 24%;
    /* Surface: Frappe palette — dark theme, gray scale maps light-to-dark */
    --gray-50: 227 70% 87%;    /* Text #c6d0f5 */
    --gray-100: 227 44% 80%;   /* Subtext1 #b5bfe2 */
    --gray-200: 228 29% 73%;   /* Subtext0 #a5adce */
    --gray-300: 227 17% 58%;   /* Overlay1 #838ba7 */
    --gray-400: 229 13% 52%;   /* Overlay0 #737994 */
    --gray-500: 228 13% 44%;   /* Surface2 #626880 */
    --gray-600: 227 15% 37%;   /* Surface1 #51576d */
    --gray-700: 230 16% 30%;   /* Surface0 #414559 */
    --gray-800: 229 19% 23%;   /* Base #303446 */
    --gray-900: 229 20% 17%;   /* Crust #232634 */
  }

  /* === Catppuccin Macchiato (Dark) === */
  :root[data-theme="catppuccin-macchiato"] {
    --primary-50: 267 53% 95%;
    --primary-100: 267 68% 88%;
    --primary-200: 267 83% 80%;
    --primary-300: 267 83% 72%;
    --primary-400: 267 83% 64%;
    --primary-500: 267 83% 56%;
    --primary-600: 267 83% 48%;
    --primary-700: 267 88% 40%;
    --primary-800: 267 88% 32%;
    --primary-900: 267 88% 24%;
    /* Surface: Macchiato palette */
    --gray-50: 227 68% 88%;    /* Text #cad3f5 */
    --gray-100: 228 39% 80%;   /* Subtext1 #b8c0e0 */
    --gray-200: 227 27% 72%;   /* Subtext0 #a5adcb */
    --gray-300: 228 15% 57%;   /* Overlay1 #8087a2 */
    --gray-400: 230 12% 49%;   /* Overlay0 #6e738d */
    --gray-500: 230 14% 41%;   /* Surface2 #5b6078 */
    --gray-600: 231 16% 34%;   /* Surface1 #494d64 */
    --gray-700: 230 19% 26%;   /* Surface0 #363a4f */
    --gray-800: 232 23% 18%;   /* Base #24273a */
    --gray-900: 236 23% 12%;   /* Crust #181926 */
  }

  /* === Catppuccin Mocha (Dark) === */
  :root[data-theme="catppuccin-mocha"] {
    --primary-50: 267 54% 95%;
    --primary-100: 267 69% 88%;
    --primary-200: 267 84% 80%;
    --primary-300: 267 84% 72%;
    --primary-400: 267 84% 64%;
    --primary-500: 267 84% 56%;
    --primary-600: 267 84% 48%;
    --primary-700: 267 89% 40%;
    --primary-800: 267 89% 32%;
    --primary-900: 267 89% 24%;
    /* Surface: Mocha palette */
    --gray-50: 226 64% 88%;    /* Text #cdd6f4 */
    --gray-100: 227 35% 80%;   /* Subtext1 #bac2de */
    --gray-200: 228 24% 72%;   /* Subtext0 #a6adc8 */
    --gray-300: 230 13% 55%;   /* Overlay1 #7f849c */
    --gray-400: 231 11% 47%;   /* Overlay0 #6c7086 */
    --gray-500: 232 12% 39%;   /* Surface2 #585b70 */
    --gray-600: 234 13% 31%;   /* Surface1 #45475a */
    --gray-700: 237 16% 23%;   /* Surface0 #313244 */
    --gray-800: 240 21% 15%;   /* Base #1e1e2e */
    --gray-900: 240 23% 9%;    /* Crust #11111b */
  }

  /* === Dracula (Dark) === */
  :root[data-theme="dracula"] {
    --primary-50: 265 59% 95%;
    --primary-100: 265 74% 88%;
    --primary-200: 265 89% 80%;
    --primary-300: 265 89% 72%;
    --primary-400: 265 89% 64%;
    --primary-500: 265 89% 56%;
    --primary-600: 265 89% 48%;
    --primary-700: 265 94% 40%;
    --primary-800: 265 94% 32%;
    --primary-900: 265 94% 24%;
    /* Surface: Dracula palette */
    --gray-50: 60 30% 96%;     /* Foreground #f8f8f2 */
    --gray-100: 60 20% 88%;    /* Foreground dimmed */
    --gray-200: 60 10% 75%;    /* Foreground muted */
    --gray-300: 225 27% 60%;   /* Comment lighter */
    --gray-400: 225 27% 51%;   /* Comment #6272a4 */
    --gray-500: 231 10% 29%;   /* Bg lighter #424450 */
    --gray-600: 230 15% 24%;   /* Bg light #343746 */
    --gray-700: 232 14% 31%;   /* Current Line #44475a */
    --gray-800: 231 15% 18%;   /* Background #282a36 */
    --gray-900: 232 14% 11%;   /* Bg darker #191a21 */
  }

  /* === Dracula Light / Alucard (Light) === */
  :root[data-theme="dracula-light"] {
    --primary-50: 252 30% 96%;
    --primary-100: 252 35% 90%;
    --primary-200: 252 44% 80%;
    --primary-300: 252 54% 70%;
    --primary-400: 252 54% 60%;
    --primary-500: 252 54% 54%;
    --primary-600: 252 54% 43%;
    --primary-700: 252 59% 36%;
    --primary-800: 252 59% 29%;
    --primary-900: 252 59% 22%;
    /* Surface: Alucard palette — light theme */
    --gray-50: 48 100% 96%;    /* Background #fffbeb */
    --gray-100: 54 37% 90%;    /* Bg light #efeddc */
    --gray-200: 52 19% 84%;    /* Current Line #dedccf */
    --gray-300: 51 13% 78%;    /* Bg dark #ceccc0 */
    --gray-400: 49 18% 36%;    /* Comment #6c664b */
    --gray-500: 49 14% 46%;    /* Comment lighter */
    --gray-600: 0 0% 35%;      /* Fg muted */
    --gray-700: 0 0% 22%;      /* Fg dimmed */
    --gray-800: 0 0% 12%;      /* Foreground #1f1f1f */
    --gray-900: 0 0% 12%;      /* Foreground #1f1f1f */
  }

  html {
    @apply font-sans;
  }

  body {
    @apply bg-gray-50 text-gray-900 antialiased;
    @apply dark:bg-gray-900 dark:text-gray-100;
    line-height: 1.7;
  }

  /* Dark mode focus ring adjustment */
  .dark .focus-ring {
    @apply focus:ring-offset-gray-900;
  }
}

@layer utilities {
  /* Number formatting with Inter font */
  .font-numbers {
    font-family: 'Inter', sans-serif;
    font-variant-numeric: tabular-nums;
  }

  /* Monospace for CSV preview */
  .font-csv {
    font-family: 'Roboto Mono', monospace;
  }

  /* Focus styles for accessibility */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  /* Smooth transitions */
  .transition-default {
    @apply transition-all duration-200 ease-out;
  }

  /* Card hover effect */
  .card-hover {
    @apply hover:shadow-md transition-shadow duration-200;
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  /* Bottom nav slide-up animation */
  .animate-slide-up {
    animation: slideUp 0.2s ease-out;
  }

  @keyframes slideUp {
    from {
      transform: translateY(100%);
      opacity: 0;
    }
    to {
      transform: translateY(0);
      opacity: 1;
    }
  }

  /* Safe area for mobile devices with notch/home indicator */
  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom, 0px);
  }

  /* Fade in animation */
  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  /* Bounce in animation for level up modal */
  .animate-bounce-in {
    animation: bounceIn 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes bounceIn {
    0% {
      transform: scale(0.3);
      opacity: 0;
    }
    50% {
      transform: scale(1.05);
    }
    70% {
      transform: scale(0.95);
    }
    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Staggered entry animation using CSS custom property */
  .animate-stagger-in {
    opacity: 0;
    animation: staggerFadeSlideUp 0.4s ease-out forwards;
    animation-delay: calc(var(--stagger-index, 0) * 60ms);
  }

  @keyframes staggerFadeSlideUp {
    from {
      opacity: 0;
      transform: translateY(12px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Progress bar fill animation on mount */
  .animate-progress-fill {
    animation: progressFill 0.8s ease-out 0.3s both;
  }

  @keyframes progressFill {
    from { width: 0%; }
  }

  /* AI shimmer loading effect */
  .animate-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(168, 85, 247, 0.08) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  .dark .animate-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(168, 85, 247, 0.15) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  @keyframes shimmer {
    0% { background-position: 200% 0; }
    100% { background-position: -200% 0; }
  }

  /* Sparkle rotate animation for AI button icon */
  .animate-sparkle {
    animation: sparkleRotate 2s ease-in-out infinite;
  }

  @keyframes sparkleRotate {
    0%, 100% { transform: rotate(0deg) scale(1); }
    25% { transform: rotate(-10deg) scale(1.1); }
    75% { transform: rotate(10deg) scale(1.1); }
  }

  /* Success checkmark pop */
  .animate-success-pop {
    animation: successPop 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  }

  @keyframes successPop {
    0% { opacity: 0; transform: scale(0); }
    50% { transform: scale(1.2); }
    100% { opacity: 1; transform: scale(1); }
  }

  /* Hide scrollbar utility */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
}
