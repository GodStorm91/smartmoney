import{u as j,r as f,j as e,F,B as k,G as H,H as N,J as K,D as L,C as b,K as _,k as Q}from"./index-BK0jBd8A.js";function E({isDragOver:s,uploading:a,onDrop:o,onDragOver:m,onDragLeave:x,onFileSelect:i,hasFiles:p=!1,acceptedTypes:g=".csv",uploadMode:d="csv"}){const{t:r}=j("common"),y=f.useRef(null);return e.jsxs("div",{children:[e.jsxs("div",{role:"button",tabIndex:0,"aria-label":r("aria.uploadDropzone"),className:`border-2 border-dashed rounded-xl p-12 text-center transition-all cursor-pointer ${s?"border-primary-500 bg-primary-50/50":"border-gray-300 hover:border-primary-500 hover:bg-primary-50/50"}`,onDrop:o,onDragOver:m,onDragLeave:x,onClick:()=>{var l;return(l=y.current)==null?void 0:l.click()},onKeyDown:l=>{var h;(l.key==="Enter"||l.key===" ")&&((h=y.current)==null||h.click())},children:[e.jsx("input",{ref:y,type:"file",accept:g,multiple:!0,className:"hidden",onChange:l=>{const h=l.target.files;h&&h.length>0&&(i(h),l.target.value="")}}),a?e.jsxs(e.Fragment,{children:[e.jsx(F,{size:"lg",className:"mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r("upload.uploading")}),e.jsx("p",{className:"text-sm text-gray-600",children:r("upload.pleaseWait")})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:r(p?"upload.addMoreFiles":"upload.dropOrClick")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:r(p?d==="csv"?"upload.addMoreDescription":"upload.addMoreImageDescription":d==="csv"?"upload.dropDescription":"upload.dropImageDescription")}),e.jsxs(k,{variant:"primary",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r(p?"button.addMore":"button.selectFile")]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:r(d==="csv"?"upload.supportedFormats":"upload.supportedImageFormats")})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:r("upload.requirements")}),d==="csv"?e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",r("upload.requiredColumns")]}),e.jsxs("li",{children:["• ",r("upload.supportedApps")]}),e.jsxs("li",{children:["• ",r("upload.encoding")]})]}):e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",r("upload.paypayRequirement1")]}),e.jsxs("li",{children:["• ",r("upload.paypayRequirement2")]}),e.jsxs("li",{children:["• ",r("upload.paypayRequirement3")]})]})]})]})})]})}function O({history:s,isLoading:a}){const{t:o}=j("common");return a?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(F,{})}):!s||s.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:o("upload.noHistory")}),e.jsx("p",{className:"text-gray-600",children:o("upload.uploadFirst")})]}):e.jsx("div",{className:"space-y-4",children:s.map((m,x)=>e.jsx(P,{result:m},x))})}function P({result:s}){const{t:a}=j("common"),o=s.status==="success"?"bg-green-50 border-green-200":s.status==="warning"?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200",m=s.status==="success"?"bg-green-100 text-green-600":s.status==="warning"?"bg-yellow-100 text-yellow-600":"bg-gray-200 text-gray-600",x=s.status==="success"?"bg-green-100 text-green-800":s.status==="warning"?"bg-yellow-100 text-yellow-800":"bg-gray-200 text-gray-700",i=s.status==="success"?a("upload.success"):s.status==="warning"?a("upload.warning"):a("upload.completed");return e.jsxs("div",{className:`flex items-start gap-4 p-4 border rounded-lg ${o}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${m}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.status==="warning"?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.filename}),e.jsx("p",{className:"text-sm text-gray-600",children:H(s.uploaded_at)})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${x}`,children:i})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:a("upload.imported")}),e.jsxs("p",{className:"font-semibold font-numbers text-gray-900",children:[s.imported_count,a("upload.count")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:a("upload.duplicates")}),e.jsxs("p",{className:"font-semibold font-numbers text-gray-900",children:[s.duplicate_count,a("upload.count")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:a("upload.errors")}),e.jsxs("p",{className:`font-semibold font-numbers ${s.error_count>0?"text-yellow-700":"text-gray-900"}`,children:[s.error_count,a("upload.count")]})]})]}),s.errors&&s.errors.length>0&&e.jsxs("div",{className:"mt-3 text-sm text-yellow-800 bg-yellow-100 p-3 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:a("upload.errorDetails")}),e.jsx("ul",{className:"space-y-1 text-xs",children:s.errors.map((p,g)=>e.jsxs("li",{children:["• ",a("upload.row"),p.row,": ",p.message]},g))})]})]})]})}function T(){const{t:s}=j("common");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between cursor-pointer py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("upload.faqQuestion1")}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:s("upload.faqAnswer1")})]}),e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between cursor-pointer py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("upload.faqQuestion2")}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:s("upload.faqAnswer2")})]}),e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between cursor-pointer py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("upload.faqQuestion3")}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:s("upload.faqAnswer3")})]})]})}function G({item:s,onRemove:a}){const{t:o}=j("common"),m=i=>i<1024?`${i} B`:i<1024*1024?`${(i/1024).toFixed(1)} KB`:`${(i/(1024*1024)).toFixed(1)} MB`,x=()=>{switch(s.status){case"pending":return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:o("upload.statusPending")});case"uploading":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200",children:[e.jsxs("svg",{className:"animate-spin -ml-0.5 mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o("upload.statusUploading")]});case"success":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200",children:[e.jsx("svg",{className:"mr-1 h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),o("upload.statusSuccess")]});case"error":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-200",children:[e.jsx("svg",{className:"mr-1 h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),o("upload.statusError")]})}};return e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:s.file.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:m(s.file.size)}),s.status==="uploading"&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})})}),s.status==="success"&&s.backendResult&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:s.backendResult.created})," ",o("upload.created"),",",e.jsx("span",{className:"ml-1 text-gray-500 dark:text-gray-400",children:s.backendResult.skipped})," ",o("upload.skipped")]}),s.status==="error"&&s.error&&e.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:s.error})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[x(),s.status==="pending"&&a&&e.jsx("button",{onClick:()=>a(s.id),className:"p-1 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors","aria-label":o("upload.removeFile"),children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]})})}function J({files:s,onRemoveFile:a,onUploadAll:o,onClearAll:m,uploading:x}){const{t:i}=j("common");if(s.length===0)return null;const p=s.filter(l=>l.status==="pending"),g=s.filter(l=>l.status==="uploading"),d=s.filter(l=>l.status==="success"),r=s.filter(l=>l.status==="error"),y=s.length>0&&p.length===0&&g.length===0;return e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.length}),e.jsx("span",{className:"ml-1 text-gray-600",children:i("upload.filesSelected")})]}),d.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-600",children:d.length}),e.jsx("span",{className:"ml-1 text-gray-600",children:i("upload.uploaded")})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-600",children:r.length}),e.jsx("span",{className:"ml-1 text-gray-600",children:i("upload.failed")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!y&&p.length>0&&e.jsx(k,{variant:"primary",onClick:o,disabled:x||p.length===0,children:x?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),i("upload.uploading")]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),i("upload.uploadAll")," (",p.length,")"]})}),y&&e.jsx(k,{variant:"outline",onClick:m,children:i("upload.clearAll")})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:s.map(l=>e.jsx(G,{item:l,onRemove:l.status==="pending"?a:void 0},l.id))}),x&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 p-3 rounded-lg",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:i("upload.uploadingProgress",{current:d.length+g.length,total:s.length})})]}),y&&e.jsxs("div",{className:`flex items-center gap-2 text-sm p-3 rounded-lg ${r.length>0?"text-yellow-800 bg-yellow-50":"text-green-800 bg-green-50"}`,children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:r.length>0?i("upload.completedWithErrors",{success:d.length,error:r.length}):i("upload.allCompleted",{count:d.length})})]})]})}async function Z(s,a){const o=new FormData;o.append("file",s);const m=a?`?account_id=${a}`:"";return(await N.post(`/api/upload/csv${m}`,o,{headers:{"Content-Type":"multipart/form-data"}})).data}async function X(s){const a=new FormData;return a.append("file",s),(await N.post("/api/upload/paypay",a,{headers:{"Content-Type":"multipart/form-data"}})).data}async function Y(){return(await N.get("/api/upload/history")).data}function ee(){const{t:s}=j("common"),[a,o]=f.useState("csv"),[m,x]=f.useState(!1),[i,p]=f.useState(!1),[g,d]=f.useState([]),[r,y]=f.useState(),l=K(),{data:h}=L({queryKey:["accounts"],queryFn:()=>_()}),{data:M,isLoading:z}=L({queryKey:["upload-history"],queryFn:Y}),D=()=>{l.invalidateQueries({queryKey:["upload-history"]}),l.invalidateQueries({queryKey:["transactions"]}),l.invalidateQueries({queryKey:["dashboard-summary"]})},S=t=>a==="csv"?t.name.endsWith(".csv"):/\.(png|jpg|jpeg)$/i.test(t.name),A=a==="csv"?50*1024*1024:10*1024*1024,B=a==="csv"?".csv":".png,.jpg,.jpeg",w=t=>{const n=[];for(let u=0;u<t.length;u++){const c=t[u];if(!S(c)){alert(s(a==="csv"?"upload.alertSelectCSV":"upload.alertSelectImage",{filename:c.name}));continue}if(c.size>A){alert(s("upload.alertMaxSize",{filename:c.name}));continue}g.some(v=>v.file.name===c.name&&v.file.size===c.size)||n.push({id:`${c.name}-${c.size}-${Date.now()}-${u}`,file:c,status:"pending",progress:0})}n.length>0&&d(u=>[...u,...n])},R=t=>{d(n=>n.filter(u=>u.id!==t))},q=()=>{d([])},$=async t=>{d(n=>n.map(u=>u.id===t.id?{...u,status:"uploading",progress:50}:u));try{const n=a==="csv"?await Z(t.file,r):await X(t.file);d(u=>u.map(c=>c.id===t.id?{...c,status:"success",progress:100,result:{filename:n.filename,uploaded_at:new Date().toISOString(),imported_count:n.created,duplicate_count:n.skipped,error_count:0,status:"success"},backendResult:n}:c)),D()}catch(n){console.error("Upload failed:",n),d(u=>u.map(c=>c.id===t.id?{...c,status:"error",progress:0,error:n instanceof Error?n.message:s("upload.alertUploadFailed")}:c))}},W=async()=>{const t=g.filter(n=>n.status==="pending");if(t.length!==0){p(!0);for(const n of t)await $(n);p(!1)}},U=t=>{t.preventDefault(),x(!1);const n=t.dataTransfer.files;n&&n.length>0&&w(n)},I=t=>{t.preventDefault(),x(!0)},V=()=>{x(!1)},C=t=>{t!==a&&(o(t),d([]))};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:s("upload.title")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:s("upload.subtitle")})]}),e.jsxs(b,{className:"mb-8",children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>C("csv"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${a==="csv"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s("upload.tabCSV")}),e.jsx("button",{onClick:()=>C("paypay"),className:`px-4 py-2 font-medium text-sm border-b-2 transition-colors ${a==="paypay"?"border-primary-500 text-primary-600 dark:text-primary-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"}`,children:s("upload.tabPayPay")})]}),a==="csv"&&h&&h.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:s("upload.selectAccount")}),e.jsxs("select",{value:r||"",onChange:t=>y(t.target.value?Number(t.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[e.jsx("option",{value:"",children:s("upload.noAccountSelected")}),h.map(t=>e.jsxs("option",{value:t.id,children:[t.name," (",t.type,")"]},t.id))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:s("upload.accountHint")})]}),e.jsx(E,{isDragOver:m,uploading:i,onDrop:U,onDragOver:I,onDragLeave:V,onFileSelect:w,hasFiles:g.length>0,acceptedTypes:B,uploadMode:a}),e.jsx(J,{files:g,onRemoveFile:R,onUploadAll:W,onClearAll:q,uploading:i})]}),e.jsxs(b,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:s("upload.history")}),e.jsx(O,{history:M,isLoading:z})]}),e.jsxs(b,{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:s("upload.faq")}),e.jsx(T,{})]})]})}const te=Q("/upload")({component:ee});export{te as Route};
