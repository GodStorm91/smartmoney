import{j as e}from"./vendor-tanstack-CNAyyoyW.js";import{l as a,a0 as t,a8 as s,U as r,c as l}from"./index-CL4Qiyvp.js";import{u as n}from"./vendor-i18n-BrrOrGm_.js";import{R as i,g as d,X as o,Y as x,T as c,i as m,B as h,f as g}from"./vendor-recharts-BrNIwK9z.js";import"./vendor-react-Bx4JnVfy.js";import"./vendor-icons-BP-EQ_TG.js";import"./vendor-date-BkGg5e1q.js";function u({data:u,savingsGoal:y}){const{t:f}=n("common"),{currency:j}=a(),{data:v}=t(),{resolvedTheme:p}=s(),b="dark"===p,k=b?"#1e1e2e":"#fff",N=b?"#45475a":"#E5E7EB",w=b?"#cdd6f4":"#374151",C=u.length>0?u[u.length-1]:null,E=(null==C?void 0:C.net)||0,F=u.length>1?u.slice(0,-1):u,B=F.length>0?F.reduce((e,a)=>e+a.net,0)/F.length:E,S=[{name:f("analytics.thisMonth"),value:E,color:E>=0?"#4CAF50":"#F44336"},{name:f("analytics.average"),value:B,color:"#9E9E9E"}],z=0!==B?(E-B)/Math.abs(B)*100:0,A=z>=0,M=y&&y>0?Math.min(E/y*100,100):null;return 1===u.length?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:f("analytics.netCashFlow")}),e.jsx("p",{className:l("text-3xl font-bold",E>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:r(E,j,(null==v?void 0:v.rates)||{},!1)}),E>=0&&e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:f("analytics.positiveCashFlow")}),y&&y>0&&e.jsxs("div",{className:"mt-4 w-full max-w-xs",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:f("analytics.savingsGoal")}),e.jsxs("span",{children:[(M??0).toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full transition-all duration-700 ease-out",M&&M>=100?"bg-green-500":"bg-primary-500"),style:{width:`${M||0}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:[r(y,j,(null==v?void 0:v.rates)||{},!1)," ",f("analytics.target")]})]})]}):e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 min-h-[150px]",children:e.jsx(i,{width:"100%",height:"100%",children:e.jsxs(d,{data:S,layout:"vertical",margin:{top:10,right:60,left:10,bottom:10},children:[e.jsx(o,{type:"number",hide:!0}),e.jsx(x,{type:"category",dataKey:"name",width:80,tick:{fill:w,fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(c,{contentStyle:{backgroundColor:k,border:`1px solid ${N}`,borderRadius:"8px",fontSize:"14px",color:w},formatter:e=>[r(e,j,(null==v?void 0:v.rates)||{},!1),f("analytics.netCashFlow")]}),y&&y>0&&e.jsx(m,{x:y,stroke:"#9C27B0",strokeDasharray:"3 3",label:{value:f("analytics.goal"),position:"top",fill:"#9C27B0",fontSize:10}}),e.jsx(h,{dataKey:"value",radius:[0,4,4,0],maxBarSize:32,isAnimationActive:!0,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:S.map((a,t)=>e.jsx(g,{fill:a.color},`cell-${t}`))})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("span",{className:l("text-sm font-medium",A?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[A?"▲":"▼"," ",Math.abs(z).toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:f("analytics.vsAverage")})]}),y&&y>0&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:f("analytics.savingsGoal")}),e.jsxs("span",{children:[r(E,j,(null==v?void 0:v.rates)||{},!1)," / ",r(y,j,(null==v?void 0:v.rates)||{},!1)]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full transition-all duration-700 ease-out",M&&M>=100?"bg-green-500":"bg-primary-500"),style:{width:`${M||0}%`}})})]})]})}export{u as CashFlowSummary};
