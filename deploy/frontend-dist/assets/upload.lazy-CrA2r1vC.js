import{j as e,c as s,u as r,m as a}from"./vendor-tanstack-CNAyyoyW.js";import{r as t}from"./vendor-react-Bx4JnVfy.js";import{L as l,B as n,f as o,a as i,C as d,b as c}from"./index-D_WYPlpB.js";import{u as x}from"./vendor-i18n-BrrOrGm_.js";import"./vendor-recharts-BrNIwK9z.js";import"./vendor-icons-BP-EQ_TG.js";import"./vendor-date-BkGg5e1q.js";function u({isDragOver:s,uploading:r,onDrop:a,onDragOver:o,onDragLeave:i,onFileSelect:d,hasFiles:c=!1,acceptedTypes:u=".csv",uploadMode:m="csv"}){const{t:p}=x("common"),g=t.useRef(null);return e.jsxs("div",{children:[e.jsxs("div",{role:"button",tabIndex:0,"aria-label":p("aria.uploadDropzone"),className:"border-2 border-dashed rounded-xl p-12 text-center transition-all cursor-pointer "+(s?"border-primary-500 bg-primary-50/50":"border-gray-300 hover:border-primary-500 hover:bg-primary-50/50"),onDrop:a,onDragOver:o,onDragLeave:i,onClick:()=>{var e;return null==(e=g.current)?void 0:e.click()},onKeyDown:e=>{var s;"Enter"!==e.key&&" "!==e.key||null==(s=g.current)||s.click()},children:[e.jsx("input",{ref:g,type:"file",accept:u,multiple:!0,className:"hidden",onChange:e=>{const s=e.target.files;s&&s.length>0&&(d(s),e.target.value="")}}),r?e.jsxs(e.Fragment,{children:[e.jsx(l,{size:"lg",className:"mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p("upload.uploading")}),e.jsx("p",{className:"text-sm text-gray-600",children:p("upload.pleaseWait")})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:p(c?"upload.addMoreFiles":"upload.dropOrClick")}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:p(c?"upload.addMoreDescription":"upload.dropDescription")}),e.jsxs(n,{variant:"primary",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),p(c?"button.addMore":"button.selectFile")]}),e.jsx("p",{className:"text-xs text-gray-500 mt-4",children:p("csv"===m?"upload.supportedFormats":"upload.supportedImageFormats")})]})]}),e.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-1",children:p("upload.requirements")}),"csv"===m?e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",p("upload.requiredColumns")]}),e.jsxs("li",{children:["• ",p("upload.supportedApps")]}),e.jsxs("li",{children:["• ",p("upload.encoding")]})]}):e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsxs("li",{children:["• ",p("upload.paypayRequirement1")]}),e.jsxs("li",{children:["• ",p("upload.paypayRequirement2")]}),e.jsxs("li",{children:["• ",p("upload.paypayRequirement3")]})]})]})]})})]})}function m({history:s,isLoading:r}){const{t:a}=x("common");return r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(l,{})}):s&&0!==s.length?e.jsx("div",{className:"space-y-4",children:s.map((s,r)=>e.jsx(p,{result:s},r))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:a("upload.noHistory")}),e.jsx("p",{className:"text-gray-600",children:a("upload.uploadFirst")})]})}function p({result:s}){const{t:r}=x("common"),a="success"===s.status?"bg-green-50 border-green-200":"warning"===s.status?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200",t="success"===s.status?"bg-green-100 text-green-600":"warning"===s.status?"bg-yellow-100 text-yellow-600":"bg-gray-200 text-gray-600",l="success"===s.status?"bg-green-100 text-green-800":"warning"===s.status?"bg-yellow-100 text-yellow-800":"bg-gray-200 text-gray-700",n="success"===s.status?r("upload.success"):"warning"===s.status?r("upload.warning"):r("upload.completed");return e.jsxs("div",{className:`flex items-start gap-4 p-4 border rounded-lg ${a}`,children:[e.jsx("div",{className:`p-2 rounded-lg ${t}`,children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:"warning"===s.status?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.filename}),e.jsx("p",{className:"text-sm text-gray-600",children:o(s.uploaded_at)})]}),e.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${l}`,children:n})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:r("upload.imported")}),e.jsxs("p",{className:"font-semibold font-numbers text-gray-900",children:[s.imported_count,r("upload.count")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:r("upload.duplicates")}),e.jsxs("p",{className:"font-semibold font-numbers text-gray-900",children:[s.duplicate_count,r("upload.count")]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-600",children:r("upload.errors")}),e.jsxs("p",{className:"font-semibold font-numbers "+(s.error_count>0?"text-yellow-700":"text-gray-900"),children:[s.error_count,r("upload.count")]})]})]}),s.errors&&s.errors.length>0&&e.jsxs("div",{className:"mt-3 text-sm text-yellow-800 bg-yellow-100 p-3 rounded",children:[e.jsx("p",{className:"font-medium mb-1",children:r("upload.errorDetails")}),e.jsx("ul",{className:"space-y-1 text-xs",children:s.errors.map((s,a)=>e.jsxs("li",{children:["• ",r("upload.row"),s.row,": ",s.message]},a))})]})]})]})}function g(){const{t:s}=x("common");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between cursor-pointer py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("upload.faqQuestion1")}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:s("upload.faqAnswer1")})]}),e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between cursor-pointer py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("upload.faqQuestion2")}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:s("upload.faqAnswer2")})]}),e.jsxs("details",{className:"group",children:[e.jsxs("summary",{className:"flex items-center justify-between cursor-pointer py-3 px-4 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100",children:s("upload.faqQuestion3")}),e.jsx("svg",{className:"w-5 h-5 text-gray-500 dark:text-gray-400 group-open:rotate-180 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"px-4 py-3 text-sm text-gray-700 dark:text-gray-300",children:s("upload.faqAnswer3")})]})]})}function h({item:s,onRemove:r}){const{t:a}=x("common");return e.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"w-10 h-10 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:s.file.name}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:(t=s.file.size,t<1024?`${t} B`:t<1048576?`${(t/1024).toFixed(1)} KB`:`${(t/1048576).toFixed(1)} MB`)}),"uploading"===s.status&&e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1.5",children:e.jsx("div",{className:"bg-blue-600 h-1.5 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})})}),"success"===s.status&&s.backendResult&&e.jsxs("div",{className:"mt-2 text-xs text-gray-600 dark:text-gray-400",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:s.backendResult.created})," ",a("upload.created"),",",e.jsx("span",{className:"ml-1 text-gray-500 dark:text-gray-400",children:s.backendResult.skipped})," ",a("upload.skipped")]}),"error"===s.status&&s.error&&e.jsx("div",{className:"mt-2 text-xs text-red-600 dark:text-red-400",children:s.error})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[(()=>{switch(s.status){case"pending":return e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-700 text-gray-800 dark:text-gray-200",children:a("upload.statusPending")});case"uploading":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200",children:[e.jsxs("svg",{className:"animate-spin -ml-0.5 mr-1.5 h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a("upload.statusUploading")]});case"success":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/50 text-green-800 dark:text-green-200",children:[e.jsx("svg",{className:"mr-1 h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),a("upload.statusSuccess")]});case"error":return e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/50 text-red-800 dark:text-red-200",children:[e.jsx("svg",{className:"mr-1 h-3 w-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),a("upload.statusError")]})}})(),"pending"===s.status&&r&&e.jsx("button",{onClick:()=>r(s.id),className:"p-1 text-gray-400 dark:text-gray-500 hover:text-red-600 dark:hover:text-red-400 transition-colors","aria-label":a("upload.removeFile"),children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]})]})});var t}function y({files:s,onRemoveFile:r,onUploadAll:a,onClearAll:t,uploading:l}){const{t:o}=x("common");if(0===s.length)return null;const i=s.filter(e=>"pending"===e.status),d=s.filter(e=>"uploading"===e.status),c=s.filter(e=>"success"===e.status),u=s.filter(e=>"error"===e.status),m=s.length>0&&0===i.length&&0===d.length;return e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 pb-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:s.length}),e.jsx("span",{className:"ml-1 text-gray-600",children:o("upload.filesSelected")})]}),c.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-green-600",children:c.length}),e.jsx("span",{className:"ml-1 text-gray-600",children:o("upload.uploaded")})]}),u.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-red-600",children:u.length}),e.jsx("span",{className:"ml-1 text-gray-600",children:o("upload.failed")})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!m&&i.length>0&&e.jsx(n,{variant:"primary",onClick:a,disabled:l||0===i.length,children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o("upload.uploading")]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),o("upload.uploadAll")," (",i.length,")"]})}),m&&e.jsx(n,{variant:"outline",onClick:t,children:o("upload.clearAll")})]})]}),e.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto pr-2",children:s.map(s=>e.jsx(h,{item:s,onRemove:"pending"===s.status?r:void 0},s.id))}),l&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-blue-600 bg-blue-50 p-3 rounded-lg",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:o("upload.uploadingProgress",{current:c.length+d.length,total:s.length})})]}),m&&e.jsxs("div",{className:"flex items-center gap-2 text-sm p-3 rounded-lg "+(u.length>0?"text-yellow-800 bg-yellow-50":"text-green-800 bg-green-50"),children:[e.jsx("svg",{className:"h-5 w-5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e.jsx("span",{children:u.length>0?o("upload.completedWithErrors",{success:c.length,error:u.length}):o("upload.allCompleted",{count:c.length})})]})]})}async function j(){return(await i.get("/api/upload/history")).data}const f=a("/upload")({component:function(){const{t:a}=x("common"),[l,n]=t.useState("csv"),[o,p]=t.useState(!1),[h,f]=t.useState(!1),[v,b]=t.useState([]),[k,N]=t.useState(),w=s(),{data:L}=r({queryKey:["accounts"],queryFn:()=>c()}),{data:C,isLoading:M}=r({queryKey:["upload-history"],queryFn:j}),z=e=>"csv"===l?e.name.endsWith(".csv"):/\.(png|jpg|jpeg)$/i.test(e.name),F="csv"===l?52428800:10485760,D="csv"===l?".csv":".png,.jpg,.jpeg",B=e=>{const s=[];for(let r=0;r<e.length;r++){const t=e[r];if(!z(t)){alert(a("csv"===l?"upload.alertSelectCSV":"upload.alertSelectImage",{filename:t.name}));continue}if(t.size>F){alert(a("upload.alertMaxSize",{filename:t.name}));continue}v.some(e=>e.file.name===t.name&&e.file.size===t.size)||s.push({id:`${t.name}-${t.size}-${Date.now()}-${r}`,file:t,status:"pending",progress:0})}s.length>0&&b(e=>[...e,...s])},q=async e=>{b(s=>s.map(s=>s.id===e.id?{...s,status:"uploading",progress:50}:s));try{const s="csv"===l?await async function(e,s){const r=new FormData;r.append("file",e);const a=s?`?account_id=${s}`:"";return(await i.post(`/api/upload/csv${a}`,r,{headers:{"Content-Type":"multipart/form-data"}})).data}(e.file,k):await async function(e){const s=new FormData;return s.append("file",e),(await i.post("/api/upload/paypay",s,{headers:{"Content-Type":"multipart/form-data"}})).data}(e.file);b(r=>r.map(r=>r.id===e.id?{...r,status:"success",progress:100,result:{filename:s.filename,uploaded_at:(new Date).toISOString(),imported_count:s.created,duplicate_count:s.skipped,error_count:0,status:"success"},backendResult:s}:r)),w.invalidateQueries({queryKey:["upload-history"]}),w.invalidateQueries({queryKey:["transactions"]}),w.invalidateQueries({queryKey:["dashboard-summary"]})}catch(s){b(r=>r.map(r=>r.id===e.id?{...r,status:"error",progress:0,error:s instanceof Error?s.message:a("upload.alertUploadFailed")}:r))}},A=e=>{e!==l&&(n(e),b([]))};return e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:a("upload.title")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:a("upload.subtitle")})]}),e.jsxs(d,{className:"mb-8",children:[e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("button",{onClick:()=>A("csv"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("csv"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:a("upload.tabCSV")}),e.jsx("button",{onClick:()=>A("paypay"),className:"px-4 py-2 font-medium text-sm border-b-2 transition-colors "+("paypay"===l?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"),children:a("upload.tabPayPay")})]}),"csv"===l&&L&&L.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("upload.selectAccount")}),e.jsxs("select",{value:k||"",onChange:e=>N(e.target.value?Number(e.target.value):void 0),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[e.jsx("option",{value:"",children:a("upload.noAccountSelected")}),L.map(s=>e.jsxs("option",{value:s.id,children:[s.name," (",s.type,")"]},s.id))]}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:a("upload.accountHint")})]}),e.jsx(u,{isDragOver:o,uploading:h,onDrop:e=>{e.preventDefault(),p(!1);const s=e.dataTransfer.files;s&&s.length>0&&B(s)},onDragOver:e=>{e.preventDefault(),p(!0)},onDragLeave:()=>{p(!1)},onFileSelect:B,hasFiles:v.length>0,acceptedTypes:D,uploadMode:l}),e.jsx(y,{files:v,onRemoveFile:e=>{b(s=>s.filter(s=>s.id!==e))},onUploadAll:async()=>{const e=v.filter(e=>"pending"===e.status);if(0!==e.length){f(!0);for(const s of e)await q(s);f(!1)}},onClearAll:()=>{b([])},uploading:h})]}),e.jsxs(d,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:a("upload.history")}),e.jsx(m,{history:C,isLoading:M})]}),e.jsxs(d,{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:a("upload.faq")}),e.jsx(g,{})]})]})}});export{f as Route};
