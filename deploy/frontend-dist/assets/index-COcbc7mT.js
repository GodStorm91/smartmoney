const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TrendLineChart-BKqE_s_d.js","assets/vendor-tanstack-DOuiVnRb.js","assets/vendor-react-B9eo89kj.js","assets/vendor-i18n-CtQU9zWU.js","assets/vendor-recharts-BfEtinVu.js","assets/vendor-icons-Boynwk5e.js","assets/vendor-date-fteVm545.js","assets/ZoomableChart-CODyVQ9c.js","assets/IncomeExpenseBarChart-BjjPNToA.js","assets/CategoryBarChart-Br__yVCy.js","assets/CategoryPieChart-DkiNRHsk.js","assets/CashFlowSummary-DoCfH9v2.js","assets/ForecastChart-BqBHQN8C.js","assets/upload.lazy-Dz0kIyK-.js","assets/transactions.lazy-sWTc8bZH.js","assets/Select-BOjFu0ui.js","assets/Badge-CMCbFjx_.js","assets/recurring-service-CZ13h-8t.js","assets/RecurringOptions-FBWTpLs7.js","assets/settings.lazy-g8XF2Ip3.js","assets/crypto-BlBacNaD.js","assets/RecurringTransactionsList-CuA-aIXU.js","assets/recurring.lazy-Cx53E2oY.js","assets/goals.lazy-CiLVc1II.js","assets/budget.lazy-DxlAyFFx.js","assets/analytics.lazy--B7v9OUj.js","assets/accounts.lazy-BRXHkHXf.js"])))=>i.map(i=>d[i]);
var Gl=Object.defineProperty;var Yl=(e,t,r)=>t in e?Gl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var Xt=(e,t,r)=>Yl(e,typeof t!="symbol"?t+"":t,r);import{h as Jl,d as Ql,j as a,Q as Xl,I as Zl,u as We,a as eu,t as Fo,L as Ve,b as sa,c as or,e as jt,f as tu,O as Bo,g as ft,k as oa,l as nu,R as ru}from"./vendor-tanstack-DOuiVnRb.js";import{a as Pt,r as y,c as Ko,g as au,$ as su,b as ou,R as iu}from"./vendor-react-B9eo89kj.js";import{c as cu,_ as it}from"./vendor-recharts-BfEtinVu.js";import{I as lu,C as qi,a as uu,b as Ui,X as un,S as zi,M as Wi,E as qo,c as Uo,d as du,e as Fs,U as fu,L as Bs,T as Tn,f as Vi,g as hu,h as Hi,R as vs,i as ir,P as Ks,j as mu,H as pu,W as ia,k as qs,l as gu,m as yu,n as xu,o as bu,p as vu,B as Gi,G as Yi,q as Ji,r as Ct,s as wu,t as ju,u as an,v as Qi,w as ku,x as Nu,y as Su,z as En,A as ws,D as _u,F as Eu,J as Cu,K as Xi,N as Pu,O as Au,Q as Ru,V as Ou,Y as Tu,Z as $u,_ as Du}from"./vendor-icons-Boynwk5e.js";import{u as we,i as Mu,B as Iu,a as Lu,b as Fu}from"./vendor-i18n-CtQU9zWU.js";import{b as Xa,a as Xn,c as Zn,d as Bu,p as Ku,i as qu,f as Zi}from"./vendor-date-fteVm545.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function r(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=r(i);fetch(i.href,l)}})();var js={},zo=Pt;js.createRoot=zo.createRoot,js.hydrateRoot=zo.hydrateRoot;var Uu=["added","removed","updated"];function Wo(e){return Uu.includes(e)}async function zu({queryClient:e,persister:t,maxAge:r=1e3*60*60*24,buster:s="",hydrateOptions:i}){try{const l=await t.restoreClient();if(l)if(l.timestamp){const d=Date.now()-l.timestamp>r,u=l.buster!==s;if(d||u)return t.removeClient();Jl(e,l.clientState,i)}else return t.removeClient()}catch(l){throw await t.removeClient(),l}}async function Vo({queryClient:e,persister:t,buster:r="",dehydrateOptions:s}){const i={buster:r,timestamp:Date.now(),clientState:Ql(e,s)};await t.persistClient(i)}function Wu(e){const t=e.queryClient.getQueryCache().subscribe(s=>{Wo(s.type)&&Vo(e)}),r=e.queryClient.getMutationCache().subscribe(s=>{Wo(s.type)&&Vo(e)});return()=>{t(),r()}}var Vu=({children:e,persistOptions:t,onSuccess:r,onError:s,...i})=>{const[l,d]=y.useState(!0),u=y.useRef({persistOptions:t,onSuccess:r,onError:s}),p=y.useRef(!1);return y.useEffect(()=>{u.current={persistOptions:t,onSuccess:r,onError:s}}),y.useEffect(()=>{const g={...u.current.persistOptions,queryClient:i.client};return p.current||(p.current=!0,zu(g).then(()=>{var x,v;return(v=(x=u.current).onSuccess)==null?void 0:v.call(x)}).catch(()=>{var x,v;return(v=(x=u.current).onError)==null?void 0:v.call(x)}).finally(()=>{d(!1)})),l?void 0:Wu(g)},[i.client,l]),a.jsx(Xl,{...i,children:a.jsx(Zl,{value:l,children:e})})};function ec(e,t){return function(){return e.apply(t,arguments)}}const{toString:Hu}=Object.prototype,{getPrototypeOf:Us}=Object,{iterator:ca,toStringTag:tc}=Symbol,la=(e=>t=>{const r=Hu.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),pt=e=>(e=e.toLowerCase(),t=>la(t)===e),ua=e=>t=>typeof t===e,{isArray:$n}=Array,Rn=ua("undefined");function cr(e){return e!==null&&!Rn(e)&&e.constructor!==null&&!Rn(e.constructor)&&nt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nc=pt("ArrayBuffer");function Gu(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nc(e.buffer),t}const Yu=ua("string"),nt=ua("function"),rc=ua("number"),lr=e=>e!==null&&typeof e=="object",Ju=e=>e===!0||e===!1,Yr=e=>{if(la(e)!=="object")return!1;const t=Us(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(tc in e)&&!(ca in e)},Qu=e=>{if(!lr(e)||cr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Xu=pt("Date"),Zu=pt("File"),ed=pt("Blob"),td=pt("FileList"),nd=e=>lr(e)&&nt(e.pipe),rd=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||nt(e.append)&&((t=la(e))==="formdata"||t==="object"&&nt(e.toString)&&e.toString()==="[object FormData]"))},ad=pt("URLSearchParams"),[sd,od,id,cd]=["ReadableStream","Request","Response","Headers"].map(pt),ld=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ur(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),$n(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{if(cr(e))return;const l=r?Object.getOwnPropertyNames(e):Object.keys(e),d=l.length;let u;for(s=0;s<d;s++)u=l[s],t.call(null,e[u],u,e)}}function ac(e,t){if(cr(e))return null;t=t.toLowerCase();const r=Object.keys(e);let s=r.length,i;for(;s-- >0;)if(i=r[s],t===i.toLowerCase())return i;return null}const tn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sc=e=>!Rn(e)&&e!==tn;function ks(){const{caseless:e,skipUndefined:t}=sc(this)&&this||{},r={},s=(i,l)=>{const d=e&&ac(r,l)||l;Yr(r[d])&&Yr(i)?r[d]=ks(r[d],i):Yr(i)?r[d]=ks({},i):$n(i)?r[d]=i.slice():(!t||!Rn(i))&&(r[d]=i)};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&ur(arguments[i],s);return r}const ud=(e,t,r,{allOwnKeys:s}={})=>(ur(t,(i,l)=>{r&&nt(i)?e[l]=ec(i,r):e[l]=i},{allOwnKeys:s}),e),dd=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fd=(e,t,r,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},hd=(e,t,r,s)=>{let i,l,d;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),l=i.length;l-- >0;)d=i[l],(!s||s(d,e,t))&&!u[d]&&(t[d]=e[d],u[d]=!0);e=r!==!1&&Us(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},md=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const s=e.indexOf(t,r);return s!==-1&&s===r},pd=e=>{if(!e)return null;if($n(e))return e;let t=e.length;if(!rc(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},gd=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Us(Uint8Array)),yd=(e,t)=>{const s=(e&&e[ca]).call(e);let i;for(;(i=s.next())&&!i.done;){const l=i.value;t.call(e,l[0],l[1])}},xd=(e,t)=>{let r;const s=[];for(;(r=e.exec(t))!==null;)s.push(r);return s},bd=pt("HTMLFormElement"),vd=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,i){return s.toUpperCase()+i}),Ho=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),wd=pt("RegExp"),oc=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),s={};ur(r,(i,l)=>{let d;(d=t(i,l,e))!==!1&&(s[l]=d||i)}),Object.defineProperties(e,s)},jd=e=>{oc(e,(t,r)=>{if(nt(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=e[r];if(nt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},kd=(e,t)=>{const r={},s=i=>{i.forEach(l=>{r[l]=!0})};return $n(e)?s(e):s(String(e).split(t)),r},Nd=()=>{},Sd=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function _d(e){return!!(e&&nt(e.append)&&e[tc]==="FormData"&&e[ca])}const Ed=e=>{const t=new Array(10),r=(s,i)=>{if(lr(s)){if(t.indexOf(s)>=0)return;if(cr(s))return s;if(!("toJSON"in s)){t[i]=s;const l=$n(s)?[]:{};return ur(s,(d,u)=>{const p=r(d,i+1);!Rn(p)&&(l[u]=p)}),t[i]=void 0,l}}return s};return r(e,0)},Cd=pt("AsyncFunction"),Pd=e=>e&&(lr(e)||nt(e))&&nt(e.then)&&nt(e.catch),ic=((e,t)=>e?setImmediate:t?((r,s)=>(tn.addEventListener("message",({source:i,data:l})=>{i===tn&&l===r&&s.length&&s.shift()()},!1),i=>{s.push(i),tn.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",nt(tn.postMessage)),Ad=typeof queueMicrotask<"u"?queueMicrotask.bind(tn):typeof process<"u"&&process.nextTick||ic,Rd=e=>e!=null&&nt(e[ca]),I={isArray:$n,isArrayBuffer:nc,isBuffer:cr,isFormData:rd,isArrayBufferView:Gu,isString:Yu,isNumber:rc,isBoolean:Ju,isObject:lr,isPlainObject:Yr,isEmptyObject:Qu,isReadableStream:sd,isRequest:od,isResponse:id,isHeaders:cd,isUndefined:Rn,isDate:Xu,isFile:Zu,isBlob:ed,isRegExp:wd,isFunction:nt,isStream:nd,isURLSearchParams:ad,isTypedArray:gd,isFileList:td,forEach:ur,merge:ks,extend:ud,trim:ld,stripBOM:dd,inherits:fd,toFlatObject:hd,kindOf:la,kindOfTest:pt,endsWith:md,toArray:pd,forEachEntry:yd,matchAll:xd,isHTMLForm:bd,hasOwnProperty:Ho,hasOwnProp:Ho,reduceDescriptors:oc,freezeMethods:jd,toObjectSet:kd,toCamelCase:vd,noop:Nd,toFiniteNumber:Sd,findKey:ac,global:tn,isContextDefined:sc,isSpecCompliantForm:_d,toJSONObject:Ed,isAsyncFn:Cd,isThenable:Pd,setImmediate:ic,asap:Ad,isIterable:Rd};function ye(e,t,r,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}I.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:I.toJSONObject(this.config),code:this.code,status:this.status}}});const cc=ye.prototype,lc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lc[e]={value:e}});Object.defineProperties(ye,lc);Object.defineProperty(cc,"isAxiosError",{value:!0});ye.from=(e,t,r,s,i,l)=>{const d=Object.create(cc);I.toFlatObject(e,d,function(x){return x!==Error.prototype},g=>g!=="isAxiosError");const u=e&&e.message?e.message:"Error",p=t==null&&e?e.code:t;return ye.call(d,u,p,r,s,i),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",l&&Object.assign(d,l),d};const Od=null;function Ns(e){return I.isPlainObject(e)||I.isArray(e)}function uc(e){return I.endsWith(e,"[]")?e.slice(0,-2):e}function Go(e,t,r){return e?e.concat(t).map(function(i,l){return i=uc(i),!r&&l?"["+i+"]":i}).join(r?".":""):t}function Td(e){return I.isArray(e)&&!e.some(Ns)}const $d=I.toFlatObject(I,{},null,function(t){return/^is[A-Z]/.test(t)});function da(e,t,r){if(!I.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=I.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,$){return!I.isUndefined($[E])});const s=r.metaTokens,i=r.visitor||x,l=r.dots,d=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&I.isSpecCompliantForm(t);if(!I.isFunction(i))throw new TypeError("visitor must be a function");function g(N){if(N===null)return"";if(I.isDate(N))return N.toISOString();if(I.isBoolean(N))return N.toString();if(!p&&I.isBlob(N))throw new ye("Blob is not supported. Use a Buffer instead.");return I.isArrayBuffer(N)||I.isTypedArray(N)?p&&typeof Blob=="function"?new Blob([N]):Buffer.from(N):N}function x(N,E,$){let B=N;if(N&&!$&&typeof N=="object"){if(I.endsWith(E,"{}"))E=s?E:E.slice(0,-2),N=JSON.stringify(N);else if(I.isArray(N)&&Td(N)||(I.isFileList(N)||I.endsWith(E,"[]"))&&(B=I.toArray(N)))return E=uc(E),B.forEach(function(W,V){!(I.isUndefined(W)||W===null)&&t.append(d===!0?Go([E],V,l):d===null?E:E+"[]",g(W))}),!1}return Ns(N)?!0:(t.append(Go($,E,l),g(N)),!1)}const v=[],T=Object.assign($d,{defaultVisitor:x,convertValue:g,isVisitable:Ns});function L(N,E){if(!I.isUndefined(N)){if(v.indexOf(N)!==-1)throw Error("Circular reference detected in "+E.join("."));v.push(N),I.forEach(N,function(B,U){(!(I.isUndefined(B)||B===null)&&i.call(t,B,I.isString(U)?U.trim():U,E,T))===!0&&L(B,E?E.concat(U):[U])}),v.pop()}}if(!I.isObject(e))throw new TypeError("data must be an object");return L(e),t}function Yo(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function zs(e,t){this._pairs=[],e&&da(e,this,t)}const dc=zs.prototype;dc.append=function(t,r){this._pairs.push([t,r])};dc.toString=function(t){const r=t?function(s){return t.call(this,s,Yo)}:Yo;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function Dd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fc(e,t,r){if(!t)return e;const s=r&&r.encode||Dd;I.isFunction(r)&&(r={serialize:r});const i=r&&r.serialize;let l;if(i?l=i(t,r):l=I.isURLSearchParams(t)?t.toString():new zs(t,r).toString(s),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Jo{constructor(){this.handlers=[]}use(t,r,s){return this.handlers.push({fulfilled:t,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){I.forEach(this.handlers,function(s){s!==null&&t(s)})}}const hc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Md=typeof URLSearchParams<"u"?URLSearchParams:zs,Id=typeof FormData<"u"?FormData:null,Ld=typeof Blob<"u"?Blob:null,Fd={isBrowser:!0,classes:{URLSearchParams:Md,FormData:Id,Blob:Ld},protocols:["http","https","file","blob","url","data"]},Ws=typeof window<"u"&&typeof document<"u",Ss=typeof navigator=="object"&&navigator||void 0,Bd=Ws&&(!Ss||["ReactNative","NativeScript","NS"].indexOf(Ss.product)<0),Kd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qd=Ws&&window.location.href||"http://localhost",Ud=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ws,hasStandardBrowserEnv:Bd,hasStandardBrowserWebWorkerEnv:Kd,navigator:Ss,origin:qd},Symbol.toStringTag,{value:"Module"})),Je={...Ud,...Fd};function zd(e,t){return da(e,new Je.classes.URLSearchParams,{visitor:function(r,s,i,l){return Je.isNode&&I.isBuffer(r)?(this.append(s,r.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function Wd(e){return I.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Vd(e){const t={},r=Object.keys(e);let s;const i=r.length;let l;for(s=0;s<i;s++)l=r[s],t[l]=e[l];return t}function mc(e){function t(r,s,i,l){let d=r[l++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),p=l>=r.length;return d=!d&&I.isArray(i)?i.length:d,p?(I.hasOwnProp(i,d)?i[d]=[i[d],s]:i[d]=s,!u):((!i[d]||!I.isObject(i[d]))&&(i[d]=[]),t(r,s,i[d],l)&&I.isArray(i[d])&&(i[d]=Vd(i[d])),!u)}if(I.isFormData(e)&&I.isFunction(e.entries)){const r={};return I.forEachEntry(e,(s,i)=>{t(Wd(s),i,r,0)}),r}return null}function Hd(e,t,r){if(I.isString(e))try{return(t||JSON.parse)(e),I.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(e)}const dr={transitional:hc,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const s=r.getContentType()||"",i=s.indexOf("application/json")>-1,l=I.isObject(t);if(l&&I.isHTMLForm(t)&&(t=new FormData(t)),I.isFormData(t))return i?JSON.stringify(mc(t)):t;if(I.isArrayBuffer(t)||I.isBuffer(t)||I.isStream(t)||I.isFile(t)||I.isBlob(t)||I.isReadableStream(t))return t;if(I.isArrayBufferView(t))return t.buffer;if(I.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return zd(t,this.formSerializer).toString();if((u=I.isFileList(t))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return da(u?{"files[]":t}:t,p&&new p,this.formSerializer)}}return l||i?(r.setContentType("application/json",!1),Hd(t)):t}],transformResponse:[function(t){const r=this.transitional||dr.transitional,s=r&&r.forcedJSONParsing,i=this.responseType==="json";if(I.isResponse(t)||I.isReadableStream(t))return t;if(t&&I.isString(t)&&(s&&!this.responseType||i)){const d=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(u){if(d)throw u.name==="SyntaxError"?ye.from(u,ye.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Je.classes.FormData,Blob:Je.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};I.forEach(["delete","get","head","post","put","patch"],e=>{dr.headers[e]={}});const Gd=I.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yd=e=>{const t={};let r,s,i;return e&&e.split(`
`).forEach(function(d){i=d.indexOf(":"),r=d.substring(0,i).trim().toLowerCase(),s=d.substring(i+1).trim(),!(!r||t[r]&&Gd[r])&&(r==="set-cookie"?t[r]?t[r].push(s):t[r]=[s]:t[r]=t[r]?t[r]+", "+s:s)}),t},Qo=Symbol("internals");function er(e){return e&&String(e).trim().toLowerCase()}function Jr(e){return e===!1||e==null?e:I.isArray(e)?e.map(Jr):String(e)}function Jd(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(e);)t[s[1]]=s[2];return t}const Qd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Za(e,t,r,s,i){if(I.isFunction(s))return s.call(this,t,r);if(i&&(t=r),!!I.isString(t)){if(I.isString(s))return t.indexOf(s)!==-1;if(I.isRegExp(s))return s.test(t)}}function Xd(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,s)=>r.toUpperCase()+s)}function Zd(e,t){const r=I.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+r,{value:function(i,l,d){return this[s].call(this,t,i,l,d)},configurable:!0})})}let rt=class{constructor(t){t&&this.set(t)}set(t,r,s){const i=this;function l(u,p,g){const x=er(p);if(!x)throw new Error("header name must be a non-empty string");const v=I.findKey(i,x);(!v||i[v]===void 0||g===!0||g===void 0&&i[v]!==!1)&&(i[v||p]=Jr(u))}const d=(u,p)=>I.forEach(u,(g,x)=>l(g,x,p));if(I.isPlainObject(t)||t instanceof this.constructor)d(t,r);else if(I.isString(t)&&(t=t.trim())&&!Qd(t))d(Yd(t),r);else if(I.isObject(t)&&I.isIterable(t)){let u={},p,g;for(const x of t){if(!I.isArray(x))throw TypeError("Object iterator must return a key-value pair");u[g=x[0]]=(p=u[g])?I.isArray(p)?[...p,x[1]]:[p,x[1]]:x[1]}d(u,r)}else t!=null&&l(r,t,s);return this}get(t,r){if(t=er(t),t){const s=I.findKey(this,t);if(s){const i=this[s];if(!r)return i;if(r===!0)return Jd(i);if(I.isFunction(r))return r.call(this,i,s);if(I.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=er(t),t){const s=I.findKey(this,t);return!!(s&&this[s]!==void 0&&(!r||Za(this,this[s],s,r)))}return!1}delete(t,r){const s=this;let i=!1;function l(d){if(d=er(d),d){const u=I.findKey(s,d);u&&(!r||Za(s,s[u],u,r))&&(delete s[u],i=!0)}}return I.isArray(t)?t.forEach(l):l(t),i}clear(t){const r=Object.keys(this);let s=r.length,i=!1;for(;s--;){const l=r[s];(!t||Za(this,this[l],l,t,!0))&&(delete this[l],i=!0)}return i}normalize(t){const r=this,s={};return I.forEach(this,(i,l)=>{const d=I.findKey(s,l);if(d){r[d]=Jr(i),delete r[l];return}const u=t?Xd(l):String(l).trim();u!==l&&delete r[l],r[u]=Jr(i),s[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return I.forEach(this,(s,i)=>{s!=null&&s!==!1&&(r[i]=t&&I.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const s=new this(t);return r.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[Qo]=this[Qo]={accessors:{}}).accessors,i=this.prototype;function l(d){const u=er(d);s[u]||(Zd(i,d),s[u]=!0)}return I.isArray(t)?t.forEach(l):l(t),this}};rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);I.reduceDescriptors(rt.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[r]=s}}});I.freezeMethods(rt);function es(e,t){const r=this||dr,s=t||r,i=rt.from(s.headers);let l=s.data;return I.forEach(e,function(u){l=u.call(r,l,i.normalize(),t?t.status:void 0)}),i.normalize(),l}function pc(e){return!!(e&&e.__CANCEL__)}function Dn(e,t,r){ye.call(this,e??"canceled",ye.ERR_CANCELED,t,r),this.name="CanceledError"}I.inherits(Dn,ye,{__CANCEL__:!0});function gc(e,t,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?e(r):t(new ye("Request failed with status code "+r.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function ef(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tf(e,t){e=e||10;const r=new Array(e),s=new Array(e);let i=0,l=0,d;return t=t!==void 0?t:1e3,function(p){const g=Date.now(),x=s[l];d||(d=g),r[i]=p,s[i]=g;let v=l,T=0;for(;v!==i;)T+=r[v++],v=v%e;if(i=(i+1)%e,i===l&&(l=(l+1)%e),g-d<t)return;const L=x&&g-x;return L?Math.round(T*1e3/L):void 0}}function nf(e,t){let r=0,s=1e3/t,i,l;const d=(g,x=Date.now())=>{r=x,i=null,l&&(clearTimeout(l),l=null),e(...g)};return[(...g)=>{const x=Date.now(),v=x-r;v>=s?d(g,x):(i=g,l||(l=setTimeout(()=>{l=null,d(i)},s-v)))},()=>i&&d(i)]}const ra=(e,t,r=3)=>{let s=0;const i=tf(50,250);return nf(l=>{const d=l.loaded,u=l.lengthComputable?l.total:void 0,p=d-s,g=i(p),x=d<=u;s=d;const v={loaded:d,total:u,progress:u?d/u:void 0,bytes:p,rate:g||void 0,estimated:g&&u&&x?(u-d)/g:void 0,event:l,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(v)},r)},Xo=(e,t)=>{const r=e!=null;return[s=>t[0]({lengthComputable:r,total:e,loaded:s}),t[1]]},Zo=e=>(...t)=>I.asap(()=>e(...t)),rf=Je.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,Je.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(Je.origin),Je.navigator&&/(msie|trident)/i.test(Je.navigator.userAgent)):()=>!0,af=Je.hasStandardBrowserEnv?{write(e,t,r,s,i,l,d){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(t)}`];I.isNumber(r)&&u.push(`expires=${new Date(r).toUTCString()}`),I.isString(s)&&u.push(`path=${s}`),I.isString(i)&&u.push(`domain=${i}`),l===!0&&u.push("secure"),I.isString(d)&&u.push(`SameSite=${d}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function of(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function yc(e,t,r){let s=!sf(t);return e&&(s||r==!1)?of(e,t):t}const ei=e=>e instanceof rt?{...e}:e;function sn(e,t){t=t||{};const r={};function s(g,x,v,T){return I.isPlainObject(g)&&I.isPlainObject(x)?I.merge.call({caseless:T},g,x):I.isPlainObject(x)?I.merge({},x):I.isArray(x)?x.slice():x}function i(g,x,v,T){if(I.isUndefined(x)){if(!I.isUndefined(g))return s(void 0,g,v,T)}else return s(g,x,v,T)}function l(g,x){if(!I.isUndefined(x))return s(void 0,x)}function d(g,x){if(I.isUndefined(x)){if(!I.isUndefined(g))return s(void 0,g)}else return s(void 0,x)}function u(g,x,v){if(v in t)return s(g,x);if(v in e)return s(void 0,g)}const p={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(g,x,v)=>i(ei(g),ei(x),v,!0)};return I.forEach(Object.keys({...e,...t}),function(x){const v=p[x]||i,T=v(e[x],t[x],x);I.isUndefined(T)&&v!==u||(r[x]=T)}),r}const xc=e=>{const t=sn({},e);let{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:l,headers:d,auth:u}=t;if(t.headers=d=rt.from(d),t.url=fc(yc(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),I.isFormData(r)){if(Je.hasStandardBrowserEnv||Je.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(I.isFunction(r.getHeaders)){const p=r.getHeaders(),g=["content-type","content-length"];Object.entries(p).forEach(([x,v])=>{g.includes(x.toLowerCase())&&d.set(x,v)})}}if(Je.hasStandardBrowserEnv&&(s&&I.isFunction(s)&&(s=s(t)),s||s!==!1&&rf(t.url))){const p=i&&l&&af.read(l);p&&d.set(i,p)}return t},cf=typeof XMLHttpRequest<"u",lf=cf&&function(e){return new Promise(function(r,s){const i=xc(e);let l=i.data;const d=rt.from(i.headers).normalize();let{responseType:u,onUploadProgress:p,onDownloadProgress:g}=i,x,v,T,L,N;function E(){L&&L(),N&&N(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let $=new XMLHttpRequest;$.open(i.method.toUpperCase(),i.url,!0),$.timeout=i.timeout;function B(){if(!$)return;const W=rt.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),ae={data:!u||u==="text"||u==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:W,config:e,request:$};gc(function(X){r(X),E()},function(X){s(X),E()},ae),$=null}"onloadend"in $?$.onloadend=B:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(B)},$.onabort=function(){$&&(s(new ye("Request aborted",ye.ECONNABORTED,e,$)),$=null)},$.onerror=function(V){const ae=V&&V.message?V.message:"Network Error",J=new ye(ae,ye.ERR_NETWORK,e,$);J.event=V||null,s(J),$=null},$.ontimeout=function(){let V=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ae=i.transitional||hc;i.timeoutErrorMessage&&(V=i.timeoutErrorMessage),s(new ye(V,ae.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,e,$)),$=null},l===void 0&&d.setContentType(null),"setRequestHeader"in $&&I.forEach(d.toJSON(),function(V,ae){$.setRequestHeader(ae,V)}),I.isUndefined(i.withCredentials)||($.withCredentials=!!i.withCredentials),u&&u!=="json"&&($.responseType=i.responseType),g&&([T,N]=ra(g,!0),$.addEventListener("progress",T)),p&&$.upload&&([v,L]=ra(p),$.upload.addEventListener("progress",v),$.upload.addEventListener("loadend",L)),(i.cancelToken||i.signal)&&(x=W=>{$&&(s(!W||W.type?new Dn(null,e,$):W),$.abort(),$=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));const U=ef(i.url);if(U&&Je.protocols.indexOf(U)===-1){s(new ye("Unsupported protocol "+U+":",ye.ERR_BAD_REQUEST,e));return}$.send(l||null)})},uf=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let s=new AbortController,i;const l=function(g){if(!i){i=!0,u();const x=g instanceof Error?g:this.reason;s.abort(x instanceof ye?x:new Dn(x instanceof Error?x.message:x))}};let d=t&&setTimeout(()=>{d=null,l(new ye(`timeout ${t} of ms exceeded`,ye.ETIMEDOUT))},t);const u=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(g=>{g.unsubscribe?g.unsubscribe(l):g.removeEventListener("abort",l)}),e=null)};e.forEach(g=>g.addEventListener("abort",l));const{signal:p}=s;return p.unsubscribe=()=>I.asap(u),p}},df=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let s=0,i;for(;s<r;)i=s+t,yield e.slice(s,i),s=i},ff=async function*(e,t){for await(const r of hf(e))yield*df(r,t)},hf=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:s}=await t.read();if(r)break;yield s}}finally{await t.cancel()}},ti=(e,t,r,s)=>{const i=ff(e,t);let l=0,d,u=p=>{d||(d=!0,s&&s(p))};return new ReadableStream({async pull(p){try{const{done:g,value:x}=await i.next();if(g){u(),p.close();return}let v=x.byteLength;if(r){let T=l+=v;r(T)}p.enqueue(new Uint8Array(x))}catch(g){throw u(g),g}},cancel(p){return u(p),i.return()}},{highWaterMark:2})},ni=64*1024,{isFunction:Ur}=I,mf=(({Request:e,Response:t})=>({Request:e,Response:t}))(I.global),{ReadableStream:ri,TextEncoder:ai}=I.global,si=(e,...t)=>{try{return!!e(...t)}catch{return!1}},pf=e=>{e=I.merge.call({skipUndefined:!0},mf,e);const{fetch:t,Request:r,Response:s}=e,i=t?Ur(t):typeof fetch=="function",l=Ur(r),d=Ur(s);if(!i)return!1;const u=i&&Ur(ri),p=i&&(typeof ai=="function"?(N=>E=>N.encode(E))(new ai):async N=>new Uint8Array(await new r(N).arrayBuffer())),g=l&&u&&si(()=>{let N=!1;const E=new r(Je.origin,{body:new ri,method:"POST",get duplex(){return N=!0,"half"}}).headers.has("Content-Type");return N&&!E}),x=d&&u&&si(()=>I.isReadableStream(new s("").body)),v={stream:x&&(N=>N.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(N=>{!v[N]&&(v[N]=(E,$)=>{let B=E&&E[N];if(B)return B.call(E);throw new ye(`Response type '${N}' is not supported`,ye.ERR_NOT_SUPPORT,$)})});const T=async N=>{if(N==null)return 0;if(I.isBlob(N))return N.size;if(I.isSpecCompliantForm(N))return(await new r(Je.origin,{method:"POST",body:N}).arrayBuffer()).byteLength;if(I.isArrayBufferView(N)||I.isArrayBuffer(N))return N.byteLength;if(I.isURLSearchParams(N)&&(N=N+""),I.isString(N))return(await p(N)).byteLength},L=async(N,E)=>{const $=I.toFiniteNumber(N.getContentLength());return $??T(E)};return async N=>{let{url:E,method:$,data:B,signal:U,cancelToken:W,timeout:V,onDownloadProgress:ae,onUploadProgress:J,responseType:X,headers:ce,withCredentials:_e="same-origin",fetchOptions:Te}=xc(N),ie=t||fetch;X=X?(X+"").toLowerCase():"text";let fe=uf([U,W&&W.toAbortSignal()],V),Ne=null;const $e=fe&&fe.unsubscribe&&(()=>{fe.unsubscribe()});let ze;try{if(J&&g&&$!=="get"&&$!=="head"&&(ze=await L(ce,B))!==0){let Ee=new r(E,{method:"POST",body:B,duplex:"half"}),q;if(I.isFormData(B)&&(q=Ee.headers.get("content-type"))&&ce.setContentType(q),Ee.body){const[de,he]=Xo(ze,ra(Zo(J)));B=ti(Ee.body,ni,de,he)}}I.isString(_e)||(_e=_e?"include":"omit");const Pe=l&&"credentials"in r.prototype,Qe={...Te,signal:fe,method:$.toUpperCase(),headers:ce.normalize().toJSON(),body:B,duplex:"half",credentials:Pe?_e:void 0};Ne=l&&new r(E,Qe);let Ae=await(l?ie(Ne,Te):ie(E,Qe));const Be=x&&(X==="stream"||X==="response");if(x&&(ae||Be&&$e)){const Ee={};["status","statusText","headers"].forEach(le=>{Ee[le]=Ae[le]});const q=I.toFiniteNumber(Ae.headers.get("content-length")),[de,he]=ae&&Xo(q,ra(Zo(ae),!0))||[];Ae=new s(ti(Ae.body,ni,de,()=>{he&&he(),$e&&$e()}),Ee)}X=X||"text";let Ke=await v[I.findKey(v,X)||"text"](Ae,N);return!Be&&$e&&$e(),await new Promise((Ee,q)=>{gc(Ee,q,{data:Ke,headers:rt.from(Ae.headers),status:Ae.status,statusText:Ae.statusText,config:N,request:Ne})})}catch(Pe){throw $e&&$e(),Pe&&Pe.name==="TypeError"&&/Load failed|fetch/i.test(Pe.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,N,Ne),{cause:Pe.cause||Pe}):ye.from(Pe,Pe&&Pe.code,N,Ne)}}},gf=new Map,bc=e=>{let t=e&&e.env||{};const{fetch:r,Request:s,Response:i}=t,l=[s,i,r];let d=l.length,u=d,p,g,x=gf;for(;u--;)p=l[u],g=x.get(p),g===void 0&&x.set(p,g=u?new Map:pf(t)),x=g;return g};bc();const Vs={http:Od,xhr:lf,fetch:{get:bc}};I.forEach(Vs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const oi=e=>`- ${e}`,yf=e=>I.isFunction(e)||e===null||e===!1;function xf(e,t){e=I.isArray(e)?e:[e];const{length:r}=e;let s,i;const l={};for(let d=0;d<r;d++){s=e[d];let u;if(i=s,!yf(s)&&(i=Vs[(u=String(s)).toLowerCase()],i===void 0))throw new ye(`Unknown adapter '${u}'`);if(i&&(I.isFunction(i)||(i=i.get(t))))break;l[u||"#"+d]=i}if(!i){const d=Object.entries(l).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let u=r?d.length>1?`since :
`+d.map(oi).join(`
`):" "+oi(d[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const vc={getAdapter:xf,adapters:Vs};function ts(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Dn(null,e)}function ii(e){return ts(e),e.headers=rt.from(e.headers),e.data=es.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vc.getAdapter(e.adapter||dr.adapter,e)(e).then(function(s){return ts(e),s.data=es.call(e,e.transformResponse,s),s.headers=rt.from(s.headers),s},function(s){return pc(s)||(ts(e),s&&s.response&&(s.response.data=es.call(e,e.transformResponse,s.response),s.response.headers=rt.from(s.response.headers))),Promise.reject(s)})}const wc="1.13.2",fa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fa[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ci={};fa.transitional=function(t,r,s){function i(l,d){return"[Axios v"+wc+"] Transitional option '"+l+"'"+d+(s?". "+s:"")}return(l,d,u)=>{if(t===!1)throw new ye(i(d," has been removed"+(r?" in "+r:"")),ye.ERR_DEPRECATED);return r&&!ci[d]&&(ci[d]=!0,console.warn(i(d," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(l,d,u):!0}};fa.spelling=function(t){return(r,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function bf(e,t,r){if(typeof e!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const l=s[i],d=t[l];if(d){const u=e[l],p=u===void 0||d(u,l,e);if(p!==!0)throw new ye("option "+l+" must be "+p,ye.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new ye("Unknown option "+l,ye.ERR_BAD_OPTION)}}const Qr={assertOptions:bf,validators:fa},bt=Qr.validators;let rn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Jo,response:new Jo}}async request(t,r){try{return await this._request(t,r)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=sn(this.defaults,r);const{transitional:s,paramsSerializer:i,headers:l}=r;s!==void 0&&Qr.assertOptions(s,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),i!=null&&(I.isFunction(i)?r.paramsSerializer={serialize:i}:Qr.assertOptions(i,{encode:bt.function,serialize:bt.function},!0)),r.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?r.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:r.allowAbsoluteUrls=!0),Qr.assertOptions(r,{baseUrl:bt.spelling("baseURL"),withXsrfToken:bt.spelling("withXSRFToken")},!0),r.method=(r.method||this.defaults.method||"get").toLowerCase();let d=l&&I.merge(l.common,l[r.method]);l&&I.forEach(["delete","get","head","post","put","patch","common"],N=>{delete l[N]}),r.headers=rt.concat(d,l);const u=[];let p=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(r)===!1||(p=p&&E.synchronous,u.unshift(E.fulfilled,E.rejected))});const g=[];this.interceptors.response.forEach(function(E){g.push(E.fulfilled,E.rejected)});let x,v=0,T;if(!p){const N=[ii.bind(this),void 0];for(N.unshift(...u),N.push(...g),T=N.length,x=Promise.resolve(r);v<T;)x=x.then(N[v++],N[v++]);return x}T=u.length;let L=r;for(;v<T;){const N=u[v++],E=u[v++];try{L=N(L)}catch($){E.call(this,$);break}}try{x=ii.call(this,L)}catch(N){return Promise.reject(N)}for(v=0,T=g.length;v<T;)x=x.then(g[v++],g[v++]);return x}getUri(t){t=sn(this.defaults,t);const r=yc(t.baseURL,t.url,t.allowAbsoluteUrls);return fc(r,t.params,t.paramsSerializer)}};I.forEach(["delete","get","head","options"],function(t){rn.prototype[t]=function(r,s){return this.request(sn(s||{},{method:t,url:r,data:(s||{}).data}))}});I.forEach(["post","put","patch"],function(t){function r(s){return function(l,d,u){return this.request(sn(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}rn.prototype[t]=r(),rn.prototype[t+"Form"]=r(!0)});let vf=class jc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(l){r=l});const s=this;this.promise.then(i=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](i);s._listeners=null}),this.promise.then=i=>{let l;const d=new Promise(u=>{s.subscribe(u),l=u}).then(i);return d.cancel=function(){s.unsubscribe(l)},d},t(function(l,d,u){s.reason||(s.reason=new Dn(l,d,u),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=s=>{t.abort(s)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new jc(function(i){t=i}),cancel:t}}};function wf(e){return function(r){return e.apply(null,r)}}function jf(e){return I.isObject(e)&&e.isAxiosError===!0}const _s={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(_s).forEach(([e,t])=>{_s[t]=e});function kc(e){const t=new rn(e),r=ec(rn.prototype.request,t);return I.extend(r,rn.prototype,t,{allOwnKeys:!0}),I.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return kc(sn(e,i))},r}const Ie=kc(dr);Ie.Axios=rn;Ie.CanceledError=Dn;Ie.CancelToken=vf;Ie.isCancel=pc;Ie.VERSION=wc;Ie.toFormData=da;Ie.AxiosError=ye;Ie.Cancel=Ie.CanceledError;Ie.all=function(t){return Promise.all(t)};Ie.spread=wf;Ie.isAxiosError=jf;Ie.mergeConfig=sn;Ie.AxiosHeaders=rt;Ie.formToJSON=e=>mc(I.isHTMLForm(e)?new FormData(e):e);Ie.getAdapter=vc.getAdapter;Ie.HttpStatusCode=_s;Ie.default=Ie;const{Axios:$y,AxiosError:Dy,CanceledError:My,isCancel:Iy,CancelToken:Ly,VERSION:Fy,all:By,Cancel:Ky,isAxiosError:qy,spread:Uy,toFormData:zy,AxiosHeaders:Wy,HttpStatusCode:Vy,formToJSON:Hy,getAdapter:Gy,mergeConfig:Yy}=Ie,kf="",re=Ie.create({baseURL:kf,timeout:6e4,headers:{"Content-Type":"application/json"}});re.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",((t=e.response)==null?void 0:t.data)||e.message),Promise.reject(e)});const Nc=y.createContext(void 0),Zt="smartmoney_access_token",tr="smartmoney_refresh_token";function Nf({children:e}){const[t,r]=y.useState(null),[s,i]=y.useState(!0),l=y.useCallback(()=>{localStorage.removeItem(Zt),localStorage.removeItem(tr),r(null),i(!1)},[]),d=y.useCallback(async()=>{const p=localStorage.getItem(tr);if(!p)return!1;try{const x=await Ie.post("/api/auth/refresh",{refresh_token:p}),{access_token:v,refresh_token:T}=x.data;localStorage.setItem(Zt,v),localStorage.setItem(tr,T);const L=await re.get("/api/auth/me",{headers:{Authorization:`Bearer ${v}`}});return r(L.data),!0}catch{return localStorage.removeItem(Zt),localStorage.removeItem(tr),!1}},[]);y.useEffect(()=>{const p=re.interceptors.request.use(x=>{const v=localStorage.getItem(Zt);return v&&(x.headers.Authorization=`Bearer ${v}`),x},x=>Promise.reject(x)),g=re.interceptors.response.use(x=>x,async x=>{var L,N;const v=x.config,T=(L=v==null?void 0:v.url)==null?void 0:L.includes("/api/auth/");if(((N=x.response)==null?void 0:N.status)===401&&!v._retry&&!T)if(v._retry=!0,await d()){const $=localStorage.getItem(Zt);return v.headers.Authorization=`Bearer ${$}`,re(v)}else l();return Promise.reject(x)});return()=>{re.interceptors.request.eject(p),re.interceptors.response.eject(g)}},[d,l]),y.useEffect(()=>{(async()=>{if(localStorage.getItem(Zt))try{const x=await re.get("/api/auth/me");r(x.data)}catch{await d()||r(null)}i(!1)})()},[d]);const u=async(p,g)=>{const x=new URLSearchParams;x.append("username",p),x.append("password",g);const v=await re.post("/api/auth/login",x,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{access_token:T,refresh_token:L}=v.data;localStorage.setItem(Zt,T),localStorage.setItem(tr,L);const N=await re.get("/api/auth/me",{headers:{Authorization:`Bearer ${T}`}});r(N.data)};return a.jsx(Nc.Provider,{value:{user:t,isLoading:s,isAuthenticated:!!t,login:u,logout:l,refreshToken:d},children:e})}function ha(){const e=y.useContext(Nc);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}async function Sf(){return(await re.get("/api/settings")).data}async function Jy(e){return(await re.put("/api/settings",e)).data}const Sc=y.createContext(void 0);function _f({children:e}){const{data:t,isLoading:r}=We({queryKey:["settings"],queryFn:Sf}),s={settings:t,isLoading:r,currency:(t==null?void 0:t.currency)||"JPY",baseDate:(t==null?void 0:t.base_date)||25};return a.jsx(Sc.Provider,{value:s,children:e})}function fr(){const e=y.useContext(Sc);if(e===void 0)throw new Error("useSettings must be used within a SettingsProvider");return e}const _c=y.createContext(void 0),li="smartmoney_privacy_mode";function Ef({children:e}){const[t,r]=y.useState(()=>localStorage.getItem(li)==="true");y.useEffect(()=>{localStorage.setItem(li,String(t))},[t]);const s=()=>{r(i=>!i)};return a.jsx(_c.Provider,{value:{isPrivacyMode:t,togglePrivacyMode:s},children:e})}function hr(){const e=y.useContext(_c);if(e===void 0)throw new Error("usePrivacy must be used within a PrivacyProvider");return e}const Ec=y.createContext(void 0),Cc="smartmoney-theme";function ui(){return typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function di(){if(typeof window<"u"){const e=localStorage.getItem(Cc);if(e==="light"||e==="dark"||e==="system")return e}return"system"}function Cf({children:e}){const[t,r]=y.useState(()=>di()),[s,i]=y.useState(()=>{const u=di();return u==="system"?ui():u});y.useEffect(()=>{const u=()=>{const p=t==="system"?ui():t;i(p);const g=document.documentElement;g.classList.remove("light","dark"),g.classList.add(p)};if(u(),t==="system"){const p=window.matchMedia("(prefers-color-scheme: dark)"),g=()=>u();return p.addEventListener("change",g),()=>p.removeEventListener("change",g)}},[t]);const l=u=>{r(u),localStorage.setItem(Cc,u)},d=()=>{l(s==="dark"?"light":"dark")};return a.jsx(Ec.Provider,{value:{theme:t,resolvedTheme:s,setTheme:l,toggleTheme:d},children:e})}function Pc(){const e=y.useContext(Ec);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const Hs="-",Pf=e=>{const t=Rf(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:d=>{const u=d.split(Hs);return u[0]===""&&u.length!==1&&u.shift(),Ac(u,t)||Af(d)},getConflictingClassGroupIds:(d,u)=>{const p=r[d]||[];return u&&s[d]?[...p,...s[d]]:p}}},Ac=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const r=e[0],s=t.nextPart.get(r),i=s?Ac(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const l=e.join(Hs);return(d=t.validators.find(({validator:u})=>u(l)))==null?void 0:d.classGroupId},fi=/^\[(.+)\]$/,Af=e=>{if(fi.test(e)){const t=fi.exec(e)[1],r=t==null?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Rf=e=>{const{theme:t,prefix:r}=e,s={nextPart:new Map,validators:[]};return Tf(Object.entries(e.classGroups),r).forEach(([l,d])=>{Es(d,s,l,t)}),s},Es=(e,t,r,s)=>{e.forEach(i=>{if(typeof i=="string"){const l=i===""?t:hi(t,i);l.classGroupId=r;return}if(typeof i=="function"){if(Of(i)){Es(i(s),t,r,s);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([l,d])=>{Es(d,hi(t,l),r,s)})})},hi=(e,t)=>{let r=e;return t.split(Hs).forEach(s=>{r.nextPart.has(s)||r.nextPart.set(s,{nextPart:new Map,validators:[]}),r=r.nextPart.get(s)}),r},Of=e=>e.isThemeGetter,Tf=(e,t)=>t?e.map(([r,s])=>{const i=s.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([d,u])=>[t+d,u])):l);return[r,i]}):e,$f=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,s=new Map;const i=(l,d)=>{r.set(l,d),t++,t>e&&(t=0,s=r,r=new Map)};return{get(l){let d=r.get(l);if(d!==void 0)return d;if((d=s.get(l))!==void 0)return i(l,d),d},set(l,d){r.has(l)?r.set(l,d):i(l,d)}}},Rc="!",Df=e=>{const{separator:t,experimentalParseClassName:r}=e,s=t.length===1,i=t[0],l=t.length,d=u=>{const p=[];let g=0,x=0,v;for(let $=0;$<u.length;$++){let B=u[$];if(g===0){if(B===i&&(s||u.slice($,$+l)===t)){p.push(u.slice(x,$)),x=$+l;continue}if(B==="/"){v=$;continue}}B==="["?g++:B==="]"&&g--}const T=p.length===0?u:u.substring(x),L=T.startsWith(Rc),N=L?T.substring(1):T,E=v&&v>x?v-x:void 0;return{modifiers:p,hasImportantModifier:L,baseClassName:N,maybePostfixModifierPosition:E}};return r?u=>r({className:u,parseClassName:d}):d},Mf=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(s=>{s[0]==="["?(t.push(...r.sort(),s),r=[]):r.push(s)}),t.push(...r.sort()),t},If=e=>({cache:$f(e.cacheSize),parseClassName:Df(e),...Pf(e)}),Lf=/\s+/,Ff=(e,t)=>{const{parseClassName:r,getClassGroupId:s,getConflictingClassGroupIds:i}=t,l=[],d=e.trim().split(Lf);let u="";for(let p=d.length-1;p>=0;p-=1){const g=d[p],{modifiers:x,hasImportantModifier:v,baseClassName:T,maybePostfixModifierPosition:L}=r(g);let N=!!L,E=s(N?T.substring(0,L):T);if(!E){if(!N){u=g+(u.length>0?" "+u:u);continue}if(E=s(T),!E){u=g+(u.length>0?" "+u:u);continue}N=!1}const $=Mf(x).join(":"),B=v?$+Rc:$,U=B+E;if(l.includes(U))continue;l.push(U);const W=i(E,N);for(let V=0;V<W.length;++V){const ae=W[V];l.push(B+ae)}u=g+(u.length>0?" "+u:u)}return u};function Bf(){let e=0,t,r,s="";for(;e<arguments.length;)(t=arguments[e++])&&(r=Oc(t))&&(s&&(s+=" "),s+=r);return s}const Oc=e=>{if(typeof e=="string")return e;let t,r="";for(let s=0;s<e.length;s++)e[s]&&(t=Oc(e[s]))&&(r&&(r+=" "),r+=t);return r};function Kf(e,...t){let r,s,i,l=d;function d(p){const g=t.reduce((x,v)=>v(x),e());return r=If(g),s=r.cache.get,i=r.cache.set,l=u,u(p)}function u(p){const g=s(p);if(g)return g;const x=Ff(p,r);return i(p,x),x}return function(){return l(Bf.apply(null,arguments))}}const Re=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},Tc=/^\[(?:([a-z-]+):)?(.+)\]$/i,qf=/^\d+\/\d+$/,Uf=new Set(["px","full","screen"]),zf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,St=e=>Cn(e)||Uf.has(e)||qf.test(e),It=e=>Mn(e,"length",nh),Cn=e=>!!e&&!Number.isNaN(Number(e)),ns=e=>Mn(e,"number",Cn),nr=e=>!!e&&Number.isInteger(Number(e)),Yf=e=>e.endsWith("%")&&Cn(e.slice(0,-1)),xe=e=>Tc.test(e),Lt=e=>zf.test(e),Jf=new Set(["length","size","percentage"]),Qf=e=>Mn(e,Jf,$c),Xf=e=>Mn(e,"position",$c),Zf=new Set(["image","url"]),eh=e=>Mn(e,Zf,ah),th=e=>Mn(e,"",rh),rr=()=>!0,Mn=(e,t,r)=>{const s=Tc.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):r(s[2]):!1},nh=e=>Wf.test(e)&&!Vf.test(e),$c=()=>!1,rh=e=>Hf.test(e),ah=e=>Gf.test(e),sh=()=>{const e=Re("colors"),t=Re("spacing"),r=Re("blur"),s=Re("brightness"),i=Re("borderColor"),l=Re("borderRadius"),d=Re("borderSpacing"),u=Re("borderWidth"),p=Re("contrast"),g=Re("grayscale"),x=Re("hueRotate"),v=Re("invert"),T=Re("gap"),L=Re("gradientColorStops"),N=Re("gradientColorStopPositions"),E=Re("inset"),$=Re("margin"),B=Re("opacity"),U=Re("padding"),W=Re("saturate"),V=Re("scale"),ae=Re("sepia"),J=Re("skew"),X=Re("space"),ce=Re("translate"),_e=()=>["auto","contain","none"],Te=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto",xe,t],fe=()=>[xe,t],Ne=()=>["",St,It],$e=()=>["auto",Cn,xe],ze=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Pe=()=>["solid","dashed","dotted","double","none"],Qe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>["start","end","center","between","around","evenly","stretch"],Be=()=>["","0",xe],Ke=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ee=()=>[Cn,xe];return{cacheSize:500,separator:":",theme:{colors:[rr],spacing:[St,It],blur:["none","",Lt,xe],brightness:Ee(),borderColor:[e],borderRadius:["none","","full",Lt,xe],borderSpacing:fe(),borderWidth:Ne(),contrast:Ee(),grayscale:Be(),hueRotate:Ee(),invert:Be(),gap:fe(),gradientColorStops:[e],gradientColorStopPositions:[Yf,It],inset:ie(),margin:ie(),opacity:Ee(),padding:fe(),saturate:Ee(),scale:Ee(),sepia:Be(),skew:Ee(),space:fe(),translate:fe()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[Lt]}],"break-after":[{"break-after":Ke()}],"break-before":[{"break-before":Ke()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ze(),xe]}],overflow:[{overflow:Te()}],"overflow-x":[{"overflow-x":Te()}],"overflow-y":[{"overflow-y":Te()}],overscroll:[{overscroll:_e()}],"overscroll-x":[{"overscroll-x":_e()}],"overscroll-y":[{"overscroll-y":_e()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nr,xe]}],basis:[{basis:ie()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:Be()}],shrink:[{shrink:Be()}],order:[{order:["first","last","none",nr,xe]}],"grid-cols":[{"grid-cols":[rr]}],"col-start-end":[{col:["auto",{span:["full",nr,xe]},xe]}],"col-start":[{"col-start":$e()}],"col-end":[{"col-end":$e()}],"grid-rows":[{"grid-rows":[rr]}],"row-start-end":[{row:["auto",{span:[nr,xe]},xe]}],"row-start":[{"row-start":$e()}],"row-end":[{"row-end":$e()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[T]}],"gap-x":[{"gap-x":[T]}],"gap-y":[{"gap-y":[T]}],"justify-content":[{justify:["normal",...Ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[U]}],px:[{px:[U]}],py:[{py:[U]}],ps:[{ps:[U]}],pe:[{pe:[U]}],pt:[{pt:[U]}],pr:[{pr:[U]}],pb:[{pb:[U]}],pl:[{pl:[U]}],m:[{m:[$]}],mx:[{mx:[$]}],my:[{my:[$]}],ms:[{ms:[$]}],me:[{me:[$]}],mt:[{mt:[$]}],mr:[{mr:[$]}],mb:[{mb:[$]}],ml:[{ml:[$]}],"space-x":[{"space-x":[X]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[X]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,t]}],"min-w":[{"min-w":[xe,t,"min","max","fit"]}],"max-w":[{"max-w":[xe,t,"none","full","min","max","fit","prose",{screen:[Lt]},Lt]}],h:[{h:[xe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Lt,It]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ns]}],"font-family":[{font:[rr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Cn,ns]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",St,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",St,It]}],"underline-offset":[{"underline-offset":["auto",St,xe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ze(),Xf]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Qf]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eh]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[L]}],"gradient-via":[{via:[L]}],"gradient-to":[{to:[L]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...Pe(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:Pe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Pe()]}],"outline-offset":[{"outline-offset":[St,xe]}],"outline-w":[{outline:[St,It]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[St,It]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Lt,th]}],"shadow-color":[{shadow:[rr]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...Qe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Qe()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[s]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",Lt,xe]}],grayscale:[{grayscale:[g]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[v]}],saturate:[{saturate:[W]}],sepia:[{sepia:[ae]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[g]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[W]}],"backdrop-sepia":[{"backdrop-sepia":[ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:Ee()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:Ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[nr,xe]}],"translate-x":[{"translate-x":[ce]}],"translate-y":[{"translate-y":[ce]}],"skew-x":[{"skew-x":[J]}],"skew-y":[{"skew-y":[J]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":fe()}],"scroll-mx":[{"scroll-mx":fe()}],"scroll-my":[{"scroll-my":fe()}],"scroll-ms":[{"scroll-ms":fe()}],"scroll-me":[{"scroll-me":fe()}],"scroll-mt":[{"scroll-mt":fe()}],"scroll-mr":[{"scroll-mr":fe()}],"scroll-mb":[{"scroll-mb":fe()}],"scroll-ml":[{"scroll-ml":fe()}],"scroll-p":[{"scroll-p":fe()}],"scroll-px":[{"scroll-px":fe()}],"scroll-py":[{"scroll-py":fe()}],"scroll-ps":[{"scroll-ps":fe()}],"scroll-pe":[{"scroll-pe":fe()}],"scroll-pt":[{"scroll-pt":fe()}],"scroll-pr":[{"scroll-pr":fe()}],"scroll-pb":[{"scroll-pb":fe()}],"scroll-pl":[{"scroll-pl":fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[St,It,ns]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oh=Kf(sh);function te(...e){return oh(cu(e))}const Dc=y.createContext(null);let ih=0;const ch={success:Ui,error:uu,warning:qi,info:lu},lh={success:"bg-green-50 dark:bg-green-900/90 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/90 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50 dark:bg-yellow-900/90 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50 dark:bg-blue-900/90 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"},uh={success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-yellow-500 dark:text-yellow-400",info:"text-blue-500 dark:text-blue-400"};function dh({children:e}){const[t,r]=y.useState([]),s=y.useCallback(g=>{r(x=>x.map(v=>v.id===g?{...v,exiting:!0}:v)),setTimeout(()=>{r(x=>x.filter(v=>v.id!==g))},200)},[]),i=y.useCallback((g,x="info",v=4e3)=>{const T=++ih;r(L=>[...L,{id:T,message:g,type:x,duration:v}]),v>0&&setTimeout(()=>s(T),v)},[s]),l=y.useCallback((g,x)=>i(g,"success",x),[i]),d=y.useCallback((g,x)=>i(g,"error",x),[i]),u=y.useCallback((g,x)=>i(g,"warning",x),[i]),p=y.useCallback((g,x)=>i(g,"info",x),[i]);return a.jsxs(Dc.Provider,{value:{showToast:i,success:l,error:d,warning:u,info:p},children:[e,Pt.createPortal(a.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:t.map(g=>{const x=ch[g.type];return a.jsxs("div",{className:te("flex items-start gap-3 p-4 rounded-lg border shadow-lg pointer-events-auto",lh[g.type],g.exiting?"animate-toast-out":"animate-toast-in"),children:[a.jsx(x,{className:te("w-5 h-5 flex-shrink-0 mt-0.5",uh[g.type])}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:g.message}),a.jsx("button",{onClick:()=>s(g.id),className:"flex-shrink-0 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded",children:a.jsx(un,{className:"w-4 h-4"})})]},g.id)})}),document.body)]})}function Qy(){const e=y.useContext(Dc);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}var Mc={exports:{}};(function(e,t){(function(r,s){e.exports=s()})(Ko,function(){var r=function(n,o){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])})(n,o)},s=function(){return(s=Object.assign||function(n){for(var o,c=1,f=arguments.length;c<f;c++)for(var h in o=arguments[c])Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h]);return n}).apply(this,arguments)};function i(n,o,c){for(var f,h=0,m=o.length;h<m;h++)!f&&h in o||((f=f||Array.prototype.slice.call(o,0,h))[h]=o[h]);return n.concat(f||Array.prototype.slice.call(o))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ko,d=Object.keys,u=Array.isArray;function p(n,o){return typeof o!="object"||d(o).forEach(function(c){n[c]=o[c]}),n}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var g=Object.getPrototypeOf,x={}.hasOwnProperty;function v(n,o){return x.call(n,o)}function T(n,o){typeof o=="function"&&(o=o(g(n))),(typeof Reflect>"u"?d:Reflect.ownKeys)(o).forEach(function(c){N(n,c,o[c])})}var L=Object.defineProperty;function N(n,o,c,f){L(n,o,p(c&&v(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},f))}function E(n){return{from:function(o){return n.prototype=Object.create(o.prototype),N(n.prototype,"constructor",n),{extend:T.bind(null,n.prototype)}}}}var $=Object.getOwnPropertyDescriptor,B=[].slice;function U(n,o,c){return B.call(n,o,c)}function W(n,o){return o(n)}function V(n){if(!n)throw new Error("Assertion Failed")}function ae(n){l.setImmediate?setImmediate(n):setTimeout(n,0)}function J(n,o){if(typeof o=="string"&&v(n,o))return n[o];if(!o)return n;if(typeof o!="string"){for(var c=[],f=0,h=o.length;f<h;++f){var m=J(n,o[f]);c.push(m)}return c}var b=o.indexOf(".");if(b!==-1){var w=n[o.substr(0,b)];return w==null?void 0:J(w,o.substr(b+1))}}function X(n,o,c){if(n&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof o!="string"&&"length"in o){V(typeof c!="string"&&"length"in c);for(var f=0,h=o.length;f<h;++f)X(n,o[f],c[f])}else{var m,b,w=o.indexOf(".");w!==-1?(m=o.substr(0,w),(b=o.substr(w+1))===""?c===void 0?u(n)&&!isNaN(parseInt(m))?n.splice(m,1):delete n[m]:n[m]=c:X(w=!(w=n[m])||!v(n,m)?n[m]={}:w,b,c)):c===void 0?u(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=c}}function ce(n){var o,c={};for(o in n)v(n,o)&&(c[o]=n[o]);return c}var _e=[].concat;function Te(n){return _e.apply([],n)}var qt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Te([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(o){return o+n+"Array"})}))).filter(function(n){return l[n]}),ie=new Set(qt.map(function(n){return l[n]})),fe=null;function Ne(n){return fe=new WeakMap,n=function o(c){if(!c||typeof c!="object")return c;var f=fe.get(c);if(f)return f;if(u(c)){f=[],fe.set(c,f);for(var h=0,m=c.length;h<m;++h)f.push(o(c[h]))}else if(ie.has(c.constructor))f=c;else{var b,w=g(c);for(b in f=w===Object.prototype?{}:Object.create(w),fe.set(c,f),c)v(c,b)&&(f[b]=o(c[b]))}return f}(n),fe=null,n}var $e={}.toString;function ze(n){return $e.call(n).slice(8,-1)}var Pe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Qe=typeof Pe=="symbol"?function(n){var o;return n!=null&&(o=n[Pe])&&o.apply(n)}:function(){return null};function Ae(n,o){return o=n.indexOf(o),0<=o&&n.splice(o,1),0<=o}var Be={};function Ke(n){var o,c,f,h;if(arguments.length===1){if(u(n))return n.slice();if(this===Be&&typeof n=="string")return[n];if(h=Qe(n)){for(c=[];!(f=h.next()).done;)c.push(f.value);return c}if(n==null)return[n];if(typeof(o=n.length)!="number")return[n];for(c=new Array(o);o--;)c[o]=n[o];return c}for(o=arguments.length,c=new Array(o);o--;)c[o]=arguments[o];return c}var Ee=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Bn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],lt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Bn),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(n,o){this.name=n,this.message=o}function he(n,o){return n+". Errors: "+Object.keys(o).map(function(c){return o[c].toString()}).filter(function(c,f,h){return h.indexOf(c)===f}).join(`
`)}function le(n,o,c,f){this.failures=o,this.failedKeys=f,this.successCount=c,this.message=he(n,o)}function G(n,o){this.name="BulkError",this.failures=Object.keys(o).map(function(c){return o[c]}),this.failuresByPos=o,this.message=he(n,this.failures)}E(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(le).from(de),E(G).from(de);var De=lt.reduce(function(n,o){return n[o]=o+"Error",n},{}),tt=de,oe=lt.reduce(function(n,o){var c=o+"Error";function f(h,m){this.name=c,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=q[o]||c,this.inner=null)}return E(f).from(tt),n[o]=f,n},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var Bt=Bn.reduce(function(n,o){return n[o+"Error"]=oe[o],n},{}),gr=lt.reduce(function(n,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(n[o+"Error"]=oe[o]),n},{});function Se(){}function Ln(n){return n}function xl(n,o){return n==null||n===Ln?o:function(c){return o(n(c))}}function Kt(n,o){return function(){n.apply(this,arguments),o.apply(this,arguments)}}function bl(n,o){return n===Se?o:function(){var c=n.apply(this,arguments);c!==void 0&&(arguments[0]=c);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=o.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?Kt(f,this.onsuccess):f),h&&(this.onerror=this.onerror?Kt(h,this.onerror):h),m!==void 0?m:c}}function vl(n,o){return n===Se?o:function(){n.apply(this,arguments);var c=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?Kt(c,this.onsuccess):c),f&&(this.onerror=this.onerror?Kt(f,this.onerror):f)}}function wl(n,o){return n===Se?o:function(c){var f=n.apply(this,arguments);p(c,f);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,c=o.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?Kt(h,this.onsuccess):h),m&&(this.onerror=this.onerror?Kt(m,this.onerror):m),f===void 0?c===void 0?void 0:c:p(f,c)}}function jl(n,o){return n===Se?o:function(){return o.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function ya(n,o){return n===Se?o:function(){var c=n.apply(this,arguments);if(c&&typeof c.then=="function"){for(var f=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return c.then(function(){return o.apply(f,m)})}return o.apply(this,arguments)}}gr.ModifyError=le,gr.DexieError=de,gr.BulkError=G;var gt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ro(n){gt=n}var Fn={},ao=100,qt=typeof Promise>"u"?[]:function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,g(n),n];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,g(o),n]}(),Bn=qt[0],lt=qt[1],qt=qt[2],lt=lt&&lt.then,Ut=Bn&&Bn.constructor,xa=!!qt,Kn=function(n,o){qn.push([n,o]),yr&&(queueMicrotask(Nl),yr=!1)},ba=!0,yr=!0,zt=[],xr=[],va=Ln,At={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},ue=At,qn=[],Wt=0,br=[];function ne(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=ue;if(typeof n!="function"){if(n!==Fn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ja(this,this._value))}this._state=null,this._value=null,++o.ref,function c(f,h){try{h(function(m){if(f._state===null){if(m===f)throw new TypeError("A promise cannot be resolved with itself.");var b=f._lib&&hn();m&&typeof m.then=="function"?c(f,function(w,k){m instanceof ne?m._then(w,k):m.then(w,k)}):(f._state=!0,f._value=m,oo(f)),b&&mn()}},ja.bind(null,f))}catch(m){ja(f,m)}}(this,n)}var wa={get:function(){var n=ue,o=kr;function c(f,h){var m=this,b=!n.global&&(n!==ue||o!==kr),w=b&&!Ot(),k=new ne(function(S,A){ka(m,new so(co(f,n,b,w),co(h,n,b,w),S,A,n))});return this._consoleTask&&(k._consoleTask=this._consoleTask),k}return c.prototype=Fn,c},set:function(n){N(this,"then",n&&n.prototype===Fn?wa:{get:function(){return n},set:wa.set})}};function so(n,o,c,f,h){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof o=="function"?o:null,this.resolve=c,this.reject=f,this.psd=h}function ja(n,o){var c,f;xr.push(o),n._state===null&&(c=n._lib&&hn(),o=va(o),n._state=!1,n._value=o,f=n,zt.some(function(h){return h._value===f._value})||zt.push(f),oo(n),c&&mn())}function oo(n){var o=n._listeners;n._listeners=[];for(var c=0,f=o.length;c<f;++c)ka(n,o[c]);var h=n._PSD;--h.ref||h.finalize(),Wt===0&&(++Wt,Kn(function(){--Wt==0&&Na()},[]))}function ka(n,o){if(n._state!==null){var c=n._state?o.onFulfilled:o.onRejected;if(c===null)return(n._state?o.resolve:o.reject)(n._value);++o.psd.ref,++Wt,Kn(kl,[c,n,o])}else n._listeners.push(o)}function kl(n,o,c){try{var f,h=o._value;!o._state&&xr.length&&(xr=[]),f=gt&&o._consoleTask?o._consoleTask.run(function(){return n(h)}):n(h),o._state||xr.indexOf(h)!==-1||function(m){for(var b=zt.length;b;)if(zt[--b]._value===m._value)return zt.splice(b,1)}(o),c.resolve(f)}catch(m){c.reject(m)}finally{--Wt==0&&Na(),--c.psd.ref||c.psd.finalize()}}function Nl(){Vt(At,function(){hn()&&mn()})}function hn(){var n=ba;return yr=ba=!1,n}function mn(){var n,o,c;do for(;0<qn.length;)for(n=qn,qn=[],c=n.length,o=0;o<c;++o){var f=n[o];f[0].apply(null,f[1])}while(0<qn.length);yr=ba=!0}function Na(){var n=zt;zt=[],n.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var o=br.slice(0),c=o.length;c;)o[--c]()}function vr(n){return new ne(Fn,!1,n)}function Oe(n,o){var c=ue;return function(){var f=hn(),h=ue;try{return Tt(c,!0),n.apply(this,arguments)}catch(m){o&&o(m)}finally{Tt(h,!1),f&&mn()}}}T(ne.prototype,{then:wa,_then:function(n,o){ka(this,new so(null,null,n,o,ue))},catch:function(n){if(arguments.length===1)return this.then(null,n);var o=n,c=arguments[1];return typeof o=="function"?this.then(null,function(f){return(f instanceof o?c:vr)(f)}):this.then(null,function(f){return(f&&f.name===o?c:vr)(f)})},finally:function(n){return this.then(function(o){return ne.resolve(n()).then(function(){return o})},function(o){return ne.resolve(n()).then(function(){return vr(o)})})},timeout:function(n,o){var c=this;return n<1/0?new ne(function(f,h){var m=setTimeout(function(){return h(new oe.Timeout(o))},n);c.then(f,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&N(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),At.env=io(),T(ne,{all:function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o,c){n.length===0&&o([]);var f=n.length;n.forEach(function(h,m){return ne.resolve(h).then(function(b){n[m]=b,--f||o(n)},c)})})},resolve:function(n){return n instanceof ne?n:n&&typeof n.then=="function"?new ne(function(o,c){n.then(o,c)}):new ne(Fn,!0,n)},reject:vr,race:function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o,c){n.map(function(f){return ne.resolve(f).then(o,c)})})},PSD:{get:function(){return ue},set:function(n){return ue=n}},totalEchoes:{get:function(){return kr}},newPSD:Rt,usePSD:Vt,scheduler:{get:function(){return Kn},set:function(n){Kn=n}},rejectionMapper:{get:function(){return va},set:function(n){va=n}},follow:function(n,o){return new ne(function(c,f){return Rt(function(h,m){var b=ue;b.unhandleds=[],b.onunhandled=m,b.finalize=Kt(function(){var w,k=this;w=function(){k.unhandleds.length===0?h():m(k.unhandleds[0])},br.push(function S(){w(),br.splice(br.indexOf(S),1)}),++Wt,Kn(function(){--Wt==0&&Na()},[])},b.finalize),n()},o,c,f)})}}),Ut&&(Ut.allSettled&&N(ne,"allSettled",function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o){n.length===0&&o([]);var c=n.length,f=new Array(c);n.forEach(function(h,m){return ne.resolve(h).then(function(b){return f[m]={status:"fulfilled",value:b}},function(b){return f[m]={status:"rejected",reason:b}}).then(function(){return--c||o(f)})})})}),Ut.any&&typeof AggregateError<"u"&&N(ne,"any",function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o,c){n.length===0&&c(new AggregateError([]));var f=n.length,h=new Array(f);n.forEach(function(m,b){return ne.resolve(m).then(function(w){return o(w)},function(w){h[b]=w,--f||c(new AggregateError(h))})})})}),Ut.withResolvers&&(ne.withResolvers=Ut.withResolvers));var qe={awaits:0,echoes:0,id:0},Sl=0,wr=[],jr=0,kr=0,_l=0;function Rt(n,o,c,f){var h=ue,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++_l,At.env,m.env=xa?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},o&&p(m,o),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},f=Vt(m,n,c,f),m.ref===0&&m.finalize(),f}function pn(){return qe.id||(qe.id=++Sl),++qe.awaits,qe.echoes+=ao,qe.id}function Ot(){return!!qe.awaits&&(--qe.awaits==0&&(qe.id=0),qe.echoes=qe.awaits*ao,!0)}function Nr(n){return qe.echoes&&n&&n.constructor===Ut?(pn(),n.then(function(o){return Ot(),o},function(o){return Ot(),Le(o)})):n}function El(){var n=wr[wr.length-1];wr.pop(),Tt(n,!1)}function Tt(n,o){var c,f=ue;(o?!qe.echoes||jr++&&n===ue:!jr||--jr&&n===ue)||queueMicrotask(o?(function(h){++kr,qe.echoes&&--qe.echoes!=0||(qe.echoes=qe.awaits=qe.id=0),wr.push(ue),Tt(h,!0)}).bind(null,n):El),n!==ue&&(ue=n,f===At&&(At.env=io()),xa&&(c=At.env.Promise,o=n.env,(f.global||n.global)&&(Object.defineProperty(l,"Promise",o.PromiseProp),c.all=o.all,c.race=o.race,c.resolve=o.resolve,c.reject=o.reject,o.allSettled&&(c.allSettled=o.allSettled),o.any&&(c.any=o.any))))}function io(){var n=l.Promise;return xa?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function Vt(n,o,c,f,h){var m=ue;try{return Tt(n,!0),o(c,f,h)}finally{Tt(m,!1)}}function co(n,o,c,f){return typeof n!="function"?n:function(){var h=ue;c&&pn(),Tt(o,!0);try{return n.apply(this,arguments)}finally{Tt(h,!1),f&&queueMicrotask(Ot)}}}function Sa(n){Promise===Ut&&qe.echoes===0?jr===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+lt).indexOf("[native code]")===-1&&(pn=Ot=Se);var Le=ne.reject,Ht="",kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lo="String expected.",gn=[],Sr="__dbnames",_a="readonly",Ea="readwrite";function Gt(n,o){return n?o?function(){return n.apply(this,arguments)&&o.apply(this,arguments)}:n:o}var uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _r(n){return typeof n!="string"||/\./.test(n)?function(o){return o}:function(o){return o[n]===void 0&&n in o&&delete(o=Ne(o))[n],o}}function fo(){throw oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function je(n,o){try{var c=ho(n),f=ho(o);if(c!==f)return c==="Array"?1:f==="Array"?-1:c==="binary"?1:f==="binary"?-1:c==="string"?1:f==="string"?-1:c==="Date"?1:f!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return o<n?1:n<o?-1:0;case"binary":return function(h,m){for(var b=h.length,w=m.length,k=b<w?b:w,S=0;S<k;++S)if(h[S]!==m[S])return h[S]<m[S]?-1:1;return b===w?0:b<w?-1:1}(mo(n),mo(o));case"Array":return function(h,m){for(var b=h.length,w=m.length,k=b<w?b:w,S=0;S<k;++S){var A=je(h[S],m[S]);if(A!==0)return A}return b===w?0:b<w?-1:1}(n,o)}}catch{}return NaN}function ho(n){var o=typeof n;return o!="object"?o:ArrayBuffer.isView(n)?"binary":(n=ze(n),n==="ArrayBuffer"?"binary":n)}function mo(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Er(n,o,c){var f=n.schema.yProps;return f?(o&&0<c.numFailures&&(o=o.filter(function(h,m){return!c.failures[m]})),Promise.all(f.map(function(h){return h=h.updatesTable,o?n.db.table(h).where("k").anyOf(o).delete():n.db.table(h).clear()})).then(function(){return c})):c}var Un=(po.prototype.execute=function(n){var o=this["@@propmod"];if(o.add!==void 0){var c=o.add;if(u(c))return i(i([],u(n)?n:[],!0),c).sort();if(typeof c=="number")return(Number(n)||0)+c;if(typeof c=="bigint")try{return BigInt(n)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(o.remove!==void 0){var f=o.remove;if(u(f))return u(n)?n.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(n)-f;if(typeof f=="bigint")try{return BigInt(n)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=o.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof n=="string"&&n.startsWith(c)?o.replacePrefix[1]+n.substring(c.length):n},po);function po(n){this["@@propmod"]=n}function go(n,o){for(var c=d(o),f=c.length,h=!1,m=0;m<f;++m){var b=c[m],w=o[b],k=J(n,b);w instanceof Un?(X(n,b,w.execute(k)),h=!0):k!==w&&(X(n,b,w),h=!0)}return h}var yo=(Ce.prototype._trans=function(n,o,c){var f=this._tx||ue.trans,h=this.name,m=gt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function b(S,A,j){if(!j.schema[h])throw new oe.NotFound("Table "+h+" not part of transaction");return o(j.idbtrans,j)}var w=hn();try{var k=f&&f.db._novip===this.db._novip?f===ue.trans?f._promise(n,b,c):Rt(function(){return f._promise(n,b,c)},{trans:f,transless:ue.transless||ue}):function S(A,j,O,_){if(A.idbdb&&(A._state.openComplete||ue.letThrough||A._vip)){var C=A._createTransaction(j,O,A._dbSchema);try{C.create(),A._state.PR1398_maxLoop=3}catch(P){return P.name===De.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return S(A,j,O,_)})):Le(P)}return C._promise(j,function(P,R){return Rt(function(){return ue.trans=C,_(P,R,C)})}).then(function(P){if(j==="readwrite")try{C.idbtrans.commit()}catch{}return j==="readonly"?P:C._completion.then(function(){return P})})}if(A._state.openComplete)return Le(new oe.DatabaseClosed(A._state.dbOpenError));if(!A._state.isBeingOpened){if(!A._state.autoOpen)return Le(new oe.DatabaseClosed);A.open().catch(Se)}return A._state.dbReadyPromise.then(function(){return S(A,j,O,_)})}(this.db,n,[this.name],b);return m&&(k._consoleTask=m,k=k.catch(function(S){return console.trace(S),Le(S)})),k}finally{w&&mn()}},Ce.prototype.get=function(n,o){var c=this;return n&&n.constructor===Object?this.where(n).first(o):n==null?Le(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return c.core.get({trans:f,key:n}).then(function(h){return c.hook.reading.fire(h)})}).then(o)},Ce.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(u(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var o=d(n);if(o.length===1)return this.where(o[0]).equals(n[o[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&o.every(function(S){return 0<=w.keyPath.indexOf(S)})){for(var k=0;k<o.length;++k)if(o.indexOf(w.keyPath[k])===-1)return!1;return!0}return!1}).sort(function(w,k){return w.keyPath.length-k.keyPath.length})[0];if(c&&this.db._maxKey!==Ht){var m=c.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(k){return n[k]}))}!c&&gt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var f=this.schema.idxByName;function h(w,k){return je(w,k)===0}var b=o.reduce(function(j,k){var S=j[0],A=j[1],j=f[k],O=n[k];return[S||j,S||!j?Gt(A,j&&j.multi?function(_){return _=J(_,k),u(_)&&_.some(function(C){return h(O,C)})}:function(_){return h(O,J(_,k))}):A]},[null,null]),m=b[0],b=b[1];return m?this.where(m.name).equals(n[m.keyPath]).filter(b):c?this.filter(b):this.where(o).equals("")},Ce.prototype.filter=function(n){return this.toCollection().and(n)},Ce.prototype.count=function(n){return this.toCollection().count(n)},Ce.prototype.offset=function(n){return this.toCollection().offset(n)},Ce.prototype.limit=function(n){return this.toCollection().limit(n)},Ce.prototype.each=function(n){return this.toCollection().each(n)},Ce.prototype.toArray=function(n){return this.toCollection().toArray(n)},Ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ce.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,u(n)?"[".concat(n.join("+"),"]"):n))},Ce.prototype.reverse=function(){return this.toCollection().reverse()},Ce.prototype.mapToClass=function(n){var o,c=this.db,f=this.name;function h(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof fo&&(function(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function A(){this.constructor=k}r(k,S),k.prototype=S===null?Object.create(S):(A.prototype=S.prototype,new A)}(h,o=n),Object.defineProperty(h.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},n=h);for(var m=new Set,b=n.prototype;b;b=g(b))Object.getOwnPropertyNames(b).forEach(function(k){return m.add(k)});function w(k){if(!k)return k;var S,A=Object.create(n.prototype);for(S in k)if(!m.has(S))try{A[S]=k[S]}catch{}return A}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=w,this.hook("reading",w),n},Ce.prototype.defineClass=function(){return this.mapToClass(function(n){p(this,n)})},Ce.prototype.add=function(n,o){var c=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,b=n;return m&&h&&(b=_r(m)(n)),this._trans("readwrite",function(w){return c.core.mutate({trans:w,type:"add",keys:o!=null?[o]:null,values:[b]})}).then(function(w){return w.numFailures?ne.reject(w.failures[0]):w.lastResult}).then(function(w){if(m)try{X(n,m,w)}catch{}return w})},Ce.prototype.upsert=function(n,o){var c=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return c.core.get({trans:h,key:n}).then(function(m){var b=m??{};return go(b,o),f&&X(b,f,n),c.core.mutate({trans:h,type:"put",values:[b],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[o]}}).then(function(w){return w.numFailures?ne.reject(w.failures[0]):!!m})})})},Ce.prototype.update=function(n,o){return typeof n!="object"||u(n)?this.where(":id").equals(n).modify(o):(n=J(n,this.schema.primKey.keyPath),n===void 0?Le(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(o))},Ce.prototype.put=function(n,o){var c=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,b=n;return m&&h&&(b=_r(m)(n)),this._trans("readwrite",function(w){return c.core.mutate({trans:w,type:"put",values:[b],keys:o!=null?[o]:null})}).then(function(w){return w.numFailures?ne.reject(w.failures[0]):w.lastResult}).then(function(w){if(m)try{X(n,m,w)}catch{}return w})},Ce.prototype.delete=function(n){var o=this;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:[n]}).then(function(f){return Er(o,[n],f)}).then(function(f){return f.numFailures?ne.reject(f.failures[0]):void 0})})},Ce.prototype.clear=function(){var n=this;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"deleteRange",range:uo}).then(function(c){return Er(n,null,c)})}).then(function(o){return o.numFailures?ne.reject(o.failures[0]):void 0})},Ce.prototype.bulkGet=function(n){var o=this;return this._trans("readonly",function(c){return o.core.getMany({keys:n,trans:c}).then(function(f){return f.map(function(h){return o.hook.reading.fire(h)})})})},Ce.prototype.bulkAdd=function(n,o,c){var f=this,h=Array.isArray(o)?o:void 0,m=(c=c||(h?void 0:o))?c.allKeys:void 0;return this._trans("readwrite",function(b){var S=f.schema.primKey,w=S.auto,S=S.keyPath;if(S&&h)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==n.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var k=n.length,S=S&&w?n.map(_r(S)):n;return f.core.mutate({trans:b,type:"add",keys:h,values:S,wantResults:m}).then(function(C){var j=C.numFailures,O=C.results,_=C.lastResult,C=C.failures;if(j===0)return m?O:_;throw new G("".concat(f.name,".bulkAdd(): ").concat(j," of ").concat(k," operations failed"),C)})})},Ce.prototype.bulkPut=function(n,o,c){var f=this,h=Array.isArray(o)?o:void 0,m=(c=c||(h?void 0:o))?c.allKeys:void 0;return this._trans("readwrite",function(b){var S=f.schema.primKey,w=S.auto,S=S.keyPath;if(S&&h)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==n.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var k=n.length,S=S&&w?n.map(_r(S)):n;return f.core.mutate({trans:b,type:"put",keys:h,values:S,wantResults:m}).then(function(C){var j=C.numFailures,O=C.results,_=C.lastResult,C=C.failures;if(j===0)return m?O:_;throw new G("".concat(f.name,".bulkPut(): ").concat(j," of ").concat(k," operations failed"),C)})})},Ce.prototype.bulkUpdate=function(n){var o=this,c=this.core,f=n.map(function(b){return b.key}),h=n.map(function(b){return b.changes}),m=[];return this._trans("readwrite",function(b){return c.getMany({trans:b,keys:f,cache:"clone"}).then(function(w){var k=[],S=[];n.forEach(function(j,O){var _=j.key,C=j.changes,P=w[O];if(P){for(var R=0,D=Object.keys(C);R<D.length;R++){var M=D[R],F=C[M];if(M===o.schema.primKey.keyPath){if(je(F,_)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else X(P,M,F)}m.push(O),k.push(_),S.push(P)}});var A=k.length;return c.mutate({trans:b,type:"put",keys:k,values:S,updates:{keys:f,changeSpecs:h}}).then(function(j){var O=j.numFailures,_=j.failures;if(O===0)return A;for(var C=0,P=Object.keys(_);C<P.length;C++){var R,D=P[C],M=m[Number(D)];M!=null&&(R=_[D],delete _[D],_[M]=R)}throw new G("".concat(o.name,".bulkUpdate(): ").concat(O," of ").concat(A," operations failed"),_)})})})},Ce.prototype.bulkDelete=function(n){var o=this,c=n.length;return this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"delete",keys:n}).then(function(h){return Er(o,n,h)})}).then(function(b){var h=b.numFailures,m=b.lastResult,b=b.failures;if(h===0)return m;throw new G("".concat(o.name,".bulkDelete(): ").concat(h," of ").concat(c," operations failed"),b)})},Ce);function Ce(){}function zn(n){function o(b,w){if(w){for(var k=arguments.length,S=new Array(k-1);--k;)S[k-1]=arguments[k];return c[b].subscribe.apply(null,S),n}if(typeof b=="string")return c[b]}var c={};o.addEventType=m;for(var f=1,h=arguments.length;f<h;++f)m(arguments[f]);return o;function m(b,w,k){if(typeof b!="object"){var S;w=w||jl;var A={subscribers:[],fire:k=k||Se,subscribe:function(j){A.subscribers.indexOf(j)===-1&&(A.subscribers.push(j),A.fire=w(A.fire,j))},unsubscribe:function(j){A.subscribers=A.subscribers.filter(function(O){return O!==j}),A.fire=A.subscribers.reduce(w,k)}};return c[b]=o[b]=A}d(S=b).forEach(function(j){var O=S[j];if(u(O))m(j,S[j][0],S[j][1]);else{if(O!=="asap")throw new oe.InvalidArgument("Invalid event config");var _=m(j,Ln,function(){for(var C=arguments.length,P=new Array(C);C--;)P[C]=arguments[C];_.subscribers.forEach(function(R){ae(function(){R.apply(null,P)})})})}})}}function Wn(n,o){return E(o).from({prototype:n}),o}function yn(n,o){return!(n.filter||n.algorithm||n.or)&&(o?n.justLimit:!n.replayFilter)}function Ca(n,o){n.filter=Gt(n.filter,o)}function Pa(n,o,c){var f=n.replayFilter;n.replayFilter=f?function(){return Gt(f(),o())}:o,n.justLimit=c&&!f}function Cr(n,o){if(n.isPrimKey)return o.primaryKey;var c=o.getIndexByKeyPath(n.index);if(!c)throw new oe.Schema("KeyPath "+n.index+" on object store "+o.name+" is not indexed");return c}function xo(n,o,c){var f=Cr(n,o.schema);return o.openCursor({trans:c,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:f,range:n.range}})}function Pr(n,o,c,f){var h=n.replayFilter?Gt(n.filter,n.replayFilter()):n.filter;if(n.or){var m={},b=function(w,k,S){var A,j;h&&!h(k,S,function(O){return k.stop(O)},function(O){return k.fail(O)})||((j=""+(A=k.primaryKey))=="[object ArrayBuffer]"&&(j=""+new Uint8Array(A)),v(m,j)||(m[j]=!0,o(w,k,S)))};return Promise.all([n.or._iterate(b,c),bo(xo(n,f,c),n.algorithm,b,!n.keysOnly&&n.valueMapper)])}return bo(xo(n,f,c),Gt(n.algorithm,h),o,!n.keysOnly&&n.valueMapper)}function bo(n,o,c,f){var h=Oe(f?function(m,b,w){return c(f(m),b,w)}:c);return n.then(function(m){if(m)return m.start(function(){var b=function(){return m.continue()};o&&!o(m,function(w){return b=w},function(w){m.stop(w),b=Se},function(w){m.fail(w),b=Se})||h(m.value,m,function(w){return b=w}),b()})})}var Cl=(ke.prototype._read=function(n,o){var c=this._ctx;return c.error?c.table._trans(null,Le.bind(null,c.error)):c.table._trans("readonly",n).then(o)},ke.prototype._write=function(n){var o=this._ctx;return o.error?o.table._trans(null,Le.bind(null,o.error)):o.table._trans("readwrite",n,"locked")},ke.prototype._addAlgorithm=function(n){var o=this._ctx;o.algorithm=Gt(o.algorithm,n)},ke.prototype._iterate=function(n,o){return Pr(this._ctx,n,o,this._ctx.table.core)},ke.prototype.clone=function(n){var o=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return n&&p(c,n),o._ctx=c,o},ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},ke.prototype.each=function(n){var o=this._ctx;return this._read(function(c){return Pr(o,n,c,o.table.core)})},ke.prototype.count=function(n){var o=this;return this._read(function(c){var f=o._ctx,h=f.table.core;if(yn(f,!0))return h.count({trans:c,query:{index:Cr(f,h.schema),range:f.range}}).then(function(b){return Math.min(b,f.limit)});var m=0;return Pr(f,function(){return++m,!1},c,h).then(function(){return m})}).then(n)},ke.prototype.sortBy=function(n,o){var c=n.split(".").reverse(),f=c[0],h=c.length-1;function m(k,S){return S?m(k[c[S]],S-1):k[f]}var b=this._ctx.dir==="next"?1:-1;function w(k,S){return je(m(k,h),m(S,h))*b}return this.toArray(function(k){return k.sort(w)}).then(o)},ke.prototype.toArray=function(n){var o=this;return this._read(function(c){var f=o._ctx;if(f.dir==="next"&&yn(f,!0)&&0<f.limit){var h=f.valueMapper,m=Cr(f,f.table.core.schema);return f.table.core.query({trans:c,limit:f.limit,values:!0,query:{index:m,range:f.range}}).then(function(w){return w=w.result,h?w.map(h):w})}var b=[];return Pr(f,function(w){return b.push(w)},c,f.table.core).then(function(){return b})},n)},ke.prototype.offset=function(n){var o=this._ctx;return n<=0||(o.offset+=n,yn(o)?Pa(o,function(){var c=n;return function(f,h){return c===0||(c===1?--c:h(function(){f.advance(c),c=0}),!1)}}):Pa(o,function(){var c=n;return function(){return--c<0}})),this},ke.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Pa(this._ctx,function(){var o=n;return function(c,f,h){return--o<=0&&f(h),0<=o}},!0),this},ke.prototype.until=function(n,o){return Ca(this._ctx,function(c,f,h){return!n(c.value)||(f(h),o)}),this},ke.prototype.first=function(n){return this.limit(1).toArray(function(o){return o[0]}).then(n)},ke.prototype.last=function(n){return this.reverse().first(n)},ke.prototype.filter=function(n){var o;return Ca(this._ctx,function(c){return n(c.value)}),(o=this._ctx).isMatch=Gt(o.isMatch,n),this},ke.prototype.and=function(n){return this.filter(n)},ke.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ke.prototype.desc=function(){return this.reverse()},ke.prototype.eachKey=function(n){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(c,f){n(f.key,f)})},ke.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},ke.prototype.eachPrimaryKey=function(n){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(c,f){n(f.primaryKey,f)})},ke.prototype.keys=function(n){var o=this._ctx;o.keysOnly=!o.isMatch;var c=[];return this.each(function(f,h){c.push(h.key)}).then(function(){return c}).then(n)},ke.prototype.primaryKeys=function(n){var o=this._ctx;if(o.dir==="next"&&yn(o,!0)&&0<o.limit)return this._read(function(f){var h=Cr(o,o.table.core.schema);return o.table.core.query({trans:f,values:!1,limit:o.limit,query:{index:h,range:o.range}})}).then(function(f){return f.result}).then(n);o.keysOnly=!o.isMatch;var c=[];return this.each(function(f,h){c.push(h.primaryKey)}).then(function(){return c}).then(n)},ke.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},ke.prototype.firstKey=function(n){return this.limit(1).keys(function(o){return o[0]}).then(n)},ke.prototype.lastKey=function(n){return this.reverse().firstKey(n)},ke.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var o={};return Ca(this._ctx,function(h){var f=h.primaryKey.toString(),h=v(o,f);return o[f]=!0,!h}),this},ke.prototype.modify=function(n){var o=this,c=this._ctx;return this._write(function(f){var h=typeof n=="function"?n:function(P){return go(P,n)},m=c.table.core,S=m.schema.primaryKey,b=S.outbound,w=S.extractKey,k=200,S=o.db._options.modifyChunkSize;S&&(k=typeof S=="object"?S[m.name]||S["*"]||200:S);function A(P,M){var D=M.failures,M=M.numFailures;O+=P-M;for(var F=0,K=d(D);F<K.length;F++){var H=K[F];j.push(D[H])}}var j=[],O=0,_=[],C=n===vo;return o.clone().primaryKeys().then(function(P){function R(M){var F=Math.min(k,P.length-M),K=P.slice(M,M+F);return(C?Promise.resolve([]):m.getMany({trans:f,keys:K,cache:"immutable"})).then(function(H){var Z=[],z=[],Y=b?[]:null,ee=C?K:[];if(!C)for(var Q=0;Q<F;++Q){var se=H[Q],ge={value:Ne(se),primKey:P[M+Q]};h.call(ge,ge.value,ge)!==!1&&(ge.value==null?ee.push(P[M+Q]):b||je(w(se),w(ge.value))===0?(z.push(ge.value),b&&Y.push(P[M+Q])):(ee.push(P[M+Q]),Z.push(ge.value)))}return Promise.resolve(0<Z.length&&m.mutate({trans:f,type:"add",values:Z}).then(function(be){for(var ve in be.failures)ee.splice(parseInt(ve),1);A(Z.length,be)})).then(function(){return(0<z.length||D&&typeof n=="object")&&m.mutate({trans:f,type:"put",keys:Y,values:z,criteria:D,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<M}).then(function(be){return A(z.length,be)})}).then(function(){return(0<ee.length||D&&C)&&m.mutate({trans:f,type:"delete",keys:ee,criteria:D,isAdditionalChunk:0<M}).then(function(be){return Er(c.table,ee,be)}).then(function(be){return A(ee.length,be)})}).then(function(){return P.length>M+F&&R(M+k)})})}var D=yn(c)&&c.limit===1/0&&(typeof n!="function"||C)&&{index:c.index,range:c.range};return R(0).then(function(){if(0<j.length)throw new le("Error modifying one or more objects",j,O,_);return P.length})})})},ke.prototype.delete=function(){var n=this._ctx,o=n.range;return!yn(n)||n.table.schema.yProps||!n.isPrimKey&&o.type!==3?this.modify(vo):this._write(function(c){var f=n.table.core.schema.primaryKey,h=o;return n.table.core.count({trans:c,query:{index:f,range:h}}).then(function(m){return n.table.core.mutate({trans:c,type:"deleteRange",range:h}).then(function(k){var w=k.failures,k=k.numFailures;if(k)throw new le("Could not delete some values",Object.keys(w).map(function(S){return w[S]}),m-k);return m-k})})})},ke);function ke(){}var vo=function(n,o){return o.value=null};function Pl(n,o){return n<o?-1:n===o?0:1}function Al(n,o){return o<n?-1:n===o?0:1}function at(n,o,c){return n=n instanceof jo?new n.Collection(n):n,n._ctx.error=new(c||TypeError)(o),n}function xn(n){return new n.Collection(n,function(){return wo("")}).limit(0)}function Ar(n,o,c,f){var h,m,b,w,k,S,A,j=c.length;if(!c.every(function(C){return typeof C=="string"}))return at(n,lo);function O(C){h=C==="next"?function(R){return R.toUpperCase()}:function(R){return R.toLowerCase()},m=C==="next"?function(R){return R.toLowerCase()}:function(R){return R.toUpperCase()},b=C==="next"?Pl:Al;var P=c.map(function(R){return{lower:m(R),upper:h(R)}}).sort(function(R,D){return b(R.lower,D.lower)});w=P.map(function(R){return R.upper}),k=P.map(function(R){return R.lower}),A=(S=C)==="next"?"":f}O("next"),n=new n.Collection(n,function(){return $t(w[0],k[j-1]+f)}),n._ondirectionchange=function(C){O(C)};var _=0;return n._addAlgorithm(function(C,P,R){var D=C.key;if(typeof D!="string")return!1;var M=m(D);if(o(M,k,_))return!0;for(var F=null,K=_;K<j;++K){var H=function(Z,z,Y,ee,Q,se){for(var ge=Math.min(Z.length,ee.length),be=-1,ve=0;ve<ge;++ve){var st=z[ve];if(st!==ee[ve])return Q(Z[ve],Y[ve])<0?Z.substr(0,ve)+Y[ve]+Y.substr(ve+1):Q(Z[ve],ee[ve])<0?Z.substr(0,ve)+ee[ve]+Y.substr(ve+1):0<=be?Z.substr(0,be)+z[be]+Y.substr(be+1):null;Q(Z[ve],st)<0&&(be=ve)}return ge<ee.length&&se==="next"?Z+Y.substr(Z.length):ge<Z.length&&se==="prev"?Z.substr(0,Y.length):be<0?null:Z.substr(0,be)+ee[be]+Y.substr(be+1)}(D,M,w[K],k[K],b,S);H===null&&F===null?_=K+1:(F===null||0<b(F,H))&&(F=H)}return P(F!==null?function(){C.continue(F+A)}:R),!1}),n}function $t(n,o,c,f){return{type:2,lower:n,upper:o,lowerOpen:c,upperOpen:f}}function wo(n){return{type:1,lower:n,upper:n}}var jo=(Object.defineProperty(Ue.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ue.prototype.between=function(n,o,c,f){c=c!==!1,f=f===!0;try{return 0<this._cmp(n,o)||this._cmp(n,o)===0&&(c||f)&&(!c||!f)?xn(this):new this.Collection(this,function(){return $t(n,o,!c,!f)})}catch{return at(this,kt)}},Ue.prototype.equals=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return wo(n)})},Ue.prototype.above=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(n,void 0,!0)})},Ue.prototype.aboveOrEqual=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(n,void 0,!1)})},Ue.prototype.below=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(void 0,n,!1,!0)})},Ue.prototype.belowOrEqual=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(void 0,n)})},Ue.prototype.startsWith=function(n){return typeof n!="string"?at(this,lo):this.between(n,n+Ht,!0,!0)},Ue.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Ar(this,function(o,c){return o.indexOf(c[0])===0},[n],Ht)},Ue.prototype.equalsIgnoreCase=function(n){return Ar(this,function(o,c){return o===c[0]},[n],"")},Ue.prototype.anyOfIgnoreCase=function(){var n=Ke.apply(Be,arguments);return n.length===0?xn(this):Ar(this,function(o,c){return c.indexOf(o)!==-1},n,"")},Ue.prototype.startsWithAnyOfIgnoreCase=function(){var n=Ke.apply(Be,arguments);return n.length===0?xn(this):Ar(this,function(o,c){return c.some(function(f){return o.indexOf(f)===0})},n,Ht)},Ue.prototype.anyOf=function(){var n=this,o=Ke.apply(Be,arguments),c=this._cmp;try{o.sort(c)}catch{return at(this,kt)}if(o.length===0)return xn(this);var f=new this.Collection(this,function(){return $t(o[0],o[o.length-1])});f._ondirectionchange=function(m){c=m==="next"?n._ascending:n._descending,o.sort(c)};var h=0;return f._addAlgorithm(function(m,b,w){for(var k=m.key;0<c(k,o[h]);)if(++h===o.length)return b(w),!1;return c(k,o[h])===0||(b(function(){m.continue(o[h])}),!1)}),f},Ue.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ue.prototype.noneOf=function(){var n=Ke.apply(Be,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return at(this,kt)}var o=n.reduce(function(c,f){return c?c.concat([[c[c.length-1][1],f]]):[[-1/0,f]]},null);return o.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},Ue.prototype.inAnyRange=function(D,o){var c=this,f=this._cmp,h=this._ascending,m=this._descending,b=this._min,w=this._max;if(D.length===0)return xn(this);if(!D.every(function(M){return M[0]!==void 0&&M[1]!==void 0&&h(M[0],M[1])<=0}))return at(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var k=!o||o.includeLowers!==!1,S=o&&o.includeUppers===!0,A,j=h;function O(M,F){return j(M[0],F[0])}try{(A=D.reduce(function(M,F){for(var K=0,H=M.length;K<H;++K){var Z=M[K];if(f(F[0],Z[1])<0&&0<f(F[1],Z[0])){Z[0]=b(Z[0],F[0]),Z[1]=w(Z[1],F[1]);break}}return K===H&&M.push(F),M},[])).sort(O)}catch{return at(this,kt)}var _=0,C=S?function(M){return 0<h(M,A[_][1])}:function(M){return 0<=h(M,A[_][1])},P=k?function(M){return 0<m(M,A[_][0])}:function(M){return 0<=m(M,A[_][0])},R=C,D=new this.Collection(this,function(){return $t(A[0][0],A[A.length-1][1],!k,!S)});return D._ondirectionchange=function(M){j=M==="next"?(R=C,h):(R=P,m),A.sort(O)},D._addAlgorithm(function(M,F,K){for(var H,Z=M.key;R(Z);)if(++_===A.length)return F(K),!1;return!C(H=Z)&&!P(H)||(c._cmp(Z,A[_][1])===0||c._cmp(Z,A[_][0])===0||F(function(){j===h?M.continue(A[_][0]):M.continue(A[_][1])}),!1)}),D},Ue.prototype.startsWithAnyOf=function(){var n=Ke.apply(Be,arguments);return n.every(function(o){return typeof o=="string"})?n.length===0?xn(this):this.inAnyRange(n.map(function(o){return[o,o+Ht]})):at(this,"startsWithAnyOf() only works with strings")},Ue);function Ue(){}function yt(n){return Oe(function(o){return Vn(o),n(o.target.error),!1})}function Vn(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var Hn="storagemutated",Aa="x-storagemutated-1",Dt=zn(null,Hn),Rl=(xt.prototype._lock=function(){return V(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this},xt.prototype._unlock=function(){if(V(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{Vt(n[1],n[0])}catch{}}return this},xt.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},xt.prototype.create=function(n){var o=this;if(!this.mode)return this;var c=this.db.idbdb,f=this.db._state.dbOpenError;if(V(!this.idbtrans),!n&&!c)switch(f&&f.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(f);case"MissingAPIError":throw new oe.MissingAPI(f.message,f);default:throw new oe.OpenFailed(f)}if(!this.active)throw new oe.TransactionInactive;return V(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Oe(function(h){Vn(h),o._reject(n.error)}),n.onabort=Oe(function(h){Vn(h),o.active&&o._reject(new oe.Abort(n.error)),o.active=!1,o.on("abort").fire(h)}),n.oncomplete=Oe(function(){o.active=!1,o._resolve(),"mutatedParts"in n&&Dt.storagemutated.fire(n.mutatedParts)}),this},xt.prototype._promise=function(n,o,c){var f=this;if(n==="readwrite"&&this.mode!=="readwrite")return Le(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new oe.TransactionInactive);if(this._locked())return new ne(function(m,b){f._blockedFuncs.push([function(){f._promise(n,o,c).then(m,b)},ue])});if(c)return Rt(function(){var m=new ne(function(b,w){f._lock();var k=o(b,w,f);k&&k.then&&k.then(b,w)});return m.finally(function(){return f._unlock()}),m._lib=!0,m});var h=new ne(function(m,b){var w=o(m,b,f);w&&w.then&&w.then(m,b)});return h._lib=!0,h},xt.prototype._root=function(){return this.parent?this.parent._root():this},xt.prototype.waitFor=function(n){var o,c=this._root(),f=ne.resolve(n);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return f}):(c._waitingFor=f,c._waitingQueue=[],o=c.idbtrans.objectStore(c.storeNames[0]),function m(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(o.get(-1/0).onsuccess=m)}());var h=c._waitingFor;return new ne(function(m,b){f.then(function(w){return c._waitingQueue.push(Oe(m.bind(null,w)))},function(w){return c._waitingQueue.push(Oe(b.bind(null,w)))}).finally(function(){c._waitingFor===h&&(c._waitingFor=null)})})},xt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},xt.prototype.table=function(n){var o=this._memoizedTables||(this._memoizedTables={});if(v(o,n))return o[n];var c=this.schema[n];if(!c)throw new oe.NotFound("Table "+n+" not part of transaction");return c=new this.db.Table(n,c,this),c.core=this.db.core.table(n),o[n]=c},xt);function xt(){}function Ra(n,o,c,f,h,m,b,w){return{name:n,keyPath:o,unique:c,multi:f,auto:h,compound:m,src:(c&&!b?"&":"")+(f?"*":"")+(h?"++":"")+ko(o),type:w}}function ko(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Oa(n,o,c){return{name:n,primKey:o,indexes:c,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},c.reduce(function(h,m,b){return b=f(m,b),b&&(h[b[0]]=b[1]),h},{}))};var f}var Gn=function(n){try{return n.only([[]]),Gn=function(){return[[]]},[[]]}catch{return Gn=function(){return Ht},Ht}};function Ta(n){return n==null?function(){}:typeof n=="string"?(o=n).split(".").length===1?function(c){return c[o]}:function(c){return J(c,o)}:function(c){return J(c,n)};var o}function No(n){return[].slice.call(n)}var Ol=0;function Yn(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Tl(n,o,k){function f(R){if(R.type===3)return null;if(R.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=R.lower,C=R.upper,P=R.lowerOpen,R=R.upperOpen;return _===void 0?C===void 0?null:o.upperBound(C,!!R):C===void 0?o.lowerBound(_,!!P):o.bound(_,C,!!P,!!R)}function h(O){var _,C=O.name;return{name:C,schema:O,mutate:function(P){var R=P.trans,D=P.type,M=P.keys,F=P.values,K=P.range;return new Promise(function(H,Z){H=Oe(H);var z=R.objectStore(C),Y=z.keyPath==null,ee=D==="put"||D==="add";if(!ee&&D!=="delete"&&D!=="deleteRange")throw new Error("Invalid operation type: "+D);var Q,se=(M||F||{length:1}).length;if(M&&F&&M.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return H({numFailures:0,failures:{},results:[],lastResult:void 0});function ge(Xe){++st,Vn(Xe)}var be=[],ve=[],st=0;if(D==="deleteRange"){if(K.type===4)return H({numFailures:st,failures:ve,results:[],lastResult:void 0});K.type===3?be.push(Q=z.clear()):be.push(Q=z.delete(f(K)))}else{var Y=ee?Y?[F,M]:[F,null]:[M,null],me=Y[0],Ge=Y[1];if(ee)for(var Ye=0;Ye<se;++Ye)be.push(Q=Ge&&Ge[Ye]!==void 0?z[D](me[Ye],Ge[Ye]):z[D](me[Ye])),Q.onerror=ge;else for(Ye=0;Ye<se;++Ye)be.push(Q=z[D](me[Ye])),Q.onerror=ge}function qr(Xe){Xe=Xe.target.result,be.forEach(function(Qt,Qa){return Qt.error!=null&&(ve[Qa]=Qt.error)}),H({numFailures:st,failures:ve,results:D==="delete"?M:be.map(function(Qt){return Qt.result}),lastResult:Xe})}Q.onerror=function(Xe){ge(Xe),qr(Xe)},Q.onsuccess=qr})},getMany:function(P){var R=P.trans,D=P.keys;return new Promise(function(M,F){M=Oe(M);for(var K,H=R.objectStore(C),Z=D.length,z=new Array(Z),Y=0,ee=0,Q=function(be){be=be.target,z[be._pos]=be.result,++ee===Y&&M(z)},se=yt(F),ge=0;ge<Z;++ge)D[ge]!=null&&((K=H.get(D[ge]))._pos=ge,K.onsuccess=Q,K.onerror=se,++Y);Y===0&&M(z)})},get:function(P){var R=P.trans,D=P.key;return new Promise(function(M,F){M=Oe(M);var K=R.objectStore(C).get(D);K.onsuccess=function(H){return M(H.target.result)},K.onerror=yt(F)})},query:(_=S,function(P){return new Promise(function(R,D){R=Oe(R);var M,F,K,Y=P.trans,H=P.values,Z=P.limit,Q=P.query,z=Z===1/0?void 0:Z,ee=Q.index,Q=Q.range,Y=Y.objectStore(C),ee=ee.isPrimaryKey?Y:Y.index(ee.name),Q=f(Q);if(Z===0)return R({result:[]});_?((z=H?ee.getAll(Q,z):ee.getAllKeys(Q,z)).onsuccess=function(se){return R({result:se.target.result})},z.onerror=yt(D)):(M=0,F=!H&&"openKeyCursor"in ee?ee.openKeyCursor(Q):ee.openCursor(Q),K=[],F.onsuccess=function(se){var ge=F.result;return ge?(K.push(H?ge.value:ge.primaryKey),++M===Z?R({result:K}):void ge.continue()):R({result:K})},F.onerror=yt(D))})}),openCursor:function(P){var R=P.trans,D=P.values,M=P.query,F=P.reverse,K=P.unique;return new Promise(function(H,Z){H=Oe(H);var ee=M.index,z=M.range,Y=R.objectStore(C),Y=ee.isPrimaryKey?Y:Y.index(ee.name),ee=F?K?"prevunique":"prev":K?"nextunique":"next",Q=!D&&"openKeyCursor"in Y?Y.openKeyCursor(f(z),ee):Y.openCursor(f(z),ee);Q.onerror=yt(Z),Q.onsuccess=Oe(function(se){var ge,be,ve,st,me=Q.result;me?(me.___id=++Ol,me.done=!1,ge=me.continue.bind(me),be=(be=me.continuePrimaryKey)&&be.bind(me),ve=me.advance.bind(me),st=function(){throw new Error("Cursor not stopped")},me.trans=R,me.stop=me.continue=me.continuePrimaryKey=me.advance=function(){throw new Error("Cursor not started")},me.fail=Oe(Z),me.next=function(){var Ge=this,Ye=1;return this.start(function(){return Ye--?Ge.continue():Ge.stop()}).then(function(){return Ge})},me.start=function(Ge){function Ye(){if(Q.result)try{Ge()}catch(Xe){me.fail(Xe)}else me.done=!0,me.start=function(){throw new Error("Cursor behind last entry")},me.stop()}var qr=new Promise(function(Xe,Qt){Xe=Oe(Xe),Q.onerror=yt(Qt),me.fail=Qt,me.stop=function(Qa){me.stop=me.continue=me.continuePrimaryKey=me.advance=st,Xe(Qa)}});return Q.onsuccess=Oe(function(Xe){Q.onsuccess=Ye,Ye()}),me.continue=ge,me.continuePrimaryKey=be,me.advance=ve,Ye(),qr},H(me)):H(null)},Z)})},count:function(P){var R=P.query,D=P.trans,M=R.index,F=R.range;return new Promise(function(K,H){var Z=D.objectStore(C),z=M.isPrimaryKey?Z:Z.index(M.name),Z=f(F),z=Z?z.count(Z):z.count();z.onsuccess=Oe(function(Y){return K(Y.target.result)}),z.onerror=yt(H)})}}}var m,b,w,A=(b=k,w=No((m=n).objectStoreNames),{schema:{name:m.name,tables:w.map(function(O){return b.objectStore(O)}).map(function(O){var _=O.keyPath,R=O.autoIncrement,C=u(_),P={},R={name:O.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:C,keyPath:_,autoIncrement:R,unique:!0,extractKey:Ta(_)},indexes:No(O.indexNames).map(function(D){return O.index(D)}).map(function(K){var M=K.name,F=K.unique,H=K.multiEntry,K=K.keyPath,H={name:M,compound:u(K),keyPath:K,unique:F,multiEntry:H,extractKey:Ta(K)};return P[Yn(K)]=H}),getIndexByKeyPath:function(D){return P[Yn(D)]}};return P[":id"]=R.primaryKey,_!=null&&(P[Yn(_)]=R.primaryKey),R})},hasGetAll:0<w.length&&"getAll"in b.objectStore(w[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),k=A.schema,S=A.hasGetAll,A=k.tables.map(h),j={};return A.forEach(function(O){return j[O.name]=O}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(O){if(!j[O])throw new Error("Table '".concat(O,"' not found"));return j[O]},MIN_KEY:-1/0,MAX_KEY:Gn(o),schema:k}}function $l(n,o,c,f){var h=c.IDBKeyRange;return c.indexedDB,{dbcore:(f=Tl(o,h,f),n.dbcore.reduce(function(m,b){return b=b.create,s(s({},m),b(m))},f))}}function Rr(n,f){var c=f.db,f=$l(n._middlewares,c,n._deps,f);n.core=f.dbcore,n.tables.forEach(function(h){var m=h.name;n.core.schema.tables.some(function(b){return b.name===m})&&(h.core=n.core.table(m),n[m]instanceof n.Table&&(n[m].core=h.core))})}function Or(n,o,c,f){c.forEach(function(h){var m=f[h];o.forEach(function(b){var w=function k(S,A){return $(S,A)||(S=g(S))&&k(S,A)}(b,h);(!w||"value"in w&&w.value===void 0)&&(b===n.Transaction.prototype||b instanceof n.Transaction?N(b,h,{get:function(){return this.table(h)},set:function(k){L(this,h,{value:k,writable:!0,configurable:!0,enumerable:!0})}}):b[h]=new n.Table(h,m))})})}function $a(n,o){o.forEach(function(c){for(var f in c)c[f]instanceof n.Table&&delete c[f]})}function Dl(n,o){return n._cfg.version-o._cfg.version}function Ml(n,o,c,f){var h=n._dbSchema;c.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Oa("$meta",_o("")[0],[]),n._storeNames.push("$meta"));var m=n._createTransaction("readwrite",n._storeNames,h);m.create(c),m._completion.catch(f);var b=m._reject.bind(m),w=ue.transless||ue;Rt(function(){return ue.trans=m,ue.transless=w,o!==0?(Rr(n,c),S=o,((k=m).storeNames.includes("$meta")?k.table("$meta").get("version").then(function(A){return A??S}):ne.resolve(S)).then(function(A){return O=A,_=m,C=c,P=[],A=(j=n)._versions,R=j._dbSchema=$r(0,j.idbdb,C),(A=A.filter(function(D){return D._cfg.version>=O})).length!==0?(A.forEach(function(D){P.push(function(){var M=R,F=D._cfg.dbschema;Dr(j,M,C),Dr(j,F,C),R=j._dbSchema=F;var K=Da(M,F);K.add.forEach(function(ee){Ma(C,ee[0],ee[1].primKey,ee[1].indexes)}),K.change.forEach(function(ee){if(ee.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var Q=C.objectStore(ee.name);ee.add.forEach(function(se){return Tr(Q,se)}),ee.change.forEach(function(se){Q.deleteIndex(se.name),Tr(Q,se)}),ee.del.forEach(function(se){return Q.deleteIndex(se)})});var H=D._cfg.contentUpgrade;if(H&&D._cfg.version>O){Rr(j,C),_._memoizedTables={};var Z=ce(F);K.del.forEach(function(ee){Z[ee]=M[ee]}),$a(j,[j.Transaction.prototype]),Or(j,[j.Transaction.prototype],d(Z),Z),_.schema=Z;var z,Y=Ee(H);return Y&&pn(),K=ne.follow(function(){var ee;(z=H(_))&&Y&&(ee=Ot.bind(null,null),z.then(ee,ee))}),z&&typeof z.then=="function"?ne.resolve(z):K.then(function(){return z})}}),P.push(function(M){var F,K,H=D._cfg.dbschema;F=H,K=M,[].slice.call(K.db.objectStoreNames).forEach(function(Z){return F[Z]==null&&K.db.deleteObjectStore(Z)}),$a(j,[j.Transaction.prototype]),Or(j,[j.Transaction.prototype],j._storeNames,j._dbSchema),_.schema=j._dbSchema}),P.push(function(M){j.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(j.idbdb.version/10)===D._cfg.version?(j.idbdb.deleteObjectStore("$meta"),delete j._dbSchema.$meta,j._storeNames=j._storeNames.filter(function(F){return F!=="$meta"})):M.objectStore("$meta").put(D._cfg.version,"version"))})}),function D(){return P.length?ne.resolve(P.shift()(_.idbtrans)).then(D):ne.resolve()}().then(function(){So(R,C)})):ne.resolve();var j,O,_,C,P,R}).catch(b)):(d(h).forEach(function(A){Ma(c,A,h[A].primKey,h[A].indexes)}),Rr(n,c),void ne.follow(function(){return n.on.populate.fire(m)}).catch(b));var k,S})}function Il(n,o){So(n._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var c=$r(0,n.idbdb,o);Dr(n,n._dbSchema,o);for(var f=0,h=Da(c,n._dbSchema).change;f<h.length;f++){var m=function(b){if(b.change.length||b.recreate)return console.warn("Unable to patch indexes of table ".concat(b.name," because it has changes on the type of index or primary key.")),{value:void 0};var w=o.objectStore(b.name);b.add.forEach(function(k){gt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(b.name,".").concat(k.src)),Tr(w,k)})}(h[f]);if(typeof m=="object")return m.value}}function Da(n,o){var c,f={del:[],add:[],change:[]};for(c in n)o[c]||f.del.push(c);for(c in o){var h=n[c],m=o[c];if(h){var b={name:c,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)b.recreate=!0,f.change.push(b);else{var w=h.idxByName,k=m.idxByName,S=void 0;for(S in w)k[S]||b.del.push(S);for(S in k){var A=w[S],j=k[S];A?A.src!==j.src&&b.change.push(j):b.add.push(j)}(0<b.del.length||0<b.add.length||0<b.change.length)&&f.change.push(b)}}else f.add.push([c,m])}return f}function Ma(n,o,c,f){var h=n.db.createObjectStore(o,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return f.forEach(function(m){return Tr(h,m)}),h}function So(n,o){d(n).forEach(function(c){o.db.objectStoreNames.contains(c)||(gt&&console.debug("Dexie: Creating missing table",c),Ma(o,c,n[c].primKey,n[c].indexes))})}function Tr(n,o){n.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function $r(n,o,c){var f={};return U(o.objectStoreNames,0).forEach(function(h){for(var m=c.objectStore(h),b=Ra(ko(S=m.keyPath),S||"",!0,!1,!!m.autoIncrement,S&&typeof S!="string",!0),w=[],k=0;k<m.indexNames.length;++k){var A=m.index(m.indexNames[k]),S=A.keyPath,A=Ra(A.name,S,!!A.unique,!!A.multiEntry,!1,S&&typeof S!="string",!1);w.push(A)}f[h]=Oa(h,b,w)}),f}function Dr(n,o,c){for(var f=c.db.objectStoreNames,h=0;h<f.length;++h){var m=f[h],b=c.objectStore(m);n._hasGetAll="getAll"in b;for(var w=0;w<b.indexNames.length;++w){var k=b.indexNames[w],S=b.index(k).keyPath,A=typeof S=="string"?S:"["+U(S).join("+")+"]";!o[m]||(S=o[m].idxByName[A])&&(S.name=k,delete o[m].idxByName[A],o[m].idxByName[k]=S)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function _o(n){return n.split(",").map(function(o,c){var m=o.split(":"),f=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(o=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return Ra(h,m||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),u(m),c===0,f)})}var Ll=(bn.prototype._createTableSchema=Oa,bn.prototype._parseIndexSyntax=_o,bn.prototype._parseStoresSpec=function(n,o){var c=this;d(n).forEach(function(f){if(n[f]!==null){var h=c._parseIndexSyntax(n[f]),m=h.shift();if(!m)throw new oe.Schema("Invalid schema for table "+f+": "+n[f]);if(m.unique=!0,m.multi)throw new oe.Schema("Primary key cannot be multiEntry*");h.forEach(function(b){if(b.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),h=c._createTableSchema(f,m,h),o[f]=h}})},bn.prototype.stores=function(c){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,c):c;var c=o._versions,f={},h={};return c.forEach(function(m){p(f,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(f,h)}),o._dbSchema=h,$a(o,[o._allTables,o,o.Transaction.prototype]),Or(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],d(h),h),o._storeNames=d(h),this},bn.prototype.upgrade=function(n){return this._cfg.contentUpgrade=ya(this._cfg.contentUpgrade||Se,n),this},bn);function bn(){}function Ia(n,o){var c=n._dbNamesDB;return c||(c=n._dbNamesDB=new Nt(Sr,{addons:[],indexedDB:n,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function La(n){return n&&typeof n.databases=="function"}function Fa(n){return Rt(function(){return ue.letThrough=!0,n()})}function Ba(n){return!("from"in n)}var He=function(n,o){if(!this){var c=new He;return n&&"d"in n&&p(c,n),c}p(this,arguments.length?{d:1,from:n,to:1<arguments.length?o:n}:{d:0})};function Jn(n,o,c){var f=je(o,c);if(!isNaN(f)){if(0<f)throw RangeError();if(Ba(n))return p(n,{from:o,to:c,d:1});var h=n.l,f=n.r;if(je(c,n.from)<0)return h?Jn(h,o,c):n.l={from:o,to:c,d:1,l:null,r:null},Co(n);if(0<je(o,n.to))return f?Jn(f,o,c):n.r={from:o,to:c,d:1,l:null,r:null},Co(n);je(o,n.from)<0&&(n.from=o,n.l=null,n.d=f?f.d+1:1),0<je(c,n.to)&&(n.to=c,n.r=null,n.d=n.l?n.l.d+1:1),c=!n.r,h&&!n.l&&Qn(n,h),f&&c&&Qn(n,f)}}function Qn(n,o){Ba(o)||function c(f,k){var m=k.from,b=k.to,w=k.l,k=k.r;Jn(f,m,b),w&&c(f,w),k&&c(f,k)}(n,o)}function Eo(n,o){var c=Mr(o),f=c.next();if(f.done)return!1;for(var h=f.value,m=Mr(n),b=m.next(h.from),w=b.value;!f.done&&!b.done;){if(je(w.from,h.to)<=0&&0<=je(w.to,h.from))return!0;je(h.from,w.from)<0?h=(f=c.next(w.from)).value:w=(b=m.next(h.from)).value}return!1}function Mr(n){var o=Ba(n)?null:{s:0,n};return{next:function(c){for(var f=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,f)for(;o.n.l&&je(c,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!f||je(c,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Co(n){var o,c,f=(((o=n.r)===null||o===void 0?void 0:o.d)||0)-(((c=n.l)===null||c===void 0?void 0:c.d)||0),h=1<f?"r":f<-1?"l":"";h&&(o=h=="r"?"l":"r",c=s({},n),f=n[h],n.from=f.from,n.to=f.to,n[h]=f[h],c[h]=f[o],(n[o]=c).d=Po(c)),n.d=Po(n)}function Po(c){var o=c.r,c=c.l;return(o?c?Math.max(o.d,c.d):o.d:c?c.d:0)+1}function Ir(n,o){return d(o).forEach(function(c){n[c]?Qn(n[c],o[c]):n[c]=function f(h){var m,b,w={};for(m in h)v(h,m)&&(b=h[m],w[m]=!b||typeof b!="object"||ie.has(b.constructor)?b:f(b));return w}(o[c])}),n}function Ka(n,o){return n.all||o.all||Object.keys(n).some(function(c){return o[c]&&Eo(o[c],n[c])})}T(He.prototype,((lt={add:function(n){return Qn(this,n),this},addKey:function(n){return Jn(this,n,n),this},addKeys:function(n){var o=this;return n.forEach(function(c){return Jn(o,c,c)}),this},hasKey:function(n){var o=Mr(this).next(n).value;return o&&je(o.from,n)<=0&&0<=je(o.to,n)}})[Pe]=function(){return Mr(this)},lt));var Yt={},qa={},Ua=!1;function Lr(n){Ir(qa,n),Ua||(Ua=!0,setTimeout(function(){Ua=!1,za(qa,!(qa={}))},0))}function za(n,o){o===void 0&&(o=!1);var c=new Set;if(n.all)for(var f=0,h=Object.values(Yt);f<h.length;f++)Ao(b=h[f],n,c,o);else for(var m in n){var b,w=/^idb\:\/\/(.*)\/(.*)\//.exec(m);w&&(m=w[1],w=w[2],(b=Yt["idb://".concat(m,"/").concat(w)])&&Ao(b,n,c,o))}c.forEach(function(k){return k()})}function Ao(n,o,c,f){for(var h=[],m=0,b=Object.entries(n.queries.query);m<b.length;m++){for(var w=b[m],k=w[0],S=[],A=0,j=w[1];A<j.length;A++){var O=j[A];Ka(o,O.obsSet)?O.subscribers.forEach(function(R){return c.add(R)}):f&&S.push(O)}f&&h.push([k,S])}if(f)for(var _=0,C=h;_<C.length;_++){var P=C[_],k=P[0],S=P[1];n.queries.query[k]=S}}function Fl(n){var o=n._state,c=n._deps.indexedDB;if(o.isBeingOpened||n.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Le(o.dbOpenError):n});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var f=o.openCanceller,h=Math.round(10*n.verno),m=!1;function b(){if(o.openCanceller!==f)throw new oe.DatabaseClosed("db.open() was cancelled")}function w(){return new ne(function(O,_){if(b(),!c)throw new oe.MissingAPI;var C=n.name,P=o.autoSchema||!h?c.open(C):c.open(C,h);if(!P)throw new oe.MissingAPI;P.onerror=yt(_),P.onblocked=Oe(n._fireOnBlocked),P.onupgradeneeded=Oe(function(R){var D;A=P.transaction,o.autoSchema&&!n._options.allowEmptyDB?(P.onerror=Vn,A.abort(),P.result.close(),(D=c.deleteDatabase(C)).onsuccess=D.onerror=Oe(function(){_(new oe.NoSuchDatabase("Database ".concat(C," doesnt exist")))})):(A.onerror=yt(_),R=R.oldVersion>Math.pow(2,62)?0:R.oldVersion,j=R<1,n.idbdb=P.result,m&&Il(n,A),Ml(n,R/10,A,_))},_),P.onsuccess=Oe(function(){A=null;var R,D,M,F,K,H=n.idbdb=P.result,Z=U(H.objectStoreNames);if(0<Z.length)try{var z=H.transaction((F=Z).length===1?F[0]:F,"readonly");if(o.autoSchema)D=H,M=z,(R=n).verno=D.version/10,M=R._dbSchema=$r(0,D,M),R._storeNames=U(D.objectStoreNames,0),Or(R,[R._allTables],d(M),M);else if(Dr(n,n._dbSchema,z),((K=Da($r(0,(K=n).idbdb,z),K._dbSchema)).add.length||K.change.some(function(Y){return Y.add.length||Y.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),H.close(),h=H.version+1,m=!0,O(w());Rr(n,z)}catch{}gn.push(n),H.onversionchange=Oe(function(Y){o.vcFired=!0,n.on("versionchange").fire(Y)}),H.onclose=Oe(function(){n.close({disableAutoOpen:!1})}),j&&(K=n._deps,z=C,H=K.indexedDB,K=K.IDBKeyRange,La(H)||z===Sr||Ia(H,K).put({name:z}).catch(Se)),O()},_)}).catch(function(O){switch(O==null?void 0:O.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),w();break;case"VersionError":if(0<h)return h=0,w()}return ne.reject(O)})}var k,S=o.dbReadyResolve,A=null,j=!1;return ne.race([f,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(O){function _(){return indexedDB.databases().finally(O)}k=setInterval(_,100),_()}).finally(function(){return clearInterval(k)}):Promise.resolve()).then(w)]).then(function(){return b(),o.onReadyBeingFired=[],ne.resolve(Fa(function(){return n.on.ready.fire(n.vip)})).then(function O(){if(0<o.onReadyBeingFired.length){var _=o.onReadyBeingFired.reduce(ya,Se);return o.onReadyBeingFired=[],ne.resolve(Fa(function(){return _(n.vip)})).then(O)}})}).finally(function(){o.openCanceller===f&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(O){o.dbOpenError=O;try{A&&A.abort()}catch{}return f===o.openCanceller&&n._close(),Le(O)}).finally(function(){o.openComplete=!0,S()}).then(function(){var O;return j&&(O={},n.tables.forEach(function(_){_.schema.indexes.forEach(function(C){C.name&&(O["idb://".concat(n.name,"/").concat(_.name,"/").concat(C.name)]=new He(-1/0,[[[]]]))}),O["idb://".concat(n.name,"/").concat(_.name,"/")]=O["idb://".concat(n.name,"/").concat(_.name,"/:dels")]=new He(-1/0,[[[]]])}),Dt(Hn).fire(O),za(O,!0)),n})}function Wa(n){function o(m){return n.next(m)}var c=h(o),f=h(function(m){return n.throw(m)});function h(m){return function(k){var w=m(k),k=w.value;return w.done?k:k&&typeof k.then=="function"?k.then(c,f):u(k)?Promise.all(k).then(c,f):c(k)}}return h(o)()}function Fr(n,o,c){for(var f=u(n)?n.slice():[n],h=0;h<c;++h)f.push(o);return f}var Bl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return s(s({},n),{table:function(o){var c=n.table(o),f=c.schema,h={},m=[];function b(j,O,_){var C=Yn(j),P=h[C]=h[C]||[],R=j==null?0:typeof j=="string"?1:j.length,D=0<O,D=s(s({},_),{name:D?"".concat(C,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:D,keyTail:O,keyLength:R,extractKey:Ta(j),unique:!D&&_.unique});return P.push(D),D.isPrimaryKey||m.push(D),1<R&&b(R===2?j[0]:j.slice(0,R-1),O+1,_),P.sort(function(M,F){return M.keyTail-F.keyTail}),D}o=b(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[o];for(var w=0,k=f.indexes;w<k.length;w++){var S=k[w];b(S.keyPath,0,S)}function A(j){var O,_=j.query.index;return _.isVirtual?s(s({},j),{query:{index:_.lowLevelIndex,range:(O=j.query.range,_=_.keyTail,{type:O.type===1?2:O.type,lower:Fr(O.lower,O.lowerOpen?n.MAX_KEY:n.MIN_KEY,_),lowerOpen:!0,upper:Fr(O.upper,O.upperOpen?n.MIN_KEY:n.MAX_KEY,_),upperOpen:!0})}}):j}return s(s({},c),{schema:s(s({},f),{primaryKey:o,indexes:m,getIndexByKeyPath:function(j){return(j=h[Yn(j)])&&j[0]}}),count:function(j){return c.count(A(j))},query:function(j){return c.query(A(j))},openCursor:function(j){var O=j.query.index,_=O.keyTail,C=O.isVirtual,P=O.keyLength;return C?c.openCursor(A(j)).then(function(D){return D&&R(D)}):c.openCursor(j);function R(D){return Object.create(D,{continue:{value:function(M){M!=null?D.continue(Fr(M,j.reverse?n.MAX_KEY:n.MIN_KEY,_)):j.unique?D.continue(D.key.slice(0,P).concat(j.reverse?n.MIN_KEY:n.MAX_KEY,_)):D.continue()}},continuePrimaryKey:{value:function(M,F){D.continuePrimaryKey(Fr(M,n.MAX_KEY,_),F)}},primaryKey:{get:function(){return D.primaryKey}},key:{get:function(){var M=D.key;return P===1?M[0]:M.slice(0,P)}},value:{get:function(){return D.value}}})}}})}})}};function Va(n,o,c,f){return c=c||{},f=f||"",d(n).forEach(function(h){var m,b,w;v(o,h)?(m=n[h],b=o[h],typeof m=="object"&&typeof b=="object"&&m&&b?(w=ze(m))!==ze(b)?c[f+h]=o[h]:w==="Object"?Va(m,b,c,f+h+"."):m!==b&&(c[f+h]=o[h]):m!==b&&(c[f+h]=o[h])):c[f+h]=void 0}),d(o).forEach(function(h){v(n,h)||(c[f+h]=o[h])}),c}function Ha(n,o){return o.type==="delete"?o.keys:o.keys||o.values.map(n.extractKey)}var Kl={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(o){var c=n.table(o),f=c.schema.primaryKey;return s(s({},c),{mutate:function(h){var m=ue.trans,b=m.table(o).hook,w=b.deleting,k=b.creating,S=b.updating;switch(h.type){case"add":if(k.fire===Se)break;return m._promise("readwrite",function(){return A(h)},!0);case"put":if(k.fire===Se&&S.fire===Se)break;return m._promise("readwrite",function(){return A(h)},!0);case"delete":if(w.fire===Se)break;return m._promise("readwrite",function(){return A(h)},!0);case"deleteRange":if(w.fire===Se)break;return m._promise("readwrite",function(){return function j(O,_,C){return c.query({trans:O,values:!1,query:{index:f,range:_},limit:C}).then(function(P){var R=P.result;return A({type:"delete",keys:R,trans:O}).then(function(D){return 0<D.numFailures?Promise.reject(D.failures[0]):R.length<C?{failures:[],numFailures:0,lastResult:void 0}:j(O,s(s({},_),{lower:R[R.length-1],lowerOpen:!0}),C)})})}(h.trans,h.range,1e4)},!0)}return c.mutate(h);function A(j){var O,_,C,P=ue.trans,R=j.keys||Ha(f,j);if(!R)throw new Error("Keys missing");return(j=j.type==="add"||j.type==="put"?s(s({},j),{keys:R}):s({},j)).type!=="delete"&&(j.values=i([],j.values)),j.keys&&(j.keys=i([],j.keys)),O=c,C=R,((_=j).type==="add"?Promise.resolve([]):O.getMany({trans:_.trans,keys:C,cache:"immutable"})).then(function(D){var M=R.map(function(F,K){var H,Z,z,Y=D[K],ee={onerror:null,onsuccess:null};return j.type==="delete"?w.fire.call(ee,F,Y,P):j.type==="add"||Y===void 0?(H=k.fire.call(ee,F,j.values[K],P),F==null&&H!=null&&(j.keys[K]=F=H,f.outbound||X(j.values[K],f.keyPath,F))):(H=Va(Y,j.values[K]),(Z=S.fire.call(ee,H,F,Y,P))&&(z=j.values[K],Object.keys(Z).forEach(function(Q){v(z,Q)?z[Q]=Z[Q]:X(z,Q,Z[Q])}))),ee});return c.mutate(j).then(function(F){for(var K=F.failures,H=F.results,Z=F.numFailures,F=F.lastResult,z=0;z<R.length;++z){var Y=(H||R)[z],ee=M[z];Y==null?ee.onerror&&ee.onerror(K[z]):ee.onsuccess&&ee.onsuccess(j.type==="put"&&D[z]?j.values[z]:Y)}return{failures:K,results:H,numFailures:Z,lastResult:F}}).catch(function(F){return M.forEach(function(K){return K.onerror&&K.onerror(F)}),Promise.reject(F)})})}}})}})}};function Ro(n,o,c){try{if(!o||o.keys.length<n.length)return null;for(var f=[],h=0,m=0;h<o.keys.length&&m<n.length;++h)je(o.keys[h],n[m])===0&&(f.push(c?Ne(o.values[h]):o.values[h]),++m);return f.length===n.length?f:null}catch{return null}}var ql={stack:"dbcore",level:-1,create:function(n){return{table:function(o){var c=n.table(o);return s(s({},c),{getMany:function(f){if(!f.cache)return c.getMany(f);var h=Ro(f.keys,f.trans._cache,f.cache==="clone");return h?ne.resolve(h):c.getMany(f).then(function(m){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?Ne(m):m},m})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),c.mutate(f)}})}}}};function Oo(n,o){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function To(n,o){switch(n){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Ul={stack:"dbcore",level:0,name:"Observability",create:function(n){var o=n.schema.name,c=new He(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(f,h,m){if(ue.subscr&&h!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return n.transaction(f,h,m)},table:function(f){var h=n.table(f),m=h.schema,b=m.primaryKey,j=m.indexes,w=b.extractKey,k=b.outbound,S=b.autoIncrement&&j.filter(function(_){return _.compound&&_.keyPath.includes(b.keyPath)}),A=s(s({},h),{mutate:function(_){function C(Q){return Q="idb://".concat(o,"/").concat(f,"/").concat(Q),F[Q]||(F[Q]=new He)}var P,R,D,M=_.trans,F=_.mutatedParts||(_.mutatedParts={}),K=C(""),H=C(":dels"),Z=_.type,ee=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Ha(b,_).filter(function(Q){return Q}),_.values]:[],z=ee[0],Y=ee[1],ee=_.trans._cache;return u(z)?(K.addKeys(z),(ee=Z==="delete"||z.length===Y.length?Ro(z,ee):null)||H.addKeys(z),(ee||Y)&&(P=C,R=ee,D=Y,m.indexes.forEach(function(Q){var se=P(Q.name||"");function ge(ve){return ve!=null?Q.extractKey(ve):null}function be(ve){return Q.multiEntry&&u(ve)?ve.forEach(function(st){return se.addKey(st)}):se.addKey(ve)}(R||D).forEach(function(ve,Ge){var me=R&&ge(R[Ge]),Ge=D&&ge(D[Ge]);je(me,Ge)!==0&&(me!=null&&be(me),Ge!=null&&be(Ge))})}))):z?(Y={from:(Y=z.lower)!==null&&Y!==void 0?Y:n.MIN_KEY,to:(Y=z.upper)!==null&&Y!==void 0?Y:n.MAX_KEY},H.add(Y),K.add(Y)):(K.add(c),H.add(c),m.indexes.forEach(function(Q){return C(Q.name).add(c)})),h.mutate(_).then(function(Q){return!z||_.type!=="add"&&_.type!=="put"||(K.addKeys(Q.results),S&&S.forEach(function(se){for(var ge=_.values.map(function(me){return se.extractKey(me)}),be=se.keyPath.findIndex(function(me){return me===b.keyPath}),ve=0,st=Q.results.length;ve<st;++ve)ge[ve][be]=Q.results[ve];C(se.name).addKeys(ge)})),M.mutatedParts=Ir(M.mutatedParts||{},F),Q})}}),j=function(C){var P=C.query,C=P.index,P=P.range;return[C,new He((C=P.lower)!==null&&C!==void 0?C:n.MIN_KEY,(P=P.upper)!==null&&P!==void 0?P:n.MAX_KEY)]},O={get:function(_){return[b,new He(_.key)]},getMany:function(_){return[b,new He().addKeys(_.keys)]},count:j,query:j,openCursor:j};return d(O).forEach(function(_){A[_]=function(C){var P=ue.subscr,R=!!P,D=Oo(ue,h)&&To(_,C)?C.obsSet={}:P;if(R){var M=function(Y){return Y="idb://".concat(o,"/").concat(f,"/").concat(Y),D[Y]||(D[Y]=new He)},F=M(""),K=M(":dels"),P=O[_](C),R=P[0],P=P[1];if((_==="query"&&R.isPrimaryKey&&!C.values?K:M(R.name||"")).add(P),!R.isPrimaryKey){if(_!=="count"){var H=_==="query"&&k&&C.values&&h.query(s(s({},C),{values:!1}));return h[_].apply(this,arguments).then(function(Y){if(_==="query"){if(k&&C.values)return H.then(function(ge){return ge=ge.result,F.addKeys(ge),Y});var ee=C.values?Y.result.map(w):Y.result;(C.values?F:K).addKeys(ee)}else if(_==="openCursor"){var Q=Y,se=C.values;return Q&&Object.create(Q,{key:{get:function(){return K.addKey(Q.primaryKey),Q.key}},primaryKey:{get:function(){var ge=Q.primaryKey;return K.addKey(ge),ge}},value:{get:function(){return se&&F.addKey(Q.primaryKey),Q.value}}})}return Y})}K.add(c)}}return h[_].apply(this,arguments)}}),A}})}};function $o(n,o,c){if(c.numFailures===0)return o;if(o.type==="deleteRange")return null;var f=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return c.numFailures===f?null:(o=s({},o),u(o.keys)&&(o.keys=o.keys.filter(function(h,m){return!(m in c.failures)})),"values"in o&&u(o.values)&&(o.values=o.values.filter(function(h,m){return!(m in c.failures)})),o)}function Ga(n,o){return c=n,((f=o).lower===void 0||(f.lowerOpen?0<je(c,f.lower):0<=je(c,f.lower)))&&(n=n,(o=o).upper===void 0||(o.upperOpen?je(n,o.upper)<0:je(n,o.upper)<=0));var c,f}function Do(n,o,O,f,h,m){if(!O||O.length===0)return n;var b=o.query.index,w=b.multiEntry,k=o.query.range,S=f.schema.primaryKey.extractKey,A=b.extractKey,j=(b.lowLevelIndex||b).extractKey,O=O.reduce(function(_,C){var P=_,R=[];if(C.type==="add"||C.type==="put")for(var D=new He,M=C.values.length-1;0<=M;--M){var F,K=C.values[M],H=S(K);D.hasKey(H)||(F=A(K),(w&&u(F)?F.some(function(Q){return Ga(Q,k)}):Ga(F,k))&&(D.addKey(H),R.push(K)))}switch(C.type){case"add":var Z=new He().addKeys(o.values?_.map(function(se){return S(se)}):_),P=_.concat(o.values?R.filter(function(se){return se=S(se),!Z.hasKey(se)&&(Z.addKey(se),!0)}):R.map(function(se){return S(se)}).filter(function(se){return!Z.hasKey(se)&&(Z.addKey(se),!0)}));break;case"put":var z=new He().addKeys(C.values.map(function(se){return S(se)}));P=_.filter(function(se){return!z.hasKey(o.values?S(se):se)}).concat(o.values?R:R.map(function(se){return S(se)}));break;case"delete":var Y=new He().addKeys(C.keys);P=_.filter(function(se){return!Y.hasKey(o.values?S(se):se)});break;case"deleteRange":var ee=C.range;P=_.filter(function(se){return!Ga(S(se),ee)})}return P},n);return O===n?n:(O.sort(function(_,C){return je(j(_),j(C))||je(S(_),S(C))}),o.limit&&o.limit<1/0&&(O.length>o.limit?O.length=o.limit:n.length===o.limit&&O.length<o.limit&&(h.dirty=!0)),m?Object.freeze(O):O)}function Mo(n,o){return je(n.lower,o.lower)===0&&je(n.upper,o.upper)===0&&!!n.lowerOpen==!!o.lowerOpen&&!!n.upperOpen==!!o.upperOpen}function zl(n,o){return function(c,f,h,m){if(c===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=je(c,f))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return f}(n.lower,o.lower,n.lowerOpen,o.lowerOpen)<=0&&0<=function(c,f,h,m){if(c===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=je(c,f))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return f}(n.upper,o.upper,n.upperOpen,o.upperOpen)}function Wl(n,o,c,f){n.subscribers.add(c),f.addEventListener("abort",function(){var h,m;n.subscribers.delete(c),n.subscribers.size===0&&(h=n,m=o,setTimeout(function(){h.subscribers.size===0&&Ae(m,h)},3e3))})}var Vl={stack:"dbcore",level:0,name:"Cache",create:function(n){var o=n.schema.name;return s(s({},n),{transaction:function(c,f,h){var m,b,w=n.transaction(c,f,h);return f==="readwrite"&&(b=(m=new AbortController).signal,h=function(k){return function(){if(m.abort(),f==="readwrite"){for(var S=new Set,A=0,j=c;A<j.length;A++){var O=j[A],_=Yt["idb://".concat(o,"/").concat(O)];if(_){var C=n.table(O),P=_.optimisticOps.filter(function(se){return se.trans===w});if(w._explicit&&k&&w.mutatedParts)for(var R=0,D=Object.values(_.queries.query);R<D.length;R++)for(var M=0,F=(Z=D[R]).slice();M<F.length;M++)Ka((z=F[M]).obsSet,w.mutatedParts)&&(Ae(Z,z),z.subscribers.forEach(function(se){return S.add(se)}));else if(0<P.length){_.optimisticOps=_.optimisticOps.filter(function(se){return se.trans!==w});for(var K=0,H=Object.values(_.queries.query);K<H.length;K++)for(var Z,z,Y,ee=0,Q=(Z=H[K]).slice();ee<Q.length;ee++)(z=Q[ee]).res!=null&&w.mutatedParts&&(k&&!z.dirty?(Y=Object.isFrozen(z.res),Y=Do(z.res,z.req,P,C,z,Y),z.dirty?(Ae(Z,z),z.subscribers.forEach(function(se){return S.add(se)})):Y!==z.res&&(z.res=Y,z.promise=ne.resolve({result:Y}))):(z.dirty&&Ae(Z,z),z.subscribers.forEach(function(se){return S.add(se)})))}}}S.forEach(function(se){return se()})}}},w.addEventListener("abort",h(!1),{signal:b}),w.addEventListener("error",h(!1),{signal:b}),w.addEventListener("complete",h(!0),{signal:b})),w},table:function(c){var f=n.table(c),h=f.schema.primaryKey;return s(s({},f),{mutate:function(m){var b=ue.trans;if(h.outbound||b.db._options.cache==="disabled"||b.explicit||b.idbtrans.mode!=="readwrite")return f.mutate(m);var w=Yt["idb://".concat(o,"/").concat(c)];return w?(b=f.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Ha(h,m).some(function(k){return k==null}))?(w.optimisticOps.push(m),m.mutatedParts&&Lr(m.mutatedParts),b.then(function(k){0<k.numFailures&&(Ae(w.optimisticOps,m),(k=$o(0,m,k))&&w.optimisticOps.push(k),m.mutatedParts&&Lr(m.mutatedParts))}),b.catch(function(){Ae(w.optimisticOps,m),m.mutatedParts&&Lr(m.mutatedParts)})):b.then(function(k){var S=$o(0,s(s({},m),{values:m.values.map(function(A,j){var O;return k.failures[j]?A:(A=(O=h.keyPath)!==null&&O!==void 0&&O.includes(".")?Ne(A):s({},A),X(A,h.keyPath,k.results[j]),A)})}),k);w.optimisticOps.push(S),queueMicrotask(function(){return m.mutatedParts&&Lr(m.mutatedParts)})}),b):f.mutate(m)},query:function(m){if(!Oo(ue,f)||!To("query",m))return f.query(m);var b=((S=ue.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",j=ue,w=j.requery,k=j.signal,S=function(C,P,R,D){var M=Yt["idb://".concat(C,"/").concat(P)];if(!M)return[];if(!(P=M.queries[R]))return[null,!1,M,null];var F=P[(D.query?D.query.index.name:null)||""];if(!F)return[null,!1,M,null];switch(R){case"query":var K=F.find(function(H){return H.req.limit===D.limit&&H.req.values===D.values&&Mo(H.req.query.range,D.query.range)});return K?[K,!0,M,F]:[F.find(function(H){return("limit"in H.req?H.req.limit:1/0)>=D.limit&&(!D.values||H.req.values)&&zl(H.req.query.range,D.query.range)}),!1,M,F];case"count":return K=F.find(function(H){return Mo(H.req.query.range,D.query.range)}),[K,!!K,M,F]}}(o,c,"query",m),A=S[0],j=S[1],O=S[2],_=S[3];return A&&j?A.obsSet=m.obsSet:(j=f.query(m).then(function(C){var P=C.result;if(A&&(A.res=P),b){for(var R=0,D=P.length;R<D;++R)Object.freeze(P[R]);Object.freeze(P)}else C.result=Ne(P);return C}).catch(function(C){return _&&A&&Ae(_,A),Promise.reject(C)}),A={obsSet:m.obsSet,promise:j,subscribers:new Set,type:"query",req:m,dirty:!1},_?_.push(A):(_=[A],(O=O||(Yt["idb://".concat(o,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=_)),Wl(A,_,w,k),A.promise.then(function(C){return{result:Do(C.result,m,O==null?void 0:O.optimisticOps,f,A,b)}})}})}})}};function Br(n,o){return new Proxy(n,{get:function(c,f,h){return f==="db"?o:Reflect.get(c,f,h)}})}var Nt=(Fe.prototype.version=function(n){if(isNaN(n)||n<.1)throw new oe.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var o=this._versions,c=o.filter(function(f){return f._cfg.version===n})[0];return c||(c=new this.Version(n),o.push(c),o.sort(Dl),c.stores({}),this._state.autoSchema=!1,c)},Fe.prototype._whenReady=function(n){var o=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?n():new ne(function(c,f){if(o._state.openComplete)return f(new oe.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void f(new oe.DatabaseClosed);o.open().catch(Se)}o._state.dbReadyPromise.then(c,f)}).then(n)},Fe.prototype.use=function(n){var o=n.stack,c=n.create,f=n.level,h=n.name;return h&&this.unuse({stack:o,name:h}),n=this._middlewares[o]||(this._middlewares[o]=[]),n.push({stack:o,create:c,level:f??10,name:h}),n.sort(function(m,b){return m.level-b.level}),this},Fe.prototype.unuse=function(n){var o=n.stack,c=n.name,f=n.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(h){return f?h.create!==f:!!c&&h.name!==c})),this},Fe.prototype.open=function(){var n=this;return Vt(At,function(){return Fl(n)})},Fe.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,o=gn.indexOf(this);if(0<=o&&gn.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new ne(function(c){n.dbReadyResolve=c}),n.openCanceller=new ne(function(c,f){n.cancelOpen=f}))},Fe.prototype.close=function(c){var o=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;o?(c.isBeingOpened&&c.cancelOpen(new oe.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new oe.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},Fe.prototype.delete=function(n){var o=this;n===void 0&&(n={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ne(function(h,m){function b(){o.close(n);var w=o._deps.indexedDB.deleteDatabase(o.name);w.onsuccess=Oe(function(){var k,S,A;k=o._deps,S=o.name,A=k.indexedDB,k=k.IDBKeyRange,La(A)||S===Sr||Ia(A,k).delete(S).catch(Se),h()}),w.onerror=yt(m),w.onblocked=o._fireOnBlocked}if(c)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(b):b()})},Fe.prototype.backendDB=function(){return this.idbdb},Fe.prototype.isOpen=function(){return this.idbdb!==null},Fe.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},Fe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fe.prototype,"tables",{get:function(){var n=this;return d(this._allTables).map(function(o){return n._allTables[o]})},enumerable:!1,configurable:!0}),Fe.prototype.transaction=function(){var n=(function(o,c,f){var h=arguments.length;if(h<2)throw new oe.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return f=m.pop(),[o,Te(m),f]}).apply(this,arguments);return this._transaction.apply(this,n)},Fe.prototype._transaction=function(n,o,c){var f=this,h=ue.trans;h&&h.db===this&&n.indexOf("!")===-1||(h=null);var m,b,w=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(b=o.map(function(S){if(S=S instanceof f.Table?S.name:S,typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),n=="r"||n===_a)m=_a;else{if(n!="rw"&&n!=Ea)throw new oe.InvalidArgument("Invalid transaction mode: "+n);m=Ea}if(h){if(h.mode===_a&&m===Ea){if(!w)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&b.forEach(function(S){if(h&&h.storeNames.indexOf(S)===-1){if(!w)throw new oe.SubTransaction("Table "+S+" not included in parent transaction.");h=null}}),w&&h&&!h.active&&(h=null)}}catch(S){return h?h._promise(null,function(A,j){j(S)}):Le(S)}var k=(function S(A,j,O,_,C){return ne.resolve().then(function(){var P=ue.transless||ue,R=A._createTransaction(j,O,A._dbSchema,_);if(R.explicit=!0,P={trans:R,transless:P},_)R.idbtrans=_.idbtrans;else try{R.create(),R.idbtrans._explicit=!0,A._state.PR1398_maxLoop=3}catch(F){return F.name===De.InvalidState&&A.isOpen()&&0<--A._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),A.close({disableAutoOpen:!1}),A.open().then(function(){return S(A,j,O,null,C)})):Le(F)}var D,M=Ee(C);return M&&pn(),P=ne.follow(function(){var F;(D=C.call(R,R))&&(M?(F=Ot.bind(null,null),D.then(F,F)):typeof D.next=="function"&&typeof D.throw=="function"&&(D=Wa(D)))},P),(D&&typeof D.then=="function"?ne.resolve(D).then(function(F){return R.active?F:Le(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return D})).then(function(F){return _&&R._resolve(),R._completion.then(function(){return F})}).catch(function(F){return R._reject(F),Le(F)})})}).bind(null,this,m,b,h,c);return h?h._promise(m,k,"lock"):ue.trans?Vt(ue.transless,function(){return f._whenReady(k)}):this._whenReady(k)},Fe.prototype.table=function(n){if(!v(this._allTables,n))throw new oe.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},Fe);function Fe(n,o){var c=this;this._middlewares={},this.verno=0;var f=Fe.dependencies;this._options=o=s({addons:Fe.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},f=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,b,w,k,S={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};S.dbReadyPromise=new ne(function(j){S.dbReadyResolve=j}),S.openCanceller=new ne(function(j,O){S.cancelOpen=O}),this._state=S,this.name=n,this.on=zn(this,"populate","blocked","versionchange","close",{ready:[ya,Se]}),this.once=function(j,O){var _=function(){for(var C=[],P=0;P<arguments.length;P++)C[P]=arguments[P];c.on(j).unsubscribe(_),O.apply(c,C)};return c.on(j,_)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(j){return function(O,_){Fe.vip(function(){var C,P=c._state;P.openComplete?(P.dbOpenError||ne.resolve().then(O),_&&j(O)):P.onReadyBeingFired?(P.onReadyBeingFired.push(O),_&&j(O)):(j(O),C=c,_||j(function R(){C.on.ready.unsubscribe(O),C.on.ready.unsubscribe(R)}))})}}),this.Collection=(h=this,Wn(Cl.prototype,function(D,R){this.db=h;var _=uo,C=null;if(R)try{_=R()}catch(M){C=M}var P=D._ctx,R=P.table,D=R.hook.reading.fire;this._ctx={table:R,index:P.index,isPrimKey:!P.index||R.schema.primKey.keyPath&&P.index===R.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:C,or:P.or,valueMapper:D!==Ln?D:null}})),this.Table=(m=this,Wn(yo.prototype,function(j,O,_){this.db=m,this._tx=_,this.name=j,this.schema=O,this.hook=m._allTables[j]?m._allTables[j].hook:zn(null,{creating:[bl,Se],reading:[xl,Ln],updating:[wl,Se],deleting:[vl,Se]})})),this.Transaction=(b=this,Wn(Rl.prototype,function(j,O,_,C,P){var R=this;j!=="readonly"&&O.forEach(function(D){D=(D=_[D])===null||D===void 0?void 0:D.yProps,D&&(O=O.concat(D.map(function(M){return M.updatesTable})))}),this.db=b,this.mode=j,this.storeNames=O,this.schema=_,this.chromeTransactionDurability=C,this.idbtrans=null,this.on=zn(this,"complete","error","abort"),this.parent=P||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(D,M){R._resolve=D,R._reject=M}),this._completion.then(function(){R.active=!1,R.on.complete.fire()},function(D){var M=R.active;return R.active=!1,R.on.error.fire(D),R.parent?R.parent._reject(D):M&&R.idbtrans&&R.idbtrans.abort(),Le(D)})})),this.Version=(w=this,Wn(Ll.prototype,function(j){this.db=w,this._cfg={version:j,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(k=this,Wn(jo.prototype,function(j,O,_){if(this.db=k,this._ctx={table:j,index:O===":id"?null:O,or:_},this._cmp=this._ascending=je,this._descending=function(C,P){return je(P,C)},this._max=function(C,P){return 0<je(C,P)?C:P},this._min=function(C,P){return je(C,P)<0?C:P},this._IDBKeyRange=k._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(j){0<j.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(j){!j.newVersion||j.newVersion<j.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(j.oldVersion/10))}),this._maxKey=Gn(o.IDBKeyRange),this._createTransaction=function(j,O,_,C){return new c.Transaction(j,O,_,c._options.chromeTransactionDurability,C)},this._fireOnBlocked=function(j){c.on("blocked").fire(j),gn.filter(function(O){return O.name===c.name&&O!==c&&!O._state.vcFired}).map(function(O){return O.on("versionchange").fire(j)})},this.use(ql),this.use(Vl),this.use(Ul),this.use(Bl),this.use(Kl);var A=new Proxy(this,{get:function(j,O,_){if(O==="_vip")return!0;if(O==="table")return function(P){return Br(c.table(P),A)};var C=Reflect.get(j,O,_);return C instanceof yo?Br(C,A):O==="tables"?C.map(function(P){return Br(P,A)}):O==="_createTransaction"?function(){return Br(C.apply(this,arguments),A)}:C}});this.vip=A,f.forEach(function(j){return j(c)})}var Kr,lt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Hl=(Ya.prototype.subscribe=function(n,o,c){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:o,complete:c})},Ya.prototype[lt]=function(){return this},Ya);function Ya(n){this._subscribe=n}try{Kr={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Kr={indexedDB:null,IDBKeyRange:null}}function Io(n){var o,c=!1,f=new Hl(function(h){var m=Ee(n),b,w=!1,k={},S={},A={get closed(){return w},unsubscribe:function(){w||(w=!0,b&&b.abort(),j&&Dt.storagemutated.unsubscribe(_))}};h.start&&h.start(A);var j=!1,O=function(){return Sa(C)},_=function(P){Ir(k,P),Ka(S,k)&&O()},C=function(){var P,R,D;!w&&Kr.indexedDB&&(k={},P={},b&&b.abort(),b=new AbortController,D=function(M){var F=hn();try{m&&pn();var K=Rt(n,M);return K=m?K.finally(Ot):K}finally{F&&mn()}}(R={subscr:P,signal:b.signal,requery:O,querier:n,trans:null}),Promise.resolve(D).then(function(M){c=!0,o=M,w||R.signal.aborted||(k={},function(F){for(var K in F)if(v(F,K))return;return 1}(S=P)||j||(Dt(Hn,_),j=!0),Sa(function(){return!w&&h.next&&h.next(M)}))},function(M){c=!1,["DatabaseClosedError","AbortError"].includes(M==null?void 0:M.name)||w||Sa(function(){w||h.error&&h.error(M)})}))};return setTimeout(O,0),A});return f.hasValue=function(){return c},f.getValue=function(){return o},f}var Jt=Nt;function Ja(n){var o=Mt;try{Mt=!0,Dt.storagemutated.fire(n),za(n,!0)}finally{Mt=o}}T(Jt,s(s({},gr),{delete:function(n){return new Jt(n,{addons:[]}).delete()},exists:function(n){return new Jt(n,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return o=Jt.dependencies,c=o.indexedDB,o=o.IDBKeyRange,(La(c)?Promise.resolve(c.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==Sr})}):Ia(c,o).toCollection().primaryKeys()).then(n)}catch{return Le(new oe.MissingAPI)}var o,c},defineClass:function(){return function(n){p(this,n)}},ignoreTransaction:function(n){return ue.trans?Vt(ue.transless,n):n()},vip:Fa,async:function(n){return function(){try{var o=Wa(n.apply(this,arguments));return o&&typeof o.then=="function"?o:ne.resolve(o)}catch(c){return Le(c)}}},spawn:function(n,o,c){try{var f=Wa(n.apply(c,o||[]));return f&&typeof f.then=="function"?f:ne.resolve(f)}catch(h){return Le(h)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(n,o){return o=ne.resolve(typeof n=="function"?Jt.ignoreTransaction(n):n).timeout(o||6e4),ue.trans?ue.trans.waitFor(o):o},Promise:ne,debug:{get:function(){return gt},set:function(n){ro(n)}},derive:E,extend:p,props:T,override:W,Events:zn,on:Dt,liveQuery:Io,extendObservabilitySet:Ir,getByKeyPath:J,setByKeyPath:X,delByKeyPath:function(n,o){typeof o=="string"?X(n,o,void 0):"length"in o&&[].map.call(o,function(c){X(n,c,void 0)})},shallowClone:ce,deepClone:Ne,getObjectDiff:Va,cmp:je,asap:ae,minKey:-1/0,addons:[],connections:gn,errnames:De,dependencies:Kr,cache:Yt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(n){return parseInt(n)}).reduce(function(n,o,c){return n+o/Math.pow(10,2*c)})})),Jt.maxKey=Gn(Jt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Dt(Hn,function(n){Mt||(n=new CustomEvent(Aa,{detail:n}),Mt=!0,dispatchEvent(n),Mt=!1)}),addEventListener(Aa,function(n){n=n.detail,Mt||Ja(n)}));var vn,Mt=!1,Lo=function(){};return typeof BroadcastChannel<"u"&&((Lo=function(){(vn=new BroadcastChannel(Aa)).onmessage=function(n){return n.data&&Ja(n.data)}})(),typeof vn.unref=="function"&&vn.unref(),Dt(Hn,function(n){Mt||vn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Nt.disableBfCache&&n.persisted){gt&&console.debug("Dexie: handling persisted pagehide"),vn!=null&&vn.close();for(var o=0,c=gn;o<c.length;o++)c[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Nt.disableBfCache&&n.persisted&&(gt&&console.debug("Dexie: handling persisted pageshow"),Lo(),Ja({all:new He(-1/0,[[]])}))})),ne.rejectionMapper=function(n,o){return!n||n instanceof de||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Bt[n.name]?n:(o=new Bt[n.name](o||n.message,n),"stack"in n&&N(o,"stack",{get:function(){return this.inner.stack}}),o)},ro(gt),s(Nt,Object.freeze({__proto__:null,Dexie:Nt,liveQuery:Io,Entity:fo,cmp:je,PropModification:Un,replacePrefix:function(n,o){return new Un({replacePrefix:[n,o]})},add:function(n){return new Un({add:n})},remove:function(n){return new Un({remove:n})},default:Nt,RangeSet:He,mergeRanges:Qn,rangesOverlap:Eo}),{default:Nt}),Nt})})(Mc);var fh=Mc.exports;const Cs=au(fh),mi=Symbol.for("Dexie"),aa=globalThis[mi]||(globalThis[mi]=Cs);if(Cs.semVer!==aa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Cs.semVer} and ${aa.semVer}`);const{liveQuery:Xy,mergeRanges:Zy,rangesOverlap:ex,RangeSet:tx,cmp:nx,Entity:rx,PropModification:ax,replacePrefix:sx,add:ox,remove:ix,DexieYProvider:cx}=aa,hh="smartmoney-db",Ic=1;class mh extends aa{constructor(){super(hh);Xt(this,"transactions");Xt(this,"accounts");Xt(this,"budgets");Xt(this,"goals");Xt(this,"sync_queue");Xt(this,"app_meta");this.version(Ic).stores({transactions:"++id, date, category, source, type, account_id, [date+category], [date+account_id]",accounts:"++id, name, type, is_active, currency",budgets:"++id, month",goals:"++id, status, end_date",sync_queue:"++id, timestamp, retry_count, status, entity_type",app_meta:"id"})}}const dt=new mh;function ph(){try{return typeof indexedDB<"u"&&indexedDB!==null}catch{return!1}}async function gh(){if(!ph())return console.warn("IndexedDB not available in this browser"),!1;try{return await dt.open(),await dt.app_meta.get("app-state")||await dt.app_meta.put({id:"app-state",schema_version:Ic}),!0}catch(e){return console.error("Failed to initialize IndexedDB:",e),!1}}const pi=[1e3,2e3,4e3,8e3,16e3],gi=5;async function lx(e,t,r,s){const i={operation_type:e,entity_type:t,entity_id:r,payload:s,timestamp:Date.now(),retry_count:0,status:"pending"};return await dt.sync_queue.add(i)}function yh(e,t){const r=`/api/${e}s`;return typeof t=="number"&&t>0?`${r}/${t}`:r}function xh(e){switch(e){case"CREATE":return"POST";case"UPDATE":return"PUT";case"DELETE":return"DELETE"}}async function bh(e){const t=yh(e.entity_type,e.entity_id),r=xh(e.operation_type),s=await re.request({method:r,url:t,data:e.operation_type!=="DELETE"?e.payload:void 0});if(s.status>=400)throw new Error(`Sync failed: ${s.status}`)}async function vh(){const e=await dt.sync_queue.where("status").equals("pending").and(s=>s.retry_count<gi).sortBy("timestamp");let t=0,r=0;for(const s of e)try{if(await dt.sync_queue.update(s.id,{status:"processing"}),s.retry_count>0){const i=pi[Math.min(s.retry_count-1,pi.length-1)];await new Promise(l=>setTimeout(l,i))}await bh(s),await dt.sync_queue.delete(s.id),t++}catch(i){const l=i instanceof Error?i.message:"Unknown error",d=s.retry_count+1;await dt.sync_queue.update(s.id,{status:d>=gi?"failed":"pending",retry_count:d,last_error:l}),r++}return{processed:t,failed:r}}async function Ps(){return await dt.sync_queue.where("status").equals("pending").count()}let Xr=null,rs=!1;const As=new Set;let Zr={isOnline:navigator.onLine,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null};function wh(e){return As.add(e),e(Zr),()=>As.delete(e)}function nn(e){Zr={...Zr,...e},As.forEach(t=>t(Zr))}async function ea(){if(!(rs||!navigator.onLine)){rs=!0,nn({isSyncing:!0});try{const e=await vh(),t=await Ps();nn({isSyncing:!1,pendingCount:t,lastSyncAt:new Date,lastError:e.failed>0?`${e.failed} operations failed`:null})}catch(e){nn({isSyncing:!1,lastError:e instanceof Error?e.message:"Sync failed"})}finally{rs=!1}}}function jh(){const e=async()=>{nn({isOnline:!0}),await ea()},t=()=>{nn({isOnline:!1})};window.addEventListener("online",e),window.addEventListener("offline",t),document.addEventListener("visibilitychange",async()=>{!document.hidden&&navigator.onLine&&await ea()}),Xr=setInterval(async()=>{if(navigator.onLine){const r=await Ps();nn({pendingCount:r}),r>0&&await ea()}},3e4),Ps().then(r=>nn({pendingCount:r}))}function kh(){Xr&&(clearInterval(Xr),Xr=null)}const Lc={isOnline:!0,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null},Fc=y.createContext({...Lc,triggerSync:async()=>{}});function Nh({children:e}){const[t,r]=y.useState(Lc);y.useEffect(()=>{jh();const i=wh(r);return()=>{i(),kh()}},[]);const s=y.useCallback(async()=>{await ea()},[]);return a.jsx(Fc.Provider,{value:{...t,triggerSync:s},children:e})}function Sh(){return y.useContext(Fc)}const _h=["auth","user","session","credit"],Eh=new eu({defaultOptions:{queries:{gcTime:1e3*60*60*24,staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}});function Ch(e){const t=e[0];return typeof t!="string"?!0:!_h.includes(t)}function Rs(){}function Ph(e,{interval:t=1e3,onError:r=Rs}={}){if(typeof e!="function")throw new Error("argument is not function.");let s=0,i=null,l=!1,d=!1;return async(...u)=>{if(i=u,!d){for(d=!0;l;)await new Promise(p=>Fo.setTimeout(p,t));for(;Date.now()<s;)await new Promise(p=>Fo.setTimeout(p,s-Date.now()));d=!1,l=!0;try{await e(...i)}catch(p){try{r(p)}catch{}}s=Date.now()+t,l=!1}}}var Ah=({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:r=1e3,serialize:s=JSON.stringify,deserialize:i=JSON.parse,retry:l})=>{if(e){const d=async u=>{try{const p=await s(u);await e.setItem(t,p);return}catch(p){return p}};return{persistClient:Ph(async u=>{let p=u,g=await d(p),x=0;for(;g&&p;)x++,p=await(l==null?void 0:l({persistedClient:p,error:g,errorCount:x})),p&&(g=await d(p))},{interval:r}),restoreClient:async()=>{const u=await e.getItem(t);if(u)return await i(u)},removeClient:()=>e.removeItem(t)}}return{persistClient:Rs,restoreClient:()=>Promise.resolve(void 0),removeClient:Rs}};const Rh="tanstack-query-cache",Oh={getItem:async e=>{try{const t=await dt.app_meta.get(e);return t?JSON.stringify(t):null}catch(t){return console.warn("Failed to read from IndexedDB:",t),null}},setItem:async(e,t)=>{try{const r=JSON.parse(t);await dt.app_meta.put({id:e,...r})}catch(r){console.warn("Failed to write to IndexedDB:",r)}},removeItem:async e=>{try{await dt.app_meta.delete(e)}catch(t){console.warn("Failed to remove from IndexedDB:",t)}}},Th=Ah({storage:Oh,throttleTime:1e4,key:Rh}),$h="modulepreload",Dh=function(e){return"/"+e},yi={},et=function(t,r,s){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=Promise.allSettled(r.map(p=>{if(p=Dh(p),p in yi)return;yi[p]=!0;const g=p.endsWith(".css"),x=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const v=document.createElement("link");if(v.rel=g?"stylesheet":$h,g||(v.as="script"),v.crossOrigin="",v.href=p,u&&v.setAttribute("nonce",u),document.head.appendChild(v),g)return new Promise((T,L)=>{v.addEventListener("load",T),v.addEventListener("error",()=>L(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return i.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})},as=[{code:"ja",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function xi(){const{i18n:e,t}=we("common"),[r,s]=y.useState(!1),i=y.useRef(null),l=as.find(u=>u.code===e.language)||as[0],d=u=>{e.changeLanguage(u),s(!1)};return y.useEffect(()=>{function u(p){i.current&&!i.current.contains(p.target)&&s(!1)}return r&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[r]),a.jsxs("div",{className:"relative",ref:i,children:[a.jsxs("button",{onClick:()=>s(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":t("language.selectLanguage"),"aria-expanded":r,"aria-haspopup":"true",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:l.flag}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline text-gray-700 dark:text-gray-200",children:l.name}),a.jsx("svg",{className:te("w-4 h-4 transition-transform",r&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:as.map(u=>a.jsxs("button",{onClick:()=>d(u.code),className:te("w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","first:rounded-t-lg last:rounded-b-lg","text-gray-700 dark:text-gray-200",e.language===u.code&&"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400"),role:"menuitem",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:u.flag}),a.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:u.name}),e.language===u.code&&a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-label":"Selected",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},u.code))})]})}function bi(){const{t:e}=we("common"),{resolvedTheme:t,setTheme:r}=Pc(),s=()=>{r(t==="dark"?"light":"dark")};return a.jsx("button",{onClick:s,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus-ring","aria-label":e(t==="dark"?"aria.lightMode":"aria.darkMode"),title:e(t==="dark"?"aria.lightMode":"aria.darkMode"),children:t==="dark"?a.jsx(zi,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(Wi,{className:"w-5 h-5","aria-hidden":"true"})})}function Mh(){const{t:e}=we("common"),{logout:t}=ha(),{isPrivacyMode:r,togglePrivacyMode:s}=hr();return a.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex items-center justify-between h-16",children:[a.jsxs(Ve,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[a.jsx("svg",{className:"w-8 h-8 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),a.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"})]}),a.jsxs("nav",{className:"hidden md:flex items-center gap-6",role:"navigation","aria-label":e("aria.mainNavigation"),children:[a.jsx(_t,{to:"/",children:e("header.dashboard")}),a.jsx(_t,{to:"/upload",children:e("header.upload")}),a.jsx(_t,{to:"/transactions",children:e("header.transactions")}),a.jsx(_t,{to:"/recurring",children:e("header.recurring")}),a.jsx(_t,{to:"/accounts",children:e("header.accounts")}),a.jsx(_t,{to:"/analytics",children:e("header.analytics")}),a.jsx(_t,{to:"/goals",children:e("header.goals")}),a.jsx(_t,{to:"/budget",children:e("header.budget")}),a.jsx(_t,{to:"/settings",children:e("header.settings")}),a.jsx("button",{onClick:s,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(r?"aria.showAmounts":"aria.hideAmounts"),title:e(r?"aria.showAmounts":"aria.hideAmounts"),children:r?a.jsx(qo,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(Uo,{className:"w-5 h-5","aria-hidden":"true"})}),a.jsx(bi,{}),a.jsx(xi,{}),a.jsx("button",{onClick:t,className:"text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors px-3 py-1 rounded focus-ring",title:e("auth.logout"),children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}),a.jsxs("div",{className:"md:hidden flex items-center gap-1",children:[a.jsx("button",{onClick:s,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(r?"aria.showAmounts":"aria.hideAmounts"),children:r?a.jsx(qo,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(Uo,{className:"w-5 h-5","aria-hidden":"true"})}),a.jsx(bi,{}),a.jsx(xi,{})]})]})})})}function _t({to:e,children:t}){return a.jsx(Ve,{to:e,className:te("text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors pb-1","focus-ring rounded"),activeProps:{className:"text-primary-600 dark:text-primary-400 font-medium border-b-2 border-primary-600 dark:border-primary-400"},children:t})}function Ih(){const e=new Date().getFullYear();return a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center text-sm text-gray-500",children:a.jsxs("p",{children:[" ",e," SmartMoney. All rights reserved."]})})})})}const Lh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Fh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Bh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Kh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),qh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),Uh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),zh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Wh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),Vh=({className:e})=>a.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Hh=({className:e})=>a.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Gh=[{path:"/",icon:Lh,labelKey:"nav.dashboard"},{path:"/transactions",icon:Fh,labelKey:"nav.transactions"},{path:"/budget",icon:Bh,labelKey:"nav.budget"},{path:"/analytics",icon:Kh,labelKey:"nav.analytics"},{path:"more",icon:qh,labelKey:"nav.more"}],vi=[{path:"/upload",icon:Uh,labelKey:"header.upload"},{path:"/accounts",icon:zh,labelKey:"header.accounts"},{path:"/goals",icon:Wh,labelKey:"header.goals"},{path:"/settings",icon:Vh,labelKey:"header.settings"}];function Yh(){const{t:e}=we("common"),t=sa(),{logout:r}=ha(),[s,i]=y.useState(!1),l=u=>u==="/"?t.pathname==="/":t.pathname.startsWith(u),d=vi.some(u=>l(u.path));return a.jsxs(a.Fragment,{children:[s&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>i(!1)}),s&&a.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 md:hidden rounded-t-2xl shadow-lg animate-slide-up",children:a.jsxs("div",{className:"p-4 space-y-2",children:[vi.map(u=>a.jsxs(Ve,{to:u.path,onClick:()=>i(!1),className:te("flex items-center gap-3 px-4 py-3 rounded-xl transition-colors",l(u.path)?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[a.jsx(u.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e(u.labelKey)})]},u.path)),a.jsxs("button",{onClick:()=>{i(!1),r()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[a.jsx(Hh,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})}),a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 md:hidden safe-area-bottom",children:a.jsx("div",{className:"flex items-center justify-around h-16",children:Gh.map(u=>{const p=u.path==="more"?d:l(u.path);return u.path==="more"?a.jsxs("button",{onClick:()=>i(!s),className:te("flex flex-col items-center justify-center flex-1 h-full py-2 transition-colors",p||s?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"),children:[a.jsx(u.icon,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:e(u.labelKey)})]},u.path):a.jsxs(Ve,{to:u.path,onClick:()=>i(!1),className:te("flex flex-col items-center justify-center flex-1 h-full py-2 transition-colors",p?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"),children:[a.jsx(u.icon,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:e(u.labelKey)})]},u.path)})})})]})}function Jh({onClick:e,hasUnread:t=!1}){const r=a.jsxs("button",{onClick:e,className:te("fixed bottom-24 right-4 sm:bottom-6 sm:right-6 z-50","w-14 h-14 rounded-full","bg-primary-500 text-white shadow-lg","hover:bg-primary-600 hover:scale-105","active:scale-95","transition-all duration-200","flex items-center justify-center","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"),"aria-label":"Open AI Assistant",children:[a.jsx(du,{className:"w-6 h-6"}),t&&a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse"})]});return typeof document<"u"?Pt.createPortal(r,document.body):null}function Qh({onClose:e,credits:t}){const{t:r}=we();return a.jsxs("div",{className:te("flex items-center justify-between","px-4 py-3 border-b border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Fs,{className:"w-5 h-5 text-primary-500"}),a.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:r("chat.title")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[t!==null&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r("chat.credits",{count:t})}),a.jsx("button",{onClick:e,className:te("p-1.5 rounded-lg","text-gray-500 hover:text-gray-700","dark:text-gray-400 dark:hover:text-gray-200","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors"),"aria-label":r("common.close"),children:a.jsx(un,{className:"w-5 h-5"})})]})]})}function Xh({role:e,content:t}){const r=e==="user";return a.jsxs("div",{className:te("flex gap-3",r?"flex-row-reverse":"flex-row"),children:[a.jsx("div",{className:te("flex-shrink-0 w-8 h-8 rounded-full","flex items-center justify-center",r?"bg-primary-100 dark:bg-primary-900":"bg-gray-100 dark:bg-gray-700"),children:r?a.jsx(fu,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"}):a.jsx(Fs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a.jsx("div",{className:te("max-w-[80%] px-4 py-2.5 rounded-2xl","text-sm leading-relaxed",r?"bg-primary-500 text-white rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-md"),children:a.jsx("p",{className:"whitespace-pre-wrap",children:t})})]})}function Zh({action:e,onApply:t,onSkip:r,isApplying:s=!1}){const{t:i}=we(),l=()=>e.type==="create_goal"?a.jsx(Tn,{className:"w-5 h-5 text-primary-500"}):e.type==="create_budget"?a.jsx(Vi,{className:"w-5 h-5 text-primary-500"}):null,d=()=>i(`chat.action.${e.type}`);return a.jsxs("div",{className:te("bg-primary-50 dark:bg-primary-900/30","border border-primary-200 dark:border-primary-700","rounded-lg p-3 mt-2"),children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:d()}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:e.description})]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:t,disabled:s,className:te("flex-1 px-3 py-1.5 text-sm font-medium rounded-md","bg-primary-500 text-white","hover:bg-primary-600","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors","flex items-center justify-center gap-1.5"),children:s?a.jsxs(a.Fragment,{children:[a.jsx(Bs,{className:"w-3.5 h-3.5 animate-spin"}),i("common.loading")]}):i("chat.apply")}),a.jsx("button",{onClick:r,disabled:s,className:te("px-3 py-1.5 text-sm font-medium rounded-md","border border-gray-300 dark:border-gray-600","text-gray-700 dark:text-gray-300","hover:bg-gray-100 dark:hover:bg-gray-700","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors"),children:i("chat.skip")})]})]})}function em({messages:e,isLoading:t,applyingAction:r,onApplyAction:s,onSkipAction:i}){const{t:l}=we(),d=y.useRef(null);return y.useEffect(()=>{var u;(u=d.current)==null||u.scrollIntoView({behavior:"smooth"})},[e,t]),a.jsxs("div",{className:te("flex-1 overflow-y-auto","px-4 py-4 space-y-4","bg-gray-50 dark:bg-gray-900"),children:[e.length===0&&!t&&a.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:a.jsx("p",{children:l("chat.welcomeMessage")})}),e.map((u,p)=>a.jsxs("div",{children:[a.jsx(Xh,{role:u.role,content:u.content}),u.action&&a.jsx("div",{className:"ml-11",children:a.jsx(Zh,{action:u.action,onApply:()=>s(p),onSkip:()=>i(p),isApplying:r===p})})]},p)),t&&a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:a.jsx(Bs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 animate-spin"})}),a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-2.5 rounded-2xl rounded-bl-md",children:a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l("chat.thinking")})})]}),a.jsx("div",{ref:d})]})}function tm({onSend:e,disabled:t=!1}){const{t:r}=we(),[s,i]=y.useState(""),l=y.useRef(null);y.useEffect(()=>{const p=l.current;p&&(p.style.height="auto",p.style.height=Math.min(p.scrollHeight,120)+"px")},[s]);const d=()=>{const p=s.trim();p&&!t&&(e(p),i(""))},u=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),d())};return a.jsx("div",{className:te("px-4 py-3 border-t border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800"),children:a.jsxs("div",{className:te("flex items-end gap-2","bg-gray-100 dark:bg-gray-700 rounded-2xl","px-4 py-2"),children:[a.jsx("textarea",{ref:l,value:s,onChange:p=>i(p.target.value),onKeyDown:u,placeholder:r("chat.placeholder"),disabled:t,rows:1,className:te("flex-1 bg-transparent resize-none","text-sm text-gray-900 dark:text-white","placeholder-gray-500 dark:placeholder-gray-400","focus:outline-none","disabled:opacity-50 disabled:cursor-not-allowed","max-h-[120px]")}),a.jsx("button",{onClick:d,disabled:t||!s.trim(),className:te("p-2 rounded-full","bg-primary-500 text-white","hover:bg-primary-600","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors","flex-shrink-0"),"aria-label":r("chat.send"),children:a.jsx(hu,{className:"w-4 h-4"})})]})})}async function nm(e,t="ja"){return(await re.post("/api/chat",{messages:e,language:t})).data}async function Bc(){return(await re.get("/api/goals/")).data}async function ux(e){return(await re.get(`/api/goals/${e}`)).data}async function rm(e){return(await re.post("/api/goals/",e)).data}async function dx(e,t){return(await re.put(`/api/goals/${e}`,t)).data}async function fx(e){await re.delete(`/api/goals/${e}`)}async function am(e,t=!0,r=3){const s=new URLSearchParams;return t&&(s.append("include_achievability","true"),s.append("trend_months",r.toString())),(await re.get(`/api/goals/${e}/progress?${s.toString()}`)).data}async function hx(){return(await re.get("/api/goals/status/has-emergency-fund")).data.has_emergency_fund}async function sm(e){return(await re.post("/api/budgets/generate",e)).data}async function mx(){return(await re.get("/api/budgets/current")).data}async function px(e,t){return(await re.post(`/api/budgets/${e}/regenerate`,t)).data}async function gx(){return(await re.get("/api/budgets/tracking/current")).data}async function yx(){return(await re.get("/api/budgets/suggestions")).data}async function xx(e,t,r){return(await re.patch(`/api/budgets/${e}/allocations/${encodeURIComponent(t)}`,{amount:r})).data}async function bx(e,t){return(await re.delete(`/api/budgets/${e}/allocations/${encodeURIComponent(t)}`)).data}function om({isOpen:e,onClose:t}){const{t:r,i18n:s}=we(),i=or(),[l,d]=y.useState([]),[u,p]=y.useState(!1),[g,x]=y.useState(null),[v,T]=y.useState(null);y.useEffect(()=>{const B=U=>{U.key==="Escape"&&e&&t()};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,t]);const L=y.useCallback(async B=>{const U={role:"user",content:B},W=[...l,U];d(W),p(!0);try{const V=await nm(W,s.language);d(ae=>[...ae,{role:"assistant",content:V.message,action:V.suggested_action}]),x(V.credits_remaining)}catch(V){const ae=V instanceof Error?V.message:"Unknown error";ae.includes("402")||ae.includes("credits")?d(J=>[...J,{role:"assistant",content:r("chat.noCredits")}]):d(J=>[...J,{role:"assistant",content:r("chat.error")}])}finally{p(!1)}},[l,s.language,r]),N=y.useCallback(async B=>{const U=l[B];if(U!=null&&U.action){T(B);try{await E(U.action),d(W=>{const V=[...W];return V[B]={...V[B],action:null},[...V,{role:"assistant",content:r("chat.actionApplied")}]}),U.action.type==="create_goal"?i.invalidateQueries({queryKey:["goals"]}):U.action.type==="create_budget"&&i.invalidateQueries({queryKey:["budget"]})}catch(W){console.error("Failed to apply action:",W),d(V=>[...V,{role:"assistant",content:r("chat.actionFailed")}])}finally{T(null)}}},[l,i,r]),E=async B=>{if(B.type==="create_goal"){const U=B.payload,V=["emergency_fund","home_down_payment","vacation_travel","vehicle","education","wedding","large_purchase","debt_payoff","retirement","investment","custom"].includes(U.goal_type||"")?U.goal_type:"custom";await rm({goal_type:V,target_amount:U.target_amount||1e5,years:U.years||1,name:U.name})}else if(B.type==="create_budget"){const U=B.payload;await sm({monthly_income:U.monthly_income||3e5,feedback:U.feedback,language:s.language})}},$=y.useCallback(B=>{d(U=>{const W=[...U];return W[B]={...W[B],action:null},W})},[]);return a.jsxs(a.Fragment,{children:[e&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 sm:hidden",onClick:t}),a.jsxs("div",{className:te("fixed right-0 top-0 h-full z-50","w-full sm:w-96","bg-white dark:bg-gray-800","shadow-2xl","flex flex-col","transform transition-transform duration-300 ease-out",e?"translate-x-0":"-translate-x-full pointer-events-none"),children:[a.jsx(Qh,{onClose:t,credits:g}),a.jsx(em,{messages:l,isLoading:u,applyingAction:v,onApplyAction:N,onSkipAction:$}),a.jsx(tm,{onSend:L,disabled:u})]})]})}const im=["/transactions"];function cm({onAddTransaction:e}){const{t}=we("common"),r=jt(),s=sa(),[i,l]=y.useState(!1);if(im.includes(s.pathname))return null;const d=[{icon:a.jsx(Hi,{size:20}),label:t("transaction.addTransaction","Add Transaction"),onClick:()=>{l(!1),e?e():r({to:"/transactions"})},color:"bg-green-500 hover:bg-green-600"},{icon:a.jsx(vs,{size:20}),label:t("receipt.scanReceipt","Scan Receipt"),onClick:()=>{l(!1),r({to:"/transactions"})},color:"bg-purple-500 hover:bg-purple-600"},{icon:a.jsx(ir,{size:20}),label:t("header.upload","Upload CSV"),onClick:()=>{l(!1),r({to:"/upload"})},color:"bg-blue-500 hover:bg-blue-600"}];return a.jsxs(a.Fragment,{children:[i&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>l(!1)}),a.jsxs("div",{className:"fixed bottom-20 right-4 z-50 md:hidden flex flex-col-reverse items-end gap-3",children:[i&&a.jsx("div",{className:"flex flex-col-reverse gap-3 mb-2",children:d.map((u,p)=>a.jsxs("button",{onClick:u.onClick,className:te("flex items-center gap-3 pl-4 pr-5 py-3 rounded-full text-white shadow-lg","transform transition-all duration-200","animate-in fade-in slide-in-from-bottom-2",u.color),style:{animationDelay:`${p*50}ms`,animationFillMode:"both"},children:[u.icon,a.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:u.label})]},p))}),a.jsx("button",{onClick:()=>l(!i),className:te("w-14 h-14 rounded-full shadow-lg flex items-center justify-center","transform transition-all duration-300","active:scale-95",i?"bg-gray-700 dark:bg-gray-600 rotate-45":"bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600"),"aria-label":i?t("common.close","Close"):t("fab.quickActions","Quick Actions"),children:i?a.jsx(un,{size:24,className:"text-white"}):a.jsx(Ks,{size:24,className:"text-white"})})]})]})}function lm({children:e,className:t}){const r=sa(),[s,i]=y.useState(!1),[l,d]=y.useState(e);return y.useEffect(()=>{i(!1);const u=setTimeout(()=>{d(e),i(!0)},100);return()=>clearTimeout(u)},[r.pathname]),y.useEffect(()=>{d(e)},[e]),a.jsx("div",{className:te("transition-all duration-300 ease-out",s?"opacity-100 translate-y-0":"opacity-0 translate-y-2",t),children:l})}var wi=1,um=.9,dm=.8,fm=.17,ss=.1,os=.999,hm=.9999,mm=.99,pm=/[\\\/_+.#"@\[\(\{&]/,gm=/[\\\/_+.#"@\[\(\{&]/g,ym=/[\s-]/,Kc=/[\s-]/g;function Os(e,t,r,s,i,l,d){if(l===t.length)return i===e.length?wi:mm;var u=`${i},${l}`;if(d[u]!==void 0)return d[u];for(var p=s.charAt(l),g=r.indexOf(p,i),x=0,v,T,L,N;g>=0;)v=Os(e,t,r,s,g+1,l+1,d),v>x&&(g===i?v*=wi:pm.test(e.charAt(g-1))?(v*=dm,L=e.slice(i,g-1).match(gm),L&&i>0&&(v*=Math.pow(os,L.length))):ym.test(e.charAt(g-1))?(v*=um,N=e.slice(i,g-1).match(Kc),N&&i>0&&(v*=Math.pow(os,N.length))):(v*=fm,i>0&&(v*=Math.pow(os,g-i))),e.charAt(g)!==t.charAt(l)&&(v*=hm)),(v<ss&&r.charAt(g-1)===s.charAt(l+1)||s.charAt(l+1)===s.charAt(l)&&r.charAt(g-1)!==s.charAt(l))&&(T=Os(e,t,r,s,g+1,l+2,d),T*ss>v&&(v=T*ss)),v>x&&(x=v),g=r.indexOf(p,g+1);return d[u]=x,x}function ji(e){return e.toLowerCase().replace(Kc," ")}function xm(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,Os(e,t,ji(e),ji(t),0,0,{})}function Pn(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e==null||e(i),r===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function bm(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function qc(...e){return t=>e.forEach(r=>bm(r,t))}function mr(...e){return y.useCallback(qc(...e),e)}function vm(e,t){const r=y.createContext(t);function s(l){const{children:d,...u}=l,p=y.useMemo(()=>u,Object.values(u));return y.createElement(r.Provider,{value:p},d)}function i(l){const d=y.useContext(r);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return s.displayName=e+"Provider",[s,i]}function wm(e,t=[]){let r=[];function s(l,d){const u=y.createContext(d),p=r.length;r=[...r,d];function g(v){const{scope:T,children:L,...N}=v,E=(T==null?void 0:T[e][p])||u,$=y.useMemo(()=>N,Object.values(N));return y.createElement(E.Provider,{value:$},L)}function x(v,T){const L=(T==null?void 0:T[e][p])||u,N=y.useContext(L);if(N)return N;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${l}\``)}return g.displayName=l+"Provider",[g,x]}const i=()=>{const l=r.map(d=>y.createContext(d));return function(u){const p=(u==null?void 0:u[e])||l;return y.useMemo(()=>({[`__scope${e}`]:{...u,[e]:p}}),[u,p])}};return i.scopeName=e,[s,jm(i,...t)]}function jm(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const d=s.reduce((u,{useScope:p,scopeName:g})=>{const v=p(l)[`__scope${g}`];return{...u,...v}},{});return y.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return r.scopeName=t.scopeName,r}const Ts=globalThis!=null&&globalThis.document?y.useLayoutEffect:()=>{},km=su.useId||(()=>{});let Nm=0;function is(e){const[t,r]=y.useState(km());return Ts(()=>{r(s=>s??String(Nm++))},[e]),e||(t?`radix-${t}`:"")}function on(e){const t=y.useRef(e);return y.useEffect(()=>{t.current=e}),y.useMemo(()=>(...r)=>{var s;return(s=t.current)===null||s===void 0?void 0:s.call(t,...r)},[])}function Sm({prop:e,defaultProp:t,onChange:r=()=>{}}){const[s,i]=_m({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:s,u=on(r),p=y.useCallback(g=>{if(l){const v=typeof g=="function"?g(e):g;v!==e&&u(v)}else i(g)},[l,e,i,u]);return[d,p]}function _m({defaultProp:e,onChange:t}){const r=y.useState(e),[s]=r,i=y.useRef(s),l=on(t);return y.useEffect(()=>{i.current!==s&&(l(s),i.current=s)},[s,i,l]),r}const Gs=y.forwardRef((e,t)=>{const{children:r,...s}=e,i=y.Children.toArray(r),l=i.find(Cm);if(l){const d=l.props.children,u=i.map(p=>p===l?y.Children.count(d)>1?y.Children.only(null):y.isValidElement(d)?d.props.children:null:p);return y.createElement($s,it({},s,{ref:t}),y.isValidElement(d)?y.cloneElement(d,void 0,u):null)}return y.createElement($s,it({},s,{ref:t}),r)});Gs.displayName="Slot";const $s=y.forwardRef((e,t)=>{const{children:r,...s}=e;return y.isValidElement(r)?y.cloneElement(r,{...Pm(s,r.props),ref:t?qc(t,r.ref):r.ref}):y.Children.count(r)>1?y.Children.only(null):null});$s.displayName="SlotClone";const Em=({children:e})=>y.createElement(y.Fragment,null,e);function Cm(e){return y.isValidElement(e)&&e.type===Em}function Pm(e,t){const r={...t};for(const s in t){const i=e[s],l=t[s];/^on[A-Z]/.test(s)?i&&l?r[s]=(...u)=>{l(...u),i(...u)}:i&&(r[s]=i):s==="style"?r[s]={...i,...l}:s==="className"&&(r[s]=[i,l].filter(Boolean).join(" "))}return{...e,...r}}const Am=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ht=Am.reduce((e,t)=>{const r=y.forwardRef((s,i)=>{const{asChild:l,...d}=s,u=l?Gs:t;return y.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),y.createElement(u,it({},d,{ref:i}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Rm(e,t){e&&Pt.flushSync(()=>e.dispatchEvent(t))}function Om(e,t=globalThis==null?void 0:globalThis.document){const r=on(e);y.useEffect(()=>{const s=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",s),()=>t.removeEventListener("keydown",s)},[r,t])}const Ds="dismissableLayer.update",Tm="dismissableLayer.pointerDownOutside",$m="dismissableLayer.focusOutside";let ki;const Dm=y.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mm=y.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,onDismiss:p,...g}=e,x=y.useContext(Dm),[v,T]=y.useState(null),L=(r=v==null?void 0:v.ownerDocument)!==null&&r!==void 0?r:globalThis==null?void 0:globalThis.document,[,N]=y.useState({}),E=mr(t,ce=>T(ce)),$=Array.from(x.layers),[B]=[...x.layersWithOutsidePointerEventsDisabled].slice(-1),U=$.indexOf(B),W=v?$.indexOf(v):-1,V=x.layersWithOutsidePointerEventsDisabled.size>0,ae=W>=U,J=Im(ce=>{const _e=ce.target,Te=[...x.branches].some(ie=>ie.contains(_e));!ae||Te||(l==null||l(ce),u==null||u(ce),ce.defaultPrevented||p==null||p())},L),X=Lm(ce=>{const _e=ce.target;[...x.branches].some(ie=>ie.contains(_e))||(d==null||d(ce),u==null||u(ce),ce.defaultPrevented||p==null||p())},L);return Om(ce=>{W===x.layers.size-1&&(i==null||i(ce),!ce.defaultPrevented&&p&&(ce.preventDefault(),p()))},L),y.useEffect(()=>{if(v)return s&&(x.layersWithOutsidePointerEventsDisabled.size===0&&(ki=L.body.style.pointerEvents,L.body.style.pointerEvents="none"),x.layersWithOutsidePointerEventsDisabled.add(v)),x.layers.add(v),Ni(),()=>{s&&x.layersWithOutsidePointerEventsDisabled.size===1&&(L.body.style.pointerEvents=ki)}},[v,L,s,x]),y.useEffect(()=>()=>{v&&(x.layers.delete(v),x.layersWithOutsidePointerEventsDisabled.delete(v),Ni())},[v,x]),y.useEffect(()=>{const ce=()=>N({});return document.addEventListener(Ds,ce),()=>document.removeEventListener(Ds,ce)},[]),y.createElement(ht.div,it({},g,{ref:E,style:{pointerEvents:V?ae?"auto":"none":void 0,...e.style},onFocusCapture:Pn(e.onFocusCapture,X.onFocusCapture),onBlurCapture:Pn(e.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Pn(e.onPointerDownCapture,J.onPointerDownCapture)}))});function Im(e,t=globalThis==null?void 0:globalThis.document){const r=on(e),s=y.useRef(!1),i=y.useRef(()=>{});return y.useEffect(()=>{const l=u=>{if(u.target&&!s.current){let g=function(){Uc(Tm,r,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=g,t.addEventListener("click",i.current,{once:!0})):g()}else t.removeEventListener("click",i.current);s.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",l),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>s.current=!0}}function Lm(e,t=globalThis==null?void 0:globalThis.document){const r=on(e),s=y.useRef(!1);return y.useEffect(()=>{const i=l=>{l.target&&!s.current&&Uc($m,r,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ni(){const e=new CustomEvent(Ds);document.dispatchEvent(e)}function Uc(e,t,r,{discrete:s}){const i=r.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),s?Rm(i,l):i.dispatchEvent(l)}const cs="focusScope.autoFocusOnMount",ls="focusScope.autoFocusOnUnmount",Si={bubbles:!1,cancelable:!0},Fm=y.forwardRef((e,t)=>{const{loop:r=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:l,...d}=e,[u,p]=y.useState(null),g=on(i),x=on(l),v=y.useRef(null),T=mr(t,E=>p(E)),L=y.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;y.useEffect(()=>{if(s){let E=function(W){if(L.paused||!u)return;const V=W.target;u.contains(V)?v.current=V:Ft(v.current,{select:!0})},$=function(W){if(L.paused||!u)return;const V=W.relatedTarget;V!==null&&(u.contains(V)||Ft(v.current,{select:!0}))},B=function(W){if(document.activeElement===document.body)for(const ae of W)ae.removedNodes.length>0&&Ft(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",$);const U=new MutationObserver(B);return u&&U.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",$),U.disconnect()}}},[s,u,L.paused]),y.useEffect(()=>{if(u){Ei.add(L);const E=document.activeElement;if(!u.contains(E)){const B=new CustomEvent(cs,Si);u.addEventListener(cs,g),u.dispatchEvent(B),B.defaultPrevented||(Bm(Wm(zc(u)),{select:!0}),document.activeElement===E&&Ft(u))}return()=>{u.removeEventListener(cs,g),setTimeout(()=>{const B=new CustomEvent(ls,Si);u.addEventListener(ls,x),u.dispatchEvent(B),B.defaultPrevented||Ft(E??document.body,{select:!0}),u.removeEventListener(ls,x),Ei.remove(L)},0)}}},[u,g,x,L]);const N=y.useCallback(E=>{if(!r&&!s||L.paused)return;const $=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,B=document.activeElement;if($&&B){const U=E.currentTarget,[W,V]=Km(U);W&&V?!E.shiftKey&&B===V?(E.preventDefault(),r&&Ft(W,{select:!0})):E.shiftKey&&B===W&&(E.preventDefault(),r&&Ft(V,{select:!0})):B===U&&E.preventDefault()}},[r,s,L.paused]);return y.createElement(ht.div,it({tabIndex:-1},d,{ref:T,onKeyDown:N}))});function Bm(e,{select:t=!1}={}){const r=document.activeElement;for(const s of e)if(Ft(s,{select:t}),document.activeElement!==r)return}function Km(e){const t=zc(e),r=_i(t,e),s=_i(t.reverse(),e);return[r,s]}function zc(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function _i(e,t){for(const r of e)if(!qm(r,{upTo:t}))return r}function qm(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Um(e){return e instanceof HTMLInputElement&&"select"in e}function Ft(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&Um(e)&&t&&e.select()}}const Ei=zm();function zm(){let e=[];return{add(t){const r=e[0];t!==r&&(r==null||r.pause()),e=Ci(e,t),e.unshift(t)},remove(t){var r;e=Ci(e,t),(r=e[0])===null||r===void 0||r.resume()}}}function Ci(e,t){const r=[...e],s=r.indexOf(t);return s!==-1&&r.splice(s,1),r}function Wm(e){return e.filter(t=>t.tagName!=="A")}const Vm=y.forwardRef((e,t)=>{var r;const{container:s=globalThis==null||(r=globalThis.document)===null||r===void 0?void 0:r.body,...i}=e;return s?ou.createPortal(y.createElement(ht.div,it({},i,{ref:t})),s):null});function Hm(e,t){return y.useReducer((r,s)=>{const i=t[r][s];return i??r},e)}const ma=e=>{const{present:t,children:r}=e,s=Gm(t),i=typeof r=="function"?r({present:s.isPresent}):y.Children.only(r),l=mr(s.ref,i.ref);return typeof r=="function"||s.isPresent?y.cloneElement(i,{ref:l}):null};ma.displayName="Presence";function Gm(e){const[t,r]=y.useState(),s=y.useRef({}),i=y.useRef(e),l=y.useRef("none"),d=e?"mounted":"unmounted",[u,p]=Hm(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return y.useEffect(()=>{const g=zr(s.current);l.current=u==="mounted"?g:"none"},[u]),Ts(()=>{const g=s.current,x=i.current;if(x!==e){const T=l.current,L=zr(g);e?p("MOUNT"):L==="none"||(g==null?void 0:g.display)==="none"?p("UNMOUNT"):p(x&&T!==L?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,p]),Ts(()=>{if(t){const g=v=>{const L=zr(s.current).includes(v.animationName);v.target===t&&L&&Pt.flushSync(()=>p("ANIMATION_END"))},x=v=>{v.target===t&&(l.current=zr(s.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",g),t.addEventListener("animationend",g),()=>{t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",g),t.removeEventListener("animationend",g)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:y.useCallback(g=>{g&&(s.current=getComputedStyle(g)),r(g)},[])}}function zr(e){return(e==null?void 0:e.animationName)||"none"}let us=0;function Ym(){y.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=r[0])!==null&&e!==void 0?e:Pi()),document.body.insertAdjacentElement("beforeend",(t=r[1])!==null&&t!==void 0?t:Pi()),us++,()=>{us===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),us--}},[])}function Pi(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var wt=function(){return wt=Object.assign||function(t){for(var r,s=1,i=arguments.length;s<i;s++){r=arguments[s];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},wt.apply(this,arguments)};function Wc(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]]);return r}function Jm(e,t,r){if(r||arguments.length===2)for(var s=0,i=t.length,l;s<i;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))}var ta="right-scroll-bar-position",na="width-before-scroll-bar",Qm="with-scroll-bars-hidden",Xm="--removed-body-scroll-bar-size";function ds(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Zm(e,t){var r=y.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(s){var i=r.value;i!==s&&(r.value=s,r.callback(s,i))}}}})[0];return r.callback=t,r.facade}var ep=typeof window<"u"?y.useLayoutEffect:y.useEffect,Ai=new WeakMap;function tp(e,t){var r=Zm(null,function(s){return e.forEach(function(i){return ds(i,s)})});return ep(function(){var s=Ai.get(r);if(s){var i=new Set(s),l=new Set(e),d=r.current;i.forEach(function(u){l.has(u)||ds(u,null)}),l.forEach(function(u){i.has(u)||ds(u,d)})}Ai.set(r,e)},[e]),r}function np(e){return e}function rp(e,t){t===void 0&&(t=np);var r=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(l){var d=t(l,s);return r.push(d),function(){r=r.filter(function(u){return u!==d})}},assignSyncMedium:function(l){for(s=!0;r.length;){var d=r;r=[],d.forEach(l)}r={push:function(u){return l(u)},filter:function(){return r}}},assignMedium:function(l){s=!0;var d=[];if(r.length){var u=r;r=[],u.forEach(l),d=r}var p=function(){var x=d;d=[],x.forEach(l)},g=function(){return Promise.resolve().then(p)};g(),r={push:function(x){d.push(x),g()},filter:function(x){return d=d.filter(x),r}}}};return i}function ap(e){e===void 0&&(e={});var t=rp(null);return t.options=wt({async:!0,ssr:!1},e),t}var Vc=function(e){var t=e.sideCar,r=Wc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return y.createElement(s,wt({},r))};Vc.isSideCarExport=!0;function sp(e,t){return e.useMedium(t),Vc}var Hc=ap(),fs=function(){},pa=y.forwardRef(function(e,t){var r=y.useRef(null),s=y.useState({onScrollCapture:fs,onWheelCapture:fs,onTouchMoveCapture:fs}),i=s[0],l=s[1],d=e.forwardProps,u=e.children,p=e.className,g=e.removeScrollBar,x=e.enabled,v=e.shards,T=e.sideCar,L=e.noIsolation,N=e.inert,E=e.allowPinchZoom,$=e.as,B=$===void 0?"div":$,U=Wc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),W=T,V=tp([r,t]),ae=wt(wt({},U),i);return y.createElement(y.Fragment,null,x&&y.createElement(W,{sideCar:Hc,removeScrollBar:g,shards:v,noIsolation:L,inert:N,setCallbacks:l,allowPinchZoom:!!E,lockRef:r}),d?y.cloneElement(y.Children.only(u),wt(wt({},ae),{ref:V})):y.createElement(B,wt({},ae,{className:p,ref:V}),u))});pa.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pa.classNames={fullWidth:na,zeroRight:ta};var op=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ip(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=op();return t&&e.setAttribute("nonce",t),e}function cp(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lp(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var up=function(){var e=0,t=null;return{add:function(r){e==0&&(t=ip())&&(cp(t,r),lp(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dp=function(){var e=up();return function(t,r){y.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},Gc=function(){var e=dp(),t=function(r){var s=r.styles,i=r.dynamic;return e(s,i),null};return t},fp={left:0,top:0,right:0,gap:0},hs=function(e){return parseInt(e||"",10)||0},hp=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[hs(r),hs(s),hs(i)]},mp=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fp;var t=hp(e),r=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-r+t[2]-t[0])}},pp=Gc(),An="data-scroll-locked",gp=function(e,t,r,s){var i=e.left,l=e.top,d=e.right,u=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(Qm,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(An,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),r==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ta,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(na,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(ta," .").concat(ta,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(na," .").concat(na,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(An,`] {
    `).concat(Xm,": ").concat(u,`px;
  }
`)},Ri=function(){var e=parseInt(document.body.getAttribute(An)||"0",10);return isFinite(e)?e:0},yp=function(){y.useEffect(function(){return document.body.setAttribute(An,(Ri()+1).toString()),function(){var e=Ri()-1;e<=0?document.body.removeAttribute(An):document.body.setAttribute(An,e.toString())}},[])},xp=function(e){var t=e.noRelative,r=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;yp();var l=y.useMemo(function(){return mp(i)},[i]);return y.createElement(pp,{styles:gp(l,!t,i,r?"":"!important")})},Ms=!1;if(typeof window<"u")try{var Wr=Object.defineProperty({},"passive",{get:function(){return Ms=!0,!0}});window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Ms=!1}var wn=Ms?{passive:!1}:!1,bp=function(e){return e.tagName==="TEXTAREA"},Yc=function(e,t){var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!bp(e)&&r[t]==="visible")},vp=function(e){return Yc(e,"overflowY")},wp=function(e){return Yc(e,"overflowX")},Oi=function(e,t){var r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Jc(e,r);if(s){var i=Qc(e,r),l=i[1],d=i[2];if(l>d)return!0}r=r.parentNode}while(r&&r!==document.body);return!1},jp=function(e){var t=e.scrollTop,r=e.scrollHeight,s=e.clientHeight;return[t,r,s]},kp=function(e){var t=e.scrollLeft,r=e.scrollWidth,s=e.clientWidth;return[t,r,s]},Jc=function(e,t){return e==="v"?vp(t):wp(t)},Qc=function(e,t){return e==="v"?jp(t):kp(t)},Np=function(e,t){return e==="h"&&t==="rtl"?-1:1},Sp=function(e,t,r,s,i){var l=Np(e,window.getComputedStyle(t).direction),d=l*s,u=r.target,p=t.contains(u),g=!1,x=d>0,v=0,T=0;do{var L=Qc(e,u),N=L[0],E=L[1],$=L[2],B=E-$-l*N;(N||B)&&Jc(e,u)&&(v+=B,T+=N),u=u.parentNode}while(!p&&u!==document.body||p&&(t.contains(u)||t===u));return(x&&v===0||!x&&T===0)&&(g=!0),g},Vr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ti=function(e){return[e.deltaX,e.deltaY]},$i=function(e){return e&&"current"in e?e.current:e},_p=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ep=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Cp=0,jn=[];function Pp(e){var t=y.useRef([]),r=y.useRef([0,0]),s=y.useRef(),i=y.useState(Cp++)[0],l=y.useState(function(){return Gc()})[0],d=y.useRef(e);y.useEffect(function(){d.current=e},[e]),y.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var E=Jm([e.lockRef.current],(e.shards||[]).map($i),!0).filter(Boolean);return E.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var u=y.useCallback(function(E,$){if("touches"in E&&E.touches.length===2)return!d.current.allowPinchZoom;var B=Vr(E),U=r.current,W="deltaX"in E?E.deltaX:U[0]-B[0],V="deltaY"in E?E.deltaY:U[1]-B[1],ae,J=E.target,X=Math.abs(W)>Math.abs(V)?"h":"v";if("touches"in E&&X==="h"&&J.type==="range")return!1;var ce=Oi(X,J);if(!ce)return!0;if(ce?ae=X:(ae=X==="v"?"h":"v",ce=Oi(X,J)),!ce)return!1;if(!s.current&&"changedTouches"in E&&(W||V)&&(s.current=ae),!ae)return!0;var _e=s.current||ae;return Sp(_e,$,E,_e==="h"?W:V)},[]),p=y.useCallback(function(E){var $=E;if(!(!jn.length||jn[jn.length-1]!==l)){var B="deltaY"in $?Ti($):Vr($),U=t.current.filter(function(ae){return ae.name===$.type&&ae.target===$.target&&_p(ae.delta,B)})[0];if(U&&U.should){$.cancelable&&$.preventDefault();return}if(!U){var W=(d.current.shards||[]).map($i).filter(Boolean).filter(function(ae){return ae.contains($.target)}),V=W.length>0?u($,W[0]):!d.current.noIsolation;V&&$.cancelable&&$.preventDefault()}}},[]),g=y.useCallback(function(E,$,B,U){var W={name:E,delta:$,target:B,should:U};t.current.push(W),setTimeout(function(){t.current=t.current.filter(function(V){return V!==W})},1)},[]),x=y.useCallback(function(E){r.current=Vr(E),s.current=void 0},[]),v=y.useCallback(function(E){g(E.type,Ti(E),E.target,u(E,e.lockRef.current))},[]),T=y.useCallback(function(E){g(E.type,Vr(E),E.target,u(E,e.lockRef.current))},[]);y.useEffect(function(){return jn.push(l),e.setCallbacks({onScrollCapture:v,onWheelCapture:v,onTouchMoveCapture:T}),document.addEventListener("wheel",p,wn),document.addEventListener("touchmove",p,wn),document.addEventListener("touchstart",x,wn),function(){jn=jn.filter(function(E){return E!==l}),document.removeEventListener("wheel",p,wn),document.removeEventListener("touchmove",p,wn),document.removeEventListener("touchstart",x,wn)}},[]);var L=e.removeScrollBar,N=e.inert;return y.createElement(y.Fragment,null,N?y.createElement(l,{styles:Ep(i)}):null,L?y.createElement(xp,{gapMode:"margin"}):null)}const Ap=sp(Hc,Pp);var Xc=y.forwardRef(function(e,t){return y.createElement(pa,wt({},e,{ref:t,sideCar:Ap}))});Xc.classNames=pa.classNames;var Rp=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},kn=new WeakMap,Hr=new WeakMap,Gr={},ms=0,Zc=function(e){return e&&(e.host||Zc(e.parentNode))},Op=function(e,t){return t.map(function(r){if(e.contains(r))return r;var s=Zc(r);return s&&e.contains(s)?s:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},Tp=function(e,t,r,s){var i=Op(t,Array.isArray(e)?e:[e]);Gr[r]||(Gr[r]=new WeakMap);var l=Gr[r],d=[],u=new Set,p=new Set(i),g=function(v){!v||u.has(v)||(u.add(v),g(v.parentNode))};i.forEach(g);var x=function(v){!v||p.has(v)||Array.prototype.forEach.call(v.children,function(T){if(u.has(T))x(T);else try{var L=T.getAttribute(s),N=L!==null&&L!=="false",E=(kn.get(T)||0)+1,$=(l.get(T)||0)+1;kn.set(T,E),l.set(T,$),d.push(T),E===1&&N&&Hr.set(T,!0),$===1&&T.setAttribute(r,"true"),N||T.setAttribute(s,"true")}catch(B){console.error("aria-hidden: cannot operate on ",T,B)}})};return x(t),u.clear(),ms++,function(){d.forEach(function(v){var T=kn.get(v)-1,L=l.get(v)-1;kn.set(v,T),l.set(v,L),T||(Hr.has(v)||v.removeAttribute(s),Hr.delete(v)),L||v.removeAttribute(r)}),ms--,ms||(kn=new WeakMap,kn=new WeakMap,Hr=new WeakMap,Gr={})}},$p=function(e,t,r){r===void 0&&(r="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=Rp(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),Tp(s,i,r,"aria-hidden")):function(){return null}};const el="Dialog",[tl]=wm(el),[Dp,dn]=tl(el),Mp=e=>{const{__scopeDialog:t,children:r,open:s,defaultOpen:i,onOpenChange:l,modal:d=!0}=e,u=y.useRef(null),p=y.useRef(null),[g=!1,x]=Sm({prop:s,defaultProp:i,onChange:l});return y.createElement(Dp,{scope:t,triggerRef:u,contentRef:p,contentId:is(),titleId:is(),descriptionId:is(),open:g,onOpenChange:x,onOpenToggle:y.useCallback(()=>x(v=>!v),[x]),modal:d},r)},nl="DialogPortal",[Ip,rl]=tl(nl,{forceMount:void 0}),Lp=e=>{const{__scopeDialog:t,forceMount:r,children:s,container:i}=e,l=dn(nl,t);return y.createElement(Ip,{scope:t,forceMount:r},y.Children.map(s,d=>y.createElement(ma,{present:r||l.open},y.createElement(Vm,{asChild:!0,container:i},d))))},Is="DialogOverlay",Fp=y.forwardRef((e,t)=>{const r=rl(Is,e.__scopeDialog),{forceMount:s=r.forceMount,...i}=e,l=dn(Is,e.__scopeDialog);return l.modal?y.createElement(ma,{present:s||l.open},y.createElement(Bp,it({},i,{ref:t}))):null}),Bp=y.forwardRef((e,t)=>{const{__scopeDialog:r,...s}=e,i=dn(Is,r);return y.createElement(Xc,{as:Gs,allowPinchZoom:!0,shards:[i.contentRef]},y.createElement(ht.div,it({"data-state":sl(i.open)},s,{ref:t,style:{pointerEvents:"auto",...s.style}})))}),On="DialogContent",Kp=y.forwardRef((e,t)=>{const r=rl(On,e.__scopeDialog),{forceMount:s=r.forceMount,...i}=e,l=dn(On,e.__scopeDialog);return y.createElement(ma,{present:s||l.open},l.modal?y.createElement(qp,it({},i,{ref:t})):y.createElement(Up,it({},i,{ref:t})))}),qp=y.forwardRef((e,t)=>{const r=dn(On,e.__scopeDialog),s=y.useRef(null),i=mr(t,r.contentRef,s);return y.useEffect(()=>{const l=s.current;if(l)return $p(l)},[]),y.createElement(al,it({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pn(e.onCloseAutoFocus,l=>{var d;l.preventDefault(),(d=r.triggerRef.current)===null||d===void 0||d.focus()}),onPointerDownOutside:Pn(e.onPointerDownOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0;(d.button===2||u)&&l.preventDefault()}),onFocusOutside:Pn(e.onFocusOutside,l=>l.preventDefault())}))}),Up=y.forwardRef((e,t)=>{const r=dn(On,e.__scopeDialog),s=y.useRef(!1),i=y.useRef(!1);return y.createElement(al,it({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var d;if((d=e.onCloseAutoFocus)===null||d===void 0||d.call(e,l),!l.defaultPrevented){var u;s.current||(u=r.triggerRef.current)===null||u===void 0||u.focus(),l.preventDefault()}s.current=!1,i.current=!1},onInteractOutside:l=>{var d,u;(d=e.onInteractOutside)===null||d===void 0||d.call(e,l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const p=l.target;((u=r.triggerRef.current)===null||u===void 0?void 0:u.contains(p))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&i.current&&l.preventDefault()}}))}),al=y.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,...d}=e,u=dn(On,r),p=y.useRef(null),g=mr(t,p);return Ym(),y.createElement(y.Fragment,null,y.createElement(Fm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:l},y.createElement(Mm,it({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":sl(u.open)},d,{ref:g,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),zp="DialogTitle";function sl(e){return e?"open":"closed"}const Wp="DialogTitleWarning";vm(Wp,{contentName:On,titleName:zp,docsSlug:"dialog"});const Vp=Mp,Hp=Lp,Gp=Fp,Yp=Kp;var ar='[cmdk-group=""]',ps='[cmdk-group-items=""]',Jp='[cmdk-group-heading=""]',Ys='[cmdk-item=""]',Di=`${Ys}:not([aria-disabled="true"])`,Ls="cmdk-item-select",en="data-value",Qp=(e,t,r)=>xm(e,t,r),ol=y.createContext(void 0),pr=()=>y.useContext(ol),il=y.createContext(void 0),Js=()=>y.useContext(il),cl=y.createContext(void 0),ll=y.forwardRef((e,t)=>{let r=_n(()=>{var q,de;return{search:"",value:(de=(q=e.value)!=null?q:e.defaultValue)!=null?de:"",filtered:{count:0,items:new Map,groups:new Set}}}),s=_n(()=>new Set),i=_n(()=>new Map),l=_n(()=>new Map),d=_n(()=>new Set),u=ul(e),{label:p,children:g,value:x,onValueChange:v,filter:T,shouldFilter:L,loop:N,disablePointerSelection:E=!1,vimBindings:$=!0,...B}=e,U=y.useId(),W=y.useId(),V=y.useId(),ae=y.useRef(null),J=cg();cn(()=>{if(x!==void 0){let q=x.trim();r.current.value=q,X.emit()}},[x]),cn(()=>{J(6,Ne)},[]);let X=y.useMemo(()=>({subscribe:q=>(d.current.add(q),()=>d.current.delete(q)),snapshot:()=>r.current,setState:(q,de,he)=>{var le,G,De;if(!Object.is(r.current[q],de)){if(r.current[q]=de,q==="search")fe(),Te(),J(1,ie);else if(q==="value"&&(he||J(5,Ne),((le=u.current)==null?void 0:le.value)!==void 0)){let tt=de??"";(De=(G=u.current).onValueChange)==null||De.call(G,tt);return}X.emit()}},emit:()=>{d.current.forEach(q=>q())}}),[]),ce=y.useMemo(()=>({value:(q,de,he)=>{var le;de!==((le=l.current.get(q))==null?void 0:le.value)&&(l.current.set(q,{value:de,keywords:he}),r.current.filtered.items.set(q,_e(de,he)),J(2,()=>{Te(),X.emit()}))},item:(q,de)=>(s.current.add(q),de&&(i.current.has(de)?i.current.get(de).add(q):i.current.set(de,new Set([q]))),J(3,()=>{fe(),Te(),r.current.value||ie(),X.emit()}),()=>{l.current.delete(q),s.current.delete(q),r.current.filtered.items.delete(q);let he=$e();J(4,()=>{fe(),(he==null?void 0:he.getAttribute("id"))===q&&ie(),X.emit()})}),group:q=>(i.current.has(q)||i.current.set(q,new Set),()=>{l.current.delete(q),i.current.delete(q)}),filter:()=>u.current.shouldFilter,label:p||e["aria-label"],disablePointerSelection:E,listId:U,inputId:V,labelId:W,listInnerRef:ae}),[]);function _e(q,de){var he,le;let G=(le=(he=u.current)==null?void 0:he.filter)!=null?le:Qp;return q?G(q,r.current.search,de):0}function Te(){if(!r.current.search||u.current.shouldFilter===!1)return;let q=r.current.filtered.items,de=[];r.current.filtered.groups.forEach(le=>{let G=i.current.get(le),De=0;G.forEach(tt=>{let oe=q.get(tt);De=Math.max(oe,De)}),de.push([le,De])});let he=ae.current;ze().sort((le,G)=>{var De,tt;let oe=le.getAttribute("id"),Bt=G.getAttribute("id");return((De=q.get(Bt))!=null?De:0)-((tt=q.get(oe))!=null?tt:0)}).forEach(le=>{let G=le.closest(ps);G?G.appendChild(le.parentElement===G?le:le.closest(`${ps} > *`)):he.appendChild(le.parentElement===he?le:le.closest(`${ps} > *`))}),de.sort((le,G)=>G[1]-le[1]).forEach(le=>{let G=ae.current.querySelector(`${ar}[${en}="${encodeURIComponent(le[0])}"]`);G==null||G.parentElement.appendChild(G)})}function ie(){let q=ze().find(he=>he.getAttribute("aria-disabled")!=="true"),de=q==null?void 0:q.getAttribute(en);X.setState("value",de||void 0)}function fe(){var q,de,he,le;if(!r.current.search||u.current.shouldFilter===!1){r.current.filtered.count=s.current.size;return}r.current.filtered.groups=new Set;let G=0;for(let De of s.current){let tt=(de=(q=l.current.get(De))==null?void 0:q.value)!=null?de:"",oe=(le=(he=l.current.get(De))==null?void 0:he.keywords)!=null?le:[],Bt=_e(tt,oe);r.current.filtered.items.set(De,Bt),Bt>0&&G++}for(let[De,tt]of i.current)for(let oe of tt)if(r.current.filtered.items.get(oe)>0){r.current.filtered.groups.add(De);break}r.current.filtered.count=G}function Ne(){var q,de,he;let le=$e();le&&(((q=le.parentElement)==null?void 0:q.firstChild)===le&&((he=(de=le.closest(ar))==null?void 0:de.querySelector(Jp))==null||he.scrollIntoView({block:"nearest"})),le.scrollIntoView({block:"nearest"}))}function $e(){var q;return(q=ae.current)==null?void 0:q.querySelector(`${Ys}[aria-selected="true"]`)}function ze(){var q;return Array.from((q=ae.current)==null?void 0:q.querySelectorAll(Di))}function Pe(q){let de=ze()[q];de&&X.setState("value",de.getAttribute(en))}function Qe(q){var de;let he=$e(),le=ze(),G=le.findIndex(tt=>tt===he),De=le[G+q];(de=u.current)!=null&&de.loop&&(De=G+q<0?le[le.length-1]:G+q===le.length?le[0]:le[G+q]),De&&X.setState("value",De.getAttribute(en))}function Ae(q){let de=$e(),he=de==null?void 0:de.closest(ar),le;for(;he&&!le;)he=q>0?og(he,ar):ig(he,ar),le=he==null?void 0:he.querySelector(Di);le?X.setState("value",le.getAttribute(en)):Qe(q)}let Be=()=>Pe(ze().length-1),Ke=q=>{q.preventDefault(),q.metaKey?Be():q.altKey?Ae(1):Qe(1)},Ee=q=>{q.preventDefault(),q.metaKey?Pe(0):q.altKey?Ae(-1):Qe(-1)};return y.createElement(ht.div,{ref:t,tabIndex:-1,...B,"cmdk-root":"",onKeyDown:q=>{var de;if((de=B.onKeyDown)==null||de.call(B,q),!q.defaultPrevented)switch(q.key){case"n":case"j":{$&&q.ctrlKey&&Ke(q);break}case"ArrowDown":{Ke(q);break}case"p":case"k":{$&&q.ctrlKey&&Ee(q);break}case"ArrowUp":{Ee(q);break}case"Home":{q.preventDefault(),Pe(0);break}case"End":{q.preventDefault(),Be();break}case"Enter":if(!q.nativeEvent.isComposing&&q.keyCode!==229){q.preventDefault();let he=$e();if(he){let le=new Event(Ls);he.dispatchEvent(le)}}}}},y.createElement("label",{"cmdk-label":"",htmlFor:ce.inputId,id:ce.labelId,style:ug},p),ga(e,q=>y.createElement(il.Provider,{value:X},y.createElement(ol.Provider,{value:ce},q))))}),Xp=y.forwardRef((e,t)=>{var r,s;let i=y.useId(),l=y.useRef(null),d=y.useContext(cl),u=pr(),p=ul(e),g=(s=(r=p.current)==null?void 0:r.forceMount)!=null?s:d==null?void 0:d.forceMount;cn(()=>{if(!g)return u.item(i,d==null?void 0:d.id)},[g]);let x=dl(i,l,[e.value,e.children,l],e.keywords),v=Js(),T=ln(J=>J.value&&J.value===x.current),L=ln(J=>g||u.filter()===!1?!0:J.search?J.filtered.items.get(i)>0:!0);y.useEffect(()=>{let J=l.current;if(!(!J||e.disabled))return J.addEventListener(Ls,N),()=>J.removeEventListener(Ls,N)},[L,e.onSelect,e.disabled]);function N(){var J,X;E(),(X=(J=p.current).onSelect)==null||X.call(J,x.current)}function E(){v.setState("value",x.current,!0)}if(!L)return null;let{disabled:$,value:B,onSelect:U,forceMount:W,keywords:V,...ae}=e;return y.createElement(ht.div,{ref:sr([l,t]),...ae,id:i,"cmdk-item":"",role:"option","aria-disabled":!!$,"aria-selected":!!T,"data-disabled":!!$,"data-selected":!!T,onPointerMove:$||u.disablePointerSelection?void 0:E,onClick:$?void 0:N},e.children)}),Zp=y.forwardRef((e,t)=>{let{heading:r,children:s,forceMount:i,...l}=e,d=y.useId(),u=y.useRef(null),p=y.useRef(null),g=y.useId(),x=pr(),v=ln(L=>i||x.filter()===!1?!0:L.search?L.filtered.groups.has(d):!0);cn(()=>x.group(d),[]),dl(d,u,[e.value,e.heading,p]);let T=y.useMemo(()=>({id:d,forceMount:i}),[i]);return y.createElement(ht.div,{ref:sr([u,t]),...l,"cmdk-group":"",role:"presentation",hidden:v?void 0:!0},r&&y.createElement("div",{ref:p,"cmdk-group-heading":"","aria-hidden":!0,id:g},r),ga(e,L=>y.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?g:void 0},y.createElement(cl.Provider,{value:T},L))))}),eg=y.forwardRef((e,t)=>{let{alwaysRender:r,...s}=e,i=y.useRef(null),l=ln(d=>!d.search);return!r&&!l?null:y.createElement(ht.div,{ref:sr([i,t]),...s,"cmdk-separator":"",role:"separator"})}),tg=y.forwardRef((e,t)=>{let{onValueChange:r,...s}=e,i=e.value!=null,l=Js(),d=ln(x=>x.search),u=ln(x=>x.value),p=pr(),g=y.useMemo(()=>{var x;let v=(x=p.listInnerRef.current)==null?void 0:x.querySelector(`${Ys}[${en}="${encodeURIComponent(u)}"]`);return v==null?void 0:v.getAttribute("id")},[]);return y.useEffect(()=>{e.value!=null&&l.setState("search",e.value)},[e.value]),y.createElement(ht.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":p.listId,"aria-labelledby":p.labelId,"aria-activedescendant":g,id:p.inputId,type:"text",value:i?e.value:d,onChange:x=>{i||l.setState("search",x.target.value),r==null||r(x.target.value)}})}),ng=y.forwardRef((e,t)=>{let{children:r,label:s="Suggestions",...i}=e,l=y.useRef(null),d=y.useRef(null),u=pr();return y.useEffect(()=>{if(d.current&&l.current){let p=d.current,g=l.current,x,v=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let T=p.offsetHeight;g.style.setProperty("--cmdk-list-height",T.toFixed(1)+"px")})});return v.observe(p),()=>{cancelAnimationFrame(x),v.unobserve(p)}}},[]),y.createElement(ht.div,{ref:sr([l,t]),...i,"cmdk-list":"",role:"listbox","aria-label":s,id:u.listId},ga(e,p=>y.createElement("div",{ref:sr([d,u.listInnerRef]),"cmdk-list-sizer":""},p)))}),rg=y.forwardRef((e,t)=>{let{open:r,onOpenChange:s,overlayClassName:i,contentClassName:l,container:d,...u}=e;return y.createElement(Vp,{open:r,onOpenChange:s},y.createElement(Hp,{container:d},y.createElement(Gp,{"cmdk-overlay":"",className:i}),y.createElement(Yp,{"aria-label":e.label,"cmdk-dialog":"",className:l},y.createElement(ll,{ref:t,...u}))))}),ag=y.forwardRef((e,t)=>ln(r=>r.filtered.count===0)?y.createElement(ht.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),sg=y.forwardRef((e,t)=>{let{progress:r,children:s,label:i="Loading...",...l}=e;return y.createElement(ht.div,{ref:t,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},ga(e,d=>y.createElement("div",{"aria-hidden":!0},d)))}),vt=Object.assign(ll,{List:ng,Item:Xp,Input:tg,Group:Zp,Separator:eg,Dialog:rg,Empty:ag,Loading:sg});function og(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function ig(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function ul(e){let t=y.useRef(e);return cn(()=>{t.current=e}),t}var cn=typeof window>"u"?y.useEffect:y.useLayoutEffect;function _n(e){let t=y.useRef();return t.current===void 0&&(t.current=e()),t}function sr(e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}function ln(e){let t=Js(),r=()=>e(t.snapshot());return y.useSyncExternalStore(t.subscribe,r,r)}function dl(e,t,r,s=[]){let i=y.useRef(),l=pr();return cn(()=>{var d;let u=(()=>{var g;for(let x of r){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(g=x.current.textContent)==null?void 0:g.trim():i.current}})(),p=s.map(g=>g.trim());l.value(e,u,p),(d=t.current)==null||d.setAttribute(en,u),i.current=u}),i}var cg=()=>{let[e,t]=y.useState(),r=_n(()=>new Map);return cn(()=>{r.current.forEach(s=>s()),r.current=new Map},[e]),(s,i)=>{r.current.set(s,i),t({})}};function lg(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ga({asChild:e,children:t},r){return e&&y.isValidElement(t)?y.cloneElement(lg(t),{ref:t.ref},r(t.props.children)):r(t)}var ug={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Qs(e){return{id:e.id,date:e.date,description:e.description,amount:e.amount,currency:e.currency||"JPY",category:e.category,source:e.source,type:e.is_income?"income":"expense",created_at:e.date,account_id:e.account_id,is_transfer:e.is_transfer,receipt_url:e.receipt_url}}async function fl(e){var s;const t=new URLSearchParams;return e!=null&&e.start_date&&t.append("start_date",e.start_date),e!=null&&e.end_date&&t.append("end_date",e.end_date),(s=e==null?void 0:e.categories)!=null&&s.length&&t.append("categories",e.categories.join(",")),e!=null&&e.source&&t.append("source",e.source),e!=null&&e.type&&e.type!=="all"&&t.append("is_income",e.type==="income"?"true":"false"),e!=null&&e.search&&t.append("search",e.search),(e==null?void 0:e.min_amount)!==void 0&&t.append("min_amount",e.min_amount.toString()),(e==null?void 0:e.max_amount)!==void 0&&t.append("max_amount",e.max_amount.toString()),t.append("limit","5000"),(await re.get(`/api/transactions/?${t.toString()}`)).data.transactions.map(Qs)}function hl(e){const{type:t,...r}=e;return{...r,is_income:t==="income"}}async function vx(e){const t=hl(e),r=await re.post("/api/transactions/",t);return Qs(r.data)}async function wx(e,t){const r=hl(t),s=await re.put(`/api/transactions/${e}`,r);return Qs(s.data)}async function jx(e){await re.delete(`/api/transactions/${e}`)}async function kx(e){const t=new URLSearchParams;return e.forEach(s=>t.append("transaction_ids",s.toString())),(await re.delete(`/api/transactions/bulk/delete?${t.toString()}`)).data}async function Nx(e,t){const r=new URLSearchParams;return e.forEach(i=>r.append("transaction_ids",i.toString())),r.append("category",t),(await re.patch(`/api/transactions/bulk/category?${r.toString()}`)).data}async function Sx(e,t=5){return!e||e.length<2?[]:(await re.get(`/api/transactions/suggestions?q=${encodeURIComponent(e)}&limit=${t}`)).data}const fn={JPY:1,USD:.00667,VND:160},Xs={JPY:0,VND:0,KRW:0,USD:2,EUR:2};function _x(e,t){const r=Xs[t]??0;return Math.round(e*Math.pow(10,r))}function ml(e,t,r){const s=r[t]??fn[t]??1;return e*s}function mt(e,t="JPY",r=fn,s=!1){const i=s?e:ml(e,t,r),l=Xs[t]??0,d=Math.pow(10,l),p={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP";return new Intl.NumberFormat(p,{style:"currency",currency:t,minimumFractionDigits:l,maximumFractionDigits:l}).format(i/d)}function dg(e,t,r="JPY",s=fn,i=!1){const l=mt(Math.abs(e),r,s,i);return t==="income"||e>0?`+${l}`:t==="expense"||e<0?`-${l}`:l}function fg(e,t="JPY",r=fn,s=!1){const i=s?e:ml(e,t,r),l=Xs[t]??0,d=Math.pow(10,l),p={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP",g=l>0?1:0;return new Intl.NumberFormat(p,{style:"currency",currency:t,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:g}).format(i/d)}function Zs(e="JPY"){return{JPY:"***",USD:"$***",VND:"***"}[e]||"***"}function Et(e,t="JPY",r=fn,s=!1,i=!1){return i?Zs(t):mt(e,t,r,s)}function Ex(e,t,r="JPY",s=fn,i=!1,l=!1){if(l){const d=Zs(r);return t==="income"||e>0?`+${d}`:t==="expense"||e<0?`-${d}`:d}return dg(e,t,r,s,i)}function Mi(e,t="JPY",r=fn,s=!1,i=!1){return i?Zs(t):fg(e,t,r,s)}function hg({open:e,onOpenChange:t,onNewTransaction:r,onUpload:s,onShowShortcuts:i}){const{t:l}=we(),d=jt(),{resolvedTheme:u,toggleTheme:p}=Pc(),[g,x]=y.useState(""),[v,T]=y.useState([]),[L,N]=y.useState(!1);y.useEffect(()=>{if(!e||g.length<2){T([]);return}const U=setTimeout(async()=>{N(!0);try{const W=await fl({search:g});T(W.slice(0,5))}catch(W){console.error("Failed to search transactions:",W),T([])}finally{N(!1)}},300);return()=>clearTimeout(U)},[g,e]),y.useEffect(()=>{e||(x(""),T([]))},[e]);const E=y.useCallback(B=>{if(t(!1),B.startsWith("/")){d({to:B});return}switch(B){case"new-transaction":r==null||r();break;case"upload":s==null||s(),d({to:"/upload"});break;case"toggle-theme":p();break;case"shortcuts":i==null||i();break;case"transaction":d({to:"/transactions"});break}},[d,t,r,s,p,i]),$=a.jsxs(vt.Dialog,{open:e,onOpenChange:t,label:l("commandPalette.label","Command Palette"),className:"fixed inset-0 z-[100001] overflow-hidden",style:{touchAction:"pan-y"},children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),a.jsx("div",{className:"fixed left-1/2 top-1/4 -translate-x-1/2 w-full max-w-lg",children:a.jsxs(vt,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center border-b border-gray-200 dark:border-gray-700 px-4",children:[a.jsx(mu,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-3"}),a.jsx(vt.Input,{value:g,onValueChange:x,placeholder:l("commandPalette.placeholder","Search pages, transactions, actions..."),className:"w-full py-4 bg-transparent outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"}),a.jsx("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"})]}),a.jsxs(vt.List,{className:"max-h-80 overflow-y-auto p-2",children:[a.jsx(vt.Empty,{className:"py-6 text-center text-gray-500 dark:text-gray-400",children:L?l("commandPalette.searching","Searching..."):l("commandPalette.noResults","No results found.")}),v.length>0&&a.jsx(vt.Group,{heading:l("commandPalette.transactions","Transactions"),children:v.map(B=>a.jsxs(vt.Item,{value:`transaction-${B.id}`,onSelect:()=>E("transaction"),className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx(vs,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"truncate text-sm",children:B.description}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B.date,"  ",B.category]})]}),a.jsxs("span",{className:`text-sm font-medium ${B.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[B.type==="income"?"+":"-",mt(B.amount,B.currency)]})]},B.id))}),a.jsxs(vt.Group,{heading:l("commandPalette.pages","Pages"),children:[a.jsx(ut,{icon:a.jsx(pu,{className:"w-4 h-4"}),label:l("nav.dashboard"),shortcut:"G D",value:"/dashboard",onSelect:E}),a.jsx(ut,{icon:a.jsx(vs,{className:"w-4 h-4"}),label:l("nav.transactions"),shortcut:"G T",value:"/transactions",onSelect:E}),a.jsx(ut,{icon:a.jsx(ia,{className:"w-4 h-4"}),label:l("nav.accounts"),shortcut:"G A",value:"/accounts",onSelect:E}),a.jsx(ut,{icon:a.jsx(Hi,{className:"w-4 h-4"}),label:l("nav.budget"),shortcut:"G B",value:"/budget",onSelect:E}),a.jsx(ut,{icon:a.jsx(qs,{className:"w-4 h-4"}),label:l("nav.analytics"),shortcut:"G N",value:"/analytics",onSelect:E}),a.jsx(ut,{icon:a.jsx(Tn,{className:"w-4 h-4"}),label:l("nav.goals"),shortcut:"G G",value:"/goals",onSelect:E}),a.jsx(ut,{icon:a.jsx(gu,{className:"w-4 h-4"}),label:l("nav.recurring"),value:"/recurring",onSelect:E}),a.jsx(ut,{icon:a.jsx(yu,{className:"w-4 h-4"}),label:l("nav.settings"),shortcut:"G S",value:"/settings",onSelect:E})]}),a.jsxs(vt.Group,{heading:l("commandPalette.actions","Actions"),children:[a.jsx(ut,{icon:a.jsx(xu,{className:"w-4 h-4"}),label:l("commandPalette.newTransaction","New Transaction"),shortcut:"Ctrl+N",value:"new-transaction",onSelect:E}),a.jsx(ut,{icon:a.jsx(ir,{className:"w-4 h-4"}),label:l("commandPalette.uploadCsv","Upload CSV"),shortcut:"Ctrl+U",value:"upload",onSelect:E}),a.jsx(ut,{icon:u==="dark"?a.jsx(zi,{className:"w-4 h-4"}):a.jsx(Wi,{className:"w-4 h-4"}),label:u==="dark"?l("commandPalette.lightMode","Switch to Light Mode"):l("commandPalette.darkMode","Switch to Dark Mode"),value:"toggle-theme",onSelect:E}),a.jsx(ut,{icon:a.jsx(bu,{className:"w-4 h-4"}),label:l("commandPalette.shortcuts","Keyboard Shortcuts"),shortcut:"?",value:"shortcuts",onSelect:E})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between text-xs text-gray-400 dark:text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),l("commandPalette.navigate","Navigate")]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),l("commandPalette.select","Select")]})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"}),l("commandPalette.close","Close")]})]})]})})]});return typeof document>"u"?null:Pt.createPortal($,document.body)}function ut({icon:e,label:t,shortcut:r,value:s,onSelect:i}){return a.jsxs(vt.Item,{value:s,onSelect:i,className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:e}),a.jsx("span",{className:"flex-1",children:t}),r&&a.jsx("kbd",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:r})]})}function mg({open:e,onClose:t}){const{t:r}=we(),s=typeof navigator<"u"&&/Mac/.test(navigator.userAgent),i=[{title:r("shortcuts.general","General"),shortcuts:[{keys:[s?"":"Ctrl","K"],description:r("shortcuts.commandPalette","Open command palette")},{keys:["Esc"],description:r("shortcuts.closeModal","Close modal/dialog")},{keys:["?"],description:r("shortcuts.showHelp","Show keyboard shortcuts")}]},{title:r("shortcuts.actions","Actions"),shortcuts:[{keys:[s?"":"Ctrl","N"],description:r("shortcuts.newTransaction","New transaction")},{keys:[s?"":"Ctrl","U"],description:r("shortcuts.uploadCsv","Upload CSV")},{keys:[s?"":"Ctrl","F"],description:r("shortcuts.focusSearch","Focus search")}]},{title:r("shortcuts.navigation","Navigation"),shortcuts:[{keys:["G","D"],description:r("shortcuts.gotoDashboard","Go to Dashboard")},{keys:["G","T"],description:r("shortcuts.gotoTransactions","Go to Transactions")},{keys:["G","A"],description:r("shortcuts.gotoAccounts","Go to Accounts")},{keys:["G","B"],description:r("shortcuts.gotoBudget","Go to Budget")},{keys:["G","N"],description:r("shortcuts.gotoAnalytics","Go to Analytics")},{keys:["G","G"],description:r("shortcuts.gotoGoals","Go to Goals")},{keys:["G","S"],description:r("shortcuts.gotoSettings","Go to Settings")}]}];if(!e)return null;const l=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-lg mx-4 max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:r("shortcuts.title","Keyboard Shortcuts")}),a.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:a.jsx(un,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh] space-y-6",children:i.map(d=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:d.title}),a.jsx("div",{className:"space-y-2",children:d.shortcuts.map((u,p)=>a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:u.description}),a.jsx("div",{className:"flex items-center gap-1",children:u.keys.map((g,x)=>a.jsxs("span",{children:[a.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:g}),x<u.keys.length-1&&a.jsx("span",{className:"text-gray-400 mx-0.5",children:"+"})]},x))})]},p))})]},d.title))}),a.jsx("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:r("shortcuts.hint","Press Esc to close")})})]})]});return typeof document>"u"?null:Pt.createPortal(l,document.body)}function pg(e,t={}){const{enabled:r=!0}=t,s=y.useCallback(i=>{if(!r)return;const l=i.target;if(!((l.tagName==="INPUT"||l.tagName==="TEXTAREA"||l.isContentEditable)&&i.key!=="Escape"))for(const d of e){const u=i.key.toLowerCase()===d.key.toLowerCase(),p=d.ctrlKey||d.metaKey?i.ctrlKey||i.metaKey:!i.ctrlKey&&!i.metaKey,g=d.shiftKey?i.shiftKey:!i.shiftKey;if(u&&p&&g){i.preventDefault(),d.callback();return}}},[e,r]);y.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s])}const Nn={ESCAPE:"Escape",COMMAND_PALETTE:"k",SEARCH:"f",NEW_TRANSACTION:"n",UPLOAD:"u",HELP:"?"};function gg({children:e}){const t=jt(),[r,s]=y.useState(!1),[i,l]=y.useState(!1),[d,u]=y.useState(!1),[p,g]=y.useState(null),x=y.useCallback(v=>{const L={d:"/dashboard",t:"/transactions",a:"/accounts",b:"/budget",n:"/analytics",g:"/goals",s:"/settings"}[v.toLowerCase()];L&&t({to:L}),g(null)},[t]);return pg([{key:Nn.COMMAND_PALETTE,ctrlKey:!0,callback:()=>l(!0),description:"Open command palette"},{key:Nn.ESCAPE,callback:()=>{i?l(!1):d?u(!1):r&&s(!1),g(null)},description:"Close modal"},{key:Nn.HELP,shiftKey:!0,callback:()=>u(!0),description:"Show shortcuts help"},{key:Nn.NEW_TRANSACTION,ctrlKey:!0,callback:()=>t({to:"/transactions"}),description:"New transaction"},{key:Nn.UPLOAD,ctrlKey:!0,callback:()=>t({to:"/upload"}),description:"Upload CSV"},{key:Nn.SEARCH,ctrlKey:!0,callback:()=>l(!0),description:"Focus search"},{key:"g",callback:()=>g("g"),description:"Navigation prefix"},...["d","t","a","b","n","g","s"].map(v=>({key:v,callback:()=>{p==="g"&&x(v)},description:`Navigate to ${v}`}))]),y.useEffect(()=>{if(p){const v=setTimeout(()=>g(null),1500);return()=>clearTimeout(v)}},[p]),a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Mh,{}),a.jsx("main",{className:"flex-1 pb-20 md:pb-0",children:a.jsx(lm,{children:e})}),a.jsx(Ih,{}),a.jsx(Yh,{}),a.jsx(cm,{}),a.jsx(Jh,{onClick:()=>s(!0)}),a.jsx(om,{isOpen:r,onClose:()=>s(!1)}),a.jsx(hg,{open:i,onOpenChange:l,onShowShortcuts:()=>u(!0)}),a.jsx(mg,{open:d,onClose:()=>u(!1)})]})}function pl({size:e="md",className:t}){return a.jsx("div",{className:te("inline-block animate-spin rounded-full border-2 border-primary-500 border-t-transparent",{"h-4 w-4":e==="sm","h-8 w-8":e==="md","h-12 w-12":e==="lg"},t),role:"status","aria-label":"",children:a.jsx("span",{className:"sr-only",children:"..."})})}function yg(){const{isAuthenticated:e,isLoading:t}=ha(),r=sa(),s=jt();return y.useEffect(()=>{!t&&!e&&!["/login","/register","/landing"].includes(r.pathname)&&s({to:"/login"})},[e,t,r.pathname,s]),t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(pl,{size:"lg"})}):r.pathname==="/login"||r.pathname==="/register"||r.pathname==="/landing"?a.jsx(Bo,{}):e?a.jsx(gg,{children:a.jsx(Bo,{})}):null}const ct=tu({component:yg}),xg=ft("/upload")({}),bg=ft("/transactions")({validateSearch:e=>({categories:typeof e.categories=="string"?e.categories:void 0,month:typeof e.month=="string"?e.month:void 0,accountId:typeof e.accountId=="number"?e.accountId:typeof e.accountId=="string"&&!isNaN(Number(e.accountId))?Number(e.accountId):void 0,fromAccounts:e.fromAccounts===!0||e.fromAccounts==="true",type:e.type==="income"||e.type==="expense"?e.type:void 0})}),vg=ft("/settings")({}),Ze=y.forwardRef(({variant:e="primary",size:t="md",loading:r=!1,className:s,children:i,disabled:l,...d},u)=>{const p=l||r;return a.jsxs("button",{ref:u,disabled:p,className:te("inline-flex items-center justify-center gap-2 font-medium rounded-lg","transition-all duration-150 focus-ring","active:scale-[0.97] active:transition-none","disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",{"bg-primary-500 text-white hover:bg-primary-600 shadow-sm hover:shadow":e==="primary","bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600":e==="secondary","border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800":e==="outline","text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800":e==="ghost","bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow":e==="danger"},{"px-3 py-1.5 text-sm":t==="sm","px-6 py-3":t==="md","px-8 py-4 text-lg":t==="lg"},s),...d,children:[r&&a.jsx(Bs,{className:te("animate-spin",t==="sm"?"w-3 h-3":t==="lg"?"w-5 h-5":"w-4 h-4")}),i]})});Ze.displayName="Button";const ot=y.forwardRef(({label:e,error:t,className:r,...s},i)=>a.jsxs("div",{className:"w-full",children:[e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:s.id,children:e}),a.jsx("input",{ref:i,className:te("w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","transition-default focus-ring","disabled:opacity-50 disabled:cursor-not-allowed","max-w-full overflow-hidden text-ellipsis",t?"border-red-500":"border-gray-300 dark:border-gray-600",r),...s}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t})]}));ot.displayName="Input";function Me({children:e,className:t,hover:r=!1,onClick:s,...i}){return a.jsx("div",{className:te("bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",r&&"card-hover",t),onClick:s,...i,children:e})}function wg(){const{t:e}=we("common"),t=jt(),[r,s]=y.useState(""),[i,l]=y.useState(""),[d,u]=y.useState(""),[p,g]=y.useState(""),[x,v]=y.useState(!1),T=async L=>{var N,E;if(L.preventDefault(),g(""),i!==d){g(e("auth.passwordMismatch"));return}if(i.length<6){g(e("auth.passwordTooShort"));return}v(!0);try{await re.post("/api/auth/register",{email:r,password:i}),t({to:"/login"})}catch($){const B=((E=(N=$==null?void 0:$.response)==null?void 0:N.data)==null?void 0:E.detail)||e("auth.registerFailed");g(B)}finally{v(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(Me,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.registerDescription")})]}),a.jsxs("form",{onSubmit:T,className:"space-y-6",children:[p&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:p}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(ot,{id:"email",type:"email",value:r,onChange:L=>s(L.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(ot,{id:"password",type:"password",value:i,onChange:L=>l(L.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.confirmPassword")}),a.jsx(ot,{id:"confirmPassword",type:"password",value:d,onChange:L=>u(L.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsx(Ze,{type:"submit",className:"w-full",disabled:x,children:e(x?"auth.registering":"auth.register")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.hasAccount")," ",a.jsx(Ve,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.login")})]})]})]})})}const jg=ft("/register")({component:wg}),kg=ft("/recurring")({});function Ng(){const{t:e}=we("common"),t=jt(),{login:r}=ha(),[s,i]=y.useState(""),[l,d]=y.useState(""),[u,p]=y.useState(""),[g,x]=y.useState(!1),v=async T=>{var L,N;T.preventDefault(),p(""),x(!0);try{await r(s,l),t({to:"/"})}catch(E){const $=E instanceof Error?E.message:((N=(L=E==null?void 0:E.response)==null?void 0:L.data)==null?void 0:N.detail)||e("auth.loginFailed");p($)}finally{x(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(Me,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.loginDescription")})]}),a.jsxs("form",{onSubmit:v,className:"space-y-6",children:[u&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:u}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(ot,{id:"email",type:"email",value:s,onChange:T=>i(T.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(ot,{id:"password",type:"password",value:l,onChange:T=>d(T.target.value),placeholder:"********",required:!0,autoComplete:"current-password"})]}),a.jsx(Ze,{type:"submit",className:"w-full",disabled:g,children:e(g?"auth.loggingIn":"auth.login")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.noAccount")," ",a.jsx(Ve,{to:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.register")})]})]})]})})}const Sg=ft("/login")({component:Ng});function _g(){const e=jt(),{t}=we("landing");return a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-6 py-16 lg:py-24",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:t("hero.headline")}),a.jsx("p",{className:"text-lg text-green-100 mb-6 leading-relaxed",children:t("hero.subheadline")}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(vu,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp1")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(Gi,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp2")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(Yi,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp3")})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Ze,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("hero.cta")}),a.jsx(Ze,{onClick:()=>e({to:"/login"}),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:t("hero.seeLiveDemo")})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20 shadow-2xl",children:a.jsx("img",{src:"/screenshots/dashboard-light.webp",alt:"SmartMoney Dashboard",className:"rounded-lg shadow-lg w-full",loading:"eager"})}),a.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 lg:w-40 hidden md:block",children:a.jsx("img",{src:"/screenshots/dashboard-mobile.webp",alt:"SmartMoney Mobile",className:"rounded-xl shadow-2xl border-4 border-white",loading:"eager"})})]})]})})]})}const Eg=[{id:"dashboard",screenshot:"/screenshots/dashboard-light.webp",screenshotAlt:"Dashboard Screenshot"},{id:"transactions",screenshot:"/screenshots/transactions.webp",screenshotAlt:"Transactions Screenshot"},{id:"budget",screenshot:"/screenshots/budget.webp",screenshotAlt:"Budget Screenshot"},{id:"analytics",screenshot:"/screenshots/analytics.webp",screenshotAlt:"Analytics Screenshot"}];function Cg(){const{t:e}=we("landing");return a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("features.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Eg.map(t=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"aspect-video bg-gray-100 overflow-hidden",children:a.jsx("img",{src:t.screenshot,alt:t.screenshotAlt,className:"w-full h-full object-cover object-top",loading:"lazy"})}),a.jsxs("div",{className:"p-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`features.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`features.${t.id}.description`)})]})]},t.id))})]})})}const Pg=[{id:"step1",icon:ir,color:"bg-blue-100 text-blue-700"},{id:"step2",icon:qs,color:"bg-green-100 text-green-700"},{id:"step3",icon:Gi,color:"bg-purple-100 text-purple-700"}];function Ag(){const{t:e}=we("landing");return a.jsx("section",{id:"how-it-works",className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("howItWorks.title")}),a.jsx("p",{className:"text-lg text-gray-600",children:e("howItWorks.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Pg.map((t,r)=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[a.jsx("div",{className:`h-16 w-16 rounded-full ${t.color} flex items-center justify-center`,children:a.jsx(t.icon,{className:"h-8 w-8"})}),a.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gray-900 text-white text-sm font-bold flex items-center justify-center",children:r+1})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`howItWorks.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`howItWorks.${t.id}.description`)})]},t.id))}),a.jsx("div",{className:"hidden md:flex items-center justify-center mt-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-300 to-green-300 rounded"}),a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-green-300 to-purple-300 rounded"})]})})]})})}function Rg(){const e=jt(),{t}=we("landing");return a.jsx("section",{className:"py-16 bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:t("cta.title")}),a.jsx("p",{className:"text-lg text-green-100 mb-8",children:t("cta.subtitle")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-6",children:[a.jsx(Ze,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("cta.button")}),a.jsxs(Ze,{onClick:()=>window.open("https://github.com/GodStorm91/smartmoney","_blank"),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[a.jsx(Ji,{className:"h-5 w-5 mr-2"}),t("cta.openSource")]})]}),a.jsx("p",{className:"text-sm text-green-200",children:t("cta.noAccount")})]})})}const gs=[{code:"en",name:"English",flag:""},{code:"ja",name:"",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function Og(){const e=jt(),{t,i18n:r}=we("landing"),[s,i]=y.useState(!1),l=gs.find(u=>u.code===r.language)||gs[0],d=u=>{r.changeLanguage(u),i(!1)};return a.jsx("header",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ct,{className:"h-8 w-8 text-green-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>i(!s),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(Yi,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm",children:l.flag})]}),s&&a.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:gs.map(u=>a.jsxs("button",{onClick:()=>d(u.code),className:`w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 ${r.language===u.code?"bg-green-50 text-green-700":"text-gray-700"}`,children:[a.jsx("span",{children:u.flag}),a.jsx("span",{children:u.name})]},u.code))})]}),a.jsx(Ze,{onClick:()=>e({to:"/login"}),variant:"outline",size:"sm",children:"Login"}),a.jsx(Ze,{onClick:()=>e({to:"/register"}),size:"sm",children:t("hero.cta")})]})]})})})}function Tg(){const{t:e}=we("landing");return a.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ct,{className:"h-6 w-6 text-green-500"}),a.jsx("span",{className:"text-lg font-bold text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[a.jsxs("a",{href:"https://github.com/GodStorm91/smartmoney",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-white transition-colors",children:[a.jsx(Ji,{className:"h-4 w-4"}),"GitHub"]}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.privacy")}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.terms")})]}),a.jsx("p",{className:"text-sm",children:e("footer.copyright")})]})})})}function $g(){return a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx(Og,{}),a.jsx(_g,{}),a.jsx(Cg,{}),a.jsx(Ag,{}),a.jsx(Rg,{}),a.jsx(Tg,{})]})}const Dg=ft("/landing")({component:$g}),Mg=ft("/goals")({}),Ig=ft("/budget")({}),Lg=ft("/analytics")({}),Fg=ft("/accounts")({});async function Bg(){return(await re.get("/api/exchange-rates")).data}function In(){return We({queryKey:["exchange-rates"],queryFn:Bg,staleTime:24*60*60*1e3,gcTime:48*60*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}function Kg(){const{data:e}=In();return(e==null?void 0:e.rates)||{}}function qg({goalId:e,goalName:t,achievability:r,targetAmount:s,currentAmount:i,onEdit:l,onDelete:d,topExpenseCategory:u}){const{t:p}=we("common"),{currency:g}=fr(),{data:x}=In(),{isPrivacyMode:v}=hr(),[T,L]=y.useState(!1),N=s>0?Math.min(100,i/s*100):0,E=r.current_monthly_net>=r.required_monthly,$=()=>{if(N>=100)return p("goal.insight.achieved");if(E)return p("goal.insight.onTrackMonths",{months:r.months_remaining});const ae=r.monthly_gap;if(ae>0){const J=Et(ae,g,(x==null?void 0:x.rates)||{},!1,v);return p("goal.insight.saveMore",{amount:J})}return p("goal.insight.everyBitCounts")},B=()=>{L(!0)},U=()=>{d&&d(e),L(!1)},W=()=>{L(!1)},V=N>=100||E?"bg-emerald-500":"bg-amber-500";return a.jsxs(Me,{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{className:te("text-xs font-medium px-2 py-1 rounded-full",E||N>=100?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-400"),children:[N>=100?"":E?"":""," ",N>=100?p("goal.status.completed"):p(E?"goal.status.onTrack":"goal.status.behind")]}),l&&a.jsx("button",{onClick:()=>l(e),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":p("goal.editGoal"),children:a.jsx(wu,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:te("text-2xl font-bold",N>=100||E?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"),children:[Math.round(N),"%"]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:p("goal.monthsRemaining",{months:r.months_remaining})})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:te("h-full rounded-full transition-all duration-500",V),style:{width:`${Math.min(100,N)}%`}})})]}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:Mi(i,g,(x==null?void 0:x.rates)||{},!0,v)}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500 mx-2",children:"/"}),a.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-400",children:Mi(s,g,(x==null?void 0:x.rates)||{},!0,v)})]}),a.jsxs("div",{className:te("rounded-lg p-3 mb-4",E||N>=100?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800"),children:[a.jsxs("p",{className:te("text-sm",E||N>=100?"text-emerald-700 dark:text-emerald-300":"text-amber-700 dark:text-amber-300"),children:[" ",$()]}),!E&&u&&u.monthlyAmount>0&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5 ml-5",children:[" ",p("goal.insight.topExpenseTip",{category:p(`categories.${u.name}`,{defaultValue:u.name}),amount:Et(u.monthlyAmount,g,(x==null?void 0:x.rates)||{},!1,v)})]})]}),d&&a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:T?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:p("goal.deleteConfirm")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:W,className:"flex-1 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:p("common.cancel")}),a.jsx("button",{onClick:U,className:"flex-1 py-2 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:p("common.delete")})]})]}):a.jsxs("button",{onClick:B,className:"w-full flex items-center justify-center gap-2 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[a.jsx(ju,{className:"w-4 h-4"}),p("goal.deleteGoal")]})})]})}const Ug={:"",:"","":"",:"",:"",:"",:"",:""};function zg({categories:e,maxItems:t}){const{currency:r}=fr(),{data:s}=In(),{isPrivacyMode:i}=hr(),l=t?e.slice(0,t):e;return a.jsx("div",{className:"space-y-4",children:l.map((d,u)=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl","aria-hidden":"true",children:d.emoji||Ug[d.category]||""}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d.category})]}),a.jsx("span",{className:"text-sm font-semibold font-numbers text-gray-900 dark:text-gray-100",children:Et(d.amount,r,(s==null?void 0:s.rates)||{},!1,i)})]}),a.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${d.percentage}%`},role:"progressbar","aria-valuenow":d.percentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${d.category}: ${d.percentage}%`})})]},u))})}function ys({title:e,amount:t,change:r,icon:s,type:i,clickable:l,...d}){const{currency:u}=fr(),{data:p}=In(),{isPrivacyMode:g}=hr(),v=i?{income:{bg:"bg-green-50 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",badge:"text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/30"},expense:{bg:"bg-red-50 dark:bg-red-900/30",text:"text-red-600 dark:text-red-400",badge:"text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/30"},net:{bg:"bg-blue-50 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",badge:"text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30"}}[i]:{bg:"bg-gray-50 dark:bg-gray-700",text:"text-gray-600 dark:text-gray-400",badge:"text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700"};return a.jsxs(Me,{hover:!0,role:"region",className:l?"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01]":void 0,...d,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:te("p-3 rounded-lg",v.bg),children:s}),r!=null&&a.jsxs("span",{className:te("inline-flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full",v.badge),children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r>=0?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),r>=0?"+":"",r.toFixed(1),"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:e}),a.jsx("p",{className:te("text-2xl sm:text-3xl font-bold font-numbers tracking-tight",v.text),children:Et(t,u,(p==null?void 0:p.rates)||{},!1,g)})]})]})}function Wg({summary:e}){const{t}=we("common");return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[a.jsx(Ve,{to:"/transactions",search:{type:"income"},className:"block",children:a.jsx(ys,{title:t("chart.income"),amount:(e==null?void 0:e.income)||0,change:e==null?void 0:e.income_change,type:"income","aria-label":t("kpi.thisMonthIncome"),clickable:!0,icon:a.jsx("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})}),a.jsx(Ve,{to:"/transactions",search:{type:"expense"},className:"block",children:a.jsx(ys,{title:t("chart.expense"),amount:(e==null?void 0:e.expense)||0,change:e==null?void 0:e.expense_change,type:"expense","aria-label":t("kpi.thisMonthExpense"),clickable:!0,icon:a.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})})}),a.jsx(ys,{title:t("chart.net"),amount:(e==null?void 0:e.net)||0,change:e==null?void 0:e.net_change,type:"net","aria-label":t("kpi.thisMonthNet"),icon:a.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}function pe({className:e}){return a.jsx("div",{className:te("animate-pulse bg-gray-200 dark:bg-gray-700 rounded",e)})}function Cx(){return a.jsxs("tr",{className:"animate-pulse",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx(pe,{className:"w-20 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(pe,{className:"w-32 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(pe,{className:"w-16 h-6 rounded-full"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(pe,{className:"w-24 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(pe,{className:"w-20 h-4 ml-auto"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(pe,{className:"w-16 h-6 mx-auto"})})]})}function Px(){return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(pe,{className:"w-32 h-5 mb-2"}),a.jsx(pe,{className:"w-20 h-4"})]}),a.jsx(pe,{className:"w-24 h-6"})]})})}function xs({className:e}){return a.jsxs("div",{className:te("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",e),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(pe,{className:"w-10 h-10 rounded-lg"}),a.jsx(pe,{className:"w-20 h-4"})]}),a.jsx(pe,{className:"w-32 h-8 mb-2"}),a.jsx(pe,{className:"w-16 h-4"})]})}function Vg({className:e}){return a.jsx("div",{className:te("space-y-4",e),children:[...Array(4)].map((t,r)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(pe,{className:"w-8 h-8 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(pe,{className:"w-24 h-4 mb-1"}),a.jsx(pe,{className:"w-full h-2 rounded-full"})]}),a.jsx(pe,{className:"w-16 h-4"})]},r))})}function Ii({className:e}){return a.jsxs("div",{className:te("space-y-3",e),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(pe,{className:"w-28 h-4"}),a.jsx(pe,{className:"w-16 h-4"})]}),a.jsx(pe,{className:"w-full h-3 rounded-full"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(pe,{className:"w-20 h-3"}),a.jsx(pe,{className:"w-20 h-3"})]})]})}function Hg({className:e}){return a.jsxs("div",{className:te("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm text-center",e),children:[a.jsx(pe,{className:"w-24 h-4 mx-auto mb-2"}),a.jsx(pe,{className:"w-48 h-10 mx-auto mb-3"}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(pe,{className:"w-16 h-4"}),a.jsx(pe,{className:"w-24 h-5"}),a.jsx(pe,{className:"w-12 h-5 rounded-full"})]})]})}class Gg extends y.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback||a.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500 text-sm",children:"Chart failed to load"}):this.props.children}}const Yg=y.lazy(()=>et(()=>import("./TrendLineChart-BKqE_s_d.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.TrendLineChart}))),Jg=y.lazy(()=>et(()=>import("./ZoomableChart-CODyVQ9c.js"),__vite__mapDeps([7,1,2])).then(e=>({default:e.ZoomableChart})));y.lazy(()=>et(()=>import("./IncomeExpenseBarChart-BjjPNToA.js"),__vite__mapDeps([8,1,2,3,4,5,6])).then(e=>({default:e.IncomeExpenseBarChart})));y.lazy(()=>et(()=>import("./CategoryBarChart-Br__yVCy.js"),__vite__mapDeps([9,1,2,3,4,5,6])).then(e=>({default:e.CategoryBarChart})));y.lazy(()=>et(()=>import("./CategoryPieChart-DkiNRHsk.js"),__vite__mapDeps([10,1,2,4,5,3,6])).then(e=>({default:e.CategoryPieChart})));y.lazy(()=>et(()=>import("./CashFlowSummary-DoCfH9v2.js"),__vite__mapDeps([11,1,2,3,4,5,6])).then(e=>({default:e.CashFlowSummary})));const Qg=y.lazy(()=>et(()=>import("./ForecastChart-BqBHQN8C.js"),__vite__mapDeps([12,1,2,3,4,5,6])).then(e=>({default:e.ForecastChart})));function eo({height:e="h-64"}){return a.jsx("div",{className:`${e} flex items-center justify-center`,children:a.jsx(pe,{className:"w-full h-full rounded-lg"})})}function Xg(e){return a.jsx(y.Suspense,{fallback:a.jsx(eo,{}),children:a.jsx(Yg,{...e})})}function Zg(e){return a.jsx(y.Suspense,{fallback:a.jsx(eo,{height:"h-80"}),children:a.jsx(Jg,{...e})})}function e0(e){return a.jsx(Gg,{children:a.jsx(y.Suspense,{fallback:a.jsx(eo,{height:"h-80"}),children:a.jsx(Qg,{...e})})})}function t0({data:e}){const{t}=we("common"),[r,s]=y.useState("net");return a.jsxs(Me,{className:"lg:col-span-2",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t("chart.trend12months")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s("net"),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${r==="net"?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t("chart.net")}),a.jsx("button",{onClick:()=>s("income"),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${r==="income"?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t("chart.income")}),a.jsx("button",{onClick:()=>s("expense"),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${r==="expense"?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t("chart.expense")})]})]}),a.jsx("div",{className:"h-80",role:"img","aria-label":t("chart.trendChart"),children:e&&e.length>0?a.jsx(Zg,{className:"h-full",children:a.jsx(Xg,{data:e,dataKey:r})}):a.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500",children:t("common.noData")})})]})}function n0(){const{t:e}=we("common");return a.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl p-6 text-white shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("dashboard.quickActions")}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Ve,{to:"/upload",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-4 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("span",{className:"font-medium",children:e("dashboard.quickActionUpload")})]})}),a.jsx(Ve,{to:"/goals",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-4 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),a.jsx("span",{className:"font-medium",children:e("dashboard.quickActionGoals")})]})}),a.jsx(Ve,{to:"/analytics",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-4 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),a.jsx("span",{className:"font-medium",children:e("dashboard.quickActionAnalytics")})]})})]})]})}function gl({end:e,duration:t=1e3,decimals:r=0,prefix:s="",suffix:i="",className:l="",formatter:d,onComplete:u}){const[p,g]=y.useState(0),x=y.useRef(null),v=y.useRef(null),T=y.useRef(e);y.useEffect(()=>{if(Math.abs(T.current-e)<.01)return;if(T.current=e,g(0),x.current=null,e===0){g(0);return}const N=$=>1-Math.pow(1-$,4),E=$=>{x.current||(x.current=$);const B=$-x.current,U=Math.min(B/t,1),W=N(U);g(W*e),U<1?v.current=requestAnimationFrame(E):(g(e),u==null||u())};return v.current=requestAnimationFrame(E),()=>{v.current&&cancelAnimationFrame(v.current)}},[e,t,u]);const L=d?d(p):`${s}${p.toFixed(r)}${i}`;return a.jsx("span",{className:l,children:L})}async function yl(e){const t=new URLSearchParams;e!=null&&e.includeInactive&&t.append("include_inactive","true");const r=`/api/accounts/${t.toString()?`?${t.toString()}`:""}`;return(await re.get(r)).data}async function r0(e){return(await re.get(`/api/accounts/${e}`)).data}async function a0(e){return(await re.post("/api/accounts/",e)).data}async function s0(e,t){return(await re.patch(`/api/accounts/${e}`,t)).data}function to(e=!1){return We({queryKey:["accounts",{includeInactive:e}],queryFn:()=>yl({includeInactive:e}),staleTime:1e3*60*5})}function Ax(e){return We({queryKey:["accounts",e],queryFn:()=>r0(e),staleTime:1e3*60*5,enabled:!!e})}function Rx(){const e=or();return oa({mutationFn:t=>a0(t),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}})}function Ox(){const e=or();return oa({mutationFn:({id:t,data:r})=>s0(t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts",r.id]}),e.invalidateQueries({queryKey:["accounts"]})}})}async function o0(){return(await re.get("/api/crypto/wallets")).data}async function i0(e){return(await re.get(`/api/crypto/wallets/${e}`)).data}async function Tx(e){return(await re.post("/api/crypto/wallets",e)).data}async function $x(e){await re.delete(`/api/crypto/wallets/${e}`)}async function Dx(e){return(await re.post(`/api/crypto/wallets/${e}/sync`)).data}async function Mx(e){return(await re.get(`/api/crypto/wallets/${e}/portfolio`)).data}async function c0(e){return(await re.get(`/api/crypto/wallets/${e}/defi-positions`)).data}async function Ix(){return(await re.get("/api/crypto/contracts")).data}async function Lx(e){return(await re.post("/api/crypto/contracts",e)).data}async function Fx(e){await re.delete(`/api/crypto/contracts/${e}`)}async function Bx(e,t=30){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/history`,{params:{days:t}})).data}async function Kx(e){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/performance`)).data}async function qx(e,t="en"){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/insights`,{params:{language:t}})).data}async function Ux(){return(await re.get("/api/crypto/rewards/unattributed")).data}async function zx(e,t){return(await re.post("/api/crypto/rewards/batch-attribute",{reward_ids:e,position_id:t})).data}async function Wx(e=90){return(await re.post("/api/crypto/rewards/scan",{days:e})).data}async function Vx(e){return(await re.post(`/api/crypto/rewards/${e}/create-transaction`)).data}async function Hx(e){return(await re.post("/api/crypto/rewards/batch-create-transactions",{reward_ids:e})).data}async function Gx(e){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/roi`)).data}async function Yx(e){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/rewards`)).data}async function Jx(e){return(await re.post("/api/crypto/positions/scenarios",e)).data}async function Qx(e="symbiotic"){return(await re.get("/api/crypto/rewards/staking",{params:{source:e}})).data}const Li=["bank","cash","investment","receivable","crypto"];function l0({monthlyNet:e,monthlyNetChange:t}){const{t:r}=we("common"),{data:s}=to(),{currency:i}=fr(),{isPrivacyMode:l}=hr(),d=Kg(),[u,p]=y.useState(!1),{data:g}=We({queryKey:["crypto-wallets"],queryFn:o0}),{data:x}=We({queryKey:["crypto-wallets-balance",g==null?void 0:g.map(J=>J.id)],queryFn:async()=>!g||g.length===0?[]:Promise.all(g.map(J=>i0(J.id))),enabled:!!g&&g.length>0}),{data:v}=We({queryKey:["crypto-defi-positions",g==null?void 0:g.map(J=>J.id)],queryFn:async()=>!g||g.length===0?[]:Promise.all(g.map(J=>c0(J.id).catch(()=>({wallet_address:"",total_value_usd:0,positions:[]})))),enabled:!!g&&g.length>0}),T=(x==null?void 0:x.reduce((J,X)=>J+(Number(X.total_balance_usd)||0),0))||0,L=(v==null?void 0:v.reduce((J,X)=>J+(Number(X.total_value_usd)||0),0))||0,N=T+L,E=1/(Number(d==null?void 0:d.USD)||.00667),$=Math.round(N*E)||0,B=(s==null?void 0:s.filter(J=>Li.includes(J.type)).reduce((J,X)=>J+X.current_balance,0))||0,U=(s==null?void 0:s.filter(J=>!Li.includes(J.type)).reduce((J,X)=>J+Math.abs(X.current_balance),0))||0,V=B+$-U,ae=y.useMemo(()=>J=>Et(J,i,d,!1,l),[i,d,l]);return a.jsx("div",{className:"mb-6 cursor-pointer",onClick:()=>p(!u),children:a.jsx(Me,{className:"hover:shadow-md transition-shadow bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:a.jsxs("div",{className:"text-center py-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wide",children:r("dashboard.netWorth","Net Worth")}),a.jsx("p",{className:te("text-4xl sm:text-5xl font-bold font-numbers tracking-tight",V>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:a.jsx(gl,{end:V,duration:1200,formatter:ae})}),e!==void 0&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r("dashboard.thisMonth","This month"),":"]}),a.jsxs("span",{className:te("flex items-center gap-1 text-sm font-medium",e>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e>=0?a.jsx(Ct,{size:14}):a.jsx(an,{size:14}),e>=0?"+":"",Et(e,i,d,!1,l)]}),t!=null&&a.jsxs("span",{className:te("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",t>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:[t>0?a.jsx(Ct,{size:10}):t<0?a.jsx(an,{size:10}):a.jsx(Qi,{size:10}),t>0?"+":"",t==null?void 0:t.toFixed(0),"%"]})]}),u&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 text-sm",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r("dashboard.assets","Assets")}),a.jsx("span",{className:"font-numbers text-green-600 dark:text-green-400",children:Et(B,i,d,!1,l)})]}),$>0&&a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r("crypto.totalBalance","Crypto")}),a.jsx("span",{className:"font-numbers text-purple-600 dark:text-purple-400",children:Et($,i,d,!1,l)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r("dashboard.liabilities","Liabilities")}),a.jsxs("span",{className:"font-numbers text-red-600 dark:text-red-400",children:["-",Et(U,i,d,!1,l)]})]})]})]})})})}function u0(e){return y.useMemo(()=>{const{income:t,expense:r,budgetCategories:s=[],goals:i=[]}=e,l=t>0?(t-r)/t*100:0;let d=0;l>=20?d=40:l>=15?d=35:l>=10?d=30:l>=5?d=20:l>=0?d=10:d=0;let u=30,p=100;s.length>0&&(p=s.filter($=>$.spent<=$.allocated).length/s.length*100,u=Math.round(p/100*30));let g=30,x=100;i.length>0&&(x=i.reduce(($,B)=>$+Math.min(B.progress,100),0)/i.length,g=Math.round(x/100*30));const v=d+u+g;let T="F";v>=90?T="A":v>=80?T="B":v>=70?T="C":v>=60&&(T="D");const L={A:"#22c55e",B:"#84cc16",C:"#eab308",D:"#f97316",F:"#ef4444"},N=[];return l<10&&N.push("tip.increaseSavings"),p<80&&s.length>0&&N.push("tip.stayWithinBudget"),x<80&&i.length>0&&N.push("tip.focusOnGoals"),l<0&&N.push("tip.reduceSpending"),N.length===0&&N.push("tip.keepItUp"),{score:v,grade:T,color:L[T],breakdown:{savingsRate:{score:d,max:40,value:Math.round(l)},budgetAdherence:{score:u,max:30,value:Math.round(p)},goalProgress:{score:g,max:30,value:Math.round(x)}},tips:N}},[e])}function d0({income:e,expense:t,budgetCategories:r=[],goals:s=[],previousScore:i}){const{t:l}=we("common"),[d,u]=y.useState(!1),p=u0({income:e,expense:t,budgetCategories:r,goals:s}),g=i!==void 0?p.score-i:null;return a.jsxs(Me,{className:"overflow-hidden",children:[a.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>u(!d),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:l("health.title","Financial Health")}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:d?a.jsx(ku,{size:16}):a.jsx(Nu,{size:16})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative w-20 h-20 flex-shrink-0",children:[a.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[a.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"currentColor",strokeWidth:"6",className:"text-gray-200 dark:text-gray-700"}),a.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:p.color,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:`${p.score/100*226} 226`,className:"transition-all duration-1000 ease-out"})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-2xl font-bold",style:{color:p.color},children:a.jsx(gl,{end:p.score,duration:1e3})}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.grade})]})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l(`health.grade.${p.grade}`,p.grade)}),g!==null&&g!==0&&a.jsxs("span",{className:te("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",g>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[g>0?a.jsx(Ct,{size:10}):a.jsx(an,{size:10}),g>0?"+":"",g]})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2",children:l(`health.description.${p.grade}`,"Your finances are looking good!")})]})]})]}),d&&a.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 dark:border-gray-800 pt-3 animate-modal-in",children:[a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:l("health.savingsRate","Savings Rate")}),a.jsxs("span",{className:"font-medium",children:[p.breakdown.savingsRate.value,"% (",p.breakdown.savingsRate.score,"/",p.breakdown.savingsRate.max,")"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${p.breakdown.savingsRate.score/p.breakdown.savingsRate.max*100}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:l("health.budgetAdherence","Budget Adherence")}),a.jsxs("span",{className:"font-medium",children:[p.breakdown.budgetAdherence.value,"% (",p.breakdown.budgetAdherence.score,"/",p.breakdown.budgetAdherence.max,")"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-500",style:{width:`${p.breakdown.budgetAdherence.score/p.breakdown.budgetAdherence.max*100}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:l("health.goalProgress","Goal Progress")}),a.jsxs("span",{className:"font-medium",children:[p.breakdown.goalProgress.value,"% (",p.breakdown.goalProgress.score,"/",p.breakdown.goalProgress.max,")"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-500",style:{width:`${p.breakdown.goalProgress.score/p.breakdown.goalProgress.max*100}%`}})})]})]}),p.tips.length>0&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(Su,{size:16,className:"text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-amber-800 dark:text-amber-300",children:l(`health.${p.tips[0]}`,p.tips[0])})]})})]})]})}function f0({categories:e,income:t,expense:r,previousIncome:s,previousExpense:i}){const{t:l}=we("common"),d=y.useMemo(()=>{const u=[],p=t>0?r/t*100:0;if(p>90?u.push({type:"warning",icon:a.jsx(En,{size:16}),title:l("insights.highSpending","High Spending Alert"),description:l("insights.highSpendingDesc","You're spending {{ratio}}% of your income",{ratio:Math.round(p)}),value:`${Math.round(p)}%`}):p<50&&u.push({type:"positive",icon:a.jsx(an,{size:16}),title:l("insights.goodSavings","Great Savings!"),description:l("insights.goodSavingsDesc","You're saving {{ratio}}% of your income",{ratio:Math.round(100-p)}),value:`${Math.round(100-p)}%`}),i&&i>0){const g=(r-i)/i*100;g>20?u.push({type:"warning",icon:a.jsx(Ct,{size:16}),title:l("insights.spendingUp","Spending Increased"),description:l("insights.spendingUpDesc","Up {{change}}% from last month",{change:Math.round(g)}),value:`+${Math.round(g)}%`}):g<-10&&u.push({type:"positive",icon:a.jsx(an,{size:16}),title:l("insights.spendingDown","Spending Decreased"),description:l("insights.spendingDownDesc","Down {{change}}% from last month",{change:Math.abs(Math.round(g))}),value:`${Math.round(g)}%`})}if(e.length>0){const g=e[0];g.percentage>40&&u.push({type:"neutral",icon:a.jsx(En,{size:16}),title:l("insights.topCategory","Top Category: {{category}}",{category:l(`category.${g.category}`,g.category)}),description:l("insights.topCategoryDesc","{{percentage}}% of your spending",{percentage:Math.round(g.percentage)}),value:mt(g.amount)})}return e.forEach(g=>{if(g.previous_amount&&g.previous_amount>0){const x=(g.amount-g.previous_amount)/g.previous_amount*100;x>50&&g.amount>r*.1&&u.push({type:"warning",icon:a.jsx(En,{size:16}),title:l("insights.unusualSpending","Unusual: {{category}}",{category:l(`category.${g.category}`,g.category)}),description:l("insights.unusualSpendingDesc","Up {{change}}% vs last month",{change:Math.round(x)}),value:mt(g.amount)})}}),u.slice(0,3)},[e,t,r,s,i,l]);return d.length===0?null:a.jsxs(Me,{className:"overflow-hidden",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4",children:l("insights.title","Spending Insights")}),a.jsx("div",{className:"space-y-3",children:d.map((u,p)=>a.jsxs("div",{className:te("flex items-start gap-3 p-3 rounded-lg transition-colors",u.type==="warning"&&"bg-amber-50 dark:bg-amber-900/20",u.type==="positive"&&"bg-green-50 dark:bg-green-900/20",u.type==="neutral"&&"bg-gray-50 dark:bg-gray-800/50"),children:[a.jsx("div",{className:te("p-1.5 rounded-full flex-shrink-0",u.type==="warning"&&"bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-400",u.type==="positive"&&"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-400",u.type==="neutral"&&"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:u.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm truncate",children:u.title}),u.value&&a.jsx("span",{className:te("text-sm font-semibold flex-shrink-0",u.type==="warning"&&"text-amber-600 dark:text-amber-400",u.type==="positive"&&"text-green-600 dark:text-green-400",u.type==="neutral"&&"text-gray-600 dark:text-gray-400"),children:u.value})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:u.description})]})]},p))})]})}function h0({currentMonth:e,previousMonth:t}){const{t:r}=we("common"),s=y.useMemo(()=>{if(!t)return[];const i=(p,g,x=!1)=>{const v=p-g,T=g>0?v/g*100:0,L=Math.abs(T)<1,N=x?v<0:v>0;return{change:v,changePercent:T,isPositive:N,isNeutral:L}},l=i(e.income,t.income),d=i(e.expenses,t.expenses,!0),u=i(e.net,t.net);return[{label:r("comparison.income","Income"),current:e.income,previous:t.income,...l},{label:r("comparison.expenses","Expenses"),current:e.expenses,previous:t.expenses,...d},{label:r("comparison.savings","Savings"),current:e.net,previous:t.net,...u}]},[e,t,r]);return t?a.jsxs(Me,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ws,{size:16,className:"text-gray-400"}),a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:r("comparison.title","Month vs Month")})]}),a.jsx("div",{className:"space-y-4",children:s.map(i=>a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.label}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:mt(i.current)}),!i.isNeutral&&a.jsxs("span",{className:te("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",i.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[i.isPositive?a.jsx(Ct,{size:10}):a.jsx(an,{size:10}),i.changePercent>0?"+":"",Math.round(i.changePercent),"%"]}),i.isNeutral&&a.jsxs("span",{className:"flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:[a.jsx(Qi,{size:10}),"0%"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 h-2",children:[a.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,i.previous/Math.max(i.current,i.previous)*100))}%`}})}),a.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:te("h-full rounded-full transition-all duration-500",i.isPositive?"bg-green-500":i.isNeutral?"bg-gray-400":"bg-red-500"),style:{width:`${Math.min(100,Math.max(0,i.current/Math.max(i.current,i.previous)*100))}%`}})})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[a.jsx("span",{children:r("comparison.lastMonth","Last month")}),a.jsx("span",{children:r("comparison.thisMonth","This month")})]})]})},i.label))})]}):null}function m0({income:e,expense:t,savingsRate:r,budgetCategories:s=[],goals:i=[]}){const{t:l}=we("common"),d=y.useMemo(()=>{const u=[];t>e&&e>0&&u.push({id:"overspending",type:"danger",icon:a.jsx(En,{size:16}),title:l("alerts.overspending","Overspending Alert"),description:l("alerts.overspendingDesc","Expenses exceed income by {{amount}}",{amount:mt(t-e)})}),r<10&&r>=0&&e>0&&u.push({id:"low-savings",type:"warning",icon:a.jsx(ia,{size:16}),title:l("alerts.lowSavings","Low Savings Rate"),description:l("alerts.lowSavingsDesc","Only saving {{rate}}% of income",{rate:Math.round(r)})});const p=s.filter(x=>x.spent>x.allocated&&x.allocated>0);if(p.length>0){const x=p.reduce((v,T)=>T.spent-T.allocated>v.spent-v.allocated?T:v);u.push({id:"budget-exceeded",type:"warning",icon:a.jsx(Ct,{size:16}),title:l("alerts.budgetExceeded","Budget Exceeded"),description:l("alerts.budgetExceededDesc","{{category}} is {{amount}} over budget",{category:l(`category.${x.category}`,x.category),amount:mt(x.spent-x.allocated)})})}const g=new Date;return i.forEach(x=>{if(x.deadline){const v=new Date(x.deadline),T=Math.ceil((v.getTime()-g.getTime())/(1e3*60*60*24)),L=x.target>0?x.current/x.target*100:0;T<=30&&T>0&&L<80&&u.push({id:`goal-${x.name}`,type:"info",icon:a.jsx(Tn,{size:16}),title:l("alerts.goalDeadline","Goal Deadline"),description:l("alerts.goalDeadlineDesc","{{name}}: {{days}} days left, {{progress}}% complete",{name:x.name,days:T,progress:Math.round(L)})})}}),u.slice(0,3)},[e,t,r,s,i,l]);return d.length===0?null:a.jsxs(Me,{className:"overflow-hidden border-l-4 border-l-amber-500",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(_u,{size:16,className:"text-amber-500"}),a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:l("alerts.title","Smart Alerts")}),a.jsx("span",{className:"ml-auto px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:d.length})]}),a.jsx("div",{className:"space-y-3",children:d.map(u=>a.jsxs("div",{className:te("flex items-start gap-3 p-3 rounded-lg",u.type==="danger"&&"bg-red-50 dark:bg-red-900/20",u.type==="warning"&&"bg-amber-50 dark:bg-amber-900/20",u.type==="info"&&"bg-blue-50 dark:bg-blue-900/20"),children:[a.jsx("div",{className:te("p-1.5 rounded-full flex-shrink-0",u.type==="danger"&&"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-400",u.type==="warning"&&"bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-400",u.type==="info"&&"bg-blue-100 text-blue-600 dark:bg-blue-800 dark:text-blue-400"),children:u.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:te("font-medium text-sm",u.type==="danger"&&"text-red-800 dark:text-red-300",u.type==="warning"&&"text-amber-800 dark:text-amber-300",u.type==="info"&&"text-blue-800 dark:text-blue-300"),children:u.title}),a.jsx("p",{className:te("text-xs mt-0.5",u.type==="danger"&&"text-red-600 dark:text-red-400",u.type==="warning"&&"text-amber-600 dark:text-amber-400",u.type==="info"&&"text-blue-600 dark:text-blue-400"),children:u.description})]})]},u.id))})]})}function p0({onAddTransaction:e,onScanReceipt:t,className:r}){const{t:s}=we("common"),i=jt(),l=e||(()=>i({to:"/transactions"})),d=t||(()=>i({to:"/transactions"})),u=[{icon:a.jsx(Ks,{size:20}),label:s("quickActions.addTransaction","Add"),onClick:l,color:"bg-primary-500 text-white"},{icon:a.jsx(Eu,{size:20}),label:s("quickActions.scan","Scan"),onClick:d,color:"bg-purple-500 text-white"},{icon:a.jsx(ir,{size:20}),label:s("quickActions.upload","Upload"),to:"/upload",color:"bg-blue-500 text-white"},{icon:a.jsx(qs,{size:20}),label:s("quickActions.analytics","Analytics"),to:"/analytics",color:"bg-green-500 text-white"},{icon:a.jsx(ia,{size:20}),label:s("quickActions.accounts","Accounts"),to:"/accounts",color:"bg-orange-500 text-white"},{icon:a.jsx(Tn,{size:20}),label:s("quickActions.goals","Goals"),to:"/goals",color:"bg-pink-500 text-white"}];return a.jsx("div",{className:te("overflow-x-auto scrollbar-hide -mx-4 px-4",r),children:a.jsx("div",{className:"flex gap-3 pb-2 min-w-max",children:u.map((p,g)=>{const x=a.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[a.jsx("div",{className:te("w-12 h-12 rounded-full flex items-center justify-center","transition-transform active:scale-95",p.color),children:p.icon}),a.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:p.label})]});return p.to?a.jsx(Ve,{to:p.to,className:"flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-xl p-1",children:x},g):a.jsx("button",{onClick:p.onClick,className:"flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-xl p-1",children:x},g)})})})}async function Xx(e){const t=new URLSearchParams;return e!=null&&e.start&&t.append("start_date",e.start),e!=null&&e.end&&t.append("end_date",e.end),(await re.get(`/api/analytics?${t.toString()}`)).data}async function g0(e=12){return(await re.get(`/api/analytics/monthly?months=${e}`)).data}async function y0(e){const t=new URLSearchParams;return e!=null&&e.start&&t.append("start_date",e.start),e!=null&&e.end&&t.append("end_date",e.end),(await re.get(`/api/analytics/categories?${t.toString()}`)).data}async function x0(e){return(await re.get("/api/dashboard/summary")).data}async function Zx(){return(await re.get("/api/analytics/insights")).data}async function b0(e=6){return(await re.get(`/api/analytics/forecast?months=${e}`)).data}function v0(){const{t:e}=we("common"),{currency:t}=fr(),{data:r}=In(),{data:s,isLoading:i,error:l}=We({queryKey:["forecast",6],queryFn:()=>b0(6),staleTime:5*60*1e3});if(i)return a.jsxs(Me,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(pe,{className:"h-6 w-6 rounded"}),a.jsx(pe,{className:"h-6 w-48"})]}),a.jsx(pe,{className:"h-80 w-full rounded-lg"}),a.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[a.jsx(pe,{className:"h-20 rounded-lg"}),a.jsx(pe,{className:"h-20 rounded-lg"})]})]});if(l||!s)return a.jsxs(Me,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(ws,{className:"w-5 h-5 text-gray-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("forecast.title")})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-gray-500",children:[a.jsx(En,{className:"w-8 h-8 mb-2"}),a.jsx("p",{children:e("forecast.error")})]})]});const{months:d,summary:u,current_balance:p}=s,g=d&&d.length>0,x=d[d.length-1],v=u.end_balance-p,T=v>=0,L=u.months_until_negative!==null;return a.jsxs(Me,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ws,{className:"w-5 h-5 text-primary-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("forecast.title")})]}),L&&a.jsxs("div",{className:"flex items-center gap-1 text-sm text-amber-600 dark:text-amber-400",children:[a.jsx(En,{className:"w-4 h-4"}),a.jsx("span",{children:e("forecast.warningNegative",{months:u.months_until_negative})})]})]}),g?a.jsx("div",{className:"h-80",role:"img","aria-label":e("forecast.chartLabel"),children:a.jsx(e0,{data:d})}):a.jsx("div",{className:"flex items-center justify-center h-80 text-gray-400 dark:text-gray-500",children:e("forecast.noData")}),g&&a.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:te("p-4 rounded-lg",T?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e("forecast.projectedBalance",{month:x==null?void 0:x.month.split("-")[1]})}),a.jsx("p",{className:te("text-2xl font-bold",T?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:mt(u.end_balance,t,(r==null?void 0:r.rates)||{},!1)}),a.jsxs("div",{className:te("flex items-center gap-1 mt-1 text-sm",T?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[T?a.jsx(Ct,{className:"w-4 h-4"}):a.jsx(an,{className:"w-4 h-4"}),a.jsxs("span",{children:[T?"+":"",mt(v,t,(r==null?void 0:r.rates)||{},!1)]})]})]}),a.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e("forecast.avgMonthlySavings")}),a.jsxs("p",{className:te("text-2xl font-bold",u.avg_monthly_net>=0?"text-gray-900 dark:text-gray-100":"text-red-600 dark:text-red-400"),children:[u.avg_monthly_net>=0?"+":"",mt(u.avg_monthly_net,t,(r==null?void 0:r.rates)||{},!1)]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("forecast.perMonth")})]})]})]})}function w0(){const{t:e}=we("common"),[t,r]=y.useState(!1);y.useEffect(()=>{localStorage.getItem("onboarding_dismissed")==="true"&&r(!0)},[]);const{data:s=[]}=We({queryKey:["accounts"],queryFn:()=>yl()}),{data:i=[]}=We({queryKey:["transactions-check"],queryFn:()=>fl()}),{data:l=[]}=We({queryKey:["goals"],queryFn:Bc}),d=s.length>0,u=i.length>0,p=l.length>0,g=[{id:"account",titleKey:"onboarding.steps.account.title",descriptionKey:"onboarding.steps.account.description",icon:a.jsx(ia,{className:"h-5 w-5"}),link:"/accounts",isComplete:d},{id:"upload",titleKey:"onboarding.steps.upload.title",descriptionKey:"onboarding.steps.upload.description",icon:a.jsx(ir,{className:"h-5 w-5"}),link:"/upload",isComplete:u},{id:"goals",titleKey:"onboarding.steps.goals.title",descriptionKey:"onboarding.steps.goals.description",icon:a.jsx(Tn,{className:"h-5 w-5"}),link:"/goals",isComplete:p}],x=g.filter(N=>N.isComplete).length,v=x===g.length,T=Math.round(x/g.length*100);if(t||v)return null;const L=()=>{localStorage.setItem("onboarding_dismissed","true"),r(!0)};return a.jsxs(Me,{className:"mb-6 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-950 dark:to-blue-950 border-primary-200 dark:border-primary-800",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:a.jsx(Fs,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("onboarding.title")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("onboarding.subtitle",{completed:x,total:g.length})})]})]}),a.jsx("button",{onClick:L,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":e("button.close"),children:a.jsx(un,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${T}%`}})})}),a.jsx("div",{className:"space-y-2",children:g.map(N=>a.jsxs(Ve,{to:N.link,className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${N.isComplete?"bg-green-50 dark:bg-green-950/50":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-750"}`,children:[a.jsx("div",{className:`p-2 rounded-full ${N.isComplete?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:N.isComplete?a.jsx(Cu,{className:"h-5 w-5"}):N.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`font-medium ${N.isComplete?"text-green-700 dark:text-green-400 line-through":"text-gray-900 dark:text-gray-100"}`,children:e(N.titleKey)}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e(N.descriptionKey)})]}),!N.isComplete&&a.jsx(Xi,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]},N.id))})]})}function Fi({icon:e,title:t,description:r,action:s,className:i,compact:l=!1}){return a.jsxs("div",{className:te("flex flex-col items-center justify-center px-4",l?"py-6":"py-12",i),children:[e&&a.jsx("div",{className:te("flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",l?"w-12 h-12 mb-3":"w-16 h-16 mb-4"),children:a.jsx("div",{className:te("text-gray-400 dark:text-gray-500",l?"[&>svg]:w-6 [&>svg]:h-6":"[&>svg]:w-8 [&>svg]:h-8"),children:e})}),a.jsx("h3",{className:te("font-medium text-gray-700 dark:text-gray-300 text-center",l?"text-sm mb-1":"text-lg mb-2"),children:t}),r&&a.jsx("p",{className:te("text-gray-500 dark:text-gray-400 text-center max-w-sm",l?"text-xs mb-3":"text-sm mb-4"),children:r}),s&&a.jsx("div",{className:l?"mt-1":"mt-2",children:s})]})}function j0(){return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(pe,{className:"w-40 h-8 mb-2"}),a.jsx(pe,{className:"w-56 h-5"})]}),a.jsx(Hg,{className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[a.jsx(xs,{}),a.jsx(xs,{}),a.jsx(xs,{})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[a.jsxs(Me,{className:"lg:col-span-2 h-80",children:[a.jsx(pe,{className:"w-32 h-5 mb-4"}),a.jsx(pe,{className:"w-full h-56"})]}),a.jsxs(Me,{children:[a.jsx(pe,{className:"w-28 h-5 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(pe,{className:"w-full h-12 rounded-lg"}),a.jsx(pe,{className:"w-full h-12 rounded-lg"}),a.jsx(pe,{className:"w-full h-12 rounded-lg"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Me,{children:[a.jsx(pe,{className:"w-40 h-5 mb-6"}),a.jsx(Vg,{})]}),a.jsxs(Me,{children:[a.jsx(pe,{className:"w-36 h-5 mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Ii,{}),a.jsx(Ii,{})]})]})]})]})}const k0={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},N0=(e,t,r)=>{r=r||{};let s;const i=k0[e];return typeof i=="string"?s=i:t===1?r.addSuffix&&i.oneWithSuffix?s=i.oneWithSuffix:s=i.one:r.addSuffix&&i.otherWithSuffix?s=i.otherWithSuffix.replace("{{count}}",String(t)):s=i.other.replace("{{count}}",String(t)),r.addSuffix?r.comparison&&r.comparison>0?s+"":s+"":s},S0={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},_0={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},E0={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},C0={date:Xa({formats:S0,defaultWidth:"full"}),time:Xa({formats:_0,defaultWidth:"full"}),dateTime:Xa({formats:E0,defaultWidth:"full"})},P0={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},A0=(e,t,r,s)=>P0[e],R0={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},O0={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},T0={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},$0={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},D0={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},M0={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},I0=(e,t)=>{const r=Number(e);switch(String(t==null?void 0:t.unit)){case"year":return`${r}`;case"quarter":return`${r}`;case"month":return`${r}`;case"week":return`${r}`;case"date":return`${r}`;case"hour":return`${r}`;case"minute":return`${r}`;case"second":return`${r}`;default:return`${r}`}},L0={ordinalNumber:I0,era:Xn({values:R0,defaultWidth:"wide"}),quarter:Xn({values:O0,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Xn({values:T0,defaultWidth:"wide"}),day:Xn({values:$0,defaultWidth:"wide"}),dayPeriod:Xn({values:D0,defaultWidth:"wide",formattingValues:M0,defaultFormattingWidth:"wide"})},F0=/^?\d+(|||||||)?/i,B0=/\d+/i,K0={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},q0={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},U0={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},z0={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},W0={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},V0={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},H0={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},G0={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},Y0={any:/^(AM|PM|||||||)/i},J0={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},Q0={ordinalNumber:Bu({matchPattern:F0,parsePattern:B0,valueCallback:function(e){return parseInt(e,10)}}),era:Zn({matchPatterns:K0,defaultMatchWidth:"wide",parsePatterns:q0,defaultParseWidth:"any"}),quarter:Zn({matchPatterns:U0,defaultMatchWidth:"wide",parsePatterns:z0,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Zn({matchPatterns:W0,defaultMatchWidth:"wide",parsePatterns:V0,defaultParseWidth:"any"}),day:Zn({matchPatterns:H0,defaultMatchWidth:"wide",parsePatterns:G0,defaultParseWidth:"any"}),dayPeriod:Zn({matchPatterns:Y0,defaultMatchWidth:"any",parsePatterns:J0,defaultParseWidth:"any"})},X0={code:"ja",formatDistance:N0,formatLong:C0,formatRelative:A0,localize:L0,match:Q0,options:{weekStartsOn:0,firstWeekContainsDate:1}};function no(e,t="yyyy/MM/dd"){try{const r=typeof e=="string"?Ku(e):e;return qu(r)?Zi(r,t,{locale:X0}):"---"}catch{return"---"}}function eb(e){return no(e,"yyyyMd HH:mm")}function Z0(e){return no(e,"yyyyM")}function tb(){const e=new Date,t=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0");return{start:`${t}-${r}-01`,end:Zi(new Date(t,e.getMonth()+1,0),"yyyy-MM-dd")}}function nb(e){return no(e,"MMM d (EEE)")}async function ey(e){return(await re.post("/api/proxy/purchase",e)).data}async function ty(){return(await re.get("/api/proxy/outstanding")).data}async function ny(e){return(await re.post("/api/proxy/settle",e)).data}function bs(e){const t=e.replace(/[^\d]/g,"");return t?parseInt(t).toLocaleString("en-US"):""}function Sn(e){return parseInt(e.replace(/[,.\s]/g,""),10)||0}function ry({isOpen:e,onClose:t}){const{t:r}=we("common"),s=or(),{data:i=[]}=to(),{data:l}=In(),[d,u]=y.useState(1),[p,g]=y.useState(null),[x,v]=y.useState(""),[T,L]=y.useState(""),[N,E]=y.useState(null),[$,B]=y.useState(new Date().toISOString().split("T")[0]),[U,W]=y.useState(""),[V,ae]=y.useState(""),[J,X]=y.useState(""),[ce,_e]=y.useState({}),Te=y.useMemo(()=>i.filter(G=>G.type==="receivable"&&G.is_active),[i]),ie=y.useMemo(()=>i.filter(G=>G.type!=="receivable"&&G.is_active),[i]),fe=y.useMemo(()=>{var G;return(G=l==null?void 0:l.rates)!=null&&G.VND?l.rates.VND:170},[l]),Ne=Sn(T),$e=Sn(U),ze=parseFloat(V)||fe,Pe=$e*ze,Qe=$e-Ne,Ae=Ne>0?(Qe/Ne*100).toFixed(1):"0";y.useEffect(()=>{e&&(u(1),g(null),v(""),L(""),E(null),B(new Date().toISOString().split("T")[0]),W(""),ae(fe.toFixed(1)),X(""),_e({}))},[e,fe]),y.useEffect(()=>{!V&&fe&&ae(fe.toFixed(1))},[fe]);const Be=()=>{const G={};return p||(G.client=r("proxy.errors.clientRequired")),x.trim()||(G.item=r("proxy.errors.itemRequired")),(!T||Sn(T)<=0)&&(G.cost=r("proxy.errors.costRequired")),N||(G.payment=r("proxy.errors.paymentRequired")),_e(G),Object.keys(G).length===0},Ke=()=>{const G={};return(!U||Sn(U)<=0)&&(G.markup=r("proxy.errors.markupRequired")),(!V||parseFloat(V)<=0)&&(G.rate=r("proxy.errors.rateRequired")),_e(G),Object.keys(G).length===0},Ee=()=>{Be()&&(U||W(T),u(2))},q=oa({mutationFn:ey,onSuccess:()=>{s.invalidateQueries({queryKey:["transactions"]}),s.invalidateQueries({queryKey:["accounts"]}),s.invalidateQueries({queryKey:["proxy-outstanding"]}),t()}}),de=()=>{Ke()&&q.mutate({client_account_id:p,item:x.trim(),cost:Sn(T),payment_account_id:N,markup_price:Sn(U),exchange_rate:parseFloat(V),purchase_date:$,notes:J.trim()||void 0})},he=Te.find(G=>G.id===p);if(!e)return null;const le=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Pu,{className:"w-5 h-5 text-blue-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:r("proxy.title")})]}),a.jsx("button",{onClick:t,className:"p-2.5 -mr-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a.jsx(un,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"px-4 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:r("proxy.step",{current:d,total:2})}),a.jsx("span",{children:""}),a.jsx("span",{children:r(d===1?"proxy.step1Title":"proxy.step2Title")})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:te("h-1 flex-1 rounded",d>=1?"bg-blue-500":"bg-gray-200 dark:bg-gray-700")}),a.jsx("div",{className:te("h-1 flex-1 rounded",d>=2?"bg-blue-500":"bg-gray-200 dark:bg-gray-700")})]})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:d===1?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.client")," *"]}),a.jsxs("select",{value:p||"",onChange:G=>g(Number(G.target.value)||null),className:te("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",ce.client?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[a.jsx("option",{value:"",children:r("proxy.selectClient")}),Te.map(G=>a.jsx("option",{value:G.id,children:G.name.replace("Receivable: ","")},G.id))]}),ce.client&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.client}),Te.length===0&&a.jsx("p",{className:"text-amber-600 text-xs mt-1",children:r("proxy.noClients")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.item")," *"]}),a.jsx(ot,{value:x,onChange:G=>v(G.target.value),placeholder:r("proxy.itemPlaceholder"),className:ce.item?"border-red-500":""}),ce.item&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.item})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.cost")," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),a.jsx(ot,{value:T,onChange:G=>L(bs(G.target.value)),placeholder:"1,000",className:te("pl-8",ce.cost?"border-red-500":""),inputMode:"numeric"})]}),ce.cost&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.cost})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.paymentMethod")," *"]}),a.jsxs("select",{value:N||"",onChange:G=>E(Number(G.target.value)||null),className:te("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",ce.payment?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[a.jsx("option",{value:"",children:r("proxy.selectPayment")}),ie.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))]}),ce.payment&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.payment})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:r("proxy.purchaseDate")}),a.jsx(ot,{type:"date",value:$,onChange:G=>B(G.target.value)})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"font-medium",children:x})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[r("proxy.yourCost"),": ",T]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[r("proxy.client"),": ",he==null?void 0:he.name.replace("Receivable: ","")]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.markupPrice")," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),a.jsx(ot,{value:U,onChange:G=>W(bs(G.target.value)),placeholder:"1,200",className:te("pl-8",ce.markup?"border-red-500":""),inputMode:"numeric"})]}),ce.markup&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.markup}),a.jsx("div",{className:"flex gap-2 mt-2",children:[10,15,20].map(G=>a.jsxs("button",{type:"button",onClick:()=>W(bs(String(Math.round(Ne*(1+G/100))))),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:["+",G,"%"]},G))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:r("proxy.exchangeRate")}),a.jsxs("div",{className:"relative",children:[a.jsx(ot,{value:V,onChange:G=>ae(G.target.value),placeholder:"170",className:ce.rate?"border-red-500":"",inputMode:"decimal"}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"VND/JPY"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r("proxy.currentRate"),": ",fe.toFixed(1)," VND/JPY"]}),ce.rate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.rate})]}),a.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsxs("span",{children:[r("proxy.clientPays"),":"]}),a.jsxs("span",{className:"font-bold",children:["",Pe.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsxs("span",{children:[r("proxy.yourProfit"),":"]}),a.jsxs("span",{className:te("font-bold",Qe>=0?"text-green-600":"text-red-600"),children:["",Qe.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[r("proxy.profitMargin"),":"]}),a.jsxs("span",{className:"font-medium",children:[Ae,"%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:r("proxy.notes")}),a.jsx("textarea",{value:J,onChange:G=>X(G.target.value),placeholder:r("proxy.notesPlaceholder"),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 resize-none",rows:2})]})]})}),a.jsx("div",{className:"flex justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:d===1?a.jsxs(a.Fragment,{children:[a.jsx(Ze,{variant:"secondary",onClick:t,children:r("button.cancel")}),a.jsxs(Ze,{onClick:Ee,disabled:Te.length===0,children:[r("button.next")," ",a.jsx(Au,{className:"w-4 h-4 ml-1"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(Ze,{variant:"secondary",onClick:()=>u(1),children:[a.jsx(Ru,{className:"w-4 h-4 mr-1"})," ",r("button.back")]}),a.jsx(Ze,{onClick:de,disabled:q.isPending,children:q.isPending?r("button.creating"):r("proxy.createPurchase")})]})})]})]});return typeof document>"u"?null:Pt.createPortal(le,document.body)}function Bi(e){const t=e.replace(/[^\d]/g,"");return t?parseInt(t).toLocaleString("en-US"):""}function Ki(e){return parseInt(e.replace(/[,.\s]/g,""),10)||0}function ay({isOpen:e,onClose:t,client:r}){const{t:s}=we("common"),i=or(),{data:l=[]}=to(),[d,u]=y.useState(new Set),[p,g]=y.useState(null),[x,v]=y.useState(""),[T,L]=y.useState(new Date().toISOString().split("T")[0]),[N,E]=y.useState({}),$=y.useMemo(()=>l.filter(ie=>ie.type!=="receivable"&&ie.is_active),[l]),B=y.useMemo(()=>r?r.items.filter(ie=>d.has(ie.transaction_id)):[],[r,d]),U=B.reduce((ie,fe)=>ie+fe.amount_jpy,0),W=B.reduce((ie,fe)=>ie+fe.charge_vnd,0);y.useEffect(()=>{e&&r&&(u(new Set(r.items.map(ie=>ie.transaction_id))),g(null),v(""),L(new Date().toISOString().split("T")[0]),E({}))},[e,r]),y.useEffect(()=>{W>0&&v(Bi(String(W)))},[W]);const V=ie=>{u(fe=>{const Ne=new Set(fe);return Ne.has(ie)?Ne.delete(ie):Ne.add(ie),Ne})},ae=()=>{r&&u(new Set(r.items.map(ie=>ie.transaction_id)))},J=()=>u(new Set),X=()=>{const ie={};return d.size===0&&(ie.items=s("proxy.errors.selectItems")),p||(ie.receive=s("proxy.errors.receiveRequired")),(!x||Ki(x)<=0)&&(ie.amount=s("proxy.errors.amountRequired")),E(ie),Object.keys(ie).length===0},ce=oa({mutationFn:ny,onSuccess:()=>{i.invalidateQueries({queryKey:["transactions"]}),i.invalidateQueries({queryKey:["accounts"]}),i.invalidateQueries({queryKey:["proxy-outstanding"]}),t()}}),_e=()=>{!X()||!r||ce.mutate({client_account_id:r.client_id,transaction_ids:Array.from(d),receive_account_id:p,vnd_amount:Ki(x),payment_date:T})};if(!e||!r)return null;const Te=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ou,{className:"w-5 h-5 text-green-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:s("proxy.settleTitle")})]}),a.jsx("button",{onClick:t,className:"p-2.5 -mr-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a.jsx(un,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("proxy.client")}),a.jsx("p",{className:"font-semibold text-lg",children:r.client_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[s("proxy.outstanding"),": ",r.total_jpy.toLocaleString()]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:s("proxy.selectItemsToSettle")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:ae,className:"text-xs text-blue-500 hover:underline",children:s("proxy.selectAll")}),a.jsx("button",{onClick:J,className:"text-xs text-blue-500 hover:underline",children:s("proxy.selectNone")})]})]}),a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg max-h-40 overflow-y-auto",children:r.items.map(ie=>a.jsxs("label",{className:te("flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50","border-b border-gray-100 dark:border-gray-700 last:border-0"),children:[a.jsx("input",{type:"checkbox",checked:d.has(ie.transaction_id),onChange:()=>V(ie.transaction_id),className:"rounded border-gray-300 text-blue-600"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:ie.item}),a.jsx("p",{className:"text-xs text-gray-500",children:ie.date})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-mono text-sm",children:["",ie.amount_jpy.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["",ie.charge_vnd.toLocaleString()]})]})]},ie.transaction_id))}),N.items&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:N.items})]}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg mb-4",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[s("proxy.settlementAmount")," (JPY):"]}),a.jsxs("span",{className:"font-bold",children:["",U.toLocaleString()]})]})}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[s("proxy.receiveTo")," *"]}),a.jsxs("select",{value:p||"",onChange:ie=>g(Number(ie.target.value)||null),className:te("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",N.receive?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[a.jsx("option",{value:"",children:s("proxy.selectAccount")}),$.map(ie=>a.jsxs("option",{value:ie.id,children:[ie.name," (",ie.currency,")"]},ie.id))]}),N.receive&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:N.receive})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[s("proxy.amountReceived")," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),a.jsx(ot,{value:x,onChange:ie=>v(Bi(ie.target.value)),placeholder:"544,000",className:te("pl-8",N.amount?"border-red-500":""),inputMode:"numeric"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s("proxy.expected"),": ",W.toLocaleString()]}),N.amount&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:N.amount})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:s("proxy.paymentDate")}),a.jsx(ot,{type:"date",value:T,onChange:ie=>L(ie.target.value)})]})]}),a.jsxs("div",{className:"flex justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(Ze,{variant:"secondary",onClick:t,children:s("button.cancel")}),a.jsx(Ze,{onClick:_e,disabled:ce.isPending||d.size===0,children:ce.isPending?s("button.processing"):s("proxy.confirmPayment")})]})]})]});return typeof document>"u"?null:Pt.createPortal(Te,document.body)}function sy(){const{t:e}=we("common"),[t,r]=y.useState(!1),[s,i]=y.useState(null),{data:l=[],isLoading:d}=We({queryKey:["proxy-outstanding"],queryFn:ty}),u=l.reduce((g,x)=>g+x.total_jpy,0),p=g=>{if(!g)return 0;const x=new Date(g);return Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60*24))};return d?a.jsx(Me,{className:"animate-pulse",children:a.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})}):l.length===0?null:a.jsxs(a.Fragment,{children:[a.jsxs(Me,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tu,{className:"w-5 h-5 text-blue-500"}),a.jsx("h3",{className:"font-semibold",children:e("proxy.outstandingReceivables")})]}),a.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[a.jsx(Ks,{className:"w-4 h-4"}),e("proxy.newPurchase")]})]}),a.jsx("div",{className:"space-y-2",children:l.map(g=>{const x=p(g.oldest_date);return a.jsxs("button",{onClick:()=>i(g),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:g.client_name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[g.item_count," ",e("proxy.items"),x>0&&`  ${e("proxy.oldestDays",{days:x})}`]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-mono font-semibold",children:["",g.total_jpy.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["",g.total_vnd.toLocaleString()]})]}),a.jsx(Xi,{className:"w-4 h-4 text-gray-400"})]})]},g.client_id)})}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-500",children:[e("proxy.total"),":"]}),a.jsxs("span",{className:"font-bold",children:["",u.toLocaleString()]})]})})]}),a.jsx(ry,{isOpen:t,onClose:()=>r(!1)}),a.jsx(ay,{isOpen:!!s,onClose:()=>i(null),client:s})]})}function oy(){var T,L,N,E,$,B,U,W,V,ae,J;const{t:e}=we("common"),{data:t,isLoading:r}=We({queryKey:["dashboard-summary"],queryFn:()=>x0()}),{data:s,isLoading:i}=We({queryKey:["monthly-trends",12],queryFn:()=>g0(12)}),{data:l,isLoading:d}=We({queryKey:["category-breakdown"],queryFn:()=>y0()}),{data:u,isLoading:p}=We({queryKey:["goals"],queryFn:Bc}),{data:g,isLoading:x}=We({queryKey:["goals-progress",u==null?void 0:u.map(X=>X.id)],queryFn:async()=>!u||u.length===0?[]:Promise.all(u.map(X=>am(X.id,!0))),enabled:!!u&&u.length>0});return r||i||d||p?a.jsx(j0,{}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:e("dashboard.title")}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("dashboard.subtitle",{month:Z0(new Date)})})]}),a.jsx(w0,{}),a.jsx(l0,{monthlyNet:t==null?void 0:t.net,monthlyNetChange:t==null?void 0:t.net_change}),a.jsx("div",{className:"lg:hidden mb-6",children:a.jsx(p0,{})}),s&&s.length>0&&a.jsx("div",{className:"mb-6",children:a.jsx(m0,{income:((T=s[s.length-1])==null?void 0:T.income)||0,expense:((L=s[s.length-1])==null?void 0:L.expenses)||0,savingsRate:((N=s[s.length-1])==null?void 0:N.income)>0?(((E=s[s.length-1])==null?void 0:E.income)-(($=s[s.length-1])==null?void 0:$.expenses))/((B=s[s.length-1])==null?void 0:B.income)*100:0})}),a.jsx("div",{className:"mb-6",children:a.jsx(v0,{})}),a.jsx(Wg,{summary:t}),s&&s.length>0&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[a.jsx(d0,{income:((U=s[s.length-1])==null?void 0:U.income)||0,expense:((W=s[s.length-1])==null?void 0:W.expenses)||0,goals:(g==null?void 0:g.map(X=>({progress:X.total_saved/X.target_amount*100})))||[]}),a.jsx(f0,{categories:l||[],income:((V=s[s.length-1])==null?void 0:V.income)||0,expense:((ae=s[s.length-1])==null?void 0:ae.expenses)||0,previousExpense:s.length>1?(J=s[s.length-2])==null?void 0:J.expenses:void 0})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[a.jsx(t0,{data:s}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(n0,{}),s&&s.length>1&&a.jsx(h0,{currentMonth:s[s.length-1],previousMonth:s[s.length-2]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Me,{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:e("dashboard.categoryBreakdown")}),l&&l.length>0?a.jsxs(a.Fragment,{children:[a.jsx(zg,{categories:l,maxItems:4}),a.jsx(Ve,{to:"/analytics",className:"mt-6 block text-center text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.viewAllCategories")})]}):a.jsx(Fi,{icon:a.jsx(Vi,{}),title:e("dashboard.noCategories","No spending data yet"),description:e("dashboard.noCategoriesDescription","Add transactions to see your spending breakdown"),compact:!0,action:a.jsx(Ve,{to:"/transactions",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.addTransaction","Add transaction")})})]}),a.jsxs(Me,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.goalAchievability")}),a.jsx(Ve,{to:"/goals",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.viewDetails")})]}),g&&g.length>0&&!x?a.jsx("div",{className:"space-y-6",children:g.slice(0,3).map(X=>X.achievability&&a.jsx(qg,{goalId:X.goal_id,goalName:e("dashboard.yearGoal",{years:X.years}),achievability:X.achievability,targetAmount:X.target_amount,currentAmount:X.total_saved},X.goal_id))}):u&&u.length>0?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(pl,{size:"md"})}):a.jsx(Fi,{icon:a.jsx(Tn,{}),title:e("dashboard.noGoals","No goals yet"),description:e("dashboard.noGoalsDescription","Set financial goals to track your progress"),compact:!0,action:a.jsx(Ve,{to:"/goals",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.createGoal","Create a goal")})})]})]}),a.jsx("div",{className:"mt-6",children:a.jsx(sy,{})})]})}const iy=ft("/")({component:oy}),cy=xg.update({id:"/upload",path:"/upload",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./upload.lazy-Dz0kIyK-.js"),__vite__mapDeps([13,1,2,3,4,5,6])).then(e=>e.Route)),ly=bg.update({id:"/transactions",path:"/transactions",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./transactions.lazy-sWTc8bZH.js"),__vite__mapDeps([14,1,2,15,16,3,17,5,18,4,6])).then(e=>e.Route)),uy=vg.update({id:"/settings",path:"/settings",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./settings.lazy-g8XF2Ip3.js"),__vite__mapDeps([19,1,2,20,5,15,21,17,3,4,6])).then(e=>e.Route)),dy=jg.update({id:"/register",path:"/register",getParentRoute:()=>ct}),fy=kg.update({id:"/recurring",path:"/recurring",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./recurring.lazy-Cx53E2oY.js"),__vite__mapDeps([22,1,2,21,17,3,5,15,18,4,6])).then(e=>e.Route)),hy=Sg.update({id:"/login",path:"/login",getParentRoute:()=>ct}),my=Dg.update({id:"/landing",path:"/landing",getParentRoute:()=>ct}),py=Mg.update({id:"/goals",path:"/goals",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./goals.lazy-CiLVc1II.js"),__vite__mapDeps([23,1,2,16,3,4,5,6])).then(e=>e.Route)),gy=Ig.update({id:"/budget",path:"/budget",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./budget.lazy-DxlAyFFx.js"),__vite__mapDeps([24,1,2,3,5,17,4,6])).then(e=>e.Route)),yy=Lg.update({id:"/analytics",path:"/analytics",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./analytics.lazy--B7v9OUj.js"),__vite__mapDeps([25,1,2,8,3,4,5,6,9,0,11,7])).then(e=>e.Route)),xy=Fg.update({id:"/accounts",path:"/accounts",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./accounts.lazy-BRXHkHXf.js"),__vite__mapDeps([26,1,2,3,20,5,4,6])).then(e=>e.Route)),by=iy.update({id:"/",path:"/",getParentRoute:()=>ct}),vy={IndexRoute:by,AccountsRoute:xy,AnalyticsRoute:yy,BudgetRoute:gy,GoalsRoute:py,LandingRoute:my,LoginRoute:hy,RecurringRoute:fy,RegisterRoute:dy,SettingsRoute:uy,TransactionsRoute:ly,UploadRoute:cy},wy=ct._addFileChildren(vy)._addFileTypes();function jy(){const{isOnline:e,isSyncing:t,pendingCount:r,lastError:s}=Sh(),{t:i}=we(),[l,d]=y.useState(!1);if(y.useEffect(()=>{if(e&&!t&&r===0&&!s){d(!0);const p=setTimeout(()=>d(!1),3e3);return()=>clearTimeout(p)}},[e,t,r,s]),e&&!t&&r===0&&!l&&!s)return null;const u=()=>e?s?"bg-red-500 dark:bg-red-600":t?"bg-blue-500 dark:bg-blue-600":"bg-green-500 dark:bg-green-600":"bg-gray-600 dark:bg-gray-700";return a.jsx("div",{className:"fixed top-4 right-4 z-[9999]",role:"status","aria-live":"polite",children:a.jsxs("div",{className:`
        flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg
        ${u()}
        text-white text-sm font-medium
        transition-all duration-300 ease-in-out
      `,children:[!e&&a.jsxs(a.Fragment,{children:[a.jsx($u,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:i("sync.offline","Offline")}),r>0&&a.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:r})]}),e&&s&&a.jsxs(a.Fragment,{children:[a.jsx(qi,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:i("sync.error","Sync error")})]}),e&&t&&a.jsxs(a.Fragment,{children:[a.jsx(Du,{size:16,className:"animate-spin","aria-hidden":"true"}),a.jsxs("span",{children:[i("sync.syncing","Syncing"),r>0&&` (${r})`]})]}),e&&!t&&!s&&l&&a.jsxs(a.Fragment,{children:[a.jsx(Ui,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:i("sync.synced","All synced")})]})]})})}const ky=nu({routeTree:wy});function Ny(){return a.jsxs(a.Fragment,{children:[a.jsx(jy,{}),a.jsx(ru,{router:ky})]})}Mu.use(Iu).use(Lu).use(Fu).init({fallbackLng:"ja",supportedLngs:["ja","en","vi"],defaultNS:"common",ns:["common","landing"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},debug:!1});gh().then(e=>{e||console.warn("IndexedDB initialization failed - offline features may not work")});js.createRoot(document.getElementById("root")).render(a.jsx(iu.StrictMode,{children:a.jsx(Cf,{children:a.jsx(Vu,{client:Eh,persistOptions:{persister:Th,maxAge:1e3*60*60*24,dehydrateOptions:{shouldDehydrateQuery:e=>e.state.status==="success"&&Ch([...e.queryKey])}},children:a.jsx(Nh,{children:a.jsx(Nf,{children:a.jsx(_f,{children:a.jsx(Ef,{children:a.jsx(dh,{children:a.jsx(Ny,{})})})})})})})})}));export{sm as $,Tx as A,Ze as B,Me as C,$x as D,Fi as E,Dx as F,Lx as G,Fx as H,ot as I,o0 as J,Ix as K,pl as L,Jy as M,Sf as N,dx as O,rm as P,hx as Q,ux as R,Cx as S,fx as T,qg as U,Bc as V,am as W,y0 as X,mt as Y,xx as Z,bx as _,re as a,px as a0,mx as a1,gx as a2,yx as a3,In as a4,Zx as a5,Xx as a6,Rx as a7,Ox as a8,Ax as a9,i0 as aa,Mx as ab,Pc as ac,Jx as ad,Wx as ae,Vx as af,Hx as ag,Gx as ah,Yx as ai,Qx as aj,Bx as ak,Kx as al,qx as am,zx as an,Ux as ao,c0 as ap,yl as b,te as c,wx as d,jx as e,eb as f,lx as g,Sx as h,Qy as i,_x as j,vx as k,Kg as l,hr as m,no as n,Ex as o,fr as p,tb as q,kx as r,Nx as s,ea as t,to as u,Et as v,Px as w,nb as x,Xs as y,fl as z};
