import{j as e}from"./vendor-router-DONIM_LE.js";import{M as v,A as w,ac as C,aN as c,j as x}from"./index-8QQOl6s4.js";import{u as B}from"./vendor-i18n-CNDlYvyf.js";import{R as E,B as F,X as A,Y as S,T as D,j as T,e as z,d as M}from"./vendor-charts-BwEA5mzu.js";import"./vendor-react-Cwh1aMWO.js";import"./vendor-query-B0NEAgzV.js";function q({data:l,savingsGoal:s}){const{t:a}=B("common"),{currency:n}=v(),{data:t}=w(),{resolvedTheme:b}=C(),m=b==="dark",N=m?"#1e1e2e":"#fff",k=m?"#45475a":"#E5E7EB",y=m?"#cdd6f4":"#374151",h=l.length>0?l[l.length-1]:null,r=(h==null?void 0:h.net)||0,f=l.length>1?l.slice(0,-1):l,d=f.length>0?f.reduce((o,u)=>o+u.net,0)/f.length:r,p=[{name:a("analytics.thisMonth"),value:r,color:r>=0?"#4CAF50":"#F44336"},{name:a("analytics.average"),value:d,color:"#9E9E9E"}],j=d!==0?(r-d)/Math.abs(d)*100:0,g=j>=0,i=s&&s>0?Math.min(r/s*100,100):null;return l.length===1?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:a("analytics.netCashFlow")}),e.jsx("p",{className:x("text-3xl font-bold",r>=0?"text-income-600 dark:text-income-300":"text-expense-600 dark:text-expense-300"),children:c(r,n,(t==null?void 0:t.rates)||{},!1)}),r>=0&&e.jsx("p",{className:"text-sm text-income-600 dark:text-income-300 mt-1",children:a("analytics.positiveCashFlow")}),s&&s>0&&e.jsxs("div",{className:"mt-4 w-full max-w-xs",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:a("analytics.savingsGoal")}),e.jsxs("span",{children:[(i??0).toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:x("h-full rounded-full transition-[width] duration-700 ease-out",i&&i>=100?"bg-green-500":"bg-primary-500"),style:{width:`${i||0}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:[c(s,n,(t==null?void 0:t.rates)||{},!1)," ",a("analytics.target")]})]})]}):e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 min-h-[150px]",children:e.jsx(E,{width:"100%",height:"100%",children:e.jsxs(F,{data:p,layout:"vertical",margin:{top:10,right:60,left:10,bottom:10},children:[e.jsx(A,{type:"number",hide:!0}),e.jsx(S,{type:"category",dataKey:"name",width:80,tick:{fill:y,fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(D,{contentStyle:{backgroundColor:N,border:`1px solid ${k}`,borderRadius:"8px",fontSize:"14px",color:y},formatter:o=>[c(o,n,(t==null?void 0:t.rates)||{},!1),a("analytics.netCashFlow")]}),s&&s>0&&e.jsx(T,{x:s,stroke:"#9C27B0",strokeDasharray:"3 3",label:{value:a("analytics.goal"),position:"top",fill:"#9C27B0",fontSize:10}}),e.jsx(z,{dataKey:"value",radius:[0,4,4,0],maxBarSize:32,isAnimationActive:!0,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:p.map((o,u)=>e.jsx(M,{fill:o.color},`cell-${u}`))})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("span",{className:x("text-sm font-medium",g?"text-income-600 dark:text-income-300":"text-expense-600 dark:text-expense-300"),children:[g?"▲":"▼"," ",Math.abs(j).toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("analytics.vsAverage")})]}),s&&s>0&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:a("analytics.savingsGoal")}),e.jsxs("span",{children:[c(r,n,(t==null?void 0:t.rates)||{},!1)," / ",c(s,n,(t==null?void 0:t.rates)||{},!1)]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:x("h-full rounded-full transition-[width] duration-700 ease-out",i&&i>=100?"bg-green-500":"bg-primary-500"),style:{width:`${i||0}%`}})})]})]})}export{q as CashFlowSummary};
