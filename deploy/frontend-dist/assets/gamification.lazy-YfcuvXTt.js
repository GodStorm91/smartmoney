import{a as j,j as e,b as F,u as f,T as x,d as k,F as T,e as K,D as P,r as p,f as q,g as L,t as M,h as v,C as g,Z as u,c as R}from"./index-CeIjqT8j.js";import{C as X,S,U,P as D}from"./ProfilePage-DyqEaSxp.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],N=j("award",G);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],B=j("building",I);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],O=j("folder",H);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]],A=j("medal",W),Z=({value:t,max:c=100,className:n})=>{const o=Math.min(100,Math.max(0,t/c*100));return e.jsx("div",{className:F("h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",n),children:e.jsx("div",{className:"h-full transition-all duration-300 ease-in-out bg-blue-600",style:{width:`${o}%`}})})},V=({currentLevel:t,totalXP:c,xpToNextLevel:n,progressPercentage:o})=>{const{t:d}=f("common");return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-yellow-500"}),e.jsx("span",{className:"text-lg font-semibold",children:d("gamification.levelProgress",{level:t})})]}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[c.toLocaleString()," XP"]})]}),e.jsx(Z,{value:o,className:"h-3 mb-2"}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:d("gamification.xpToNextLevel",{next:t+1,percent:Math.round(o)})}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[e.jsx(k,{className:"h-3 w-3"}),n.toLocaleString()," XP ",d("gamification.xpNeeded")||"needed"]})]})]})},Q=({currentStreak:t,longestStreak:c})=>{const{t:n}=f("common"),o=d=>d>=30?"text-red-500":d>=7?"text-orange-500":d>=3?"text-yellow-500":"text-gray-400";return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{className:`h-6 w-6 ${o(t)}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:t}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:n("gamification.streak",{days:t})})]})]}),t>=7&&e.jsxs("div",{className:"text-xs bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200 px-2 py-1 rounded-full",children:["ðŸ”¥ ",n("gamification.onFire")||"On Fire!"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(N,{className:"h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:c}),e.jsx("div",{className:"text-xs",children:n("gamification.best")})]})]})]}),t>0&&t<7&&e.jsx("div",{className:"mt-3 text-xs text-gray-500 dark:text-gray-400",children:n("gamification.streakHint",{days:7-t})||`Keep going! ${7-t} more days to unlock Week Warrior achievement`})]})},J={consistency:k,transactions:P,savings:x,budgeting:K,goals:A,accounts:B,organization:O,special:N,milestones:S,levels:X};function Y({badges:t,onBadgeClick:c}){const{t:n}=f("common"),o={common:{bg:"bg-gray-100 dark:bg-gray-800/50",border:"border-gray-300 dark:border-gray-600",text:"text-gray-700 dark:text-gray-300",glow:"shadow-gray-400/50",label:n("gamification.stats.common")||"Common",colorClass:"bg-gray-400 bg-gray-600 text-gray-600 text-gray-400 bg-gray-500"},rare:{bg:"bg-blue-100 dark:bg-blue-900/30",border:"border-blue-400 dark:border-blue-600",text:"text-blue-700 dark:text-blue-300",glow:"shadow-blue-400/50",label:n("gamification.stats.rare")||"Rare",colorClass:"bg-blue-400 bg-blue-600 text-blue-600 text-blue-400 bg-blue-500"},epic:{bg:"bg-purple-100 dark:bg-purple-900/30",border:"border-purple-400 dark:border-purple-600",text:"text-purple-700 dark:text-purple-300",glow:"shadow-purple-400/50",label:n("gamification.stats.epic")||"Epic",colorClass:"bg-purple-400 bg-purple-600 text-purple-600 text-purple-400 bg-purple-500"},legendary:{bg:"bg-yellow-100 dark:bg-yellow-900/30",border:"border-yellow-500 dark:border-yellow-600",text:"text-yellow-700 dark:text-yellow-300",glow:"shadow-yellow-400/50",label:n("gamification.stats.legendary")||"Legendary",colorClass:"bg-yellow-400 bg-yellow-600 text-yellow-600 text-yellow-400 bg-yellow-500"}},d=[...t].sort((r,s)=>{const m={legendary:0,epic:1,rare:2,common:3},l=r.rarity||"common",h=s.rarity||"common";return r.unlocked!==s.unlocked?r.unlocked?-1:1:m[l]!==m[h]?m[l]-m[h]:s.xp_reward-r.xp_reward});return e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:d.map(r=>{const s=o[r.rarity||"common"],m=J[r.category]||N,l=s.colorClass.split(" "),h=r.unlocked?{background:`linear-gradient(135deg, ${l[0]} 0%, ${l[1]} 100%)`}:{};return e.jsxs("div",{onClick:()=>c==null?void 0:c(r),className:`
              relative p-4 rounded-xl border-2 cursor-pointer transition-all duration-300
              ${s.bg} ${s.border}
              ${r.unlocked?"hover:scale-105 hover:shadow-lg":"opacity-60 grayscale"}
              group
            `,children:[e.jsx("div",{className:`absolute -top-2 -right-2 px-2 py-0.5 rounded-full text-xs font-bold ${s.bg} ${s.border} border-2 ${s.text}`,children:s.label}),e.jsx("div",{className:"w-16 h-16 mx-auto mb-3 rounded-full flex items-center justify-center text-3xl shadow-lg",style:h,children:r.icon}),e.jsx("h4",{className:`font-bold text-sm text-center ${s.text} mb-1 line-clamp-1`,children:r.name}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:`text-xs font-semibold ${l[2]} dark:${l[3]}`,children:["+",r.xp_reward," XP"]})}),!r.unlocked&&r.progress>0&&r.progress<100&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full transition-all duration-500",style:{width:`${r.progress}%`,backgroundColor:l[4].replace("bg-","")}})}),e.jsxs("p",{className:"text-xs text-center text-gray-500 mt-1",children:[r.progress,"%"]})]}),e.jsx("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:`px-2 py-0.5 rounded-full text-xs flex items-center gap-1 bg-white dark:bg-gray-800 shadow-sm border ${s.border}`,children:[e.jsx(m,{className:`w-3 h-3 ${s.text}`}),e.jsx("span",{className:`text-xs ${s.text} capitalize`,children:r.category})]})}),!r.unlocked&&e.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-xl flex items-center justify-center",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-black/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})})})]},r.id)})})}const C=[{id:"all",nameKey:"gamification.categories.all",icon:x},{id:"consistency",nameKey:"gamification.categories.consistency",icon:k},{id:"transactions",nameKey:"gamification.categories.transactions",icon:P},{id:"savings",nameKey:"gamification.categories.savings",icon:A},{id:"budgeting",nameKey:"gamification.categories.budgeting",icon:K},{id:"goals",nameKey:"gamification.categories.goals",icon:x},{id:"accounts",nameKey:"gamification.categories.accounts",icon:N},{id:"special",nameKey:"gamification.categories.special",icon:S},{id:"levels",nameKey:"gamification.categories.levels",icon:u}],ee=()=>{var $;const{t}=f("common"),[c,n]=p.useState("achievements"),[o,d]=p.useState("all"),{addXPGain:r}=q(),{data:s,refetch:m}=L({queryKey:["gamification-stats"],queryFn:()=>v.getStats()}),{data:l,refetch:h}=L({queryKey:["achievements"],queryFn:()=>v.getAchievements()}),[w,z]=p.useState(new Set);if(p.useEffect(()=>{if(l!=null&&l.achievements){const a=new Set(l.achievements.filter(i=>i.unlocked).map(i=>i.id));l.achievements.forEach(i=>{i.unlocked&&!w.has(i.id)&&(M.success(t("gamification.badge.achievementUnlocked",{name:i.name,xp:i.xp_reward})),r(i.xp_reward,`Achievement: ${i.name}`))}),z(a)}},[l,w,r]),p.useEffect(()=>{(async()=>{try{const i=await v.trackLogin();i.streak_updated&&(M.success(t("gamification.badge.dayStreak",{days:i.current_streak,xp:i.xp_earned})),r(i.xp_earned,"Daily check-in"),m(),h())}catch(i){console.error("Failed to track login:",i)}})()},[]),!s||!l)return e.jsx("div",{className:"p-8 text-center",children:t("gamification.loading")});const E=v.calculateLevelProgress(s.total_xp,s.current_level,s.xp_to_next_level),_=o==="all"?l.achievements:l.achievements.filter(a=>a.category===o),y=l.achievements.filter(a=>a.unlocked).length,b=l.achievements.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(V,{currentLevel:s.current_level,totalXP:s.total_xp,xpToNextLevel:s.xp_to_next_level,progressPercentage:E}),e.jsx(Q,{currentStreak:s.current_streak,longestStreak:s.longest_streak}),e.jsx(g,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[y,"/",b]}),e.jsx("div",{className:"text-sm text-gray-500",children:t("gamification.badgesEarned")})]}),e.jsxs("div",{className:"relative",children:[e.jsx(x,{className:"h-10 w-10 text-yellow-500"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-yellow-500 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-bold text-white",children:y})})]})]}),e.jsx("div",{className:"mt-3 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-yellow-400 to-yellow-600 transition-all duration-500",style:{width:`${y/b*100}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:t("gamification.badgesRemaining",{count:b-y})})]})})]}),e.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:e.jsx("nav",{className:"flex space-x-8",children:[{id:"achievements",labelKey:"gamification.tabs.badges",icon:x},{id:"profile",labelKey:"gamification.tabs.profile",icon:U},{id:"activity",labelKey:"gamification.tabs.activity",icon:u}].map(a=>e.jsxs("button",{onClick:()=>n(a.id),className:`flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors ${c===a.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(a.icon,{className:"h-4 w-4"}),t(a.labelKey)]},a.id))})}),e.jsxs("div",{className:"mt-4",children:[c==="achievements"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-wrap gap-2",children:C.map(a=>e.jsxs("button",{onClick:()=>d(a.id),className:`flex items-center gap-1 px-3 py-1.5 rounded-full text-sm font-medium transition-all ${o===a.id?"bg-blue-500 text-white shadow-lg":"bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700"}`,children:[e.jsx(a.icon,{className:"w-4 h-4"}),t(a.nameKey)]},a.id))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs(g,{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20",children:[e.jsx("div",{className:"text-sm text-green-700 dark:text-green-400",children:t("gamification.stats.unlocked")}),e.jsx("div",{className:"text-2xl font-bold text-green-800 dark:text-green-300",children:y})]}),e.jsxs(g,{className:"p-4 bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("gamification.stats.remaining")}),e.jsx("div",{className:"text-2xl font-bold text-gray-800 dark:text-gray-300",children:b-y})]}),e.jsxs(g,{className:"p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 dark:from-yellow-900/20 dark:to-yellow-800/20",children:[e.jsx("div",{className:"text-sm text-yellow-700 dark:text-yellow-400",children:t("gamification.stats.legendary")}),e.jsx("div",{className:"text-2xl font-bold text-yellow-800 dark:text-yellow-300",children:l.achievements.filter(a=>a.rarity==="legendary"&&a.unlocked).length})]}),e.jsxs(g,{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/20 dark:to-purple-800/20",children:[e.jsx("div",{className:"text-sm text-purple-700 dark:text-purple-400",children:t("gamification.stats.xpEarned")}),e.jsx("div",{className:"text-2xl font-bold text-purple-800 dark:text-purple-300",children:l.achievements.filter(a=>a.unlocked).reduce((a,i)=>a+i.xp_reward,0).toLocaleString()})]})]}),e.jsxs(g,{className:"p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-6 flex items-center gap-2",children:[e.jsx(x,{className:"h-5 w-5 text-yellow-500"}),o==="all"?t("gamification.allBadges"):t("gamification.categoryBadges",{category:t((($=C.find(a=>a.id===o))==null?void 0:$.nameKey)||"")})]}),_.length>0?e.jsx(Y,{badges:_}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(x,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:t("gamification.noBadges")}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t("gamification.keepUsing")})]})]})]}),c==="profile"&&e.jsx(D,{}),c==="activity"&&e.jsx(g,{children:e.jsxs("div",{className:"p-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center gap-2",children:[e.jsx(u,{className:"h-5 w-5 text-yellow-500"}),t("gamification.recentActivity")]}),s.recent_xp_events.length>0?e.jsx("div",{className:"space-y-2",children:s.recent_xp_events.map((a,i)=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-100 dark:bg-blue-900/30 flex items-center justify-center",children:e.jsx(u,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:a.action.replace(/_/g," ")}),e.jsx("span",{className:"text-xs text-gray-500 block",children:new Date(a.timestamp).toLocaleDateString()})]})]}),e.jsxs("span",{className:"font-semibold text-green-600 dark:text-green-400",children:["+",a.xp_earned," XP"]})]},i))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(u,{className:"h-16 w-16 mx-auto text-gray-300 mb-4"}),e.jsx("p",{className:"text-gray-500",children:t("gamification.noActivity")}),e.jsx("p",{className:"text-sm text-gray-400 mt-1",children:t("gamification.startEarningXP")})]})]})})]})]})},te=()=>{const{t}=f("common");return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsx(x,{className:"h-8 w-8 text-yellow-500"}),t("gamification.title")]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:t("gamification.subtitle")})]}),e.jsx(ee,{})]})},re=R("/gamification")({component:te});export{re as Route};
