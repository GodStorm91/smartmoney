const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TrendLineChart-D-NYtaL9.js","assets/vendor-tanstack-CNAyyoyW.js","assets/vendor-react-Bx4JnVfy.js","assets/vendor-i18n-BrrOrGm_.js","assets/vendor-recharts-BrNIwK9z.js","assets/vendor-icons-BP-EQ_TG.js","assets/vendor-date-BkGg5e1q.js","assets/ZoomableChart-BWpVUcGt.js","assets/IncomeExpenseBarChart-D02pzpJk.js","assets/CategoryBarChart-BE_KGPUZ.js","assets/CategoryPieChart-xn7IQ22y.js","assets/CashFlowSummary-wl1BAl21.js","assets/ForecastChart-RVgw0-F_.js","assets/upload.lazy-x1eIM732.js","assets/transactions.lazy-DP0AXEFm.js","assets/Select-DzXIKsm6.js","assets/Badge-DwxAodnC.js","assets/TransactionFormModal-EYiyEx2R.js","assets/recurring-service-DFZkC56R.js","assets/RecurringOptions-gBFqGXKW.js","assets/settings.lazy-vgdLymCu.js","assets/crypto-F1TRPE0c.js","assets/RecurringTransactionsList-Dg-tCdOO.js","assets/recurring.lazy-Cg1UbHJd.js","assets/goals.lazy-DU-5zpU_.js","assets/budget.lazy-BOdyaOPf.js","assets/analytics.lazy-Cw90etOy.js","assets/accounts.lazy-CyhGBUP8.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);import{h as r,d as n,j as a,Q as s,I as o,u as i,a as l,t as c,L as u,b as d,c as h,e as m,f,O as p,g,k as y,l as x,R as b}from"./vendor-tanstack-CNAyyoyW.js";import{a as v,r as w,c as j,g as k,$ as N,b as _,R as E}from"./vendor-react-Bx4JnVfy.js";import{c as S,_ as C}from"./vendor-recharts-BrNIwK9z.js";import{I as P,C as O,a as A,b as R,X as T,S as M,M as D,E as I,c as L,d as F,U as K,T as q,L as B,H as z,R as U,W as $,e as W,f as V,P as G,g as H,h as Y,i as J,j as Q,k as X,l as Z,m as ee,n as te,o as re,p as ne,q as ae,r as se,s as oe,B as ie,G as le,t as ce,u as ue,v as de,w as he,x as me,y as fe,z as pe,A as ge,D as ye,F as xe,J as be,K as ve,N as we,O as je,Q as ke,V as Ne,Y as _e,Z as Ee,_ as Se,$ as Ce,a0 as Pe}from"./vendor-icons-BP-EQ_TG.js";import{u as Oe,i as Ae,B as Re,a as Te,b as Me}from"./vendor-i18n-BrrOrGm_.js";import{b as De,a as Ie,c as Le,d as Fe,p as Ke,i as qe,f as Be}from"./vendor-date-BkGg5e1q.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var ze={},Ue=v;ze.createRoot=Ue.createRoot,ze.hydrateRoot=Ue.hydrateRoot;var $e=["added","removed","updated"];function We(e){return $e.includes(e)}async function Ve({queryClient:e,persister:t,buster:r="",dehydrateOptions:a}){const s={buster:r,timestamp:Date.now(),clientState:n(e,a)};await t.persistClient(s)}var Ge=({children:e,persistOptions:t,onSuccess:n,onError:i,...l})=>{const[c,u]=w.useState(!0),d=w.useRef({persistOptions:t,onSuccess:n,onError:i}),h=w.useRef(!1);return w.useEffect(()=>{d.current={persistOptions:t,onSuccess:n,onError:i}}),w.useEffect(()=>{const e={...d.current.persistOptions,queryClient:l.client};return h.current||(h.current=!0,async function({queryClient:e,persister:t,maxAge:n=864e5,buster:a="",hydrateOptions:s}){try{const o=await t.restoreClient();if(o){if(!o.timestamp)return t.removeClient();{const i=Date.now()-o.timestamp>n,l=o.buster!==a;if(i||l)return t.removeClient();r(e,o.clientState,s)}}}catch(o){throw await t.removeClient(),o}}(e).then(()=>{var e,t;return null==(t=(e=d.current).onSuccess)?void 0:t.call(e)}).catch(()=>{var e,t;return null==(t=(e=d.current).onError)?void 0:t.call(e)}).finally(()=>{u(!1)})),c?void 0:function(e){const t=e.queryClient.getQueryCache().subscribe(t=>{We(t.type)&&Ve(e)}),r=e.queryClient.getMutationCache().subscribe(t=>{We(t.type)&&Ve(e)});return()=>{t(),r()}}(e)},[l.client,c]),a.jsx(s,{...l,children:a.jsx(o,{value:c,children:e})})};function He(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ye}=Object.prototype,{getPrototypeOf:Je}=Object,{iterator:Qe,toStringTag:Xe}=Symbol,Ze=(e=>t=>{const r=Ye.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),et=e=>(e=e.toLowerCase(),t=>Ze(t)===e),tt=e=>t=>typeof t===e,{isArray:rt}=Array,nt=tt("undefined");function at(e){return null!==e&&!nt(e)&&null!==e.constructor&&!nt(e.constructor)&&it(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const st=et("ArrayBuffer");const ot=tt("string"),it=tt("function"),lt=tt("number"),ct=e=>null!==e&&"object"==typeof e,ut=e=>{if("object"!==Ze(e))return!1;const t=Je(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Xe in e||Qe in e)},dt=et("Date"),ht=et("File"),mt=et("Blob"),ft=et("FileList"),pt=et("URLSearchParams"),[gt,yt,xt,bt]=["ReadableStream","Request","Response","Headers"].map(et);function vt(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,a;if("object"!=typeof e&&(e=[e]),rt(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(at(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),s=a.length;let o;for(n=0;n<s;n++)o=a[n],t.call(null,e[o],o,e)}}function wt(e,t){if(at(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const jt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,kt=e=>!nt(e)&&e!==jt;const Nt=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Je(Uint8Array)),_t=et("HTMLFormElement"),Et=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),St=et("RegExp"),Ct=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};vt(r,(r,a)=>{let s;!1!==(s=t(r,a,e))&&(n[a]=s||r)}),Object.defineProperties(e,n)};const Pt=et("AsyncFunction"),Ot=(At="function"==typeof setImmediate,Rt=it(jt.postMessage),At?setImmediate:Rt?(Tt=`axios@${Math.random()}`,Mt=[],jt.addEventListener("message",({source:e,data:t})=>{e===jt&&t===Tt&&Mt.length&&Mt.shift()()},!1),e=>{Mt.push(e),jt.postMessage(Tt,"*")}):e=>setTimeout(e));var At,Rt,Tt,Mt;const Dt="undefined"!=typeof queueMicrotask?queueMicrotask.bind(jt):"undefined"!=typeof process&&process.nextTick||Ot,It={isArray:rt,isArrayBuffer:st,isBuffer:at,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||it(e.append)&&("formdata"===(t=Ze(e))||"object"===t&&it(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&st(e.buffer),t},isString:ot,isNumber:lt,isBoolean:e=>!0===e||!1===e,isObject:ct,isPlainObject:ut,isEmptyObject:e=>{if(!ct(e)||at(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:gt,isRequest:yt,isResponse:xt,isHeaders:bt,isUndefined:nt,isDate:dt,isFile:ht,isBlob:mt,isRegExp:St,isFunction:it,isStream:e=>ct(e)&&it(e.pipe),isURLSearchParams:pt,isTypedArray:Nt,isFileList:ft,forEach:vt,merge:function e(){const{caseless:t,skipUndefined:r}=kt(this)&&this||{},n={},a=(a,s)=>{const o=t&&wt(n,s)||s;ut(n[o])&&ut(a)?n[o]=e(n[o],a):ut(a)?n[o]=e({},a):rt(a)?n[o]=a.slice():r&&nt(a)||(n[o]=a)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&vt(arguments[s],a);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(vt(t,(t,n)=>{r&&it(t)?e[n]=He(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,s,o;const i={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),s=a.length;s-- >0;)o=a[s],n&&!n(o,e,t)||i[o]||(t[o]=e[o],i[o]=!0);e=!1!==r&&Je(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:Ze,kindOfTest:et,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(rt(e))return e;let t=e.length;if(!lt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Qe]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:_t,hasOwnProperty:Et,hasOwnProp:Et,reduceDescriptors:Ct,freezeMethods:e=>{Ct(e,(t,r)=>{if(it(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];it(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return rt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:wt,global:jt,isContextDefined:kt,isSpecCompliantForm:function(e){return!!(e&&it(e.append)&&"FormData"===e[Xe]&&e[Qe])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(ct(e)){if(t.indexOf(e)>=0)return;if(at(e))return e;if(!("toJSON"in e)){t[n]=e;const a=rt(e)?[]:{};return vt(e,(e,t)=>{const s=r(e,n+1);!nt(s)&&(a[t]=s)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:Pt,isThenable:e=>e&&(ct(e)||it(e))&&it(e.then)&&it(e.catch),setImmediate:Ot,asap:Dt,isIterable:e=>null!=e&&it(e[Qe])};function Lt(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}It.inherits(Lt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:It.toJSONObject(this.config),code:this.code,status:this.status}}});const Ft=Lt.prototype,Kt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Kt[e]={value:e}}),Object.defineProperties(Lt,Kt),Object.defineProperty(Ft,"isAxiosError",{value:!0}),Lt.from=(e,t,r,n,a,s)=>{const o=Object.create(Ft);It.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return Lt.call(o,i,l,r,n,a),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",s&&Object.assign(o,s),o};function qt(e){return It.isPlainObject(e)||It.isArray(e)}function Bt(e){return It.endsWith(e,"[]")?e.slice(0,-2):e}function zt(e,t,r){return e?e.concat(t).map(function(e,t){return e=Bt(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const Ut=It.toFlatObject(It,{},null,function(e){return/^is[A-Z]/.test(e)});function $t(e,t,r){if(!It.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=It.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!It.isUndefined(t[e])})).metaTokens,a=r.visitor||c,s=r.dots,o=r.indexes,i=(r.Blob||"undefined"!=typeof Blob&&Blob)&&It.isSpecCompliantForm(t);if(!It.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(It.isDate(e))return e.toISOString();if(It.isBoolean(e))return e.toString();if(!i&&It.isBlob(e))throw new Lt("Blob is not supported. Use a Buffer instead.");return It.isArrayBuffer(e)||It.isTypedArray(e)?i&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,r,a){let i=e;if(e&&!a&&"object"==typeof e)if(It.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(It.isArray(e)&&function(e){return It.isArray(e)&&!e.some(qt)}(e)||(It.isFileList(e)||It.endsWith(r,"[]"))&&(i=It.toArray(e)))return r=Bt(r),i.forEach(function(e,n){!It.isUndefined(e)&&null!==e&&t.append(!0===o?zt([r],n,s):null===o?r:r+"[]",l(e))}),!1;return!!qt(e)||(t.append(zt(a,r,s),l(e)),!1)}const u=[],d=Object.assign(Ut,{defaultVisitor:c,convertValue:l,isVisitable:qt});if(!It.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!It.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),It.forEach(r,function(r,s){!0===(!(It.isUndefined(r)||null===r)&&a.call(t,r,It.isString(s)?s.trim():s,n,d))&&e(r,n?n.concat(s):[s])}),u.pop()}}(e),t}function Wt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Vt(e,t){this._pairs=[],e&&$t(e,this,t)}const Gt=Vt.prototype;function Ht(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Yt(e,t,r){if(!t)return e;const n=r&&r.encode||Ht;It.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let s;if(s=a?a(t,r):It.isURLSearchParams(t)?t.toString():new Vt(t,r).toString(n),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}Gt.append=function(e,t){this._pairs.push([e,t])},Gt.toString=function(e){const t=e?function(t){return e.call(this,t,Wt)}:Wt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Jt{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){It.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Qt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Xt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Vt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Zt="undefined"!=typeof window&&"undefined"!=typeof document,er="object"==typeof navigator&&navigator||void 0,tr=Zt&&(!er||["ReactNative","NativeScript","NS"].indexOf(er.product)<0),rr="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,nr=Zt&&window.location.href||"http://localhost",ar={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zt,hasStandardBrowserEnv:tr,hasStandardBrowserWebWorkerEnv:rr,navigator:er,origin:nr},Symbol.toStringTag,{value:"Module"})),...Xt};function sr(e){function t(e,r,n,a){let s=e[a++];if("__proto__"===s)return!0;const o=Number.isFinite(+s),i=a>=e.length;if(s=!s&&It.isArray(n)?n.length:s,i)return It.hasOwnProp(n,s)?n[s]=[n[s],r]:n[s]=r,!o;n[s]&&It.isObject(n[s])||(n[s]=[]);return t(e,r,n[s],a)&&It.isArray(n[s])&&(n[s]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let s;for(n=0;n<a;n++)s=r[n],t[s]=e[s];return t}(n[s])),!o}if(It.isFormData(e)&&It.isFunction(e.entries)){const r={};return It.forEachEntry(e,(e,n)=>{t(function(e){return It.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const or={transitional:Qt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=It.isObject(e);a&&It.isHTMLForm(e)&&(e=new FormData(e));if(It.isFormData(e))return n?JSON.stringify(sr(e)):e;if(It.isArrayBuffer(e)||It.isBuffer(e)||It.isStream(e)||It.isFile(e)||It.isBlob(e)||It.isReadableStream(e))return e;if(It.isArrayBufferView(e))return e.buffer;if(It.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return $t(e,new ar.classes.URLSearchParams,{visitor:function(e,t,r,n){return ar.isNode&&It.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((s=It.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return $t(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(It.isString(e))try{return(t||JSON.parse)(e),It.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||or.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(It.isResponse(e)||It.isReadableStream(e))return e;if(e&&It.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(a){if(r){if("SyntaxError"===a.name)throw Lt.from(a,Lt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ar.classes.FormData,Blob:ar.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};It.forEach(["delete","get","head","post","put","patch"],e=>{or.headers[e]={}});const ir=It.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lr=Symbol("internals");function cr(e){return e&&String(e).trim().toLowerCase()}function ur(e){return!1===e||null==e?e:It.isArray(e)?e.map(ur):String(e)}function dr(e,t,r,n,a){return It.isFunction(n)?n.call(this,t,r):(a&&(t=r),It.isString(t)?It.isString(n)?-1!==t.indexOf(n):It.isRegExp(n)?n.test(t):void 0:void 0)}let hr=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=cr(t);if(!a)throw new Error("header name must be a non-empty string");const s=It.findKey(n,a);(!s||void 0===n[s]||!0===r||void 0===r&&!1!==n[s])&&(n[s||t]=ur(e))}const s=(e,t)=>It.forEach(e,(e,r)=>a(e,r,t));if(It.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(It.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&ir[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(It.isObject(e)&&It.isIterable(e)){let r,n,a={};for(const t of e){if(!It.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?It.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}s(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=cr(e)){const r=It.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(It.isFunction(t))return t.call(this,e,r);if(It.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=cr(e)){const r=It.findKey(this,e);return!(!r||void 0===this[r]||t&&!dr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=cr(e)){const a=It.findKey(r,e);!a||t&&!dr(0,r[a],a,t)||(delete r[a],n=!0)}}return It.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!dr(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return It.forEach(this,(n,a)=>{const s=It.findKey(r,a);if(s)return t[s]=ur(n),void delete t[a];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();o!==a&&delete t[a],t[o]=ur(n),r[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return It.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&It.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[lr]=this[lr]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=cr(e);t[n]||(!function(e,t){const r=It.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return It.isArray(e)?e.forEach(n):n(e),this}};function mr(e,t){const r=this||or,n=t||r,a=hr.from(n.headers);let s=n.data;return It.forEach(e,function(e){s=e.call(r,s,a.normalize(),t?t.status:void 0)}),a.normalize(),s}function fr(e){return!(!e||!e.__CANCEL__)}function pr(e,t,r){Lt.call(this,null==e?"canceled":e,Lt.ERR_CANCELED,t,r),this.name="CanceledError"}function gr(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Lt("Request failed with status code "+r.status,[Lt.ERR_BAD_REQUEST,Lt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}hr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),It.reduceDescriptors(hr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),It.freezeMethods(hr),It.inherits(pr,Lt,{__CANCEL__:!0});const yr=(e,t,r=3)=>{let n=0;const a=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,s=0,o=0;return t=void 0!==t?t:1e3,function(i){const l=Date.now(),c=n[o];a||(a=l),r[s]=i,n[s]=l;let u=o,d=0;for(;u!==s;)d+=r[u++],u%=e;if(s=(s+1)%e,s===o&&(o=(o+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}}(50,250);return function(e,t){let r,n,a=0,s=1e3/t;const o=(t,s=Date.now())=>{a=s,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),i=t-a;i>=s?o(e,t):(r=e,n||(n=setTimeout(()=>{n=null,o(r)},s-i)))},()=>r&&o(r)]}(r=>{const s=r.loaded,o=r.lengthComputable?r.total:void 0,i=s-n,l=a(i);n=s;e({loaded:s,total:o,progress:o?s/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&s<=o?(o-s)/l:void 0,event:r,lengthComputable:null!=o,[t?"download":"upload"]:!0})},r)},xr=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},br=e=>(...t)=>It.asap(()=>e(...t)),vr=ar.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,ar.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(ar.origin),ar.navigator&&/(msie|trident)/i.test(ar.navigator.userAgent)):()=>!0,wr=ar.hasStandardBrowserEnv?{write(e,t,r,n,a,s,o){if("undefined"==typeof document)return;const i=[`${e}=${encodeURIComponent(t)}`];It.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),It.isString(n)&&i.push(`path=${n}`),It.isString(a)&&i.push(`domain=${a}`),!0===s&&i.push("secure"),It.isString(o)&&i.push(`SameSite=${o}`),document.cookie=i.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function jr(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const kr=e=>e instanceof hr?{...e}:e;function Nr(e,t){t=t||{};const r={};function n(e,t,r,n){return It.isPlainObject(e)&&It.isPlainObject(t)?It.merge.call({caseless:n},e,t):It.isPlainObject(t)?It.merge({},t):It.isArray(t)?t.slice():t}function a(e,t,r,a){return It.isUndefined(t)?It.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function s(e,t){if(!It.isUndefined(t))return n(void 0,t)}function o(e,t){return It.isUndefined(t)?It.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function i(r,a,s){return s in t?n(r,a):s in e?n(void 0,r):void 0}const l={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(e,t,r)=>a(kr(e),kr(t),0,!0)};return It.forEach(Object.keys({...e,...t}),function(n){const s=l[n]||a,o=s(e[n],t[n],n);It.isUndefined(o)&&s!==i||(r[n]=o)}),r}const _r=e=>{const t=Nr({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:s,headers:o,auth:i}=t;if(t.headers=o=hr.from(o),t.url=Yt(jr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&o.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),It.isFormData(r))if(ar.hasStandardBrowserEnv||ar.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(It.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&o.set(e,r)})}if(ar.hasStandardBrowserEnv&&(n&&It.isFunction(n)&&(n=n(t)),n||!1!==n&&vr(t.url))){const e=a&&s&&wr.read(s);e&&o.set(a,e)}return t},Er="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=_r(e);let a=n.data;const s=hr.from(n.headers).normalize();let o,i,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:m}=n;function f(){c&&c(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(o),n.signal&&n.signal.removeEventListener("abort",o)}let p=new XMLHttpRequest;function g(){if(!p)return;const n=hr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());gr(function(e){t(e),f()},function(e){r(e),f()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p}),p=null}p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(r(new Lt("Request aborted",Lt.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const n=new Lt(t&&t.message?t.message:"Network Error",Lt.ERR_NETWORK,e,p);n.event=t||null,r(n),p=null},p.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||Qt;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Lt(t,a.clarifyTimeoutError?Lt.ETIMEDOUT:Lt.ECONNABORTED,e,p)),p=null},void 0===a&&s.setContentType(null),"setRequestHeader"in p&&It.forEach(s.toJSON(),function(e,t){p.setRequestHeader(t,e)}),It.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),d&&"json"!==d&&(p.responseType=n.responseType),m&&([l,u]=yr(m,!0),p.addEventListener("progress",l)),h&&p.upload&&([i,c]=yr(h),p.upload.addEventListener("progress",i),p.upload.addEventListener("loadend",c)),(n.cancelToken||n.signal)&&(o=t=>{p&&(r(!t||t.type?new pr(null,e,p):t),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(o),n.signal&&(n.signal.aborted?o():n.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===ar.protocols.indexOf(y)?r(new Lt("Unsupported protocol "+y+":",Lt.ERR_BAD_REQUEST,e)):p.send(a||null)})},Sr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,o();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Lt?t:new pr(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,a(new Lt(`timeout ${t} of ms exceeded`,Lt.ETIMEDOUT))},t);const o=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:i}=n;return i.unsubscribe=()=>It.asap(o),i}},Cr=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Pr=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},Or=(e,t,r,n)=>{const a=async function*(e,t){for await(const r of Pr(e))yield*Cr(r,t)}(e,t);let s,o=0,i=e=>{s||(s=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return i(),void e.close();let s=n.byteLength;if(r){let e=o+=s;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw i(t),t}},cancel:e=>(i(e),a.return())},{highWaterMark:2})},{isFunction:Ar}=It,Rr=(({Request:e,Response:t})=>({Request:e,Response:t}))(It.global),{ReadableStream:Tr,TextEncoder:Mr}=It.global,Dr=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},Ir=e=>{e=It.merge.call({skipUndefined:!0},Rr,e);const{fetch:t,Request:r,Response:n}=e,a=t?Ar(t):"function"==typeof fetch,s=Ar(r),o=Ar(n);if(!a)return!1;const i=a&&Ar(Tr),l=a&&("function"==typeof Mr?(e=>t=>e.encode(t))(new Mr):async e=>new Uint8Array(await new r(e).arrayBuffer())),c=s&&i&&Dr(()=>{let e=!1;const t=new r(ar.origin,{body:new Tr,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=o&&i&&Dr(()=>It.isReadableStream(new n("").body)),d={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new Lt(`Response type '${e}' is not supported`,Lt.ERR_NOT_SUPPORT,r)})});const h=async(e,t)=>{const n=It.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(It.isBlob(e))return e.size;if(It.isSpecCompliantForm(e)){const t=new r(ar.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return It.isArrayBufferView(e)||It.isArrayBuffer(e)?e.byteLength:(It.isURLSearchParams(e)&&(e+=""),It.isString(e)?(await l(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:o,data:i,signal:l,cancelToken:m,timeout:f,onDownloadProgress:p,onUploadProgress:g,responseType:y,headers:x,withCredentials:b="same-origin",fetchOptions:v}=_r(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let j=Sr([l,m&&m.toAbortSignal()],f),k=null;const N=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let _;try{if(g&&c&&"get"!==o&&"head"!==o&&0!==(_=await h(x,i))){let e,t=new r(a,{method:"POST",body:i,duplex:"half"});if(It.isFormData(i)&&(e=t.headers.get("content-type"))&&x.setContentType(e),t.body){const[e,r]=xr(_,yr(br(g)));i=Or(t.body,65536,e,r)}}It.isString(b)||(b=b?"include":"omit");const t=s&&"credentials"in r.prototype,l={...v,signal:j,method:o.toUpperCase(),headers:x.normalize().toJSON(),body:i,duplex:"half",credentials:t?b:void 0};k=s&&new r(a,l);let m=await(s?w(k,v):w(a,l));const f=u&&("stream"===y||"response"===y);if(u&&(p||f&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=m[t]});const t=It.toFiniteNumber(m.headers.get("content-length")),[r,a]=p&&xr(t,yr(br(p),!0))||[];m=new n(Or(m.body,65536,r,()=>{a&&a(),N&&N()}),e)}y=y||"text";let E=await d[It.findKey(d,y)||"text"](m,e);return!f&&N&&N(),await new Promise((t,r)=>{gr(t,r,{data:E,headers:hr.from(m.headers),status:m.status,statusText:m.statusText,config:e,request:k})})}catch(E){if(N&&N(),E&&"TypeError"===E.name&&/Load failed|fetch/i.test(E.message))throw Object.assign(new Lt("Network Error",Lt.ERR_NETWORK,e,k),{cause:E.cause||E});throw Lt.from(E,E&&E.code,e,k)}}},Lr=new Map,Fr=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,s=[n,a,r];let o,i,l=s.length,c=Lr;for(;l--;)o=s[l],i=c.get(o),void 0===i&&c.set(o,i=l?new Map:Ir(t)),c=i;return i};Fr();const Kr={http:null,xhr:Er,fetch:{get:Fr}};It.forEach(Kr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const qr=e=>`- ${e}`,Br=e=>It.isFunction(e)||null===e||!1===e;const zr={getAdapter:function(e,t){e=It.isArray(e)?e:[e];const{length:r}=e;let n,a;const s={};for(let o=0;o<r;o++){let r;if(n=e[o],a=n,!Br(n)&&(a=Kr[(r=String(n)).toLowerCase()],void 0===a))throw new Lt(`Unknown adapter '${r}'`);if(a&&(It.isFunction(a)||(a=a.get(t))))break;s[r||"#"+o]=a}if(!a){const e=Object.entries(s).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new Lt("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(qr).join("\n"):" "+qr(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:Kr};function Ur(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new pr(null,e)}function $r(e){Ur(e),e.headers=hr.from(e.headers),e.data=mr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return zr.getAdapter(e.adapter||or.adapter,e)(e).then(function(t){return Ur(e),t.data=mr.call(e,e.transformResponse,t),t.headers=hr.from(t.headers),t},function(t){return fr(t)||(Ur(e),t&&t.response&&(t.response.data=mr.call(e,e.transformResponse,t.response),t.response.headers=hr.from(t.response.headers))),Promise.reject(t)})}const Wr="1.13.2",Vr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Vr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Gr={};Vr.transitional=function(e,t,r){return(n,a,s)=>{if(!1===e)throw new Lt(function(e,t){return"[Axios v"+Wr+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(a," has been removed"+(t?" in "+t:"")),Lt.ERR_DEPRECATED);return t&&!Gr[a]&&(Gr[a]=!0),!e||e(n,a,s)}},Vr.spelling=function(e){return(e,t)=>!0};const Hr={assertOptions:function(e,t,r){if("object"!=typeof e)throw new Lt("options must be an object",Lt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const s=n[a],o=t[s];if(o){const t=e[s],r=void 0===t||o(t,s,e);if(!0!==r)throw new Lt("option "+s+" must be "+r,Lt.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Lt("Unknown option "+s,Lt.ERR_BAD_OPTION)}},validators:Vr},Yr=Hr.validators;let Jr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Jt,response:new Jt}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Nr(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&Hr.assertOptions(r,{silentJSONParsing:Yr.transitional(Yr.boolean),forcedJSONParsing:Yr.transitional(Yr.boolean),clarifyTimeoutError:Yr.transitional(Yr.boolean)},!1),null!=n&&(It.isFunction(n)?t.paramsSerializer={serialize:n}:Hr.assertOptions(n,{encode:Yr.function,serialize:Yr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Hr.assertOptions(t,{baseUrl:Yr.spelling("baseURL"),withXsrfToken:Yr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=a&&It.merge(a.common,a[t.method]);a&&It.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=hr.concat(s,a);const o=[];let i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!i){const e=[$r.bind(this),void 0];for(e.unshift(...o),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=$r.call(this,h)}catch(m){return Promise.reject(m)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Yt(jr((e=Nr(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};It.forEach(["delete","get","head","options"],function(e){Jr.prototype[e]=function(t,r){return this.request(Nr(r||{},{method:e,url:t,data:(r||{}).data}))}}),It.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(Nr(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Jr.prototype[e]=t(),Jr.prototype[e+"Form"]=t(!0)});const Qr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Qr).forEach(([e,t])=>{Qr[t]=e});const Xr=function e(t){const r=new Jr(t),n=He(Jr.prototype.request,r);return It.extend(n,Jr.prototype,r,{allOwnKeys:!0}),It.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Nr(t,r))},n}(or);Xr.Axios=Jr,Xr.CanceledError=pr,Xr.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new pr(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},Xr.isCancel=fr,Xr.VERSION=Wr,Xr.toFormData=$t,Xr.AxiosError=Lt,Xr.Cancel=Xr.CanceledError,Xr.all=function(e){return Promise.all(e)},Xr.spread=function(e){return function(t){return e.apply(null,t)}},Xr.isAxiosError=function(e){return It.isObject(e)&&!0===e.isAxiosError},Xr.mergeConfig=Nr,Xr.AxiosHeaders=hr,Xr.formToJSON=e=>sr(It.isHTMLForm(e)?new FormData(e):e),Xr.getAdapter=zr.getAdapter,Xr.HttpStatusCode=Qr,Xr.default=Xr;const{Axios:Zr,AxiosError:en,CanceledError:tn,isCancel:rn,CancelToken:nn,VERSION:an,all:sn,Cancel:on,isAxiosError:ln,spread:cn,toFormData:un,AxiosHeaders:dn,HttpStatusCode:hn,formToJSON:mn,getAdapter:fn,mergeConfig:pn}=Xr,gn=Xr.create({baseURL:"",timeout:6e4,headers:{"Content-Type":"application/json"}});gn.interceptors.response.use(e=>e,e=>Promise.reject(e));const yn=w.createContext(void 0),xn="smartmoney_access_token",bn="smartmoney_refresh_token";function vn({children:e}){const[t,r]=w.useState(null),[n,s]=w.useState(!0),o=w.useCallback(()=>{localStorage.removeItem(xn),localStorage.removeItem(bn),r(null),s(!1)},[]),i=w.useCallback(async()=>{const e=localStorage.getItem(bn);if(!e)return!1;try{const t="",n=await Xr.post(`${t}/api/auth/refresh`,{refresh_token:e}),{access_token:a,refresh_token:s}=n.data;localStorage.setItem(xn,a),localStorage.setItem(bn,s);const o=await gn.get("/api/auth/me",{headers:{Authorization:`Bearer ${a}`}});return r(o.data),!0}catch{return localStorage.removeItem(xn),localStorage.removeItem(bn),!1}},[]);w.useEffect(()=>{const e=gn.interceptors.request.use(e=>{const t=localStorage.getItem(xn);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),t=gn.interceptors.response.use(e=>e,async e=>{var t,r;const n=e.config,a=null==(t=null==n?void 0:n.url)?void 0:t.includes("/api/auth/");if(401===(null==(r=e.response)?void 0:r.status)&&!n._retry&&!a){n._retry=!0;if(await i()){const e=localStorage.getItem(xn);return n.headers.Authorization=`Bearer ${e}`,gn(n)}o()}return Promise.reject(e)});return()=>{gn.interceptors.request.eject(e),gn.interceptors.response.eject(t)}},[i,o]),w.useEffect(()=>{(async()=>{if(localStorage.getItem(xn))try{const e=await gn.get("/api/auth/me");r(e.data)}catch{await i()||r(null)}s(!1)})()},[i]);return a.jsx(yn.Provider,{value:{user:t,isLoading:n,isAuthenticated:!!t,login:async(e,t)=>{const n=new URLSearchParams;n.append("username",e),n.append("password",t);const a=await gn.post("/api/auth/login",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{access_token:s,refresh_token:o}=a.data;localStorage.setItem(xn,s),localStorage.setItem(bn,o);const i=await gn.get("/api/auth/me",{headers:{Authorization:`Bearer ${s}`}});r(i.data)},logout:o,refreshToken:i},children:e})}function wn(){const e=w.useContext(yn);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}async function jn(){return(await gn.get("/api/settings")).data}async function kn(e){return(await gn.put("/api/settings",e)).data}const Nn=w.createContext(void 0);function _n({children:e}){const{data:t,isLoading:r}=i({queryKey:["settings"],queryFn:jn}),n={settings:t,isLoading:r,currency:(null==t?void 0:t.currency)||"JPY",baseDate:(null==t?void 0:t.base_date)||25};return a.jsx(Nn.Provider,{value:n,children:e})}function En(){const e=w.useContext(Nn);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e}const Sn=w.createContext(void 0),Cn="smartmoney_privacy_mode";function Pn({children:e}){const[t,r]=w.useState(()=>"true"===localStorage.getItem(Cn));w.useEffect(()=>{localStorage.setItem(Cn,String(t))},[t]);return a.jsx(Sn.Provider,{value:{isPrivacyMode:t,togglePrivacyMode:()=>{r(e=>!e)}},children:e})}function On(){const e=w.useContext(Sn);if(void 0===e)throw new Error("usePrivacy must be used within a PrivacyProvider");return e}const An=w.createContext(void 0),Rn="smartmoney-theme";function Tn(){return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Mn(){if("undefined"!=typeof window){const e=localStorage.getItem(Rn);if("light"===e||"dark"===e||"system"===e)return e}return"system"}function Dn({children:e}){const[t,r]=w.useState(()=>Mn()),[n,s]=w.useState(()=>{const e=Mn();return"system"===e?Tn():e});w.useEffect(()=>{const e=()=>{const e="system"===t?Tn():t;s(e);const r=document.documentElement;r.classList.remove("light","dark"),r.classList.add(e)};if(e(),"system"===t){const t=window.matchMedia("(prefers-color-scheme: dark)"),r=()=>e();return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}},[t]);const o=e=>{r(e),localStorage.setItem(Rn,e)};return a.jsx(An.Provider,{value:{theme:t,resolvedTheme:n,setTheme:o,toggleTheme:()=>{o("dark"===n?"light":"dark")}},children:e})}function In(){const e=w.useContext(An);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const Ln=e=>{const t=Bn(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Fn(r,t)||qn(e)},getConflictingClassGroupIds:(e,t)=>{const a=r[e]||[];return t&&n[e]?[...a,...n[e]]:a}}},Fn=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),s=a?Fn(e.slice(1),a):void 0;if(s)return s;if(0===t.validators.length)return;const o=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(o)))?void 0:r.classGroupId},Kn=/^\[(.+)\]$/,qn=e=>{if(Kn.test(e)){const t=Kn.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},Bn=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Wn(Object.entries(e.classGroups),r).forEach(([e,r])=>{zn(r,n,e,t)}),n},zn=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Un(t,e)).classGroupId=r)}if("function"==typeof e)return $n(e)?void zn(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,a])=>{zn(a,Un(t,e),r,n)})})},Un=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},$n=e=>e.isThemeGetter,Wn=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Vn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(a,s)=>{r.set(a,s),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):a(e,t)}}},Gn=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,a=t[0],s=t.length,o=e=>{const r=[];let o,i=0,l=0;for(let d=0;d<e.length;d++){let c=e[d];if(0===i){if(c===a&&(n||e.slice(d,d+s)===t)){r.push(e.slice(l,d)),l=d+s;continue}if("/"===c){o=d;continue}}"["===c?i++:"]"===c&&i--}const c=0===r.length?e:e.substring(l),u=c.startsWith("!");return{modifiers:r,hasImportantModifier:u,baseClassName:u?c.substring(1):c,maybePostfixModifierPosition:o&&o>l?o-l:void 0}};return r?e=>r({className:e,parseClassName:o}):o},Hn=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Yn=/\s+/;function Jn(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Qn(e))&&(n&&(n+=" "),n+=t);return n}const Qn=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Qn(e[n]))&&(r&&(r+=" "),r+=t);return r};function Xn(e,...t){let r,n,a,s=function(i){const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Vn(e.cacheSize),parseClassName:Gn(e),...Ln(e)}))(l),n=r.cache.get,a=r.cache.set,s=o,o(i)};function o(e){const t=n(e);if(t)return t;const s=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,s=[],o=e.trim().split(Yn);let i="";for(let l=o.length-1;l>=0;l-=1){const e=o[l],{modifiers:t,hasImportantModifier:c,baseClassName:u,maybePostfixModifierPosition:d}=r(e);let h=Boolean(d),m=n(h?u.substring(0,d):u);if(!m){if(!h){i=e+(i.length>0?" "+i:i);continue}if(m=n(u),!m){i=e+(i.length>0?" "+i:i);continue}h=!1}const f=Hn(t).join(":"),p=c?f+"!":f,g=p+m;if(s.includes(g))continue;s.push(g);const y=a(m,h);for(let r=0;r<y.length;++r){const e=y[r];s.push(p+e)}i=e+(i.length>0?" "+i:i)}return i})(e,r);return a(e,s),s}return function(){return s(Jn.apply(null,arguments))}}const Zn=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ea=/^\[(?:([a-z-]+):)?(.+)\]$/i,ta=/^\d+\/\d+$/,ra=new Set(["px","full","screen"]),na=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,aa=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sa=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oa=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ia=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,la=e=>ua(e)||ra.has(e)||ta.test(e),ca=e=>ka(e,"length",Na),ua=e=>Boolean(e)&&!Number.isNaN(Number(e)),da=e=>ka(e,"number",ua),ha=e=>Boolean(e)&&Number.isInteger(Number(e)),ma=e=>e.endsWith("%")&&ua(e.slice(0,-1)),fa=e=>ea.test(e),pa=e=>na.test(e),ga=new Set(["length","size","percentage"]),ya=e=>ka(e,ga,_a),xa=e=>ka(e,"position",_a),ba=new Set(["image","url"]),va=e=>ka(e,ba,Sa),wa=e=>ka(e,"",Ea),ja=()=>!0,ka=(e,t,r)=>{const n=ea.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},Na=e=>aa.test(e)&&!sa.test(e),_a=()=>!1,Ea=e=>oa.test(e),Sa=e=>ia.test(e),Ca=Xn(()=>{const e=Zn("colors"),t=Zn("spacing"),r=Zn("blur"),n=Zn("brightness"),a=Zn("borderColor"),s=Zn("borderRadius"),o=Zn("borderSpacing"),i=Zn("borderWidth"),l=Zn("contrast"),c=Zn("grayscale"),u=Zn("hueRotate"),d=Zn("invert"),h=Zn("gap"),m=Zn("gradientColorStops"),f=Zn("gradientColorStopPositions"),p=Zn("inset"),g=Zn("margin"),y=Zn("opacity"),x=Zn("padding"),b=Zn("saturate"),v=Zn("scale"),w=Zn("sepia"),j=Zn("skew"),k=Zn("space"),N=Zn("translate"),_=()=>["auto",fa,t],E=()=>[fa,t],S=()=>["",la,ca],C=()=>["auto",ua,fa],P=()=>["","0",fa],O=()=>[ua,fa];return{cacheSize:500,separator:":",theme:{colors:[ja],spacing:[la,ca],blur:["none","",pa,fa],brightness:O(),borderColor:[e],borderRadius:["none","","full",pa,fa],borderSpacing:E(),borderWidth:S(),contrast:O(),grayscale:P(),hueRotate:O(),invert:P(),gap:E(),gradientColorStops:[e],gradientColorStopPositions:[ma,ca],inset:_(),margin:_(),opacity:O(),padding:E(),saturate:O(),scale:O(),sepia:P(),skew:O(),space:E(),translate:E()},classGroups:{aspect:[{aspect:["auto","square","video",fa]}],container:["container"],columns:[{columns:[pa]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",fa]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ha,fa]}],basis:[{basis:_()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",fa]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",ha,fa]}],"grid-cols":[{"grid-cols":[ja]}],"col-start-end":[{col:["auto",{span:["full",ha,fa]},fa]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[ja]}],"row-start-end":[{row:["auto",{span:[ha,fa]},fa]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",fa]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",fa]}],gap:[{gap:[h]}],"gap-x":[{"gap-x":[h]}],"gap-y":[{"gap-y":[h]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",fa,t]}],"min-w":[{"min-w":[fa,t,"min","max","fit"]}],"max-w":[{"max-w":[fa,t,"none","full","min","max","fit","prose",{screen:[pa]},pa]}],h:[{h:[fa,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[fa,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[fa,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[fa,t,"auto","min","max","fit"]}],"font-size":[{text:["base",pa,ca]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",da]}],"font-family":[{font:[ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",fa]}],"line-clamp":[{"line-clamp":["none",ua,da]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",la,fa]}],"list-image":[{"list-image":["none",fa]}],"list-style-type":[{list:["none","disc","decimal",fa]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",la,ca]}],"underline-offset":[{"underline-offset":["auto",la,fa]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:E()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",fa]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",fa]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",xa]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ya]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},va]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[f]}],"gradient-via-pos":[{via:[f]}],"gradient-to-pos":[{to:[f]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[s]}],"rounded-s":[{"rounded-s":[s]}],"rounded-e":[{"rounded-e":[s]}],"rounded-t":[{"rounded-t":[s]}],"rounded-r":[{"rounded-r":[s]}],"rounded-b":[{"rounded-b":[s]}],"rounded-l":[{"rounded-l":[s]}],"rounded-ss":[{"rounded-ss":[s]}],"rounded-se":[{"rounded-se":[s]}],"rounded-ee":[{"rounded-ee":[s]}],"rounded-es":[{"rounded-es":[s]}],"rounded-tl":[{"rounded-tl":[s]}],"rounded-tr":[{"rounded-tr":[s]}],"rounded-br":[{"rounded-br":[s]}],"rounded-bl":[{"rounded-bl":[s]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[la,fa]}],"outline-w":[{outline:[la,ca]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[la,ca]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",pa,wa]}],"shadow-color":[{shadow:[ja]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[l]}],"drop-shadow":[{"drop-shadow":["","none",pa,fa]}],grayscale:[{grayscale:[c]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[b]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[l]}],"backdrop-grayscale":[{"backdrop-grayscale":[c]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[b]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",fa]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",fa]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",fa]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[v]}],"scale-x":[{"scale-x":[v]}],"scale-y":[{"scale-y":[v]}],rotate:[{rotate:[ha,fa]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[j]}],"skew-y":[{"skew-y":[j]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",fa]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",fa]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":E()}],"scroll-mx":[{"scroll-mx":E()}],"scroll-my":[{"scroll-my":E()}],"scroll-ms":[{"scroll-ms":E()}],"scroll-me":[{"scroll-me":E()}],"scroll-mt":[{"scroll-mt":E()}],"scroll-mr":[{"scroll-mr":E()}],"scroll-mb":[{"scroll-mb":E()}],"scroll-ml":[{"scroll-ml":E()}],"scroll-p":[{"scroll-p":E()}],"scroll-px":[{"scroll-px":E()}],"scroll-py":[{"scroll-py":E()}],"scroll-ps":[{"scroll-ps":E()}],"scroll-pe":[{"scroll-pe":E()}],"scroll-pt":[{"scroll-pt":E()}],"scroll-pr":[{"scroll-pr":E()}],"scroll-pb":[{"scroll-pb":E()}],"scroll-pl":[{"scroll-pl":E()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",fa]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[la,ca,da]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Pa(...e){return Ca(S(e))}const Oa=w.createContext(null);let Aa=0;const Ra={success:R,error:A,warning:O,info:P},Ta={success:"bg-green-50 dark:bg-green-900/90 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/90 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50 dark:bg-yellow-900/90 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50 dark:bg-blue-900/90 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"},Ma={success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-yellow-500 dark:text-yellow-400",info:"text-blue-500 dark:text-blue-400"};function Da({children:e}){const[t,r]=w.useState([]),n=w.useCallback(e=>{r(t=>t.map(t=>t.id===e?{...t,exiting:!0}:t)),setTimeout(()=>{r(t=>t.filter(t=>t.id!==e))},200)},[]),s=w.useCallback((e,t="info",a=4e3)=>{const s=++Aa;r(r=>[...r,{id:s,message:e,type:t,duration:a}]),a>0&&setTimeout(()=>n(s),a)},[n]),o=w.useCallback((e,t)=>s(e,"success",t),[s]),i=w.useCallback((e,t)=>s(e,"error",t),[s]),l=w.useCallback((e,t)=>s(e,"warning",t),[s]),c=w.useCallback((e,t)=>s(e,"info",t),[s]);return a.jsxs(Oa.Provider,{value:{showToast:s,success:o,error:i,warning:l,info:c},children:[e,v.createPortal(a.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:t.map(e=>{const t=Ra[e.type];return a.jsxs("div",{className:Pa("flex items-start gap-3 p-4 rounded-lg border shadow-lg pointer-events-auto",Ta[e.type],e.exiting?"animate-toast-out":"animate-toast-in"),children:[a.jsx(t,{className:Pa("w-5 h-5 flex-shrink-0 mt-0.5",Ma[e.type])}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e.message}),a.jsx("button",{onClick:()=>n(e.id),className:"flex-shrink-0 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded",children:a.jsx(T,{className:"w-4 h-4"})})]},e.id)})}),document.body)]})}function Ia(){const e=w.useContext(Oa);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}var La={exports:{}};const Fa=k(La.exports=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function r(e,t,r){for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:j,a=Object.keys,s=Array.isArray;function o(e,t){return"object"!=typeof t||a(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);var i=Object.getPrototypeOf,l={}.hasOwnProperty;function c(e,t){return l.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(i(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach(function(r){h(e,r,t[r])})}var d=Object.defineProperty;function h(e,t,r,n){d(e,t,o(r&&c(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function m(e){return{from:function(t){return e.prototype=Object.create(t.prototype),h(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}var f=Object.getOwnPropertyDescriptor,p=[].slice;function g(e,t,r){return p.call(e,t,r)}function y(e,t){return t(e)}function x(e){if(!e)throw new Error("Assertion Failed")}function b(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function v(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,a=t.length;n<a;++n){var s=v(e,t[n]);r.push(s)}return r}var o=t.indexOf(".");if(-1!==o){var i=e[t.substr(0,o)];return null==i?void 0:v(i,t.substr(o+1))}}function w(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){x("string"!=typeof r&&"length"in r);for(var n=0,a=t.length;n<a;++n)w(e,t[n],r[n])}else{var o,i,l=t.indexOf(".");-1!==l?(o=t.substr(0,l),""===(i=t.substr(l+1))?void 0===r?s(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=r:w(l=(l=e[o])&&c(e,o)?l:e[o]={},i,r)):void 0===r?s(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function k(e){var t,r={};for(t in e)c(e,t)&&(r[t]=e[t]);return r}var N=[].concat;function _(e){return N.apply([],e)}var E="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(_([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return n[e]}),S=new Set(E.map(function(e){return n[e]})),C=null;function P(e){return C=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=C.get(t);if(r)return r;if(s(t)){r=[],C.set(t,r);for(var n=0,a=t.length;n<a;++n)r.push(e(t[n]))}else if(S.has(t.constructor))r=t;else{var o,l=i(t);for(o in r=l===Object.prototype?{}:Object.create(l),C.set(t,r),t)c(t,o)&&(r[o]=e(t[o]))}return r}(e),C=null,e}var O={}.toString;function A(e){return O.call(e).slice(8,-1)}var R="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",T="symbol"==typeof R?function(e){var t;return null!=e&&(t=e[R])&&t.apply(e)}:function(){return null};function M(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function I(e){var t,r,n,a;if(1===arguments.length){if(s(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(a=T(e)){for(r=[];!(n=a.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var L="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},F=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function q(e,t){this.name=e,this.message=t}function B(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function z(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=B(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=B(e,this.failures)}m(q).from(Error).extend({toString:function(){return this.name+": "+this.message}}),m(z).from(q),m(U).from(q);var $=F.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=q,V=F.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=K[t]||r,this.inner=null)}return m(n).from(W),e[t]=n,e},{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var G=le.reduce(function(e,t){return e[t+"Error"]=V[t],e},{}),H=F.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=V[t]),e},{});function Y(){}function J(e){return e}function Q(e,t){return null==e||e===J?t:function(r){return t(e(r))}}function X(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var s=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?X(n,this.onsuccess):n),a&&(this.onerror=this.onerror?X(a,this.onerror):a),void 0!==s?s:r}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?X(r,this.onsuccess):r),n&&(this.onerror=this.onerror?X(n,this.onerror):n)}}function te(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);o(r,n);var a=this.onsuccess,s=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?X(a,this.onsuccess):a),s&&(this.onerror=this.onerror?X(s,this.onerror):s),void 0===n?void 0===r?void 0:r:o(n,r)}}function re(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ne(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,a=arguments.length,s=new Array(a);a--;)s[a]=arguments[a];return r.then(function(){return t.apply(n,s)})}return t.apply(this,arguments)}}H.ModifyError=z,H.DexieError=q,H.BulkError=U;var ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function se(e){ae=e}var oe={},ie=100,le=(E="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,i(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,i(t),e]}())[0],ce=(F=E[1],E=E[2],F=F&&F.then,le&&le.constructor),ue=!!E,de=function(e,t){be.push([e,t]),me&&(queueMicrotask(Pe),me=!1)},he=!0,me=!0,fe=[],pe=[],ge=J,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},xe=ye,be=[],ve=0,we=[];function je(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=xe;if("function"!=typeof e){if(e!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&_e(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Oe();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof je?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,Ee(t)),n&&Ae()}},_e.bind(null,t))}catch(n){_e(t,n)}}(this,e)}var ke={get:function(){var e=xe,t=Ke;function r(r,n){var a=this,s=!e.global&&(e!==xe||t!==Ke),o=s&&!Ue(),i=new je(function(t,i){Se(a,new Ne(Ye(r,e,s,o),Ye(n,e,s,o),t,i,e))});return this._consoleTask&&(i._consoleTask=this._consoleTask),i}return r.prototype=oe,r},set:function(e){h(this,"then",e&&e.prototype===oe?ke:{get:function(){return e},set:ke.set})}};function Ne(e,t,r,n,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=a}function _e(e,t){var r,n;pe.push(t),null===e._state&&(r=e._lib&&Oe(),t=ge(t),e._state=!1,e._value=t,n=e,fe.some(function(e){return e._value===n._value})||fe.push(n),Ee(e),r&&Ae())}function Ee(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Se(e,t[r]);var a=e._PSD;--a.ref||a.finalize(),0===ve&&(++ve,de(function(){0==--ve&&Re()},[]))}function Se(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++ve,de(Ce,[r,e,t])}else e._listeners.push(t)}function Ce(e,t,r){try{var n,a=t._value;!t._state&&pe.length&&(pe=[]),n=ae&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||-1!==pe.indexOf(a)||function(e){for(var t=fe.length;t;)if(fe[--t]._value===e._value)return fe.splice(t,1)}(t),r.resolve(n)}catch(s){r.reject(s)}finally{0==--ve&&Re(),--r.psd.ref||r.psd.finalize()}}function Pe(){He(ye,function(){Oe()&&Ae()})}function Oe(){var e=he;return me=he=!1,e}function Ae(){var e,t,r;do{for(;0<be.length;)for(e=be,be=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<be.length);me=he=!0}function Re(){var e=fe;fe=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=we.slice(0),r=t.length;r;)t[--r]()}function Te(e){return new je(oe,!1,e)}function Me(e,t){var r=xe;return function(){var n=Oe(),a=xe;try{return Ve(r,!0),e.apply(this,arguments)}catch(s){t&&t(s)}finally{Ve(a,!1),n&&Ae()}}}u(je.prototype,{then:ke,_then:function(e,t){Se(this,new Ne(null,null,e,t,xe))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?r:Te)(e)}):this.then(null,function(e){return(e&&e.name===t?r:Te)(e)})},finally:function(e){return this.then(function(t){return je.resolve(e()).then(function(){return t})},function(t){return je.resolve(e()).then(function(){return Te(t)})})},timeout:function(e,t){var r=this;return e<1/0?new je(function(n,a){var s=setTimeout(function(){return a(new V.Timeout(t))},e);r.then(n,a).finally(clearTimeout.bind(null,s))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(je.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Ge(),u(je,{all:function(){var e=I.apply(null,arguments).map($e);return new je(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(a,s){return je.resolve(a).then(function(r){e[s]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof je?e:e&&"function"==typeof e.then?new je(function(t,r){e.then(t,r)}):new je(oe,!0,e)},reject:Te,race:function(){var e=I.apply(null,arguments).map($e);return new je(function(t,r){e.map(function(e){return je.resolve(e).then(t,r)})})},PSD:{get:function(){return xe},set:function(e){return xe=e}},totalEchoes:{get:function(){return Ke}},newPSD:Be,usePSD:He,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new je(function(r,n){return Be(function(t,r){var n=xe;n.unhandleds=[],n.onunhandled=r,n.finalize=X(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},we.push(function t(){e(),we.splice(we.indexOf(t),1)}),++ve,de(function(){0==--ve&&Re()},[])},n.finalize),e()},t,r,n)})}}),ce&&(ce.allSettled&&h(je,"allSettled",function(){var e=I.apply(null,arguments).map($e);return new je(function(t){0===e.length&&t([]);var r=e.length,n=new Array(r);e.forEach(function(e,a){return je.resolve(e).then(function(e){return n[a]={status:"fulfilled",value:e}},function(e){return n[a]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),ce.any&&"undefined"!=typeof AggregateError&&h(je,"any",function(){var e=I.apply(null,arguments).map($e);return new je(function(t,r){0===e.length&&r(new AggregateError([]));var n=e.length,a=new Array(n);e.forEach(function(e,s){return je.resolve(e).then(function(e){return t(e)},function(e){a[s]=e,--n||r(new AggregateError(a))})})})}),ce.withResolvers&&(je.withResolvers=ce.withResolvers));var De={awaits:0,echoes:0,id:0},Ie=0,Le=[],Fe=0,Ke=0,qe=0;function Be(e,t,r,n){var a=xe,s=Object.create(a);return s.parent=a,s.ref=0,s.global=!1,s.id=++qe,ye.env,s.env=ue?{Promise:je,PromiseProp:{value:je,configurable:!0,writable:!0},all:je.all,race:je.race,allSettled:je.allSettled,any:je.any,resolve:je.resolve,reject:je.reject}:{},t&&o(s,t),++a.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()},n=He(s,e,r,n),0===s.ref&&s.finalize(),n}function ze(){return De.id||(De.id=++Ie),++De.awaits,De.echoes+=ie,De.id}function Ue(){return!!De.awaits&&(0==--De.awaits&&(De.id=0),De.echoes=De.awaits*ie,!0)}function $e(e){return De.echoes&&e&&e.constructor===ce?(ze(),e.then(function(e){return Ue(),e},function(e){return Ue(),Qe(e)})):e}function We(){var e=Le[Le.length-1];Le.pop(),Ve(e,!1)}function Ve(e,t){var r,a=xe;(t?!De.echoes||Fe++&&e===xe:!Fe||--Fe&&e===xe)||queueMicrotask(t?function(e){++Ke,De.echoes&&0!=--De.echoes||(De.echoes=De.awaits=De.id=0),Le.push(xe),Ve(e,!0)}.bind(null,e):We),e!==xe&&(xe=e,a===ye&&(ye.env=Ge()),ue&&(r=ye.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(n,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function Ge(){var e=n.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function He(e,t,r,n,a){var s=xe;try{return Ve(e,!0),t(r,n,a)}finally{Ve(s,!1)}}function Ye(e,t,r,n){return"function"!=typeof e?e:function(){var a=xe;r&&ze(),Ve(t,!0);try{return e.apply(this,arguments)}finally{Ve(a,!1),n&&queueMicrotask(Ue)}}}function Je(e){Promise===ce&&0===De.echoes?0===Fe?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+F).indexOf("[native code]")&&(ze=Ue=Y);var Qe=je.reject,Xe=String.fromCharCode(65535),Ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],rt="__dbnames",nt="readonly",at="readwrite";function st(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ot={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function it(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function lt(){throw V.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function ct(e,t){try{var r=ut(e),n=ut(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,s=0;s<a;++s)if(e[s]!==t[s])return e[s]<t[s]?-1:1;return r===n?0:r<n?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,s=0;s<a;++s){var o=ct(e[s],t[s]);if(0!==o)return o}return r===n?0:r<n?-1:1}(e,t)}}catch(a){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=A(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ht(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var mt=(ft.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(s(n))return r(r([],s(e)?e:[],!0),n).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(o){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var a=t.remove;if(s(a))return s(e)?e.filter(function(e){return!a.includes(e)}).sort():[];if("number"==typeof a)return Number(e)-a;if("bigint"==typeof a)try{return BigInt(e)-a}catch(o){return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},ft);function ft(e){this["@@propmod"]=e}function pt(e,t){for(var r=a(t),n=r.length,s=!1,o=0;o<n;++o){var i=r[o],l=t[i],c=v(e,i);l instanceof mt?(w(e,i,l.execute(c)),s=!0):c!==l&&(w(e,i,l),s=!0)}return s}var gt=(yt.prototype._trans=function(e,t,r){var n=this._tx||xe.trans,a=this.name,s=ae&&"undefined"!=typeof console&&console.createTask&&void 0;function o(e,r,n){if(!n.schema[a])throw new V.NotFound("Table "+a+" not part of transaction");return t(n.idbtrans,n)}var i=Oe();try{var l=n&&n.db._novip===this.db._novip?n===xe.trans?n._promise(e,o,r):Be(function(){return n._promise(e,o,r)},{trans:n,transless:xe.transless||xe}):function e(t,r,n,a){if(t.idbdb&&(t._state.openComplete||xe.letThrough||t._vip)){var s=t._createTransaction(r,n,t._dbSchema);try{s.create(),t._state.PR1398_maxLoop=3}catch(o){return o.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,a)})):Qe(o)}return s._promise(r,function(e,t){return Be(function(){return xe.trans=s,a(e,t,s)})}).then(function(e){if("readwrite"===r)try{s.idbtrans.commit()}catch(t){}return"readonly"===r?e:s._completion.then(function(){return e})})}if(t._state.openComplete)return Qe(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Qe(new V.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,a)})}(this.db,e,[this.name],o);return s&&(l._consoleTask=s,l=l.catch(function(e){return Qe(e)})),l}finally{i&&Ae()}},yt.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Qe(new V.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},yt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(s(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==Xe){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}var o=this.schema.idxByName;function i(e,t){return 0===ct(e,t)}n=(l=t.reduce(function(t,r){var n=t[0],a=t[1],l=(t=o[r],e[r]);return[n||t,n||!t?st(a,t&&t.multi?function(e){return e=v(e,r),s(e)&&e.some(function(e){return i(l,e)})}:function(e){return i(l,v(e,r))}):a]},[null,null]))[0];var l=l[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(l):r?this.filter(l):this.where(t).equals("")},yt.prototype.filter=function(e){return this.toCollection().and(e)},yt.prototype.count=function(e){return this.toCollection().count(e)},yt.prototype.offset=function(e){return this.toCollection().offset(e)},yt.prototype.limit=function(e){return this.toCollection().limit(e)},yt.prototype.each=function(e){return this.toCollection().each(e)},yt.prototype.toArray=function(e){return this.toCollection().toArray(e)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,s(e)?"[".concat(e.join("+"),"]"):e))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(t){var r,n=this.db,a=this.name;function s(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(s,r=t),Object.defineProperty(s.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),s.prototype.table=function(){return a},t=s);for(var o=new Set,l=t.prototype;l;l=i(l))Object.getOwnPropertyNames(l).forEach(function(e){return o.add(e)});function c(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!o.has(r))try{n[r]=e[r]}catch(a){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=c,this.hook("reading",c),t},yt.prototype.defineClass=function(){return this.mapToClass(function(e){o(this,e)})},yt.prototype.add=function(e,t){var r=this,n=this.schema.primKey,a=n.auto,s=n.keyPath,o=e;return s&&a&&(o=it(s)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})}).then(function(e){return e.numFailures?je.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{w(e,s,t)}catch(r){}return t})},yt.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return r.core.get({trans:a,key:e}).then(function(s){var o=null!=s?s:{};return pt(o,t),n&&w(o,n,e),r.core.mutate({trans:a,type:"put",values:[o],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?je.reject(e.failures[0]):!!s})})})},yt.prototype.update=function(e,t){return"object"!=typeof e||s(e)?this.where(":id").equals(e).modify(t):void 0===(e=v(e,this.schema.primKey.keyPath))?Qe(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},yt.prototype.put=function(e,t){var r=this,n=this.schema.primKey,a=n.auto,s=n.keyPath,o=e;return s&&a&&(o=it(s)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?je.reject(e.failures[0]):e.lastResult}).then(function(t){if(s)try{w(e,s,t)}catch(r){}return t})},yt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return ht(t,[e],r)}).then(function(e){return e.numFailures?je.reject(e.failures[0]):void 0})})},yt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ot}).then(function(t){return ht(e,null,t)})}).then(function(e){return e.numFailures?je.reject(e.failures[0]):void 0})},yt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},yt.prototype.bulkAdd=function(e,t,r){var n=this,a=Array.isArray(t)?t:void 0,s=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(i=n.schema.primKey).auto;if((i=i.keyPath)&&a)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,i=i&&r?e.map(it(i)):e;return n.core.mutate({trans:t,type:"add",keys:a,values:i,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,a=e.lastResult;if(e=e.failures,0===t)return s?r:a;throw new U("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(o," operations failed"),e)})})},yt.prototype.bulkPut=function(e,t,r){var n=this,a=Array.isArray(t)?t:void 0,s=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(i=n.schema.primKey).auto;if((i=i.keyPath)&&a)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,i=i&&r?e.map(it(i)):e;return n.core.mutate({trans:t,type:"put",keys:a,values:i,wantResults:s}).then(function(e){var t=e.numFailures,r=e.results,a=e.lastResult;if(e=e.failures,0===t)return s?r:a;throw new U("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(o," operations failed"),e)})})},yt.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),a=e.map(function(e){return e.changes}),s=[];return this._trans("readwrite",function(o){return r.getMany({trans:o,keys:n,cache:"clone"}).then(function(i){var l=[],c=[];e.forEach(function(e,r){var n=e.key,a=e.changes,o=i[r];if(o){for(var u=0,d=Object.keys(a);u<d.length;u++){var h=d[u],m=a[h];if(h===t.schema.primKey.keyPath){if(0!==ct(m,n))throw new V.Constraint("Cannot update primary key in bulkUpdate()")}else w(o,h,m)}s.push(r),l.push(n),c.push(o)}});var u=l.length;return r.mutate({trans:o,type:"put",keys:l,values:c,updates:{keys:n,changeSpecs:a}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return u;for(var a=0,o=Object.keys(n);a<o.length;a++){var i,l=o[a],c=s[Number(l)];null!=c&&(i=n[l],delete n[l],n[c]=i)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(u," operations failed"),n)})})})},yt.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return ht(t,e,r)})}).then(function(e){var n=e.numFailures,a=e.lastResult;if(e=e.failures,0===n)return a;throw new U("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},yt);function yt(){}function xt(e){function t(t,n){if(n){for(var a=arguments.length,s=new Array(a-1);--a;)s[a-1]=arguments[a];return r[t].subscribe.apply(null,s),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=i;for(var n=1,o=arguments.length;n<o;++n)i(arguments[n]);return t;function i(e,n,o){if("object"!=typeof e){var l;n=n||re;var c={subscribers:[],fire:o=o||Y,subscribe:function(e){-1===c.subscribers.indexOf(e)&&(c.subscribers.push(e),c.fire=n(c.fire,e))},unsubscribe:function(e){c.subscribers=c.subscribers.filter(function(t){return t!==e}),c.fire=c.subscribers.reduce(n,o)}};return r[e]=t[e]=c}a(l=e).forEach(function(e){var t=l[e];if(s(t))i(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new V.InvalidArgument("Invalid event config");var r=i(e,J,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){b(function(){e.apply(null,t)})})})}})}}function bt(e,t){return m(t).from({prototype:e}),t}function vt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wt(e,t){e.filter=st(e.filter,t)}function jt(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return st(n(),t())}:t,e.justLimit=r&&!n}function kt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new V.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Nt(e,t,r){var n=kt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function _t(e,t,r,n){var a=e.replayFilter?st(e.filter,e.replayFilter()):e.filter;if(e.or){var s={},o=function(e,r,n){var o,i;a&&!a(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(i=""+(o=r.primaryKey))&&(i=""+new Uint8Array(o)),c(s,i)||(s[i]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(o,r),Et(Nt(e,n,r),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Et(Nt(e,n,r),st(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function Et(e,t,r,n){var a=Me(n?function(e,t,a){return r(n(e),t,a)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Y},function(t){e.fail(t),r=Y})||a(e.value,e,function(e){return r=e}),r()})})}var St=(Ct.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,Qe.bind(null,r.error)):r.table._trans("readonly",e).then(t)},Ct.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Qe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ct.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=st(t.algorithm,e)},Ct.prototype._iterate=function(e,t){return _t(this._ctx,e,t,this._ctx.table.core)},Ct.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&o(r,e),t._ctx=r,t},Ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ct.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return _t(t,e,r,t.table.core)})},Ct.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(vt(r,!0))return n.count({trans:e,query:{index:kt(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var a=0;return _t(r,function(){return++a,!1},e,n).then(function(){return a})}).then(e)},Ct.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],a=r.length-1;function s(e,t){return t?s(e[r[t]],t-1):e[n]}var o="next"===this._ctx.dir?1:-1;function i(e,t){return ct(s(e,a),s(t,a))*o}return this.toArray(function(e){return e.sort(i)}).then(t)},Ct.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&vt(r,!0)&&0<r.limit){var n=r.valueMapper,a=kt(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var s=[];return _t(r,function(e){return s.push(e)},e,r.table.core).then(function(){return s})},e)},Ct.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,vt(t)?jt(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):jt(t,function(){var t=e;return function(){return--t<0}})),this},Ct.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),jt(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},Ct.prototype.until=function(e,t){return wt(this._ctx,function(r,n,a){return!e(r.value)||(n(a),t)}),this},Ct.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Ct.prototype.last=function(e){return this.reverse().first(e)},Ct.prototype.filter=function(e){var t;return wt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=st(t.isMatch,e),this},Ct.prototype.and=function(e){return this.filter(e)},Ct.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ct.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ct.prototype.desc=function(){return this.reverse()},Ct.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},Ct.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ct.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Ct.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},Ct.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&vt(t,!0)&&0<t.limit)return this._read(function(e){var r=kt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},Ct.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ct.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Ct.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ct.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return wt(this._ctx,function(e){var r=e.primaryKey.toString();return e=c(t,r),t[r]=!0,!e}),this},Ct.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var s,o="function"==typeof e?e:function(t){return pt(t,e)},i=r.table.core,l=(s=i.schema.primaryKey).outbound,c=s.extractKey,u=200;function d(e,t){var r=t.failures;t=t.numFailures,m+=e-t;for(var n=0,s=a(r);n<s.length;n++){var o=s[n];h.push(r[o])}}(s=t.db._options.modifyChunkSize)&&(u="object"==typeof s?s[i.name]||s["*"]||200:s);var h=[],m=0,f=[],p=e===Pt;return t.clone().primaryKeys().then(function(t){function a(h){var m=Math.min(u,t.length-h),f=t.slice(h,h+m);return(p?Promise.resolve([]):i.getMany({trans:n,keys:f,cache:"immutable"})).then(function(g){var y=[],x=[],b=l?[]:null,v=p?f:[];if(!p)for(var w=0;w<m;++w){var j=g[w],k={value:P(j),primKey:t[h+w]};!1!==o.call(k,k.value,k)&&(null==k.value?v.push(t[h+w]):l||0===ct(c(j),c(k.value))?(x.push(k.value),l&&b.push(t[h+w])):(v.push(t[h+w]),y.push(k.value)))}return Promise.resolve(0<y.length&&i.mutate({trans:n,type:"add",values:y}).then(function(e){for(var t in e.failures)v.splice(parseInt(t),1);d(y.length,e)})).then(function(){return(0<x.length||s&&"object"==typeof e)&&i.mutate({trans:n,type:"put",keys:b,values:x,criteria:s,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<h}).then(function(e){return d(x.length,e)})}).then(function(){return(0<v.length||s&&p)&&i.mutate({trans:n,type:"delete",keys:v,criteria:s,isAdditionalChunk:0<h}).then(function(e){return ht(r.table,v,e)}).then(function(e){return d(v.length,e)})}).then(function(){return t.length>h+m&&a(h+u)})})}var s=vt(r)&&r.limit===1/0&&("function"!=typeof e||p)&&{index:r.index,range:r.range};return a(0).then(function(){if(0<h.length)throw new z("Error modifying one or more objects",h,m,f);return t.length})})})},Ct.prototype.delete=function(){var e=this._ctx,t=e.range;return!vt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Pt):this._write(function(r){var n=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:r,query:{index:n,range:a}}).then(function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(e){var r=e.failures;if(e=e.numFailures)throw new z("Could not delete some values",Object.keys(r).map(function(e){return r[e]}),t-e);return t-e})})})},Ct);function Ct(){}var Pt=function(e,t){return t.value=null};function Ot(e,t){return e<t?-1:e===t?0:1}function At(e,t){return t<e?-1:e===t?0:1}function Rt(e,t,r){return(e=e instanceof Lt?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function Tt(e){return new e.Collection(e,function(){return It("")}).limit(0)}function Mt(e,t,r,n){var a,s,o,i,l,c,u,d=r.length;if(!r.every(function(e){return"string"==typeof e}))return Rt(e,et);function h(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},s="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},o="next"===e?Ot:At;var t=r.map(function(e){return{lower:s(e),upper:a(e)}}).sort(function(e,t){return o(e.lower,t.lower)});i=t.map(function(e){return e.upper}),l=t.map(function(e){return e.lower}),u="next"===(c=e)?"":n}h("next"),(e=new e.Collection(e,function(){return Dt(i[0],l[d-1]+n)}))._ondirectionchange=function(e){h(e)};var m=0;return e._addAlgorithm(function(e,r,n){var a=e.key;if("string"!=typeof a)return!1;var h=s(a);if(t(h,l,m))return!0;for(var f=null,p=m;p<d;++p){var g=function(e,t,r,n,a,s){for(var o=Math.min(e.length,n.length),i=-1,l=0;l<o;++l){var c=t[l];if(c!==n[l])return a(e[l],r[l])<0?e.substr(0,l)+r[l]+r.substr(l+1):a(e[l],n[l])<0?e.substr(0,l)+n[l]+r.substr(l+1):0<=i?e.substr(0,i)+t[i]+r.substr(i+1):null;a(e[l],c)<0&&(i=l)}return o<n.length&&"next"===s?e+r.substr(e.length):o<e.length&&"prev"===s?e.substr(0,r.length):i<0?null:e.substr(0,i)+n[i]+r.substr(i+1)}(a,h,i[p],l[p],o,c);null===g&&null===f?m=p+1:(null===f||0<o(f,g))&&(f=g)}return r(null!==f?function(){e.continue(f+u)}:n),!1}),e}function Dt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function It(e){return{type:1,lower:e,upper:e}}var Lt=(Object.defineProperty(Ft.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ft.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?Tt(this):new this.Collection(this,function(){return Dt(e,t,!r,!n)})}catch(a){return Rt(this,Ze)}},Ft.prototype.equals=function(e){return null==e?Rt(this,Ze):new this.Collection(this,function(){return It(e)})},Ft.prototype.above=function(e){return null==e?Rt(this,Ze):new this.Collection(this,function(){return Dt(e,void 0,!0)})},Ft.prototype.aboveOrEqual=function(e){return null==e?Rt(this,Ze):new this.Collection(this,function(){return Dt(e,void 0,!1)})},Ft.prototype.below=function(e){return null==e?Rt(this,Ze):new this.Collection(this,function(){return Dt(void 0,e,!1,!0)})},Ft.prototype.belowOrEqual=function(e){return null==e?Rt(this,Ze):new this.Collection(this,function(){return Dt(void 0,e)})},Ft.prototype.startsWith=function(e){return"string"!=typeof e?Rt(this,et):this.between(e,e+Xe,!0,!0)},Ft.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Mt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Xe)},Ft.prototype.equalsIgnoreCase=function(e){return Mt(this,function(e,t){return e===t[0]},[e],"")},Ft.prototype.anyOfIgnoreCase=function(){var e=I.apply(D,arguments);return 0===e.length?Tt(this):Mt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Ft.prototype.startsWithAnyOfIgnoreCase=function(){var e=I.apply(D,arguments);return 0===e.length?Tt(this):Mt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Xe)},Ft.prototype.anyOf=function(){var e=this,t=I.apply(D,arguments),r=this._cmp;try{t.sort(r)}catch(s){return Rt(this,Ze)}if(0===t.length)return Tt(this);var n=new this.Collection(this,function(){return Dt(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var a=0;return n._addAlgorithm(function(e,n,s){for(var o=e.key;0<r(o,t[a]);)if(++a===t.length)return n(s),!1;return 0===r(o,t[a])||(n(function(){e.continue(t[a])}),!1)}),n},Ft.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ft.prototype.noneOf=function(){var e=I.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(r){return Rt(this,Ze)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Ft.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,a=this._ascending,s=this._descending,o=this._min,i=this._max;if(0===e.length)return Tt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0}))return Rt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var l,c=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=a;function h(e,t){return d(e[0],t[0])}try{(l=e.reduce(function(e,t){for(var r=0,a=e.length;r<a;++r){var s=e[r];if(n(t[0],s[1])<0&&0<n(t[1],s[0])){s[0]=o(s[0],t[0]),s[1]=i(s[1],t[1]);break}}return r===a&&e.push(t),e},[])).sort(h)}catch(y){return Rt(this,Ze)}var m=0,f=u?function(e){return 0<a(e,l[m][1])}:function(e){return 0<=a(e,l[m][1])},p=c?function(e){return 0<s(e,l[m][0])}:function(e){return 0<=s(e,l[m][0])},g=f;return(e=new this.Collection(this,function(){return Dt(l[0][0],l[l.length-1][1],!c,!u)}))._ondirectionchange=function(e){d="next"===e?(g=f,a):(g=p,s),l.sort(h)},e._addAlgorithm(function(e,t,n){for(var s,o=e.key;g(o);)if(++m===l.length)return t(n),!1;return!f(s=o)&&!p(s)||(0===r._cmp(o,l[m][1])||0===r._cmp(o,l[m][0])||t(function(){d===a?e.continue(l[m][0]):e.continue(l[m][1])}),!1)}),e},Ft.prototype.startsWithAnyOf=function(){var e=I.apply(D,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Tt(this):this.inAnyRange(e.map(function(e){return[e,e+Xe]})):Rt(this,"startsWithAnyOf() only works with strings")},Ft);function Ft(){}function Kt(e){return Me(function(t){return qt(t),e(t.target.error),!1})}function qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bt="storagemutated",zt="x-storagemutated-1",Ut=xt(null,Bt),$t=(Wt.prototype._lock=function(){return x(!xe.global),++this._reculock,1!==this._reculock||xe.global||(xe.lockOwnerFor=this),this},Wt.prototype._unlock=function(){if(x(!xe.global),0==--this._reculock)for(xe.global||(xe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch(t){}}return this},Wt.prototype._locked=function(){return this._reculock&&xe.lockOwnerFor!==this},Wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(x(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new V.DatabaseClosed(n);case"MissingAPIError":throw new V.MissingAPI(n.message,n);default:throw new V.OpenFailed(n)}if(!this.active)throw new V.TransactionInactive;return x(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(r){qt(r),t._reject(e.error)}),e.onabort=Me(function(r){qt(r),t.active&&t._reject(new V.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Me(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ut.storagemutated.fire(e.mutatedParts)}),this},Wt.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return Qe(new V.ReadOnly("Transaction is readonly"));if(!this.active)return Qe(new V.TransactionInactive);if(this._locked())return new je(function(a,s){n._blockedFuncs.push([function(){n._promise(e,t,r).then(a,s)},xe])});if(r)return Be(function(){var e=new je(function(e,r){n._lock();var a=t(e,r,n);a&&a.then&&a.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var a=new je(function(e,r){var a=t(e,r,n);a&&a.then&&a.then(e,r)});return a._lib=!0,a},Wt.prototype._root=function(){return this.parent?this.parent._root():this},Wt.prototype.waitFor=function(e){var t,r=this._root(),n=je.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var a=r._waitingFor;return new je(function(e,t){n.then(function(t){return r._waitingQueue.push(Me(e.bind(null,t)))},function(e){return r._waitingQueue.push(Me(t.bind(null,e)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},Wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new V.Abort))},Wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var r=this.schema[e];if(!r)throw new V.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},Wt);function Wt(){}function Vt(e,t,r,n,a,s,o,i){return{name:e,keyPath:t,unique:r,multi:n,auto:a,compound:s,src:(r&&!o?"&":"")+(n?"*":"")+(a?"++":"")+Gt(t),type:i}}function Gt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Ht(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))};var n}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(t){return Yt=function(){return Xe},Xe}};function Jt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return v(e,t)}:function(t){return v(t,e)};var t}function Qt(e){return[].slice.call(e)}var Xt=0;function Zt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function er(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,a=e.lowerOpen;return e=e.upperOpen,void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!a):t.bound(r,n,!!a,!!e)}function a(e){var t,r=e.name;return{name:r,schema:e,mutate:function(e){var t=e.trans,a=e.type,s=e.keys,o=e.values,i=e.range;return new Promise(function(e,l){e=Me(e);var c=t.objectStore(r),u=null==c.keyPath,d="put"===a||"add"===a;if(!d&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var h,m=(s||o||{length:1}).length;if(s&&o&&s.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===m)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function f(e){++y,qt(e)}var p=[],g=[],y=0;if("deleteRange"===a){if(4===i.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===i.type?p.push(h=c.clear()):p.push(h=c.delete(n(i)))}else{var x=(u=d?u?[o,s]:[o,null]:[s,null])[0],b=u[1];if(d)for(var v=0;v<m;++v)p.push(h=b&&void 0!==b[v]?c[a](x[v],b[v]):c[a](x[v])),h.onerror=f;else for(v=0;v<m;++v)p.push(h=c[a](x[v])),h.onerror=f}function w(t){t=t.target.result,p.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:y,failures:g,results:"delete"===a?s:p.map(function(e){return e.result}),lastResult:t})}h.onerror=function(e){f(e),w(e)},h.onsuccess=w})},getMany:function(e){var t=e.trans,n=e.keys;return new Promise(function(e,a){e=Me(e);for(var s,o=t.objectStore(r),i=n.length,l=new Array(i),c=0,u=0,d=function(t){t=t.target,l[t._pos]=t.result,++u===c&&e(l)},h=Kt(a),m=0;m<i;++m)null!=n[m]&&((s=o.get(n[m]))._pos=m,s.onsuccess=d,s.onerror=h,++c);0===c&&e(l)})},get:function(e){var t=e.trans,n=e.key;return new Promise(function(e,a){e=Me(e);var s=t.objectStore(r).get(n);s.onsuccess=function(t){return e(t.target.result)},s.onerror=Kt(a)})},query:(t=c,function(e){return new Promise(function(a,s){a=Me(a);var o,i,l,c=e.trans,u=e.values,d=e.limit,h=e.query,m=d===1/0?void 0:d,f=h.index;if(h=h.range,c=c.objectStore(r),f=f.isPrimaryKey?c:c.index(f.name),h=n(h),0===d)return a({result:[]});t?((m=u?f.getAll(h,m):f.getAllKeys(h,m)).onsuccess=function(e){return a({result:e.target.result})},m.onerror=Kt(s)):(o=0,i=!u&&"openKeyCursor"in f?f.openKeyCursor(h):f.openCursor(h),l=[],i.onsuccess=function(e){var t=i.result;return t?(l.push(u?t.value:t.primaryKey),++o===d?a({result:l}):void t.continue()):a({result:l})},i.onerror=Kt(s))})}),openCursor:function(e){var t=e.trans,a=e.values,s=e.query,o=e.reverse,i=e.unique;return new Promise(function(e,l){e=Me(e);var c=s.index,u=s.range,d=t.objectStore(r),h=(d=c.isPrimaryKey?d:d.index(c.name),c=o?i?"prevunique":"prev":i?"nextunique":"next",!a&&"openKeyCursor"in d?d.openKeyCursor(n(u),c):d.openCursor(n(u),c));h.onerror=Kt(l),h.onsuccess=Me(function(r){var n,a,s,o,i=h.result;i?(i.___id=++Xt,i.done=!1,n=i.continue.bind(i),a=(a=i.continuePrimaryKey)&&a.bind(i),s=i.advance.bind(i),o=function(){throw new Error("Cursor not stopped")},i.trans=t,i.stop=i.continue=i.continuePrimaryKey=i.advance=function(){throw new Error("Cursor not started")},i.fail=Me(l),i.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},i.start=function(e){function t(){if(h.result)try{e()}catch(t){i.fail(t)}else i.done=!0,i.start=function(){throw new Error("Cursor behind last entry")},i.stop()}var r=new Promise(function(e,t){e=Me(e),h.onerror=Kt(t),i.fail=t,i.stop=function(t){i.stop=i.continue=i.continuePrimaryKey=i.advance=o,e(t)}});return h.onsuccess=Me(function(e){h.onsuccess=t,t()}),i.continue=n,i.continuePrimaryKey=a,i.advance=s,t(),r},e(i)):e(null)},l)})},count:function(e){var t=e.query,a=e.trans,s=t.index,o=t.range;return new Promise(function(e,t){var i=a.objectStore(r),l=s.isPrimaryKey?i:i.index(s.name);(l=(i=n(o))?l.count(i):l.count()).onsuccess=Me(function(t){return e(t.target.result)}),l.onerror=Kt(t)})}}}r=(i=r,l=Qt((o=e).objectStoreNames),u={schema:{name:o.name,tables:l.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=s(t),a={};return r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:Jt(t)},indexes:Qt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry;return e=e.keyPath,n={name:t,compound:s(e),keyPath:e,unique:r,multiEntry:n,extractKey:Jt(e)},a[Zt(e)]=n}),getIndexByKeyPath:function(e){return a[Zt(e)]}},a[":id"]=r.primaryKey,null!=t&&(a[Zt(t)]=r.primaryKey),r})},hasGetAll:0<l.length&&"getAll"in i.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var o,i,l,c=u.hasGetAll,u=r.tables.map(a),d={};return u.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:r}}function tr(e,r,n,a){var s=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=er(r,s,a),e.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},a))}}function rr(e,t){var r=t.db;t=tr(e._middlewares,r,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function nr(e,t,r,n){r.forEach(function(r){var a=n[r];t.forEach(function(t){var n=function e(t,r){return f(t,r)||(t=i(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?h(t,r,{get:function(){return this.table(r)},set:function(e){d(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,a))})})}function ar(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function sr(e,t){return e._cfg.version-t._cfg.version}function or(e,t,r,n){var s=e._dbSchema;r.objectStoreNames.contains("$meta")&&!s.$meta&&(s.$meta=Ht("$meta",fr("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,s);o.create(r),o._completion.catch(n);var i=o._reject.bind(o),l=xe.transless||xe;Be(function(){return xe.trans=o,xe.transless=l,0!==t?(rr(e,r),c=t,((n=o).storeNames.includes("$meta")?n.table("$meta").get("version").then(function(e){return null!=e?e:c}):je.resolve(c)).then(function(t){return s=t,i=o,l=r,c=[],t=(n=e)._versions,u=n._dbSchema=hr(0,n.idbdb,l),0!==(t=t.filter(function(e){return e._cfg.version>=s})).length?(t.forEach(function(e){c.push(function(){var t=u,r=e._cfg.dbschema;mr(n,t,l),mr(n,r,l),u=n._dbSchema=r;var o=lr(t,r);o.add.forEach(function(e){cr(l,e[0],e[1].primKey,e[1].indexes)}),o.change.forEach(function(e){if(e.recreate)throw new V.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach(function(e){return dr(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),dr(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=e._cfg.contentUpgrade;if(c&&e._cfg.version>s){rr(n,l),i._memoizedTables={};var d=k(r);o.del.forEach(function(e){d[e]=t[e]}),ar(n,[n.Transaction.prototype]),nr(n,[n.Transaction.prototype],a(d),d),i.schema=d;var h,m=L(c);return m&&ze(),o=je.follow(function(){var e;(h=c(i))&&m&&(e=Ue.bind(null,null),h.then(e,e))}),h&&"function"==typeof h.then?je.resolve(h):o.then(function(){return h})}}),c.push(function(t){var r,a,s=e._cfg.dbschema;r=s,a=t,[].slice.call(a.db.objectStoreNames).forEach(function(e){return null==r[e]&&a.db.deleteObjectStore(e)}),ar(n,[n.Transaction.prototype]),nr(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),i.schema=n._dbSchema}),c.push(function(t){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===e._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return c.length?je.resolve(c.shift()(i.idbtrans)).then(e):je.resolve()}().then(function(){ur(u,l)})):je.resolve();var n,s,i,l,c,u}).catch(i)):(a(s).forEach(function(e){cr(r,e,s[e].primKey,s[e].indexes)}),rr(e,r),void je.follow(function(){return e.on.populate.fire(o)}).catch(i));var n,c})}function ir(e,t){ur(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=hr(0,e.idbdb,t);mr(e,e._dbSchema,t);for(var n=0,a=lr(r,e._dbSchema).change;n<a.length;n++){var s=function(e){if(e.change.length||e.recreate)return{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(e){dr(r,e)})}(a[n]);if("object"==typeof s)return s.value}}function lr(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var a=e[r],s=t[r];if(a){var o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||a.primKey.auto!==s.primKey.auto)o.recreate=!0,n.change.push(o);else{var i=a.idxByName,l=s.idxByName,c=void 0;for(c in i)l[c]||o.del.push(c);for(c in l){var u=i[c],d=l[c];u?u.src!==d.src&&o.change.push(d):o.add.push(d)}(0<o.del.length||0<o.add.length||0<o.change.length)&&n.change.push(o)}}else n.add.push([r,s])}return n}function cr(e,t,r,n){var a=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return dr(a,e)}),a}function ur(e,t){a(e).forEach(function(r){t.db.objectStoreNames.contains(r)||cr(t,r,e[r].primKey,e[r].indexes)})}function dr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hr(e,t,r){var n={};return g(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),a=Vt(Gt(i=t.keyPath),i||"",!0,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),s=[],o=0;o<t.indexNames.length;++o){var i=(l=t.index(t.indexNames[o])).keyPath,l=Vt(l.name,i,!!l.unique,!!l.multiEntry,!1,i&&"string"!=typeof i,!1);s.push(l)}n[e]=Ht(e,a,s)}),n}function mr(e,t,r){for(var a=r.db.objectStoreNames,s=0;s<a.length;++s){var o=a[s],i=r.objectStore(o);e._hasGetAll="getAll"in i;for(var l=0;l<i.indexNames.length;++l){var c=i.indexNames[l],u=i.index(c).keyPath,d="string"==typeof u?u:"["+g(u).join("+")+"]";!t[o]||(u=t[o].idxByName[d])&&(u.name=c,delete t[o].idxByName[d],t[o].idxByName[c]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function fr(e){return e.split(",").map(function(e,t){var r=null===(n=(a=e.split(":"))[1])||void 0===n?void 0:n.trim(),n=(e=a[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Vt(n,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),s(a),0===t,r)})}var pr=(gr.prototype._createTableSchema=Ht,gr.prototype._parseIndexSyntax=fr,gr.prototype._parseStoresSpec=function(e,t){var r=this;a(e).forEach(function(n){if(null!==e[n]){var a=r._parseIndexSyntax(e[n]),s=a.shift();if(!s)throw new V.Schema("Invalid schema for table "+n+": "+e[n]);if(s.unique=!0,s.multi)throw new V.Schema("Primary key cannot be multiEntry*");a.forEach(function(e){if(e.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string")}),a=r._createTableSchema(n,s,a),t[n]=a}})},gr.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?o(this._cfg.storesSource,e):e,e=t._versions;var r={},n={};return e.forEach(function(e){o(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,ar(t,[t._allTables,t,t.Transaction.prototype]),nr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(n),n),t._storeNames=a(n),this},gr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ne(this._cfg.contentUpgrade||Y,e),this},gr);function gr(){}function yr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rn(rt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function xr(e){return e&&"function"==typeof e.databases}function br(e){return Be(function(){return xe.letThrough=!0,e()})}function vr(e){return!("from"in e)}var wr=function(e,t){if(!this){var r=new wr;return e&&"d"in e&&o(r,e),r}o(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function jr(e,t,r){var n=ct(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(vr(e))return o(e,{from:t,to:r,d:1});var a=e.l;if(n=e.r,ct(r,e.from)<0)return a?jr(a,t,r):e.l={from:t,to:r,d:1,l:null,r:null},Er(e);if(0<ct(t,e.to))return n?jr(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},Er(e);ct(t,e.from)<0&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<ct(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,a&&!e.l&&kr(e,a),n&&r&&kr(e,n)}}function kr(e,t){vr(t)||function e(t,r){var n=r.from,a=r.to,s=r.l;r=r.r,jr(t,n,a),s&&e(t,s),r&&e(t,r)}(e,t)}function Nr(e,t){var r=_r(t),n=r.next();if(n.done)return!1;for(var a=n.value,s=_r(e),o=s.next(a.from),i=o.value;!n.done&&!o.done;){if(ct(i.from,a.to)<=0&&0<=ct(i.to,a.from))return!0;ct(a.from,i.from)<0?a=(n=r.next(i.from)).value:i=(o=s.next(a.from)).value}return!1}function _r(e){var t=vr(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&ct(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||ct(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Er(e){var r,n,a=((null===(r=e.r)||void 0===r?void 0:r.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),s=1<a?"r":a<-1?"l":"";s&&(r="r"==s?"l":"r",n=t({},e),a=e[s],e.from=a.from,e.to=a.to,e[s]=a[s],n[s]=a[r],(e[r]=n).d=Sr(n)),e.d=Sr(e)}function Sr(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cr(e,t){return a(t).forEach(function(r){e[r]?kr(e[r],t[r]):e[r]=function e(t){var r,n,a={};for(r in t)c(t,r)&&(n=t[r],a[r]=!n||"object"!=typeof n||S.has(n.constructor)?n:e(n));return a}(t[r])}),e}function Pr(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&Nr(t[r],e[r])})}u(wr.prototype,((F={add:function(e){return kr(this,e),this},addKey:function(e){return jr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return jr(t,e,e)}),this},hasKey:function(e){var t=_r(this).next(e).value;return t&&ct(t.from,e)<=0&&0<=ct(t.to,e)}})[R]=function(){return _r(this)},F));var Or={},Ar={},Rr=!1;function Tr(e){Cr(Ar,e),Rr||(Rr=!0,setTimeout(function(){Rr=!1,Mr(Ar,!(Ar={}))},0))}function Mr(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,a=Object.values(Or);n<a.length;n++)Dr(o=a[n],e,r,t);else for(var s in e){var o,i=/^idb\:\/\/(.*)\/(.*)\//.exec(s);i&&(s=i[1],i=i[2],(o=Or["idb://".concat(s,"/").concat(i)])&&Dr(o,e,r,t))}r.forEach(function(e){return e()})}function Dr(e,t,r,n){for(var a=[],s=0,o=Object.entries(e.queries.query);s<o.length;s++){for(var i=o[s],l=i[0],c=[],u=0,d=i[1];u<d.length;u++){var h=d[u];Pr(t,h.obsSet)?h.subscribers.forEach(function(e){return r.add(e)}):n&&c.push(h)}n&&a.push([l,c])}if(n)for(var m=0,f=a;m<f.length;m++){var p=f[m];l=p[0],c=p[1],e.queries.query[l]=c}}function Ir(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Qe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,s=Math.round(10*e.verno),o=!1;function i(){if(t.openCanceller!==n)throw new V.DatabaseClosed("db.open() was cancelled")}function l(){return new je(function(n,c){if(i(),!r)throw new V.MissingAPI;var u=e.name,m=t.autoSchema||!s?r.open(u):r.open(u,s);if(!m)throw new V.MissingAPI;m.onerror=Kt(c),m.onblocked=Me(e._fireOnBlocked),m.onupgradeneeded=Me(function(n){var a;d=m.transaction,t.autoSchema&&!e._options.allowEmptyDB?(m.onerror=qt,d.abort(),m.result.close(),(a=r.deleteDatabase(u)).onsuccess=a.onerror=Me(function(){c(new V.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=Kt(c),n=n.oldVersion>Math.pow(2,62)?0:n.oldVersion,h=n<1,e.idbdb=m.result,o&&ir(e,d),or(e,n/10,d,c))},c),m.onsuccess=Me(function(){d=null;var r,i,c,f,p,y=e.idbdb=m.result,x=g(y.objectStoreNames);if(0<x.length)try{var b=y.transaction(1===(f=x).length?f[0]:f,"readonly");if(t.autoSchema)i=y,c=b,(r=e).verno=i.version/10,c=r._dbSchema=hr(0,i,c),r._storeNames=g(i.objectStoreNames,0),nr(r,[r._allTables],a(c),c);else if(mr(e,e._dbSchema,b),((p=lr(hr(0,(p=e).idbdb,b),p._dbSchema)).add.length||p.change.some(function(e){return e.add.length||e.change.length}))&&!o)return y.close(),s=y.version+1,o=!0,n(l());rr(e,b)}catch(v){}tt.push(e),y.onversionchange=Me(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),y.onclose=Me(function(){e.close({disableAutoOpen:!1})}),h&&(p=e._deps,b=u,y=p.indexedDB,p=p.IDBKeyRange,xr(y)||b===rt||yr(y,p).put({name:b}).catch(Y)),n()},c)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,l();break;case"VersionError":if(0<s)return s=0,l()}return je.reject(e)})}var c,u=t.dbReadyResolve,d=null,h=!1;return je.race([n,("undefined"==typeof navigator?je.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}c=setInterval(t,100),t()}).finally(function(){return clearInterval(c)}):Promise.resolve()).then(l)]).then(function(){return i(),t.onReadyBeingFired=[],je.resolve(br(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(ne,Y);return t.onReadyBeingFired=[],je.resolve(br(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{d&&d.abort()}catch(a){}return n===t.openCanceller&&e._close(),Qe(r)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return h&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new wr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new wr(-1/0,[[[]]])}),Ut(Bt).fire(t),Mr(t,!0)),e})}function Lr(e){function t(t){return e.next(t)}var r=a(t),n=a(function(t){return e.throw(t)});function a(e){return function(t){var a=e(t);return t=a.value,a.done?t:t&&"function"==typeof t.then?t.then(r,n):s(t)?Promise.all(t).then(r,n):r(t)}}return a(t)()}function Fr(e,t,r){for(var n=s(e)?e.slice():[e],a=0;a<r;++a)n.push(t);return n}var Kr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),a=n.schema,s={},o=[];function i(e,r,n){var a=Zt(e),l=s[a]=s[a]||[],c=null==e?0:"string"==typeof e?1:e.length,u=0<r;return u=t(t({},n),{name:u?"".concat(a,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:u,keyTail:r,keyLength:c,extractKey:Jt(e),unique:!u&&n.unique}),l.push(u),u.isPrimaryKey||o.push(u),1<c&&i(2===c?e[0]:e.slice(0,c-1),r+1,n),l.sort(function(e,t){return e.keyTail-t.keyTail}),u}r=i(a.primaryKey.keyPath,0,a.primaryKey),s[":id"]=[r];for(var l=0,c=a.indexes;l<c.length;l++){var u=c[l];i(u.keyPath,0,u)}function d(r){var n,a=r.query.index;return a.isVirtual?t(t({},r),{query:{index:a.lowLevelIndex,range:(n=r.query.range,a=a.keyTail,{type:1===n.type?2:n.type,lower:Fr(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:Fr(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},a),{primaryKey:r,indexes:o,getIndexByKeyPath:function(e){return(e=s[Zt(e)])&&e[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,a=r.keyTail,s=r.isVirtual,o=r.keyLength;return s?n.openCursor(d(t)).then(function(e){return e&&i(e)}):n.openCursor(t);function i(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(Fr(n,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?r.continue(r.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):r.continue()}},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(Fr(t,e.MAX_KEY,a),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return r.value}}})}}})}})}};function qr(e,t,r,n){return r=r||{},n=n||"",a(e).forEach(function(a){var s,o,i;c(t,a)?(s=e[a],o=t[a],"object"==typeof s&&"object"==typeof o&&s&&o?(i=A(s))!==A(o)?r[n+a]=t[a]:"Object"===i?qr(s,o,r,n+a+"."):s!==o&&(r[n+a]=t[a]):s!==o&&(r[n+a]=t[a])):r[n+a]=void 0}),a(t).forEach(function(a){c(e,a)||(r[n+a]=t[a])}),r}function Br(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var zr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var a=e.table(n),s=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var o=xe.trans,i=o.table(n).hook,l=i.deleting,u=i.creating,d=i.updating;switch(e.type){case"add":if(u.fire===Y)break;return o._promise("readwrite",function(){return h(e)},!0);case"put":if(u.fire===Y&&d.fire===Y)break;return o._promise("readwrite",function(){return h(e)},!0);case"delete":if(l.fire===Y)break;return o._promise("readwrite",function(){return h(e)},!0);case"deleteRange":if(l.fire===Y)break;return o._promise("readwrite",function(){return function e(r,n,o){return a.query({trans:r,values:!1,query:{index:s,range:n},limit:o}).then(function(a){var s=a.result;return h({type:"delete",keys:s,trans:r}).then(function(a){return 0<a.numFailures?Promise.reject(a.failures[0]):s.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:s[s.length-1],lowerOpen:!0}),o)})})}(e.trans,e.range,1e4)},!0)}return a.mutate(e);function h(e){var n,o,i,h=xe.trans,m=e.keys||Br(s,e);if(!m)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:m}):t({},e)).type&&(e.values=r([],e.values)),e.keys&&(e.keys=r([],e.keys)),n=a,i=m,("add"===(o=e).type?Promise.resolve([]):n.getMany({trans:o.trans,keys:i,cache:"immutable"})).then(function(t){var r=m.map(function(r,n){var a,o,i,m=t[n],f={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(f,r,m,h):"add"===e.type||void 0===m?(a=u.fire.call(f,r,e.values[n],h),null==r&&null!=a&&(e.keys[n]=r=a,s.outbound||w(e.values[n],s.keyPath,r))):(a=qr(m,e.values[n]),(o=d.fire.call(f,a,r,m,h))&&(i=e.values[n],Object.keys(o).forEach(function(e){c(i,e)?i[e]=o[e]:w(i,e,o[e])}))),f});return a.mutate(e).then(function(n){for(var a=n.failures,s=n.results,o=n.numFailures,i=(n=n.lastResult,0);i<m.length;++i){var l=(s||m)[i],c=r[i];null==l?c.onerror&&c.onerror(a[i]):c.onsuccess&&c.onsuccess("put"===e.type&&t[i]?e.values[i]:l)}return{failures:a,results:s,numFailures:o,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Ur(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],a=0,s=0;a<t.keys.length&&s<e.length;++a)0===ct(t.keys[a],e[s])&&(n.push(r?P(t.values[a]):t.values[a]),++s);return n.length===e.length?n:null}catch(o){return null}}var $r={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Ur(e.keys,e.trans._cache,"clone"===e.cache);return t?je.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function Wr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Vr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gr={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new wr(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(xe.subscr&&"readonly"!==r)throw new V.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(xe.querier));return e.transaction(t,r,n)},table:function(o){var i=e.table(o),l=i.schema,c=l.primaryKey,u=l.indexes,d=c.extractKey,h=c.outbound,m=c.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(c.keyPath)}),f=t(t({},i),{mutate:function(t){function a(e){return e="idb://".concat(r,"/").concat(o,"/").concat(e),p[e]||(p[e]=new wr)}var u,d,h,f=t.trans,p=t.mutatedParts||(t.mutatedParts={}),g=a(""),y=a(":dels"),x=t.type,b=(w="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Br(c,t).filter(function(e){return e}),t.values]:[])[0],v=w[1],w=t.trans._cache;return s(b)?(g.addKeys(b),(w="delete"===x||b.length===v.length?Ur(b,w):null)||y.addKeys(b),(w||v)&&(u=a,d=w,h=v,l.indexes.forEach(function(e){var t=u(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&s(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(d||h).forEach(function(e,t){var a=d&&r(d[t]);0!==ct(a,t=h&&r(h[t]))&&(null!=a&&n(a),null!=t&&n(t))})}))):b?(v={from:null!==(v=b.lower)&&void 0!==v?v:e.MIN_KEY,to:null!==(v=b.upper)&&void 0!==v?v:e.MAX_KEY},y.add(v),g.add(v)):(g.add(n),y.add(n),l.indexes.forEach(function(e){return a(e.name).add(n)})),i.mutate(t).then(function(e){return!b||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),m&&m.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),s=r.keyPath.findIndex(function(e){return e===c.keyPath}),o=0,i=e.results.length;o<i;++o)n[o][s]=e.results[o];a(r.name).addKeys(n)})),f.mutatedParts=Cr(f.mutatedParts||{},p),e})}}),p={get:function(e){return[c,new wr(e.key)]},getMany:function(e){return[c,(new wr).addKeys(e.keys)]},count:u=function(t){t=(r=t.query).index;var r=r.range;return[t,new wr(null!==(t=r.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:e.MAX_KEY)]},query:u,openCursor:u};return a(p).forEach(function(e){f[e]=function(a){var s=!!(f=xe.subscr),l=Wr(xe,i)&&Vr(e,a)?a.obsSet={}:f;if(s){var c=function(e){return e="idb://".concat(r,"/").concat(o,"/").concat(e),l[e]||(l[e]=new wr)},u=c(""),m=c(":dels"),f=(s=(f=p[e](a))[0],f[1]);if(("query"===e&&s.isPrimaryKey&&!a.values?m:c(s.name||"")).add(f),!s.isPrimaryKey){if("count"!==e){var g="query"===e&&h&&a.values&&i.query(t(t({},a),{values:!1}));return i[e].apply(this,arguments).then(function(t){if("query"===e){if(h&&a.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var r=a.values?t.result.map(d):t.result;(a.values?u:m).addKeys(r)}else if("openCursor"===e){var n=t,s=a.values;return n&&Object.create(n,{key:{get:function(){return m.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return m.addKey(e),e}},value:{get:function(){return s&&u.addKey(n.primaryKey),n.value}}})}return t})}m.add(n)}}return i[e].apply(this,arguments)}}),f}})}};function Hr(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===a?null:(r=t({},r),s(r.keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&s(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function Yr(e,t){return r=e,(void 0===(n=t).lower||(n.lowerOpen?0<ct(r,n.lower):0<=ct(r,n.lower)))&&(void 0===t.upper||(t.upperOpen?ct(e,t.upper)<0:ct(e,t.upper)<=0));var r,n}function Jr(e,t,r,n,a,o){if(!r||0===r.length)return e;var i=t.query.index,l=i.multiEntry,c=t.query.range,u=n.schema.primaryKey.extractKey,d=i.extractKey,h=(i.lowLevelIndex||i).extractKey;return(r=r.reduce(function(e,r){var n=e,a=[];if("add"===r.type||"put"===r.type)for(var o=new wr,i=r.values.length-1;0<=i;--i){var h,m=r.values[i],f=u(m);o.hasKey(f)||(h=d(m),(l&&s(h)?h.some(function(e){return Yr(e,c)}):Yr(h,c))&&(o.addKey(f),a.push(m)))}switch(r.type){case"add":var p=(new wr).addKeys(t.values?e.map(function(e){return u(e)}):e);n=e.concat(t.values?a.filter(function(e){return e=u(e),!p.hasKey(e)&&(p.addKey(e),!0)}):a.map(function(e){return u(e)}).filter(function(e){return!p.hasKey(e)&&(p.addKey(e),!0)}));break;case"put":var g=(new wr).addKeys(r.values.map(function(e){return u(e)}));n=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?a:a.map(function(e){return u(e)}));break;case"delete":var y=(new wr).addKeys(r.keys);n=e.filter(function(e){return!y.hasKey(t.values?u(e):e)});break;case"deleteRange":var x=r.range;n=e.filter(function(e){return!Yr(u(e),x)})}return n},e))===e?e:(r.sort(function(e,t){return ct(h(e),h(t))||ct(u(e),u(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(a.dirty=!0)),o?Object.freeze(r):r)}function Qr(e,t){return 0===ct(e.lower,t.lower)&&0===ct(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Xr(e,t){return function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ct(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ct(e,t))){if(r&&n)return 0;if(r)return-1;if(n)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Zr(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){var n,a;e.subscribers.delete(r),0===e.subscribers.size&&(n=e,a=t,setTimeout(function(){0===n.subscribers.size&&M(a,n)},3e3))})}var en={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,a){var s,o,i=e.transaction(t,n,a);return"readwrite"===n&&(o=(s=new AbortController).signal,a=function(a){return function(){if(s.abort(),"readwrite"===n){for(var o=new Set,l=0,c=t;l<c.length;l++){var u=c[l],d=Or["idb://".concat(r,"/").concat(u)];if(d){var h=e.table(u),m=d.optimisticOps.filter(function(e){return e.trans===i});if(i._explicit&&a&&i.mutatedParts)for(var f=0,p=Object.values(d.queries.query);f<p.length;f++)for(var g=0,y=(v=p[f]).slice();g<y.length;g++)Pr((w=y[g]).obsSet,i.mutatedParts)&&(M(v,w),w.subscribers.forEach(function(e){return o.add(e)}));else if(0<m.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==i});for(var x=0,b=Object.values(d.queries.query);x<b.length;x++)for(var v,w,j,k=0,N=(v=b[x]).slice();k<N.length;k++)null!=(w=N[k]).res&&i.mutatedParts&&(a&&!w.dirty?(j=Object.isFrozen(w.res),j=Jr(w.res,w.req,m,h,w,j),w.dirty?(M(v,w),w.subscribers.forEach(function(e){return o.add(e)})):j!==w.res&&(w.res=j,w.promise=je.resolve({result:j}))):(w.dirty&&M(v,w),w.subscribers.forEach(function(e){return o.add(e)})))}}}o.forEach(function(e){return e()})}}},i.addEventListener("abort",a(!1),{signal:o}),i.addEventListener("error",a(!1),{signal:o}),i.addEventListener("complete",a(!0),{signal:o})),i},table:function(n){var a=e.table(n),s=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var o=xe.trans;if(s.outbound||"disabled"===o.db._options.cache||o.explicit||"readwrite"!==o.idbtrans.mode)return a.mutate(e);var i=Or["idb://".concat(r,"/").concat(n)];return i?(o=a.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Br(s,e).some(function(e){return null==e}))?(i.optimisticOps.push(e),e.mutatedParts&&Tr(e.mutatedParts),o.then(function(t){0<t.numFailures&&(M(i.optimisticOps,e),(t=Hr(0,e,t))&&i.optimisticOps.push(t),e.mutatedParts&&Tr(e.mutatedParts))}),o.catch(function(){M(i.optimisticOps,e),e.mutatedParts&&Tr(e.mutatedParts)})):o.then(function(r){var n=Hr(0,t(t({},e),{values:e.values.map(function(e,n){var a;return r.failures[n]||w(e=null!==(a=s.keyPath)&&void 0!==a&&a.includes(".")?P(e):t({},e),s.keyPath,r.results[n]),e})}),r);i.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&Tr(e.mutatedParts)})}),o):a.mutate(e)},query:function(e){if(!Wr(xe,a)||!Vr("query",e))return a.query(e);var t="immutable"===(null===(i=xe.trans)||void 0===i?void 0:i.db._options.cache),s=(c=xe).requery,o=c.signal,i=function(e,t,r,n){var a=Or["idb://".concat(e,"/").concat(t)];if(!a)return[];if(!(t=a.queries[r]))return[null,!1,a,null];var s=t[(n.query?n.query.index.name:null)||""];if(!s)return[null,!1,a,null];switch(r){case"query":var o=s.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&Qr(e.req.query.range,n.query.range)});return o?[o,!0,a,s]:[s.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&Xr(e.req.query.range,n.query.range)}),!1,a,s];case"count":return[o=s.find(function(e){return Qr(e.req.query.range,n.query.range)}),!!o,a,s]}}(r,n,"query",e),l=i[0],c=i[1],u=i[2],d=i[3];return l&&c?l.obsSet=e.obsSet:(c=a.query(e).then(function(e){var r=e.result;if(l&&(l.res=r),t){for(var n=0,a=r.length;n<a;++n)Object.freeze(r[n]);Object.freeze(r)}else e.result=P(r);return e}).catch(function(e){return d&&l&&M(d,l),Promise.reject(e)}),l={obsSet:e.obsSet,promise:c,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(l):(d=[l],(u=u||(Or["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Zr(l,d,s,o),l.promise.then(function(r){return{result:Jr(r.result,e,null==u?void 0:u.optimisticOps,a,l,t)}})}})}})}};function tn(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rn=(nn.prototype.version=function(e){if(isNaN(e)||e<.1)throw new V.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(sr),r.stores({}),this._state.autoSchema=!1,r)},nn.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||xe.letThrough||this._vip)?e():new je(function(e,r){if(t._state.openComplete)return r(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new V.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,r)}).then(e)},nn.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:a}),e.sort(function(e,t){return e.level-t.level}),this},nn.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},nn.prototype.open=function(){var e=this;return He(ye,function(){return Ir(e)})},nn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(r){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new je(function(t){e.dbReadyResolve=t}),e.openCanceller=new je(function(t,r){e.cancelOpen=r}))},nn.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new V.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new V.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nn.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new je(function(a,s){function o(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=Me(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,xr(n)||r===rt||yr(n,e).delete(r).catch(Y),a()}),r.onerror=Kt(s),r.onblocked=t._fireOnBlocked}if(r)throw new V.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(o):o()})},nn.prototype.backendDB=function(){return this.idbdb},nn.prototype.isOpen=function(){return null!==this.idbdb},nn.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nn.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nn.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),nn.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new V.InvalidArgument("Too few arguments");for(var a=new Array(n-1);--n;)a[n-1]=arguments[n];return r=a.pop(),[e,_(a),r]}.apply(this,arguments);return this._transaction.apply(this,e)},nn.prototype._transaction=function(e,t,r){var n=this,a=xe.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var s,o,i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map(function(e){if("string"!=typeof(e=e instanceof n.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===nt)s=nt;else{if("rw"!=e&&e!=at)throw new V.InvalidArgument("Invalid transaction mode: "+e);s=at}if(a){if(a.mode===nt&&s===at){if(!i)throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&o.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!i)throw new V.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),i&&a&&!a.active&&(a=null)}}catch(c){return a?a._promise(null,function(e,t){t(c)}):Qe(c)}var l=function e(t,r,n,a,s){return je.resolve().then(function(){var o=xe.transless||xe,i=t._createTransaction(r,n,t._dbSchema,a);if(i.explicit=!0,o={trans:i,transless:o},a)i.idbtrans=a.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(u){return u.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,s)})):Qe(u)}var l,c=L(s);return c&&ze(),o=je.follow(function(){var e;(l=s.call(i,i))&&(c?(e=Ue.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Lr(l)))},o),(l&&"function"==typeof l.then?je.resolve(l).then(function(e){return i.active?e:Qe(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):o.then(function(){return l})).then(function(e){return a&&i._resolve(),i._completion.then(function(){return e})}).catch(function(e){return i._reject(e),Qe(e)})})}.bind(null,this,s,o,a,r);return a?a._promise(s,l,"lock"):xe.trans?He(xe.transless,function(){return n._whenReady(l)}):this._whenReady(l)},nn.prototype.table=function(e){if(!c(this._allTables,e))throw new V.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nn);function nn(e,r){var n=this;this._middlewares={},this.verno=0;var a=nn.dependencies;this._options=r=t({addons:nn.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var s,o,i,l,c,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};u.dbReadyPromise=new je(function(e){u.dbReadyResolve=e}),u.openCanceller=new je(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=xt(this,"populate","blocked","versionchange","close",{ready:[ne,Y]}),this.once=function(e,t){var r=function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];n.on(e).unsubscribe(r),t.apply(n,a)};return n.on(e,r)},this.on.ready.subscribe=y(this.on.ready.subscribe,function(e){return function(t,r){nn.vip(function(){var a,s=n._state;s.openComplete?(s.dbOpenError||je.resolve().then(t),r&&e(t)):s.onReadyBeingFired?(s.onReadyBeingFired.push(t),r&&e(t)):(e(t),a=n,r||e(function e(){a.on.ready.unsubscribe(t),a.on.ready.unsubscribe(e)}))})}}),this.Collection=(s=this,bt(St.prototype,function(e,t){this.db=s;var r=ot,n=null;if(t)try{r=t()}catch(o){n=o}var a=e._ctx;e=(t=a.table).hook.reading.fire,this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:a.or,valueMapper:e!==J?e:null}})),this.Table=(o=this,bt(gt.prototype,function(e,t,r){this.db=o,this._tx=r,this.name=e,this.schema=t,this.hook=o._allTables[e]?o._allTables[e].hook:xt(null,{creating:[Z,Y],reading:[Q,J],updating:[te,Y],deleting:[ee,Y]})})),this.Transaction=(i=this,bt($t.prototype,function(e,t,r,n,a){var s=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=r[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=i,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=xt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new je(function(e,t){s._resolve=e,s._reject=t}),this._completion.then(function(){s.active=!1,s.on.complete.fire()},function(e){var t=s.active;return s.active=!1,s.on.error.fire(e),s.parent?s.parent._reject(e):t&&s.idbtrans&&s.idbtrans.abort(),Qe(e)})})),this.Version=(l=this,bt(pr.prototype,function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(c=this,bt(Lt.prototype,function(e,t,r){if(this.db=c,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=ct,this._descending=function(e,t){return ct(t,e)},this._max=function(e,t){return 0<ct(e,t)?e:t},this._min=function(e,t){return ct(e,t)<0?e:t},this._IDBKeyRange=c._deps.IDBKeyRange,!this._IDBKeyRange)throw new V.MissingAPI})),this.on("versionchange",function(e){e.newVersion,n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||(e.newVersion,e.oldVersion)}),this._maxKey=Yt(r.IDBKeyRange),this._createTransaction=function(e,t,r,a){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),tt.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use($r),this.use(en),this.use(Gr),this.use(Kr),this.use(zr);var d=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return tn(n.table(e),d)};var a=Reflect.get(e,t,r);return a instanceof gt?tn(a,d):"tables"===t?a.map(function(e){return tn(e,d)}):"_createTransaction"===t?function(){return tn(a.apply(this,arguments),d)}:a}});this.vip=d,a.forEach(function(e){return e(n)})}F="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var an,sn=(on.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},on.prototype[F]=function(){return this},on);function on(e){this._subscribe=e}try{an={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(fn){an={indexedDB:null,IDBKeyRange:null}}function ln(e){var t,r=!1,n=new sn(function(n){var a,s=L(e),o=!1,i={},l={},u={get closed(){return o},unsubscribe:function(){o||(o=!0,a&&a.abort(),d&&Ut.storagemutated.unsubscribe(m))}};n.start&&n.start(u);var d=!1,h=function(){return Je(f)},m=function(e){Cr(i,e),Pr(l,i)&&h()},f=function(){var u,f,p;!o&&an.indexedDB&&(i={},u={},a&&a.abort(),a=new AbortController,p=function(t){var r=Oe();try{s&&ze();var n=Be(e,t);return n=s?n.finally(Ue):n}finally{r&&Ae()}}(f={subscr:u,signal:a.signal,requery:h,querier:e,trans:null}),Promise.resolve(p).then(function(e){r=!0,t=e,o||f.signal.aborted||(i={},function(e){for(var t in e)if(c(e,t))return;return 1}(l=u)||d||(Ut(Bt,m),d=!0),Je(function(){return!o&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||o||Je(function(){o||n.error&&n.error(e)})}))};return setTimeout(h,0),u});return n.hasValue=function(){return r},n.getValue=function(){return t},n}var cn=rn;function un(e){var t=hn;try{hn=!0,Ut.storagemutated.fire(e),Mr(e,!0)}finally{hn=t}}u(cn,t(t({},H),{delete:function(e){return new cn(e,{addons:[]}).delete()},exists:function(e){return new cn(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=(t=cn.dependencies).indexedDB,t=t.IDBKeyRange,(xr(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==rt})}):yr(r,t).toCollection().primaryKeys()).then(e)}catch(n){return Qe(new V.MissingAPI)}var t,r},defineClass:function(){return function(e){o(this,e)}},ignoreTransaction:function(e){return xe.trans?He(xe.transless,e):e()},vip:br,async:function(e){return function(){try{var t=Lr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:je.resolve(t)}catch(r){return Qe(r)}}},spawn:function(e,t,r){try{var n=Lr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:je.resolve(n)}catch(a){return Qe(a)}},currentTransaction:{get:function(){return xe.trans||null}},waitFor:function(e,t){return t=je.resolve("function"==typeof e?cn.ignoreTransaction(e):e).timeout(t||6e4),xe.trans?xe.trans.waitFor(t):t},Promise:je,debug:{get:function(){return ae},set:function(e){se(e)}},derive:m,extend:o,props:u,override:y,Events:xt,on:Ut,liveQuery:ln,extendObservabilitySet:Cr,getByKeyPath:v,setByKeyPath:w,delByKeyPath:function(e,t){"string"==typeof t?w(e,t,void 0):"length"in t&&[].map.call(t,function(t){w(e,t,void 0)})},shallowClone:k,deepClone:P,getObjectDiff:qr,cmp:ct,asap:b,minKey:-1/0,addons:[],connections:tt,errnames:$,dependencies:an,cache:Or,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),cn.maxKey=Yt(cn.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ut(Bt,function(e){hn||(e=new CustomEvent(zt,{detail:e}),hn=!0,dispatchEvent(e),hn=!1)}),addEventListener(zt,function(e){e=e.detail,hn||un(e)}));var dn,hn=!1,mn=function(){};return"undefined"!=typeof BroadcastChannel&&((mn=function(){(dn=new BroadcastChannel(zt)).onmessage=function(e){return e.data&&un(e.data)}})(),"function"==typeof dn.unref&&dn.unref(),Ut(Bt,function(e){hn||dn.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rn.disableBfCache&&e.persisted){null!=dn&&dn.close();for(var t=0,r=tt;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rn.disableBfCache&&e.persisted&&(mn(),un({all:new wr(-1/0,[[]])}))})),je.rejectionMapper=function(e,t){return!e||e instanceof q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!G[e.name]?e:(t=new G[e.name](t||e.message,e),"stack"in e&&h(t,"stack",{get:function(){return this.inner.stack}}),t)},se(ae),t(rn,Object.freeze({__proto__:null,Dexie:rn,liveQuery:ln,Entity:lt,cmp:ct,PropModification:mt,replacePrefix:function(e,t){return new mt({replacePrefix:[e,t]})},add:function(e){return new mt({add:e})},remove:function(e){return new mt({remove:e})},default:rn,RangeSet:wr,mergeRanges:kr,rangesOverlap:Nr}),{default:rn}),rn}()),Ka=Symbol.for("Dexie"),qa=globalThis[Ka]||(globalThis[Ka]=Fa);if(Fa.semVer!==qa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fa.semVer} and ${qa.semVer}`);const{liveQuery:Ba,mergeRanges:za,rangesOverlap:Ua,RangeSet:$a,cmp:Wa,Entity:Va,PropModification:Ga,replacePrefix:Ha,add:Ya,remove:Ja,DexieYProvider:Qa}=qa;const Xa=new class extends qa{constructor(){super("smartmoney-db"),t(this,"transactions"),t(this,"accounts"),t(this,"budgets"),t(this,"goals"),t(this,"sync_queue"),t(this,"app_meta"),this.version(1).stores({transactions:"++id, date, category, source, type, account_id, [date+category], [date+account_id]",accounts:"++id, name, type, is_active, currency",budgets:"++id, month",goals:"++id, status, end_date",sync_queue:"++id, timestamp, retry_count, status, entity_type",app_meta:"id"})}};const Za=[1e3,2e3,4e3,8e3,16e3];async function es(e,t,r,n){const a={operation_type:e,entity_type:t,entity_id:r,payload:n,timestamp:Date.now(),retry_count:0,status:"pending"};return await Xa.sync_queue.add(a)}async function ts(e){const t=function(e,t){const r=`/api/${e}s`;return"number"==typeof t&&t>0?`${r}/${t}`:r}(e.entity_type,e.entity_id),r=function(e){switch(e){case"CREATE":return"POST";case"UPDATE":return"PUT";case"DELETE":return"DELETE"}}(e.operation_type),n=await gn.request({method:r,url:t,data:"DELETE"!==e.operation_type?e.payload:void 0});if(n.status>=400)throw new Error(`Sync failed: ${n.status}`)}async function rs(){return await Xa.sync_queue.where("status").equals("pending").count()}let ns=null,as=!1;const ss=new Set;let os={isOnline:navigator.onLine,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null};function is(e){os={...os,...e},ss.forEach(e=>e(os))}async function ls(){if(!as&&navigator.onLine){as=!0,is({isSyncing:!0});try{const e=await async function(){const e=await Xa.sync_queue.where("status").equals("pending").and(e=>e.retry_count<5).sortBy("timestamp");let t=0,r=0;for(const a of e)try{if(await Xa.sync_queue.update(a.id,{status:"processing"}),a.retry_count>0){const e=Za[Math.min(a.retry_count-1,Za.length-1)];await new Promise(t=>setTimeout(t,e))}await ts(a),await Xa.sync_queue.delete(a.id),t++}catch(n){const e=n instanceof Error?n.message:"Unknown error",t=a.retry_count+1;await Xa.sync_queue.update(a.id,{status:t>=5?"failed":"pending",retry_count:t,last_error:e}),r++}return{processed:t,failed:r}}();is({isSyncing:!1,pendingCount:await rs(),lastSyncAt:new Date,lastError:e.failed>0?`${e.failed} operations failed`:null})}catch(e){is({isSyncing:!1,lastError:e instanceof Error?e.message:"Sync failed"})}finally{as=!1}}}const cs={isOnline:!0,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null},us=w.createContext({...cs,triggerSync:async()=>{}});function ds({children:e}){const[t,r]=w.useState(cs);w.useEffect(()=>{window.addEventListener("online",async()=>{is({isOnline:!0}),await ls()}),window.addEventListener("offline",()=>{is({isOnline:!1})}),document.addEventListener("visibilitychange",async()=>{!document.hidden&&navigator.onLine&&await ls()}),ns=setInterval(async()=>{if(navigator.onLine){const e=await rs();is({pendingCount:e}),e>0&&await ls()}},3e4),rs().then(e=>is({pendingCount:e}));const e=(t=r,ss.add(t),t(os),()=>ss.delete(t));var t;return()=>{e(),ns&&(clearInterval(ns),ns=null)}},[]);const n=w.useCallback(async()=>{await ls()},[]);return a.jsx(us.Provider,{value:{...t,triggerSync:n},children:e})}const hs=["auth","user","session","credit"],ms=new l({defaultOptions:{queries:{gcTime:864e5,staleTime:3e5,retry:2,refetchOnWindowFocus:!1,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}});function fs(){}function ps(e,{interval:t=1e3,onError:r=fs}={}){if("function"!=typeof e)throw new Error("argument is not function.");let n=0,a=null,s=!1,o=!1;return async(...i)=>{if(a=i,!o){for(o=!0;s;)await new Promise(e=>c.setTimeout(e,t));for(;Date.now()<n;)await new Promise(e=>c.setTimeout(e,n-Date.now()));o=!1,s=!0;try{await e(...a)}catch(l){try{r(l)}catch{}}n=Date.now()+t,s=!1}}}const gs=(({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:r=1e3,serialize:n=JSON.stringify,deserialize:a=JSON.parse,retry:s})=>{if(e){const o=async r=>{try{const a=await n(r);return void(await e.setItem(t,a))}catch(a){return a}};return{persistClient:ps(async e=>{let t=e,r=await o(t),n=0;for(;r&&t;)n++,t=await(null==s?void 0:s({persistedClient:t,error:r,errorCount:n})),t&&(r=await o(t))},{interval:r}),restoreClient:async()=>{const r=await e.getItem(t);if(r)return await a(r)},removeClient:()=>e.removeItem(t)}}return{persistClient:fs,restoreClient:()=>Promise.resolve(void 0),removeClient:fs}})({storage:{getItem:async e=>{try{const t=await Xa.app_meta.get(e);return t?JSON.stringify(t):null}catch(t){return null}},setItem:async(e,t)=>{try{const r=JSON.parse(t);await Xa.app_meta.put({id:e,...r})}catch(r){}},removeItem:async e=>{try{await Xa.app_meta.delete(e)}catch(t){}}},throttleTime:1e4,key:"tanstack-query-cache"}),ys={},xs=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in ys)return;ys[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),t?new Promise((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},bs=[{code:"ja",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function vs(){const{i18n:e,t:t}=Oe("common"),[r,n]=w.useState(!1),s=w.useRef(null),o=bs.find(t=>t.code===e.language)||bs[0];return w.useEffect(()=>{function e(e){s.current&&!s.current.contains(e.target)&&n(!1)}return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":t("language.selectLanguage"),"aria-expanded":r,"aria-haspopup":"true",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:o.flag}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline text-gray-700 dark:text-gray-200",children:o.name}),a.jsx("svg",{className:Pa("w-4 h-4 transition-transform",r&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:bs.map(t=>a.jsxs("button",{onClick:()=>{return r=t.code,e.changeLanguage(r),void n(!1);var r},className:Pa("w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","first:rounded-t-lg last:rounded-b-lg","text-gray-700 dark:text-gray-200",e.language===t.code&&"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400"),role:"menuitem",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:t.flag}),a.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:t.name}),e.language===t.code&&a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-label":"Selected",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},t.code))})]})}function ws(){const{t:e}=Oe("common"),{resolvedTheme:t,setTheme:r}=In();return a.jsx("button",{onClick:()=>{r("dark"===t?"light":"dark")},className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus-ring","aria-label":e("dark"===t?"aria.lightMode":"aria.darkMode"),title:e("dark"===t?"aria.lightMode":"aria.darkMode"),children:"dark"===t?a.jsx(M,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(D,{className:"w-5 h-5","aria-hidden":"true"})})}function js(){const{t:e}=Oe("common"),{logout:t}=wn(),{isPrivacyMode:r,togglePrivacyMode:n}=On(),[s,o]=w.useState(!1);return a.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[a.jsxs(u,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[a.jsx("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[a.jsx(ks,{to:"/",children:e("header.dashboard")}),a.jsx(ks,{to:"/transactions",children:e("header.transactions")}),a.jsx(ks,{to:"/accounts",children:e("header.accounts")}),a.jsx(ks,{to:"/goals",children:e("header.goals")}),a.jsx(ks,{to:"/analytics",children:e("header.analytics")}),a.jsx(ks,{to:"/budget",children:e("header.budget")}),a.jsx(ks,{to:"/upload",children:e("header.upload")}),a.jsx(ks,{to:"/settings",children:e("header.settings")})]}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx("button",{onClick:n,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(r?"aria.showAmounts":"aria.hideAmounts"),title:e(r?"aria.showAmounts":"aria.hideAmounts"),children:r?a.jsx(I,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"}):a.jsx(L,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx(ws,{})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx(vs,{})}),a.jsx("button",{onClick:t,className:"hidden md:block text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring",title:e("auth.logout"),children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),a.jsx("button",{onClick:()=>o(!s),className:"md:hidden text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Menu",children:a.jsx(F,{className:"w-5 h-5"})})]})]}),s&&a.jsx("div",{className:"md:hidden py-3 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"flex flex-col space-y-1",children:[a.jsx(Ns,{to:"/",onClick:()=>o(!1),children:e("header.dashboard")}),a.jsx(Ns,{to:"/transactions",onClick:()=>o(!1),children:e("header.transactions")}),a.jsx(Ns,{to:"/accounts",onClick:()=>o(!1),children:e("header.accounts")}),a.jsx(Ns,{to:"/goals",onClick:()=>o(!1),children:e("header.goals")}),a.jsx(Ns,{to:"/analytics",onClick:()=>o(!1),children:e("header.analytics")}),a.jsx(Ns,{to:"/budget",onClick:()=>o(!1),children:e("header.budget")}),a.jsx(Ns,{to:"/upload",onClick:()=>o(!1),children:e("header.upload")}),a.jsx(Ns,{to:"/settings",onClick:()=>o(!1),children:e("header.settings")}),a.jsxs("div",{className:"flex items-center gap-3 pt-3 mt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(ws,{}),a.jsx(vs,{}),a.jsxs("button",{onClick:()=>{o(!1),t()},className:"flex items-center gap-2 text-red-600 dark:text-red-400 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})]})})]})})}function ks({to:e,children:t}){return a.jsx(u,{to:e,className:Pa("text-sm xl:text-base text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors pb-1","focus-ring rounded"),activeProps:{className:"text-primary-600 dark:text-primary-400 font-medium border-b-2 border-primary-600 dark:border-primary-400"},children:t})}function Ns({to:e,onClick:t,children:r}){return a.jsx(u,{to:e,onClick:t,className:"flex items-center px-3 py-2.5 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-medium",activeProps:{className:"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400"},children:r})}function _s(){const e=(new Date).getFullYear();return a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center text-sm text-gray-500",children:a.jsxs("p",{children:[" ",e," SmartMoney. All rights reserved."]})})})})}const Es=[{path:"/",icon:z,labelKey:"nav.home"},{path:"/transactions",icon:U,labelKey:"nav.transactions"},{path:"/accounts",icon:$,labelKey:"nav.accounts"},{path:"/goals",icon:W,labelKey:"nav.goals"},{path:"/settings",icon:V,labelKey:"nav.settings"}],Ss=[{path:"/upload",icon:K,labelKey:"header.upload"},{path:"/analytics",icon:q,labelKey:"nav.analytics"}];function Cs(){const{t:e}=Oe("common"),t=d(),{logout:r}=wn(),[n,s]=w.useState(!1),o=e=>"/"===e?"/"===t.pathname:t.pathname.startsWith(e),i=Ss.some(e=>o(e.path));return a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>s(!1)}),n&&a.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 md:hidden rounded-t-2xl shadow-lg animate-slide-up",children:a.jsxs("div",{className:"p-4 space-y-2",children:[Ss.map(t=>a.jsxs(u,{to:t.path,onClick:()=>s(!1),className:Pa("flex items-center gap-3 px-4 py-3.5 rounded-xl transition-colors",o(t.path)?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[a.jsx(t.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e(t.labelKey)})]},t.path)),a.jsxs("button",{onClick:()=>{s(!1),r()},className:"w-full flex items-center gap-3 px-4 py-3.5 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[a.jsx(B,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})}),a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 md:hidden safe-area-bottom",children:a.jsxs("div",{className:"flex items-stretch justify-around h-[68px]",children:[Es.map(t=>{const r=o(t.path);return a.jsxs(u,{to:t.path,onClick:()=>s(!1),className:Pa("flex flex-col items-center justify-center flex-1 px-1 transition-all relative",r?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:[r&&a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-500 dark:bg-primary-400 rounded-full"}),a.jsx("div",{className:Pa("p-2 rounded-xl transition-colors",r&&"bg-primary-50 dark:bg-primary-900/20"),children:a.jsx(t.icon,{className:"w-6 h-6",strokeWidth:r?2.5:2})}),a.jsx("span",{className:"text-[10px] font-medium mt-1 truncate max-w-full px-0.5",children:e(t.labelKey)})]},t.path)}),a.jsxs("button",{onClick:()=>s(!n),className:Pa("flex flex-col items-center justify-center flex-1 px-1 transition-all relative",i||n?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:[n&&a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-500 dark:bg-primary-400 rounded-full"}),a.jsx("div",{className:Pa("p-2 rounded-xl transition-colors",n&&"bg-primary-50 dark:bg-primary-900/20"),children:a.jsx(G,{className:"w-6 h-6",strokeWidth:n?2.5:2})}),a.jsx("span",{className:"text-[10px] font-medium mt-1",children:e("nav.more")})]})]})})]})}function Ps({onClick:e,hasUnread:t=!1}){const r=a.jsxs("button",{onClick:e,className:Pa("fixed bottom-24 right-4 sm:bottom-6 sm:right-6 z-[101]","w-14 h-14 rounded-full","bg-primary-500 text-white shadow-lg","hover:bg-primary-600 hover:scale-105","active:scale-95","transition-all duration-200","flex items-center justify-center","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"),"aria-label":"Open AI Assistant",children:[a.jsx(H,{className:"w-6 h-6"}),t&&a.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse"})]});return"undefined"!=typeof document?v.createPortal(r,document.body):null}function Os({onClose:e,credits:t}){const{t:r}=Oe();return a.jsxs("div",{className:Pa("flex items-center justify-between","px-4 py-3 border-b border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800"),children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y,{className:"w-5 h-5 text-primary-500"}),a.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:r("chat.title")})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[null!==t&&a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r("chat.credits",{count:t})}),a.jsx("button",{onClick:e,className:Pa("p-1.5 rounded-lg","text-gray-500 hover:text-gray-700","dark:text-gray-400 dark:hover:text-gray-200","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors"),"aria-label":r("common.close"),children:a.jsx(T,{className:"w-5 h-5"})})]})]})}function As({role:e,content:t}){const r="user"===e;return a.jsxs("div",{className:Pa("flex gap-3",r?"flex-row-reverse":"flex-row"),children:[a.jsx("div",{className:Pa("flex-shrink-0 w-8 h-8 rounded-full","flex items-center justify-center",r?"bg-primary-100 dark:bg-primary-900":"bg-gray-100 dark:bg-gray-700"),children:r?a.jsx(J,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"}):a.jsx(Y,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a.jsx("div",{className:Pa("max-w-[80%] px-4 py-2.5 rounded-2xl","text-sm leading-relaxed",r?"bg-primary-500 text-white rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-md"),children:a.jsx("p",{className:"whitespace-pre-wrap",children:t})})]})}function Rs({action:e,onApply:t,onSkip:r,isApplying:n=!1}){const{t:s}=Oe();return a.jsxs("div",{className:Pa("bg-primary-50 dark:bg-primary-900/30","border border-primary-200 dark:border-primary-700","rounded-lg p-3 mt-2"),children:[a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:"create_goal"===e.type?a.jsx(W,{className:"w-5 h-5 text-primary-500"}):"create_budget"===e.type?a.jsx(X,{className:"w-5 h-5 text-primary-500"}):null}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:s(`chat.action.${e.type}`)}),a.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:e.description})]})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("button",{onClick:t,disabled:n,className:Pa("flex-1 px-3 py-1.5 text-sm font-medium rounded-md","bg-primary-500 text-white","hover:bg-primary-600","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors","flex items-center justify-center gap-1.5"),children:n?a.jsxs(a.Fragment,{children:[a.jsx(Q,{className:"w-3.5 h-3.5 animate-spin"}),s("common.loading")]}):s("chat.apply")}),a.jsx("button",{onClick:r,disabled:n,className:Pa("px-3 py-1.5 text-sm font-medium rounded-md","border border-gray-300 dark:border-gray-600","text-gray-700 dark:text-gray-300","hover:bg-gray-100 dark:hover:bg-gray-700","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors"),children:s("chat.skip")})]})]})}function Ts({messages:e,isLoading:t,applyingAction:r,onApplyAction:n,onSkipAction:s}){const{t:o}=Oe(),i=w.useRef(null);return w.useEffect(()=>{var e;null==(e=i.current)||e.scrollIntoView({behavior:"smooth"})},[e,t]),a.jsxs("div",{className:Pa("flex-1 overflow-y-auto","px-4 py-4 space-y-4","bg-gray-50 dark:bg-gray-900"),children:[0===e.length&&!t&&a.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:a.jsx("p",{children:o("chat.welcomeMessage")})}),e.map((e,t)=>a.jsxs("div",{children:[a.jsx(As,{role:e.role,content:e.content}),e.action&&a.jsx("div",{className:"ml-11",children:a.jsx(Rs,{action:e.action,onApply:()=>n(t),onSkip:()=>s(t),isApplying:r===t})})]},t)),t&&a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:a.jsx(Q,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 animate-spin"})}),a.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-2.5 rounded-2xl rounded-bl-md",children:a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:o("chat.thinking")})})]}),a.jsx("div",{ref:i})]})}function Ms({onSend:e,disabled:t=!1}){const{t:r}=Oe(),[n,s]=w.useState(""),o=w.useRef(null);w.useEffect(()=>{const e=o.current;e&&(e.style.height="auto",e.style.height=Math.min(e.scrollHeight,120)+"px")},[n]);const i=()=>{const r=n.trim();r&&!t&&(e(r),s(""))};return a.jsx("div",{className:Pa("px-4 py-3 border-t border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800"),children:a.jsxs("div",{className:Pa("flex items-end gap-2","bg-gray-100 dark:bg-gray-700 rounded-2xl","px-4 py-2"),children:[a.jsx("textarea",{ref:o,value:n,onChange:e=>s(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),i())},placeholder:r("chat.placeholder"),disabled:t,rows:1,className:Pa("flex-1 bg-transparent resize-none","text-sm text-gray-900 dark:text-white","placeholder-gray-500 dark:placeholder-gray-400","focus:outline-none","disabled:opacity-50 disabled:cursor-not-allowed","max-h-[120px]")}),a.jsx("button",{onClick:i,disabled:t||!n.trim(),className:Pa("p-2 rounded-full","bg-primary-500 text-white","hover:bg-primary-600","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors","flex-shrink-0"),"aria-label":r("chat.send"),children:a.jsx(Z,{className:"w-4 h-4"})})]})})}async function Ds(){return(await gn.get("/api/goals/")).data}async function Is(e){return(await gn.get(`/api/goals/${e}`)).data}async function Ls(e){return(await gn.post("/api/goals/",e)).data}async function Fs(e,t){return(await gn.put(`/api/goals/${e}`,t)).data}async function Ks(e){await gn.delete(`/api/goals/${e}`)}async function qs(e,t=!0,r=3){const n=new URLSearchParams;t&&(n.append("include_achievability","true"),n.append("trend_months",r.toString()));return(await gn.get(`/api/goals/${e}/progress?${n.toString()}`)).data}async function Bs(){return(await gn.get("/api/goals/status/has-emergency-fund")).data.has_emergency_fund}async function zs(e){return(await gn.post("/api/budgets/generate",e)).data}async function Us(e,t){return(await gn.post(`/api/budgets/${e}/regenerate`,t)).data}async function $s(e){return(await gn.get(`/api/budgets/${e}`)).data}async function Ws(){return(await gn.get("/api/budgets/tracking/current")).data}async function Vs(){return(await gn.get("/api/budgets/suggestions")).data}async function Gs(e,t,r){return(await gn.patch(`/api/budgets/${e}/allocations/${encodeURIComponent(t)}`,{amount:r})).data}async function Hs(e,t){return(await gn.delete(`/api/budgets/${e}/allocations/${encodeURIComponent(t)}`)).data}function Ys({isOpen:e,onClose:t}){const{t:r,i18n:n}=Oe(),s=h(),[o,i]=w.useState([]),[l,c]=w.useState(!1),[u,d]=w.useState(null),[m,f]=w.useState(null);w.useEffect(()=>{const r=r=>{"Escape"===r.key&&e&&t()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e,t]);const p=w.useCallback(async e=>{const t={role:"user",content:e},a=[...o,t];i(a),c(!0);try{const e=await async function(e,t="ja"){return(await gn.post("/api/chat",{messages:e,language:t})).data}(a,n.language);i(t=>[...t,{role:"assistant",content:e.message,action:e.suggested_action}]),d(e.credits_remaining)}catch(s){const e=s instanceof Error?s.message:"Unknown error";e.includes("402")||e.includes("credits")?i(e=>[...e,{role:"assistant",content:r("chat.noCredits")}]):i(e=>[...e,{role:"assistant",content:r("chat.error")}])}finally{c(!1)}},[o,n.language,r]),g=w.useCallback(async e=>{const t=o[e];if(null==t?void 0:t.action){f(e);try{await y(t.action),i(t=>{const n=[...t];return n[e]={...n[e],action:null},[...n,{role:"assistant",content:r("chat.actionApplied")}]}),"create_goal"===t.action.type?s.invalidateQueries({queryKey:["goals"]}):"create_budget"===t.action.type&&s.invalidateQueries({queryKey:["budget"]})}catch(n){i(e=>[...e,{role:"assistant",content:r("chat.actionFailed")}])}finally{f(null)}}},[o,s,r]),y=async e=>{if("create_goal"===e.type){const t=e.payload,r=["emergency_fund","home_down_payment","vacation_travel","vehicle","education","wedding","large_purchase","debt_payoff","retirement","investment","custom"].includes(t.goal_type||"")?t.goal_type:"custom";await Ls({goal_type:r,target_amount:t.target_amount||1e5,years:t.years||1,name:t.name})}else if("create_budget"===e.type){const t=e.payload;await zs({monthly_income:t.monthly_income||3e5,feedback:t.feedback,language:n.language})}},x=w.useCallback(e=>{i(t=>{const r=[...t];return r[e]={...r[e],action:null},r})},[]);return a.jsxs(a.Fragment,{children:[e&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-[99] sm:hidden",onClick:t}),a.jsxs("div",{className:Pa("fixed right-0 top-0 h-full z-[100]","w-full sm:w-96","bg-white dark:bg-gray-800","shadow-2xl","flex flex-col","transform transition-transform duration-300 ease-out",e?"translate-x-0":"-translate-x-full pointer-events-none"),children:[a.jsx(Os,{onClose:t,credits:u}),a.jsx(Ts,{messages:o,isLoading:l,applyingAction:m,onApplyAction:g,onSkipAction:x}),a.jsx(Ms,{onSend:p,disabled:l})]})]})}const Js=["/transactions"];function Qs({onAddTransaction:e}){const{t:t}=Oe("common"),r=m(),n=d(),[s,o]=w.useState(!1);if(Js.includes(n.pathname))return null;const i=[{icon:a.jsx(ee,{size:20}),label:t("transaction.addTransaction","Add Transaction"),onClick:()=>{o(!1),e?e():r({to:"/transactions"})},color:"bg-green-500 hover:bg-green-600"},{icon:a.jsx(U,{size:20}),label:t("receipt.scanReceipt","Scan Receipt"),onClick:()=>{o(!1),r({to:"/transactions"})},color:"bg-purple-500 hover:bg-purple-600"},{icon:a.jsx(K,{size:20}),label:t("header.upload","Upload CSV"),onClick:()=>{o(!1),r({to:"/upload"})},color:"bg-blue-500 hover:bg-blue-600"}];return a.jsxs(a.Fragment,{children:[s&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>o(!1)}),a.jsxs("div",{className:"fixed bottom-20 right-4 z-50 md:hidden flex flex-col-reverse items-end gap-3",children:[s&&a.jsx("div",{className:"flex flex-col-reverse gap-3 mb-2",children:i.map((e,t)=>a.jsxs("button",{onClick:e.onClick,className:Pa("flex items-center gap-3 pl-4 pr-5 py-3 rounded-full text-white shadow-lg","transform transition-all duration-200","animate-in fade-in slide-in-from-bottom-2",e.color),style:{animationDelay:50*t+"ms",animationFillMode:"both"},children:[e.icon,a.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:e.label})]},t))}),a.jsx("button",{onClick:()=>o(!s),className:Pa("w-14 h-14 rounded-full shadow-lg flex items-center justify-center","transform transition-all duration-300","active:scale-95",s?"bg-gray-700 dark:bg-gray-600 rotate-45":"bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600"),"aria-label":s?t("common.close","Close"):t("fab.quickActions","Quick Actions"),children:s?a.jsx(T,{size:24,className:"text-white"}):a.jsx(G,{size:24,className:"text-white"})})]})]})}function Xs({children:e,className:t}){const r=d(),[n,s]=w.useState(!1),[o,i]=w.useState(e);return w.useEffect(()=>{s(!1);const t=setTimeout(()=>{i(e),s(!0)},100);return()=>clearTimeout(t)},[r.pathname]),w.useEffect(()=>{i(e)},[e]),a.jsx("div",{className:Pa("transition-all duration-300 ease-out",n?"opacity-100 translate-y-0":"opacity-0 translate-y-2",t),children:o})}var Zs=.999,eo=/[\\\/_+.#"@\[\(\{&]/,to=/[\\\/_+.#"@\[\(\{&]/g,ro=/[\s-]/,no=/[\s-]/g;function ao(e,t,r,n,a,s,o){if(s===t.length)return a===e.length?1:.99;var i=`${a},${s}`;if(void 0!==o[i])return o[i];for(var l,c,u,d,h=n.charAt(s),m=r.indexOf(h,a),f=0;m>=0;)(l=ao(e,t,r,n,m+1,s+1,o))>f&&(m===a?l*=1:eo.test(e.charAt(m-1))?(l*=.8,(u=e.slice(a,m-1).match(to))&&a>0&&(l*=Math.pow(Zs,u.length))):ro.test(e.charAt(m-1))?(l*=.9,(d=e.slice(a,m-1).match(no))&&a>0&&(l*=Math.pow(Zs,d.length))):(l*=.17,a>0&&(l*=Math.pow(Zs,m-a))),e.charAt(m)!==t.charAt(s)&&(l*=.9999)),(l<.1&&r.charAt(m-1)===n.charAt(s+1)||n.charAt(s+1)===n.charAt(s)&&r.charAt(m-1)!==n.charAt(s))&&(.1*(c=ao(e,t,r,n,m+1,s+2,o))>l&&(l=.1*c)),l>f&&(f=l),m=r.indexOf(h,m+1);return o[i]=f,f}function so(e){return e.toLowerCase().replace(no," ")}function oo(e,t,r){return ao(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,so(e),so(t),0,0,{})}function io(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function lo(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function co(...e){return w.useCallback(lo(...e),e)}function uo(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}const ho=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?w.useLayoutEffect:()=>{},mo=N["useId".toString()]||(()=>{});let fo=0;function po(e){const[t,r]=w.useState(mo());return ho(()=>{r(e=>null!=e?e:String(fo++))},[e]),e||(t?`radix-${t}`:"")}function go(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...e)=>{var r;return null===(r=t.current)||void 0===r?void 0:r.call(t,...e)},[])}function yo({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=function({defaultProp:e,onChange:t}){const r=w.useState(e),[n]=r,a=w.useRef(n),s=go(t);return w.useEffect(()=>{a.current!==n&&(s(n),a.current=n)},[n,a,s]),r}({defaultProp:t,onChange:r}),s=void 0!==e,o=s?e:n,i=go(r);return[o,w.useCallback(t=>{if(s){const r="function"==typeof t?t(e):t;r!==e&&i(r)}else a(t)},[s,e,a,i])]}const xo=w.forwardRef((e,t)=>{const{children:r,...n}=e,a=w.Children.toArray(r),s=a.find(wo);if(s){const e=s.props.children,r=a.map(t=>t===s?w.Children.count(e)>1?w.Children.only(null):w.isValidElement(e)?e.props.children:null:t);return w.createElement(bo,C({},n,{ref:t}),w.isValidElement(e)?w.cloneElement(e,void 0,r):null)}return w.createElement(bo,C({},n,{ref:t}),r)});xo.displayName="Slot";const bo=w.forwardRef((e,t)=>{const{children:r,...n}=e;return w.isValidElement(r)?w.cloneElement(r,{...jo(n,r.props),ref:t?lo(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});bo.displayName="SlotClone";const vo=({children:e})=>w.createElement(w.Fragment,null,e);function wo(e){return w.isValidElement(e)&&e.type===vo}function jo(e,t){const r={...t};for(const n in t){const a=e[n],s=t[n];/^on[A-Z]/.test(n)?a&&s?r[n]=(...e)=>{s(...e),a(...e)}:a&&(r[n]=a):"style"===n?r[n]={...a,...s}:"className"===n&&(r[n]=[a,s].filter(Boolean).join(" "))}return{...e,...r}}const ko=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const r=w.forwardRef((e,r)=>{const{asChild:n,...a}=e,s=n?xo:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(s,C({},a,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});const No="dismissableLayer.update",_o="dismissableLayer.pointerDownOutside",Eo="dismissableLayer.focusOutside";let So;const Co=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Po=w.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:i,onDismiss:l,...c}=e,u=w.useContext(Co),[d,h]=w.useState(null),m=null!==(r=null==d?void 0:d.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,f]=w.useState({}),p=co(t,e=>h(e)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),x=g.indexOf(y),b=d?g.indexOf(d):-1,v=u.layersWithOutsidePointerEventsDisabled.size>0,j=b>=x,k=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=go(e),n=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){Ao(_o,r,s,{discrete:!0})};const s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=n,t.addEventListener("click",a.current,{once:!0})):n()}else t.removeEventListener("click",a.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...u.branches].some(e=>e.contains(t));j&&!r&&(null==s||s(e),null==i||i(e),e.defaultPrevented||null==l||l())},m),N=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=go(e),n=w.useRef(!1);return w.useEffect(()=>{const e=e=>{if(e.target&&!n.current){Ao(Eo,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==o||o(e),null==i||i(e),e.defaultPrevented||null==l||l())},m);return function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=go(e);w.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[r,t])}(e=>{b===u.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&l&&(e.preventDefault(),l()))},m),w.useEffect(()=>{if(d)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(So=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Oo(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=So)}},[d,m,n,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Oo())},[d,u]),w.useEffect(()=>{const e=()=>f({});return document.addEventListener(No,e),()=>document.removeEventListener(No,e)},[]),w.createElement(ko.div,C({},c,{ref:p,style:{pointerEvents:v?j?"auto":"none":void 0,...e.style},onFocusCapture:io(e.onFocusCapture,N.onFocusCapture),onBlurCapture:io(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:io(e.onPointerDownCapture,k.onPointerDownCapture)}))});function Oo(){const e=new CustomEvent(No);document.dispatchEvent(e)}function Ao(e,t,r,{discrete:n}){const a=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?function(e,t){e&&v.flushSync(()=>e.dispatchEvent(t))}(a,s):a.dispatchEvent(s)}const Ro="focusScope.autoFocusOnMount",To="focusScope.autoFocusOnUnmount",Mo={bubbles:!1,cancelable:!0},Do=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:s,...o}=e,[i,l]=w.useState(null),c=go(a),u=go(s),d=w.useRef(null),h=co(t,e=>l(e)),m=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let e=function(e){if(m.paused||!i)return;const t=e.target;i.contains(t)?d.current=t:Ko(d.current,{select:!0})},t=function(e){if(m.paused||!i)return;const t=e.relatedTarget;null!==t&&(i.contains(t)||Ko(d.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&Ko(i)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return i&&n.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,i,m.paused]),w.useEffect(()=>{if(i){qo.add(m);const t=document.activeElement;if(!i.contains(t)){const r=new CustomEvent(Ro,Mo);i.addEventListener(Ro,c),i.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ko(n,{select:t}),document.activeElement!==r)return}((e=Io(i),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&Ko(i))}return()=>{i.removeEventListener(Ro,c),setTimeout(()=>{const e=new CustomEvent(To,Mo);i.addEventListener(To,u),i.dispatchEvent(e),e.defaultPrevented||Ko(null!=t?t:document.body,{select:!0}),i.removeEventListener(To,u),qo.remove(m)},0)}}var e},[i,c,u,m]);const f=w.useCallback(e=>{if(!r&&!n)return;if(m.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){const t=e.currentTarget,[n,s]=function(e){const t=Io(e),r=Lo(t,e),n=Lo(t.reverse(),e);return[r,n]}(t);n&&s?e.shiftKey||a!==s?e.shiftKey&&a===n&&(e.preventDefault(),r&&Ko(s,{select:!0})):(e.preventDefault(),r&&Ko(n,{select:!0})):a===t&&e.preventDefault()}},[r,n,m.paused]);return w.createElement(ko.div,C({tabIndex:-1},o,{ref:h,onKeyDown:f}))});function Io(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Lo(e,t){for(const r of e)if(!Fo(r,{upTo:t}))return r}function Fo(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function Ko(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const qo=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=Bo(e,t),e.unshift(t)},remove(t){var r;e=Bo(e,t),null===(r=e[0])||void 0===r||r.resume()}}}();function Bo(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}const zo=w.forwardRef((e,t)=>{var r;const{container:n=(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body),...a}=e;return n?_.createPortal(w.createElement(ko.div,C({},a,{ref:t})),n):null});const Uo=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=w.useState(),n=w.useRef({}),a=w.useRef(e),s=w.useRef("none"),o=e?"mounted":"unmounted",[i,l]=function(e,t){return w.useReducer((e,r)=>{const n=t[e][r];return null!=n?n:e},e)}(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const e=$o(n.current);s.current="mounted"===i?e:"none"},[i]),ho(()=>{const t=n.current,r=a.current;if(r!==e){const n=s.current,o=$o(t);if(e)l("MOUNT");else if("none"===o||"none"===(null==t?void 0:t.display))l("UNMOUNT");else{l(r&&n!==o?"ANIMATION_OUT":"UNMOUNT")}a.current=e}},[e,l]),ho(()=>{if(t){const e=e=>{const r=$o(n.current).includes(e.animationName);e.target===t&&r&&v.flushSync(()=>l("ANIMATION_END"))},r=e=>{e.target===t&&(s.current=$o(n.current))};return t.addEventListener("animationstart",r),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",r),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}l("ANIMATION_END")},[t,l]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:w.useCallback(e=>{e&&(n.current=getComputedStyle(e)),r(e)},[])}}(t),a="function"==typeof r?r({present:n.isPresent}):w.Children.only(r),s=co(n.ref,a.ref);return"function"==typeof r||n.isPresent?w.cloneElement(a,{ref:s}):null};function $o(e){return(null==e?void 0:e.animationName)||"none"}Uo.displayName="Presence";let Wo=0;function Vo(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Go=function(){return Go=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Go.apply(this,arguments)};function Ho(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}"function"==typeof SuppressedError&&SuppressedError;var Yo="right-scroll-bar-position",Jo="width-before-scroll-bar";function Qo(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Xo="undefined"!=typeof window?w.useLayoutEffect:w.useEffect,Zo=new WeakMap;function ei(e,t){var r,n,a,s=(r=null,n=function(t){return e.forEach(function(e){return Qo(e,t)})},(a=w.useState(function(){return{value:r,callback:n,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}})[0]).callback=n,a.facade);return Xo(function(){var t=Zo.get(s);if(t){var r=new Set(t),n=new Set(e),a=s.current;r.forEach(function(e){n.has(e)||Qo(e,null)}),n.forEach(function(e){r.has(e)||Qo(e,a)})}Zo.set(s,e)},[e]),s}function ti(e){return e}var ri=function(e){var t=e.sideCar,r=Ho(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,Go({},r))};ri.isSideCarExport=!0;var ni=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=ti);var r=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var a=t(e,n);return r.push(a),function(){r=r.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var a=r;r=[],a.forEach(e),t=r}var s=function(){var r=t;t=[],r.forEach(e)},o=function(){return Promise.resolve().then(s)};o(),r={push:function(e){t.push(e),o()},filter:function(e){return t=t.filter(e),r}}}}}(null);return t.options=Go({async:!0,ssr:!1},e),t}(),ai=function(){},si=w.forwardRef(function(e,t){var r=w.useRef(null),n=w.useState({onScrollCapture:ai,onWheelCapture:ai,onTouchMoveCapture:ai}),a=n[0],s=n[1],o=e.forwardProps,i=e.children,l=e.className,c=e.removeScrollBar,u=e.enabled,d=e.shards,h=e.sideCar,m=e.noIsolation,f=e.inert,p=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,x=Ho(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),b=h,v=ei([r,t]),j=Go(Go({},x),a);return w.createElement(w.Fragment,null,u&&w.createElement(b,{sideCar:ni,removeScrollBar:c,shards:d,noIsolation:m,inert:f,setCallbacks:s,allowPinchZoom:!!p,lockRef:r}),o?w.cloneElement(w.Children.only(i),Go(Go({},j),{ref:v})):w.createElement(y,Go({},j,{className:l,ref:v}),i))});si.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},si.classNames={fullWidth:Jo,zeroRight:Yo};function oi(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var ii=function(){var e=0,t=null;return{add:function(r){var n,a;0==e&&(t=oi())&&(a=r,(n=t).styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},li=function(){var e,t=(e=ii(),function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},ci={left:0,top:0,right:0,gap:0},ui=function(e){return parseInt(e||"",10)||0},di=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return ci;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[ui(r),ui(n),ui(a)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},hi=li(),mi="data-scroll-locked",fi=function(e,t,r,n){var a=e.left,s=e.top,o=e.right,i=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(i,"px ").concat(n,";\n  }\n  body[").concat(mi,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Yo," {\n    right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(Jo," {\n    margin-right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(Yo," .").concat(Yo," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Jo," .").concat(Jo," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(mi,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},pi=function(){var e=parseInt(document.body.getAttribute(mi)||"0",10);return isFinite(e)?e:0},gi=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=void 0===n?"margin":n;w.useEffect(function(){return document.body.setAttribute(mi,(pi()+1).toString()),function(){var e=pi()-1;e<=0?document.body.removeAttribute(mi):document.body.setAttribute(mi,e.toString())}},[]);var s=w.useMemo(function(){return di(a)},[a]);return w.createElement(hi,{styles:fi(s,!t,a,r?"":"!important")})},yi=!1;if("undefined"!=typeof window)try{var xi=Object.defineProperty({},"passive",{get:function(){return yi=!0,!0}});window.addEventListener("test",xi,xi),window.removeEventListener("test",xi,xi)}catch(Td){yi=!1}var bi=!!yi&&{passive:!1},vi=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},wi=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),ji(e,r)){var n=ki(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},ji=function(e,t){return"v"===e?function(e){return vi(e,"overflowY")}(t):function(e){return vi(e,"overflowX")}(t)},ki=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},Ni=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},_i=function(e){return[e.deltaX,e.deltaY]},Ei=function(e){return e&&"current"in e?e.current:e},Si=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Ci=0,Pi=[];const Oi=(Ai=function(e){var t=w.useRef([]),r=w.useRef([0,0]),n=w.useRef(),a=w.useState(Ci++)[0],s=w.useState(function(){return li()})[0],o=w.useRef(e);w.useEffect(function(){o.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,s=t.length;a<s;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Ei),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=w.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!o.current.allowPinchZoom;var a,s=Ni(e),i=r.current,l="deltaX"in e?e.deltaX:i[0]-s[0],c="deltaY"in e?e.deltaY:i[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var h=wi(d,u);if(!h)return!0;if(h?a=d:(a="v"===d?"h":"v",h=wi(d,u)),!h)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=a),!a)return!0;var m=n.current||a;return function(e,t,r,n){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),s=a*n,o=r.target,i=t.contains(o),l=!1,c=s>0,u=0,d=0;do{var h=ki(e,o),m=h[0],f=h[1]-h[2]-a*m;(m||f)&&ji(e,o)&&(u+=f,d+=m),o=o.parentNode}while(!i&&o!==document.body||i&&(t.contains(o)||t===o));return c&&0===u?l=!0:c||0!==d||(l=!0),l}(m,t,e,"h"===m?l:c)},[]),l=w.useCallback(function(e){var r=e;if(Pi.length&&Pi[Pi.length-1]===s){var n="deltaY"in r?_i(r):Ni(r),a=t.current.filter(function(e){return e.name===r.type&&e.target===r.target&&(t=e.delta,a=n,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)r.cancelable&&r.preventDefault();else if(!a){var l=(o.current.shards||[]).map(Ei).filter(Boolean).filter(function(e){return e.contains(r.target)});(l.length>0?i(r,l[0]):!o.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),c=w.useCallback(function(e,r,n,a){var s={name:e,delta:r,target:n,should:a};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),u=w.useCallback(function(e){r.current=Ni(e),n.current=void 0},[]),d=w.useCallback(function(t){c(t.type,_i(t),t.target,i(t,e.lockRef.current))},[]),h=w.useCallback(function(t){c(t.type,Ni(t),t.target,i(t,e.lockRef.current))},[]);w.useEffect(function(){return Pi.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,bi),document.addEventListener("touchmove",l,bi),document.addEventListener("touchstart",u,bi),function(){Pi=Pi.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,bi),document.removeEventListener("touchmove",l,bi),document.removeEventListener("touchstart",u,bi)}},[]);var m=e.removeScrollBar,f=e.inert;return w.createElement(w.Fragment,null,f?w.createElement(s,{styles:Si(a)}):null,m?w.createElement(gi,{gapMode:"margin"}):null)},ni.useMedium(Ai),ri);var Ai,Ri=w.forwardRef(function(e,t){return w.createElement(si,Go({},e,{ref:t,sideCar:Oi}))});Ri.classNames=si.classNames;var Ti=new WeakMap,Mi=new WeakMap,Di={},Ii=0,Li=function(e){return e&&(e.host||Li(e.parentNode))},Fi=function(e,t,r,n){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=Li(t);return r&&e.contains(r)?r:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);Di[r]||(Di[r]=new WeakMap);var s=Di[r],o=[],i=new Set,l=new Set(a),c=function(e){e&&!i.has(e)&&(i.add(e),c(e.parentNode))};a.forEach(c);var u=function(e){e&&!l.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))u(e);else try{var t=e.getAttribute(n),a=null!==t&&"false"!==t,l=(Ti.get(e)||0)+1,c=(s.get(e)||0)+1;Ti.set(e,l),s.set(e,c),o.push(e),1===l&&a&&Mi.set(e,!0),1===c&&e.setAttribute(r,"true"),a||e.setAttribute(n,"true")}catch(d){}})};return u(t),i.clear(),Ii++,function(){o.forEach(function(e){var t=Ti.get(e)-1,a=s.get(e)-1;Ti.set(e,t),s.set(e,a),t||(Mi.has(e)||e.removeAttribute(n),Mi.delete(e)),a||e.removeAttribute(r)}),--Ii||(Ti=new WeakMap,Ti=new WeakMap,Mi=new WeakMap,Di={})}},Ki=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),Fi(n,a,r,"aria-hidden")):function(){return null}};const qi="Dialog",[Bi]=function(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>w.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return w.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const a=w.createContext(n),s=r.length;function o(t){const{scope:r,children:n,...o}=t,i=(null==r?void 0:r[e][s])||a,l=w.useMemo(()=>o,Object.values(o));return w.createElement(i.Provider,{value:l},n)}return r=[...r,n],o.displayName=t+"Provider",[o,function(r,o){const i=(null==o?void 0:o[e][s])||a,l=w.useContext(i);if(l)return l;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},uo(n,...t)]}(qi),[zi,Ui]=Bi(qi),$i="DialogPortal",[Wi,Vi]=Bi($i,{forceMount:void 0}),Gi="DialogOverlay",Hi=w.forwardRef((e,t)=>{const r=Vi(Gi,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=Ui(Gi,e.__scopeDialog);return s.modal?w.createElement(Uo,{present:n||s.open},w.createElement(Yi,C({},a,{ref:t}))):null}),Yi=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Ui(Gi,r);return w.createElement(Ri,{as:xo,allowPinchZoom:!0,shards:[a.contentRef]},w.createElement(ko.div,C({"data-state":rl(a.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),Ji="DialogContent",Qi=w.forwardRef((e,t)=>{const r=Vi(Ji,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,s=Ui(Ji,e.__scopeDialog);return w.createElement(Uo,{present:n||s.open},s.modal?w.createElement(Xi,C({},a,{ref:t})):w.createElement(Zi,C({},a,{ref:t})))}),Xi=w.forwardRef((e,t)=>{const r=Ui(Ji,e.__scopeDialog),n=w.useRef(null),a=co(t,r.contentRef,n);return w.useEffect(()=>{const e=n.current;if(e)return Ki(e)},[]),w.createElement(el,C({},e,{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:io(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:io(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:io(e.onFocusOutside,e=>e.preventDefault())}))}),Zi=w.forwardRef((e,t)=>{const r=Ui(Ji,e.__scopeDialog),n=w.useRef(!1),a=w.useRef(!1);return w.createElement(el,C({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,o;(null===(s=e.onCloseAutoFocus)||void 0===s||s.call(e,t),t.defaultPrevented)||(n.current||null===(o=r.triggerRef.current)||void 0===o||o.focus(),t.preventDefault());n.current=!1,a.current=!1},onInteractOutside:t=>{var s,o;null===(s=e.onInteractOutside)||void 0===s||s.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const i=t.target;(null===(o=r.triggerRef.current)||void 0===o?void 0:o.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}}))}),el=w.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:s,...o}=e,i=Ui(Ji,r),l=co(t,w.useRef(null));return w.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:Vo()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:Vo()),Wo++,()=>{1===Wo&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Wo--}},[]),w.createElement(w.Fragment,null,w.createElement(Do,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:s},w.createElement(Po,C({role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":rl(i.open)},o,{ref:l,onDismiss:()=>i.onOpenChange(!1)}))),!1)}),tl="DialogTitle";function rl(e){return e?"open":"closed"}!function(e,t){const r=w.createContext(t);function n(e){const{children:t,...n}=e,a=w.useMemo(()=>n,Object.values(n));return w.createElement(r.Provider,{value:a},t)}n.displayName=e+"Provider"}("DialogTitleWarning",{contentName:Ji,titleName:tl,docsSlug:"dialog"});const nl=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:s,modal:o=!0}=e,i=w.useRef(null),l=w.useRef(null),[c=!1,u]=yo({prop:n,defaultProp:a,onChange:s});return w.createElement(zi,{scope:t,triggerRef:i,contentRef:l,contentId:po(),titleId:po(),descriptionId:po(),open:c,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(e=>!e),[u]),modal:o},r)},al=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,s=Ui($i,t);return w.createElement(Wi,{scope:t,forceMount:r},w.Children.map(n,e=>w.createElement(Uo,{present:r||s.open},w.createElement(zo,{asChild:!0,container:a},e))))},sl=Hi,ol=Qi;var il='[cmdk-group=""]',ll='[cmdk-group-items=""]',cl='[cmdk-item=""]',ul=`${cl}:not([aria-disabled="true"])`,dl="cmdk-item-select",hl="data-value",ml=(e,t,r)=>oo(e,t,r),fl=w.createContext(void 0),pl=()=>w.useContext(fl),gl=w.createContext(void 0),yl=()=>w.useContext(gl),xl=w.createContext(void 0),bl=w.forwardRef((e,t)=>{let r=Tl(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=Tl(()=>new Set),a=Tl(()=>new Map),s=Tl(()=>new Map),o=Tl(()=>new Set),i=Al(e),{label:l,children:c,value:u,onValueChange:d,filter:h,shouldFilter:m,loop:f,disablePointerSelection:p=!1,vimBindings:g=!0,...y}=e,x=w.useId(),b=w.useId(),v=w.useId(),j=w.useRef(null),k=Ll();Rl(()=>{if(void 0!==u){let e=u.trim();r.current.value=e,N.emit()}},[u]),Rl(()=>{k(6,O)},[]);let N=w.useMemo(()=>({subscribe:e=>(o.current.add(e),()=>o.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var a,s,o;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)P(),S(),k(1,C);else if("value"===e&&(n||k(5,O),void 0!==(null==(a=i.current)?void 0:a.value))){let e=null!=t?t:"";return void(null==(o=(s=i.current).onValueChange)||o.call(s,e))}N.emit()}},emit:()=>{o.current.forEach(e=>e())}}),[]),_=w.useMemo(()=>({value:(e,t,n)=>{var a;t!==(null==(a=s.current.get(e))?void 0:a.value)&&(s.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,E(t,n)),k(2,()=>{S(),N.emit()}))},item:(e,t)=>(n.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),k(3,()=>{P(),S(),r.current.value||C(),N.emit()}),()=>{s.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=A();k(4,()=>{P(),(null==t?void 0:t.getAttribute("id"))===e&&C(),N.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{s.current.delete(e),a.current.delete(e)}),filter:()=>i.current.shouldFilter,label:l||e["aria-label"],disablePointerSelection:p,listId:x,inputId:v,labelId:b,listInnerRef:j}),[]);function E(e,t){var n,a;let s=null!=(a=null==(n=i.current)?void 0:n.filter)?a:ml;return e?s(e,r.current.search,t):0}function S(){if(!r.current.search||!1===i.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=a.current.get(r),s=0;n.forEach(t=>{let r=e.get(t);s=Math.max(r,s)}),t.push([r,s])});let n=j.current;R().sort((t,r)=>{var n,a;let s=t.getAttribute("id"),o=r.getAttribute("id");return(null!=(n=e.get(o))?n:0)-(null!=(a=e.get(s))?a:0)}).forEach(e=>{let t=e.closest(ll);t?t.appendChild(e.parentElement===t?e:e.closest(`${ll} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${ll} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=j.current.querySelector(`${il}[${hl}="${encodeURIComponent(e[0])}"]`);null==t||t.parentElement.appendChild(t)})}function C(){let e=R().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(hl);N.setState("value",t||void 0)}function P(){var e,t,o,l;if(!r.current.search||!1===i.current.shouldFilter)return void(r.current.filtered.count=n.current.size);r.current.filtered.groups=new Set;let c=0;for(let a of n.current){let n=E(null!=(t=null==(e=s.current.get(a))?void 0:e.value)?t:"",null!=(l=null==(o=s.current.get(a))?void 0:o.keywords)?l:[]);r.current.filtered.items.set(a,n),n>0&&c++}for(let[n,s]of a.current)for(let e of s)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(n);break}r.current.filtered.count=c}function O(){var e,t,r;let n=A();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(il))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function A(){var e;return null==(e=j.current)?void 0:e.querySelector(`${cl}[aria-selected="true"]`)}function R(){var e;return Array.from(null==(e=j.current)?void 0:e.querySelectorAll(ul))}function T(e){let t=R()[e];t&&N.setState("value",t.getAttribute(hl))}function M(e){var t;let r=A(),n=R(),a=n.findIndex(e=>e===r),s=n[a+e];null!=(t=i.current)&&t.loop&&(s=a+e<0?n[n.length-1]:a+e===n.length?n[0]:n[a+e]),s&&N.setState("value",s.getAttribute(hl))}function D(e){let t,r=A(),n=null==r?void 0:r.closest(il);for(;n&&!t;)n=e>0?Pl(n,il):Ol(n,il),t=null==n?void 0:n.querySelector(ul);t?N.setState("value",t.getAttribute(hl)):M(e)}let I=()=>T(R().length-1),L=e=>{e.preventDefault(),e.metaKey?I():e.altKey?D(1):M(1)},F=e=>{e.preventDefault(),e.metaKey?T(0):e.altKey?D(-1):M(-1)};return w.createElement(ko.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=y.onKeyDown)||t.call(y,e),!e.defaultPrevented)switch(e.key){case"n":case"j":g&&e.ctrlKey&&L(e);break;case"ArrowDown":L(e);break;case"p":case"k":g&&e.ctrlKey&&F(e);break;case"ArrowUp":F(e);break;case"Home":e.preventDefault(),T(0);break;case"End":e.preventDefault(),I();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=A();if(t){let e=new Event(dl);t.dispatchEvent(e)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:_.inputId,id:_.labelId,style:Kl},l),Fl(e,e=>w.createElement(gl.Provider,{value:N},w.createElement(fl.Provider,{value:_},e))))}),vl=w.forwardRef((e,t)=>{var r,n;let a=w.useId(),s=w.useRef(null),o=w.useContext(xl),i=pl(),l=Al(e),c=null!=(n=null==(r=l.current)?void 0:r.forceMount)?n:null==o?void 0:o.forceMount;Rl(()=>{if(!c)return i.item(a,null==o?void 0:o.id)},[c]);let u=Il(a,s,[e.value,e.children,s],e.keywords),d=yl(),h=Dl(e=>e.value&&e.value===u.current),m=Dl(e=>!(!c&&!1!==i.filter())||(!e.search||e.filtered.items.get(a)>0));function f(){var e,t;p(),null==(t=(e=l.current).onSelect)||t.call(e,u.current)}function p(){d.setState("value",u.current,!0)}if(w.useEffect(()=>{let t=s.current;if(t&&!e.disabled)return t.addEventListener(dl,f),()=>t.removeEventListener(dl,f)},[m,e.onSelect,e.disabled]),!m)return null;let{disabled:g,value:y,onSelect:x,forceMount:b,keywords:v,...j}=e;return w.createElement(ko.div,{ref:Ml([s,t]),...j,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!h,"data-disabled":!!g,"data-selected":!!h,onPointerMove:g||i.disablePointerSelection?void 0:p,onClick:g?void 0:f},e.children)}),wl=w.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...s}=e,o=w.useId(),i=w.useRef(null),l=w.useRef(null),c=w.useId(),u=pl(),d=Dl(e=>!(!a&&!1!==u.filter())||(!e.search||e.filtered.groups.has(o)));Rl(()=>u.group(o),[]),Il(o,i,[e.value,e.heading,l]);let h=w.useMemo(()=>({id:o,forceMount:a}),[a]);return w.createElement(ko.div,{ref:Ml([i,t]),...s,"cmdk-group":"",role:"presentation",hidden:!d||void 0},r&&w.createElement("div",{ref:l,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),Fl(e,e=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},w.createElement(xl.Provider,{value:h},e))))}),jl=w.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=w.useRef(null),s=Dl(e=>!e.search);return r||s?w.createElement(ko.div,{ref:Ml([a,t]),...n,"cmdk-separator":"",role:"separator"}):null}),kl=w.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=null!=e.value,s=yl(),o=Dl(e=>e.search),i=Dl(e=>e.value),l=pl(),c=w.useMemo(()=>{var e;let t=null==(e=l.listInnerRef.current)?void 0:e.querySelector(`${cl}[${hl}="${encodeURIComponent(i)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return w.useEffect(()=>{null!=e.value&&s.setState("search",e.value)},[e.value]),w.createElement(ko.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":l.listId,"aria-labelledby":l.labelId,"aria-activedescendant":c,id:l.inputId,type:"text",value:a?e.value:o,onChange:e=>{a||s.setState("search",e.target.value),null==r||r(e.target.value)}})}),Nl=w.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,s=w.useRef(null),o=w.useRef(null),i=pl();return w.useEffect(()=>{if(o.current&&s.current){let e,t=o.current,r=s.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),w.createElement(ko.div,{ref:Ml([s,t]),...a,"cmdk-list":"",role:"listbox","aria-label":n,id:i.listId},Fl(e,e=>w.createElement("div",{ref:Ml([o,i.listInnerRef]),"cmdk-list-sizer":""},e)))}),_l=w.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:s,container:o,...i}=e;return w.createElement(nl,{open:r,onOpenChange:n},w.createElement(al,{container:o},w.createElement(sl,{"cmdk-overlay":"",className:a}),w.createElement(ol,{"aria-label":e.label,"cmdk-dialog":"",className:s},w.createElement(bl,{ref:t,...i}))))}),El=w.forwardRef((e,t)=>Dl(e=>0===e.filtered.count)?w.createElement(ko.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Sl=w.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...s}=e;return w.createElement(ko.div,{ref:t,...s,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},Fl(e,e=>w.createElement("div",{"aria-hidden":!0},e)))}),Cl=Object.assign(bl,{List:Nl,Item:vl,Input:kl,Group:wl,Separator:jl,Dialog:_l,Empty:El,Loading:Sl});function Pl(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function Ol(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function Al(e){let t=w.useRef(e);return Rl(()=>{t.current=e}),t}var Rl="undefined"==typeof window?w.useEffect:w.useLayoutEffect;function Tl(e){let t=w.useRef();return void 0===t.current&&(t.current=e()),t}function Ml(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function Dl(e){let t=yl(),r=()=>e(t.snapshot());return w.useSyncExternalStore(t.subscribe,r,r)}function Il(e,t,r,n=[]){let a=w.useRef(),s=pl();return Rl(()=>{var o;let i=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),l=n.map(e=>e.trim());s.value(e,i,l),null==(o=t.current)||o.setAttribute(hl,i),a.current=i}),a}var Ll=()=>{let[e,t]=w.useState(),r=Tl(()=>new Map);return Rl(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function Fl({asChild:e,children:t},r){return e&&w.isValidElement(t)?w.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var Kl={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function ql(e){return{id:e.id,date:e.date,description:e.description,amount:e.amount,currency:e.currency||"JPY",category:e.category,source:e.source,type:e.is_income?"income":"expense",created_at:e.date,account_id:e.account_id,is_transfer:e.is_transfer,receipt_url:e.receipt_url}}async function Bl(e){var t;const r=new URLSearchParams;(null==e?void 0:e.start_date)&&r.append("start_date",e.start_date),(null==e?void 0:e.end_date)&&r.append("end_date",e.end_date),(null==(t=null==e?void 0:e.categories)?void 0:t.length)&&r.append("categories",e.categories.join(",")),(null==e?void 0:e.source)&&r.append("source",e.source),(null==e?void 0:e.type)&&"all"!==e.type&&r.append("is_income","income"===e.type?"true":"false"),(null==e?void 0:e.search)&&r.append("search",e.search),void 0!==(null==e?void 0:e.min_amount)&&r.append("min_amount",e.min_amount.toString()),void 0!==(null==e?void 0:e.max_amount)&&r.append("max_amount",e.max_amount.toString()),r.append("limit","5000");return(await gn.get(`/api/transactions/?${r.toString()}`)).data.transactions.map(ql)}function zl(e){const{type:t,...r}=e;return{...r,is_income:"income"===t}}async function Ul(e){const t=zl(e);return ql((await gn.post("/api/transactions/",t)).data)}async function $l(e,t){const r=zl(t);return ql((await gn.put(`/api/transactions/${e}`,r)).data)}async function Wl(e){await gn.delete(`/api/transactions/${e}`)}async function Vl(e){const t=new URLSearchParams;e.forEach(e=>t.append("transaction_ids",e.toString()));return(await gn.delete(`/api/transactions/bulk/delete?${t.toString()}`)).data}async function Gl(e,t){const r=new URLSearchParams;e.forEach(e=>r.append("transaction_ids",e.toString())),r.append("category",t);return(await gn.patch(`/api/transactions/bulk/category?${r.toString()}`)).data}async function Hl(e,t=5){if(!e||e.length<2)return[];return(await gn.get(`/api/transactions/suggestions?q=${encodeURIComponent(e)}&limit=${t}`)).data}const Yl={JPY:1,USD:.00667,VND:160},Jl={JPY:0,VND:0,KRW:0,USD:2,EUR:2};function Ql(e,t){const r=Jl[t]??0;return Math.round(e*Math.pow(10,r))}function Xl(e,t,r){return e*(r[t]??Yl[t]??1)}function Zl(e,t="JPY",r=Yl,n=!1){const a=n?e:Xl(e,t,r),s=Jl[t]??0,o=Math.pow(10,s),i={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP";return new Intl.NumberFormat(i,{style:"currency",currency:t,minimumFractionDigits:s,maximumFractionDigits:s}).format(a/o)}function ec(e="JPY"){return{JPY:"***",USD:"$***",VND:"***"}[e]||"***"}function tc(e,t="JPY",r=Yl,n=!1,a=!1){return a?ec(t):Zl(e,t,r,n)}function rc(e,t,r="JPY",n=Yl,a=!1,s=!1){if(s){const n=ec(r);return"income"===t||e>0?`+${n}`:"expense"===t||e<0?`-${n}`:n}return function(e,t,r="JPY",n=Yl,a=!1){const s=Zl(Math.abs(e),r,n,a);return"income"===t||e>0?`+${s}`:"expense"===t||e<0?`-${s}`:s}(e,t,r,n,a)}function nc(e,t="JPY",r=Yl,n=!1,a=!1){return a?ec(t):function(e,t="JPY",r=Yl,n=!1){const a=n?e:Xl(e,t,r),s=Jl[t]??0,o=Math.pow(10,s),i={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP",l=s>0?1:0;return new Intl.NumberFormat(i,{style:"currency",currency:t,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:l}).format(a/o)}(e,t,r,n)}function ac({open:e,onOpenChange:t,onNewTransaction:r,onUpload:n,onShowShortcuts:s}){const{t:o}=Oe(),i=m(),{resolvedTheme:l,toggleTheme:c}=In(),[u,d]=w.useState(""),[h,f]=w.useState([]),[p,g]=w.useState(!1);w.useEffect(()=>{if(!e||u.length<2)return void f([]);const t=setTimeout(async()=>{g(!0);try{const e=await Bl({search:u});f(e.slice(0,5))}catch(e){f([])}finally{g(!1)}},300);return()=>clearTimeout(t)},[u,e]),w.useEffect(()=>{e||(d(""),f([]))},[e]);const y=w.useCallback(e=>{if(t(!1),e.startsWith("/"))i({to:e});else switch(e){case"new-transaction":null==r||r();break;case"upload":null==n||n(),i({to:"/upload"});break;case"toggle-theme":c();break;case"shortcuts":null==s||s();break;case"transaction":i({to:"/transactions"})}},[i,t,r,n,c,s]),x=a.jsxs(Cl.Dialog,{open:e,onOpenChange:t,label:o("commandPalette.label","Command Palette"),className:"fixed inset-0 z-[100001] overflow-hidden",style:{touchAction:"pan-y"},children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),a.jsx("div",{className:"fixed left-1/2 top-1/4 -translate-x-1/2 w-full max-w-lg",children:a.jsxs(Cl,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center border-b border-gray-200 dark:border-gray-700 px-4",children:[a.jsx(te,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-3"}),a.jsx(Cl.Input,{value:u,onValueChange:d,placeholder:o("commandPalette.placeholder","Search pages, transactions, actions..."),className:"w-full py-4 bg-transparent outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"}),a.jsx("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"})]}),a.jsxs(Cl.List,{className:"max-h-80 overflow-y-auto p-2",children:[a.jsx(Cl.Empty,{className:"py-6 text-center text-gray-500 dark:text-gray-400",children:p?o("commandPalette.searching","Searching..."):o("commandPalette.noResults","No results found.")}),h.length>0&&a.jsx(Cl.Group,{heading:o("commandPalette.transactions","Transactions"),children:h.map(e=>a.jsxs(Cl.Item,{value:`transaction-${e.id}`,onSelect:()=>y("transaction"),className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx(U,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"truncate text-sm",children:e.description}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.date,"  ",e.category]})]}),a.jsxs("span",{className:"text-sm font-medium "+("income"===e.type?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:["income"===e.type?"+":"-",Zl(e.amount,e.currency)]})]},e.id))}),a.jsxs(Cl.Group,{heading:o("commandPalette.pages","Pages"),children:[a.jsx(sc,{icon:a.jsx(z,{className:"w-4 h-4"}),label:o("nav.dashboard"),shortcut:"G D",value:"/dashboard",onSelect:y}),a.jsx(sc,{icon:a.jsx(U,{className:"w-4 h-4"}),label:o("nav.transactions"),shortcut:"G T",value:"/transactions",onSelect:y}),a.jsx(sc,{icon:a.jsx($,{className:"w-4 h-4"}),label:o("nav.accounts"),shortcut:"G A",value:"/accounts",onSelect:y}),a.jsx(sc,{icon:a.jsx(ee,{className:"w-4 h-4"}),label:o("nav.budget"),shortcut:"G B",value:"/budget",onSelect:y}),a.jsx(sc,{icon:a.jsx(re,{className:"w-4 h-4"}),label:o("nav.analytics"),shortcut:"G N",value:"/analytics",onSelect:y}),a.jsx(sc,{icon:a.jsx(W,{className:"w-4 h-4"}),label:o("nav.goals"),shortcut:"G G",value:"/goals",onSelect:y}),a.jsx(sc,{icon:a.jsx(ne,{className:"w-4 h-4"}),label:o("nav.recurring"),value:"/recurring",onSelect:y}),a.jsx(sc,{icon:a.jsx(V,{className:"w-4 h-4"}),label:o("nav.settings"),shortcut:"G S",value:"/settings",onSelect:y})]}),a.jsxs(Cl.Group,{heading:o("commandPalette.actions","Actions"),children:[a.jsx(sc,{icon:a.jsx(ae,{className:"w-4 h-4"}),label:o("commandPalette.newTransaction","New Transaction"),shortcut:"Ctrl+N",value:"new-transaction",onSelect:y}),a.jsx(sc,{icon:a.jsx(K,{className:"w-4 h-4"}),label:o("commandPalette.uploadCsv","Upload CSV"),shortcut:"Ctrl+U",value:"upload",onSelect:y}),a.jsx(sc,{icon:"dark"===l?a.jsx(M,{className:"w-4 h-4"}):a.jsx(D,{className:"w-4 h-4"}),label:"dark"===l?o("commandPalette.lightMode","Switch to Light Mode"):o("commandPalette.darkMode","Switch to Dark Mode"),value:"toggle-theme",onSelect:y}),a.jsx(sc,{icon:a.jsx(se,{className:"w-4 h-4"}),label:o("commandPalette.shortcuts","Keyboard Shortcuts"),shortcut:"?",value:"shortcuts",onSelect:y})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between text-xs text-gray-400 dark:text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),o("commandPalette.navigate","Navigate")]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),o("commandPalette.select","Select")]})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"}),o("commandPalette.close","Close")]})]})]})})]});return"undefined"==typeof document?null:v.createPortal(x,document.body)}function sc({icon:e,label:t,shortcut:r,value:n,onSelect:s}){return a.jsxs(Cl.Item,{value:n,onSelect:s,className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:e}),a.jsx("span",{className:"flex-1",children:t}),r&&a.jsx("kbd",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:r})]})}function oc({open:e,onClose:t}){const{t:r}=Oe(),n="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent),s=[{title:r("shortcuts.general","General"),shortcuts:[{keys:[n?"":"Ctrl","K"],description:r("shortcuts.commandPalette","Open command palette")},{keys:["Esc"],description:r("shortcuts.closeModal","Close modal/dialog")},{keys:["?"],description:r("shortcuts.showHelp","Show keyboard shortcuts")}]},{title:r("shortcuts.actions","Actions"),shortcuts:[{keys:[n?"":"Ctrl","N"],description:r("shortcuts.newTransaction","New transaction")},{keys:[n?"":"Ctrl","U"],description:r("shortcuts.uploadCsv","Upload CSV")},{keys:[n?"":"Ctrl","F"],description:r("shortcuts.focusSearch","Focus search")}]},{title:r("shortcuts.navigation","Navigation"),shortcuts:[{keys:["G","D"],description:r("shortcuts.gotoDashboard","Go to Dashboard")},{keys:["G","T"],description:r("shortcuts.gotoTransactions","Go to Transactions")},{keys:["G","A"],description:r("shortcuts.gotoAccounts","Go to Accounts")},{keys:["G","B"],description:r("shortcuts.gotoBudget","Go to Budget")},{keys:["G","N"],description:r("shortcuts.gotoAnalytics","Go to Analytics")},{keys:["G","G"],description:r("shortcuts.gotoGoals","Go to Goals")},{keys:["G","S"],description:r("shortcuts.gotoSettings","Go to Settings")}]}];if(!e)return null;const o=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-lg mx-4 max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:r("shortcuts.title","Keyboard Shortcuts")}),a.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:a.jsx(T,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh] space-y-6",children:s.map(e=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:e.title}),a.jsx("div",{className:"space-y-2",children:e.shortcuts.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:e.description}),a.jsx("div",{className:"flex items-center gap-1",children:e.keys.map((t,r)=>a.jsxs("span",{children:[a.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:t}),r<e.keys.length-1&&a.jsx("span",{className:"text-gray-400 mx-0.5",children:"+"})]},r))})]},t))})]},e.title))}),a.jsx("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:r("shortcuts.hint","Press Esc to close")})})]})]});return"undefined"==typeof document?null:v.createPortal(o,document.body)}const ic="Escape",lc="k",cc="f",uc="n",dc="u",hc="?";function mc({children:e}){const t=m(),[r,n]=w.useState(!1),[s,o]=w.useState(!1),[i,l]=w.useState(!1),[c,u]=w.useState(null),d=w.useCallback(e=>{const r={d:"/dashboard",t:"/transactions",a:"/accounts",b:"/budget",n:"/analytics",g:"/goals",s:"/settings"}[e.toLowerCase()];r&&t({to:r}),u(null)},[t]);return function(e,t={}){const{enabled:r=!0}=t,n=w.useCallback(t=>{if(!r)return;const n=t.target;if("INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName&&!n.isContentEditable||"Escape"===t.key)for(const r of e){const e=t.key.toLowerCase()===r.key.toLowerCase(),n=r.ctrlKey||r.metaKey?t.ctrlKey||t.metaKey:!t.ctrlKey&&!t.metaKey,a=r.shiftKey?t.shiftKey:!t.shiftKey;if(e&&n&&a)return t.preventDefault(),void r.callback()}},[e,r]);w.useEffect(()=>(window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)),[n])}([{key:lc,ctrlKey:!0,callback:()=>o(!0),description:"Open command palette"},{key:ic,callback:()=>{s?o(!1):i?l(!1):r&&n(!1),u(null)},description:"Close modal"},{key:hc,shiftKey:!0,callback:()=>l(!0),description:"Show shortcuts help"},{key:uc,ctrlKey:!0,callback:()=>t({to:"/transactions"}),description:"New transaction"},{key:dc,ctrlKey:!0,callback:()=>t({to:"/upload"}),description:"Upload CSV"},{key:cc,ctrlKey:!0,callback:()=>o(!0),description:"Focus search"},{key:"g",callback:()=>u("g"),description:"Navigation prefix"},...["d","t","a","b","n","g","s"].map(e=>({key:e,callback:()=>{"g"===c&&d(e)},description:`Navigate to ${e}`}))]),w.useEffect(()=>{if(c){const e=setTimeout(()=>u(null),1500);return()=>clearTimeout(e)}},[c]),a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(js,{}),a.jsx("main",{className:"flex-1 pb-20 md:pb-0",children:a.jsx(Xs,{children:e})}),a.jsx(_s,{}),a.jsx(Cs,{}),a.jsx(Qs,{}),a.jsx(Ps,{onClick:()=>n(!0)}),a.jsx(Ys,{isOpen:r,onClose:()=>n(!1)}),a.jsx(ac,{open:s,onOpenChange:o,onShowShortcuts:()=>l(!0)}),a.jsx(oc,{open:i,onClose:()=>l(!1)})]})}function fc({size:e="md",className:t}){return a.jsx("div",{className:Pa("inline-block animate-spin rounded-full border-2 border-primary-500 border-t-transparent",{"h-4 w-4":"sm"===e,"h-8 w-8":"md"===e,"h-12 w-12":"lg"===e},t),role:"status","aria-label":"",children:a.jsx("span",{className:"sr-only",children:"..."})})}const pc=f({component:function(){const{isAuthenticated:e,isLoading:t}=wn(),r=d(),n=m();return w.useEffect(()=>{t||e||["/login","/register","/landing"].includes(r.pathname)||n({to:"/login"})},[e,t,r.pathname,n]),t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(fc,{size:"lg"})}):"/login"===r.pathname||"/register"===r.pathname||"/landing"===r.pathname?a.jsx(p,{}):e?a.jsx(mc,{children:a.jsx(p,{})}):null}}),gc=g("/upload")({}),yc=g("/transactions")({validateSearch:e=>({categories:"string"==typeof e.categories?e.categories:void 0,month:"string"==typeof e.month?e.month:void 0,accountId:"number"==typeof e.accountId?e.accountId:"string"!=typeof e.accountId||isNaN(Number(e.accountId))?void 0:Number(e.accountId),fromAccounts:!0===e.fromAccounts||"true"===e.fromAccounts,type:"income"===e.type||"expense"===e.type?e.type:void 0})}),xc=g("/settings")({}),bc=w.forwardRef(({variant:e="primary",size:t="md",loading:r=!1,className:n,children:s,disabled:o,...i},l)=>{const c=o||r;return a.jsxs("button",{ref:l,disabled:c,className:Pa("inline-flex items-center justify-center gap-2 font-medium rounded-lg","transition-all duration-150 focus-ring","active:scale-[0.97] active:transition-none","disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",{"bg-primary-500 text-white hover:bg-primary-600 shadow-sm hover:shadow":"primary"===e,"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600":"secondary"===e,"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800":"outline"===e,"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800":"ghost"===e,"bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow":"danger"===e},{"px-3 py-1.5 text-sm":"sm"===t,"px-6 py-3":"md"===t,"px-8 py-4 text-lg":"lg"===t},n),...i,children:[r&&a.jsx(Q,{className:Pa("animate-spin","sm"===t?"w-3 h-3":"lg"===t?"w-5 h-5":"w-4 h-4")}),s]})});bc.displayName="Button";const vc=w.forwardRef(({label:e,error:t,className:r,...n},s)=>a.jsxs("div",{className:"w-full",children:[e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:n.id,children:e}),a.jsx("input",{ref:s,className:Pa("w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","transition-default focus-ring","disabled:opacity-50 disabled:cursor-not-allowed","max-w-full overflow-hidden text-ellipsis",t?"border-red-500":"border-gray-300 dark:border-gray-600",r),...n}),t&&a.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t})]}));function wc({children:e,className:t,hover:r=!1,onClick:n,...s}){return a.jsx("div",{className:Pa("bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",r&&"card-hover",t),onClick:n,...s,children:e})}vc.displayName="Input";const jc=g("/register")({component:function(){const{t:e}=Oe("common"),t=m(),[r,n]=w.useState(""),[s,o]=w.useState(""),[i,l]=w.useState(""),[c,d]=w.useState(""),[h,f]=w.useState(!1);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(wc,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.registerDescription")})]}),a.jsxs("form",{onSubmit:async n=>{var a,o;if(n.preventDefault(),d(""),s===i)if(s.length<6)d(e("auth.passwordTooShort"));else{f(!0);try{await gn.post("/api/auth/register",{email:r,password:s}),t({to:"/login"})}catch(Td){const r=(null==(o=null==(a=null==Td?void 0:Td.response)?void 0:a.data)?void 0:o.detail)||e("auth.registerFailed");d(r)}finally{f(!1)}}else d(e("auth.passwordMismatch"))},className:"space-y-6",children:[c&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:c}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(vc,{id:"email",type:"email",value:r,onChange:e=>n(e.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(vc,{id:"password",type:"password",value:s,onChange:e=>o(e.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.confirmPassword")}),a.jsx(vc,{id:"confirmPassword",type:"password",value:i,onChange:e=>l(e.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsx(bc,{type:"submit",className:"w-full",disabled:h,children:e(h?"auth.registering":"auth.register")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.hasAccount")," ",a.jsx(u,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.login")})]})]})]})})}}),kc=g("/recurring")({});const Nc=g("/login")({component:function(){const{t:e}=Oe("common"),t=m(),{login:r}=wn(),[n,s]=w.useState(""),[o,i]=w.useState(""),[l,c]=w.useState(""),[d,h]=w.useState(!1);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(wc,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.loginDescription")})]}),a.jsxs("form",{onSubmit:async a=>{var s,i;a.preventDefault(),c(""),h(!0);try{await r(n,o),t({to:"/"})}catch(Td){const r=Td instanceof Error?Td.message:(null==(i=null==(s=null==Td?void 0:Td.response)?void 0:s.data)?void 0:i.detail)||e("auth.loginFailed");c(r)}finally{h(!1)}},className:"space-y-6",children:[l&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:l}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(vc,{id:"email",type:"email",value:n,onChange:e=>s(e.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(vc,{id:"password",type:"password",value:o,onChange:e=>i(e.target.value),placeholder:"********",required:!0,autoComplete:"current-password"})]}),a.jsx(bc,{type:"submit",className:"w-full",disabled:d,children:e(d?"auth.loggingIn":"auth.login")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.noAccount")," ",a.jsx(u,{to:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.register")})]})]})]})})}});function _c(){const e=m(),{t:t}=Oe("landing");return a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-6 py-16 lg:py-24",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:t("hero.headline")}),a.jsx("p",{className:"text-lg text-green-100 mb-6 leading-relaxed",children:t("hero.subheadline")}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(oe,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp1")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(ie,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp2")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(le,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp3")})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(bc,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("hero.cta")}),a.jsx(bc,{onClick:()=>e({to:"/login"}),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:t("hero.seeLiveDemo")})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20 shadow-2xl",children:a.jsx("img",{src:"/screenshots/dashboard-light.webp",alt:"SmartMoney Dashboard",className:"rounded-lg shadow-lg w-full",loading:"eager"})}),a.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 lg:w-40 hidden md:block",children:a.jsx("img",{src:"/screenshots/dashboard-mobile.webp",alt:"SmartMoney Mobile",className:"rounded-xl shadow-2xl border-4 border-white",loading:"eager"})})]})]})})]})}const Ec=[{id:"dashboard",screenshot:"/screenshots/dashboard-light.webp",screenshotAlt:"Dashboard Screenshot"},{id:"transactions",screenshot:"/screenshots/transactions.webp",screenshotAlt:"Transactions Screenshot"},{id:"budget",screenshot:"/screenshots/budget.webp",screenshotAlt:"Budget Screenshot"},{id:"analytics",screenshot:"/screenshots/analytics.webp",screenshotAlt:"Analytics Screenshot"}];function Sc(){const{t:e}=Oe("landing");return a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("features.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Ec.map(t=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"aspect-video bg-gray-100 overflow-hidden",children:a.jsx("img",{src:t.screenshot,alt:t.screenshotAlt,className:"w-full h-full object-cover object-top",loading:"lazy"})}),a.jsxs("div",{className:"p-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`features.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`features.${t.id}.description`)})]})]},t.id))})]})})}const Cc=[{id:"step1",icon:K,color:"bg-blue-100 text-blue-700"},{id:"step2",icon:re,color:"bg-green-100 text-green-700"},{id:"step3",icon:ie,color:"bg-purple-100 text-purple-700"}];function Pc(){const{t:e}=Oe("landing");return a.jsx("section",{id:"how-it-works",className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("howItWorks.title")}),a.jsx("p",{className:"text-lg text-gray-600",children:e("howItWorks.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Cc.map((t,r)=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[a.jsx("div",{className:`h-16 w-16 rounded-full ${t.color} flex items-center justify-center`,children:a.jsx(t.icon,{className:"h-8 w-8"})}),a.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gray-900 text-white text-sm font-bold flex items-center justify-center",children:r+1})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`howItWorks.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`howItWorks.${t.id}.description`)})]},t.id))}),a.jsx("div",{className:"hidden md:flex items-center justify-center mt-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-300 to-green-300 rounded"}),a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-green-300 to-purple-300 rounded"})]})})]})})}function Oc(){const e=m(),{t:t}=Oe("landing");return a.jsx("section",{className:"py-16 bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:t("cta.title")}),a.jsx("p",{className:"text-lg text-green-100 mb-8",children:t("cta.subtitle")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-6",children:[a.jsx(bc,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("cta.button")}),a.jsxs(bc,{onClick:()=>window.open("https://github.com/GodStorm91/smartmoney","_blank"),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[a.jsx(ce,{className:"h-5 w-5 mr-2"}),t("cta.openSource")]})]}),a.jsx("p",{className:"text-sm text-green-200",children:t("cta.noAccount")})]})})}const Ac=[{code:"en",name:"English",flag:""},{code:"ja",name:"",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function Rc(){const e=m(),{t:t,i18n:r}=Oe("landing"),[n,s]=w.useState(!1),o=Ac.find(e=>e.code===r.language)||Ac[0];return a.jsx("header",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{className:"h-8 w-8 text-green-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>s(!n),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(le,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm",children:o.flag})]}),n&&a.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:Ac.map(e=>a.jsxs("button",{onClick:()=>{return t=e.code,r.changeLanguage(t),void s(!1);var t},className:"w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 "+(r.language===e.code?"bg-green-50 text-green-700":"text-gray-700"),children:[a.jsx("span",{children:e.flag}),a.jsx("span",{children:e.name})]},e.code))})]}),a.jsx(bc,{onClick:()=>e({to:"/login"}),variant:"outline",size:"sm",children:"Login"}),a.jsx(bc,{onClick:()=>e({to:"/register"}),size:"sm",children:t("hero.cta")})]})]})})})}function Tc(){const{t:e}=Oe("landing");return a.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(q,{className:"h-6 w-6 text-green-500"}),a.jsx("span",{className:"text-lg font-bold text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[a.jsxs("a",{href:"https://github.com/GodStorm91/smartmoney",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-white transition-colors",children:[a.jsx(ce,{className:"h-4 w-4"}),"GitHub"]}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.privacy")}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.terms")})]}),a.jsx("p",{className:"text-sm",children:e("footer.copyright")})]})})})}const Mc=g("/landing")({component:function(){return a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx(Rc,{}),a.jsx(_c,{}),a.jsx(Sc,{}),a.jsx(Pc,{}),a.jsx(Oc,{}),a.jsx(Tc,{})]})}}),Dc=g("/goals")({}),Ic=g("/budget")({}),Lc=g("/analytics")({}),Fc=g("/accounts")({});async function Kc(){return(await gn.get("/api/exchange-rates")).data}function qc(){return i({queryKey:["exchange-rates"],queryFn:Kc,staleTime:864e5,gcTime:1728e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}function Bc(){const{data:e}=qc();return(null==e?void 0:e.rates)||{}}function zc({goalId:e,goalName:t,achievability:r,targetAmount:n,currentAmount:s,onEdit:o,onDelete:i,topExpenseCategory:l}){const{t:c}=Oe("common"),{currency:u}=En(),{data:d}=qc(),{isPrivacyMode:h}=On(),[m,f]=w.useState(!1),p=n>0?Math.min(100,s/n*100):0,g=r.current_monthly_net>=r.required_monthly,y=p>=100||g?"bg-emerald-500":"bg-amber-500";return a.jsxs(wc,{className:"relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("span",{className:Pa("text-xs font-medium px-2 py-1 rounded-full",g||p>=100?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-400"),children:[p>=100?"":g?"":""," ",c(p>=100?"goal.status.completed":g?"goal.status.onTrack":"goal.status.behind")]}),o&&a.jsx("button",{onClick:()=>o(e),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":c("goal.editGoal"),children:a.jsx(ue,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]}),a.jsxs("div",{className:"mb-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-1",children:[a.jsxs("span",{className:Pa("text-2xl font-bold",p>=100||g?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"),children:[Math.round(p),"%"]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:c("goal.monthsRemaining",{months:r.months_remaining})})]}),a.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:Pa("h-full rounded-full transition-all duration-500",y),style:{width:`${Math.min(100,p)}%`}})})]}),a.jsxs("div",{className:"text-center mb-4",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:nc(s,u,(null==d?void 0:d.rates)||{},!0,h)}),a.jsx("span",{className:"text-gray-400 dark:text-gray-500 mx-2",children:"/"}),a.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-400",children:nc(n,u,(null==d?void 0:d.rates)||{},!0,h)})]}),a.jsxs("div",{className:Pa("rounded-lg p-3 mb-4",g||p>=100?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800"),children:[a.jsxs("p",{className:Pa("text-sm",g||p>=100?"text-emerald-700 dark:text-emerald-300":"text-amber-700 dark:text-amber-300"),children:[" ",(()=>{if(p>=100)return c("goal.insight.achieved");if(g)return c("goal.insight.onTrackMonths",{months:r.months_remaining});const e=r.monthly_gap;if(e>0){const t=tc(e,u,(null==d?void 0:d.rates)||{},!1,h);return c("goal.insight.saveMore",{amount:t})}return c("goal.insight.everyBitCounts")})()]}),!g&&l&&l.monthlyAmount>0&&a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5 ml-5",children:[" ",c("goal.insight.topExpenseTip",{category:c(`categories.${l.name}`,{defaultValue:l.name}),amount:tc(l.monthlyAmount,u,(null==d?void 0:d.rates)||{},!1,h)})]})]}),i&&a.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:m?a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:c("goal.deleteConfirm")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{f(!1)},className:"flex-1 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:c("common.cancel")}),a.jsx("button",{onClick:()=>{i&&i(e),f(!1)},className:"flex-1 py-2 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:c("common.delete")})]})]}):a.jsxs("button",{onClick:()=>{f(!0)},className:"w-full flex items-center justify-center gap-2 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[a.jsx(de,{className:"w-4 h-4"}),c("goal.deleteGoal")]})})]})}const Uc={"":"","":"","":"","":"","":"","":"","":"","":""};function $c({categories:e,maxItems:t}){const{currency:r}=En(),{data:n}=qc(),{isPrivacyMode:s}=On(),o=t?e.slice(0,t):e;return a.jsx("div",{className:"space-y-4",children:o.map((e,t)=>a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl","aria-hidden":"true",children:e.emoji||Uc[e.category]||""}),a.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:e.category})]}),a.jsx("span",{className:"text-sm font-semibold font-numbers text-gray-900 dark:text-gray-100",children:tc(e.amount,r,(null==n?void 0:n.rates)||{},!1,s)})]}),a.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${e.percentage}%`},role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${e.category}: ${e.percentage}%`})})]},t))})}function Wc({title:e,amount:t,change:r,icon:n,type:s,clickable:o,...i}){const{currency:l}=En(),{data:c}=qc(),{isPrivacyMode:u}=On(),d=s?{income:{bg:"bg-green-50 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",badge:"text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/30"},expense:{bg:"bg-red-50 dark:bg-red-900/30",text:"text-red-600 dark:text-red-400",badge:"text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/30"},net:{bg:"bg-blue-50 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",badge:"text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30"}}[s]:{bg:"bg-gray-50 dark:bg-gray-700",text:"text-gray-600 dark:text-gray-400",badge:"text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700"};return a.jsxs(wc,{hover:!0,role:"region",className:o?"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01]":void 0,...i,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsx("div",{className:Pa("p-3 rounded-lg",d.bg),children:n}),null!=r&&a.jsxs("span",{className:Pa("inline-flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full",d.badge),children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r>=0?a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"}):a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),r>=0?"+":"",r.toFixed(1),"%"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:e}),a.jsx("p",{className:Pa("text-2xl sm:text-3xl font-bold font-numbers tracking-tight",d.text),children:tc(t,l,(null==c?void 0:c.rates)||{},!1,u)})]})]})}function Vc({summary:e}){const{t:t}=Oe("common");return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsx(u,{to:"/transactions",search:{type:"income"},className:"block",children:a.jsx(Wc,{title:t("chart.income"),amount:(null==e?void 0:e.income)||0,change:null==e?void 0:e.income_change,type:"income","aria-label":t("kpi.thisMonthIncome"),clickable:!0,icon:a.jsx("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})}),a.jsx(u,{to:"/transactions",search:{type:"expense"},className:"block",children:a.jsx(Wc,{title:t("chart.expense"),amount:(null==e?void 0:e.expense)||0,change:null==e?void 0:e.expense_change,type:"expense","aria-label":t("kpi.thisMonthExpense"),clickable:!0,icon:a.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})})}),a.jsx(Wc,{title:t("chart.net"),amount:(null==e?void 0:e.net)||0,change:null==e?void 0:e.net_change,type:"net","aria-label":t("kpi.thisMonthNet"),icon:a.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}function Gc({className:e}){return a.jsx("div",{className:Pa("animate-pulse bg-gray-200 dark:bg-gray-700 rounded",e)})}function Hc(){return a.jsxs("tr",{className:"animate-pulse",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx(Gc,{className:"w-20 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Gc,{className:"w-32 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Gc,{className:"w-16 h-6 rounded-full"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Gc,{className:"w-24 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Gc,{className:"w-20 h-4 ml-auto"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Gc,{className:"w-16 h-6 mx-auto"})})]})}function Yc(){return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(Gc,{className:"w-32 h-5 mb-2"}),a.jsx(Gc,{className:"w-20 h-4"})]}),a.jsx(Gc,{className:"w-24 h-6"})]})})}function Jc({className:e}){return a.jsxs("div",{className:Pa("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",e),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Gc,{className:"w-10 h-10 rounded-lg"}),a.jsx(Gc,{className:"w-20 h-4"})]}),a.jsx(Gc,{className:"w-32 h-8 mb-2"}),a.jsx(Gc,{className:"w-16 h-4"})]})}function Qc({className:e}){return a.jsx("div",{className:Pa("space-y-4",e),children:[...Array(4)].map((e,t)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Gc,{className:"w-8 h-8 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Gc,{className:"w-24 h-4 mb-1"}),a.jsx(Gc,{className:"w-full h-2 rounded-full"})]}),a.jsx(Gc,{className:"w-16 h-4"})]},t))})}function Xc({className:e}){return a.jsxs("div",{className:Pa("space-y-3",e),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Gc,{className:"w-28 h-4"}),a.jsx(Gc,{className:"w-16 h-4"})]}),a.jsx(Gc,{className:"w-full h-3 rounded-full"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(Gc,{className:"w-20 h-3"}),a.jsx(Gc,{className:"w-20 h-3"})]})]})}function Zc({className:e}){return a.jsxs("div",{className:Pa("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm text-center",e),children:[a.jsx(Gc,{className:"w-24 h-4 mx-auto mb-2"}),a.jsx(Gc,{className:"w-48 h-10 mx-auto mb-3"}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Gc,{className:"w-16 h-4"}),a.jsx(Gc,{className:"w-24 h-5"}),a.jsx(Gc,{className:"w-12 h-5 rounded-full"})]})]})}class eu extends w.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback||a.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500 text-sm",children:"Chart failed to load"}):this.props.children}}const tu=w.lazy(()=>xs(()=>import("./TrendLineChart-D-NYtaL9.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.TrendLineChart}))),ru=w.lazy(()=>xs(()=>import("./ZoomableChart-BWpVUcGt.js"),__vite__mapDeps([7,1,2])).then(e=>({default:e.ZoomableChart})));w.lazy(()=>xs(()=>import("./IncomeExpenseBarChart-D02pzpJk.js"),__vite__mapDeps([8,1,2,3,4,5,6])).then(e=>({default:e.IncomeExpenseBarChart}))),w.lazy(()=>xs(()=>import("./CategoryBarChart-BE_KGPUZ.js"),__vite__mapDeps([9,1,2,3,4,5,6])).then(e=>({default:e.CategoryBarChart}))),w.lazy(()=>xs(()=>import("./CategoryPieChart-xn7IQ22y.js"),__vite__mapDeps([10,1,2,4,5,3,6])).then(e=>({default:e.CategoryPieChart}))),w.lazy(()=>xs(()=>import("./CashFlowSummary-wl1BAl21.js"),__vite__mapDeps([11,1,2,3,4,5,6])).then(e=>({default:e.CashFlowSummary})));const nu=w.lazy(()=>xs(()=>import("./ForecastChart-RVgw0-F_.js"),__vite__mapDeps([12,1,2,3,4,5,6])).then(e=>({default:e.ForecastChart})));function au({height:e="h-64"}){return a.jsx("div",{className:`${e} flex items-center justify-center`,children:a.jsx(Gc,{className:"w-full h-full rounded-lg"})})}function su(e){return a.jsx(w.Suspense,{fallback:a.jsx(au,{}),children:a.jsx(tu,{...e})})}function ou(e){return a.jsx(w.Suspense,{fallback:a.jsx(au,{height:"h-80"}),children:a.jsx(ru,{...e})})}function iu(e){return a.jsx(eu,{children:a.jsx(w.Suspense,{fallback:a.jsx(au,{height:"h-80"}),children:a.jsx(nu,{...e})})})}function lu({data:e,className:t}){const{t:r}=Oe("common"),[n,s]=w.useState("net");return a.jsxs(wc,{className:Pa("",t),children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:r("chart.trend12months")}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>s("net"),className:"px-3 py-1 text-sm font-medium rounded-lg transition-colors "+("net"===n?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:r("chart.net")}),a.jsx("button",{onClick:()=>s("income"),className:"px-3 py-1 text-sm font-medium rounded-lg transition-colors "+("income"===n?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:r("chart.income")}),a.jsx("button",{onClick:()=>s("expense"),className:"px-3 py-1 text-sm font-medium rounded-lg transition-colors "+("expense"===n?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"),children:r("chart.expense")})]})]}),a.jsx("div",{className:"h-80",role:"img","aria-label":r("chart.trendChart"),children:e&&e.length>0?a.jsx(ou,{className:"h-full",children:a.jsx(su,{data:e,dataKey:n})}):a.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500",children:r("common.noData")})})]})}function cu(){const{t:e}=Oe("common");return a.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl p-5 text-white shadow-lg",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("dashboard.quickActions")}),a.jsxs("div",{className:"space-y-2.5",children:[a.jsx(u,{to:"/upload",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-3.5 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(K,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("dashboard.quickActionUpload")})]})}),a.jsx(u,{to:"/goals",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-3.5 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(W,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("dashboard.quickActionGoals")})]})}),a.jsx(u,{to:"/analytics",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-3.5 transition-colors",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(re,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("dashboard.quickActionAnalytics")})]})})]})]})}function uu({end:e,duration:t=1e3,decimals:r=0,prefix:n="",suffix:s="",className:o="",formatter:i,onComplete:l}){const[c,u]=w.useState(0),d=w.useRef(null),h=w.useRef(null),m=w.useRef(e);w.useEffect(()=>{if(Math.abs(m.current-e)<.01)return;if(m.current=e,u(0),d.current=null,0===e)return void u(0);const r=n=>{d.current||(d.current=n);const a=n-d.current,s=Math.min(a/t,1),o=(i=s,1-Math.pow(1-i,4));var i;u(o*e),s<1?h.current=requestAnimationFrame(r):(u(e),null==l||l())};return h.current=requestAnimationFrame(r),()=>{h.current&&cancelAnimationFrame(h.current)}},[e,t,l]);const f=i?i(c):`${n}${c.toFixed(r)}${s}`;return a.jsx("span",{className:o,children:f})}async function du(e){const t=new URLSearchParams;(null==e?void 0:e.includeInactive)&&t.append("include_inactive","true");const r="/api/accounts/"+(t.toString()?`?${t.toString()}`:"");return(await gn.get(r)).data}function hu(e=!1){return i({queryKey:["accounts",{includeInactive:e}],queryFn:()=>du({includeInactive:e}),staleTime:3e5})}function mu(e){return i({queryKey:["accounts",e],queryFn:()=>async function(e){return(await gn.get(`/api/accounts/${e}`)).data}(e),staleTime:3e5,enabled:!!e})}function fu(){const e=h();return y({mutationFn:e=>async function(e){return(await gn.post("/api/accounts/",e)).data}(e),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}})}function pu(){const e=h();return y({mutationFn:({id:e,data:t})=>async function(e,t){return(await gn.patch(`/api/accounts/${e}`,t)).data}(e,t),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts",r.id]}),e.invalidateQueries({queryKey:["accounts"]})}})}async function gu(){return(await gn.get("/api/crypto/wallets")).data}async function yu(e){return(await gn.get(`/api/crypto/wallets/${e}`)).data}async function xu(e){return(await gn.post("/api/crypto/wallets",e)).data}async function bu(e){await gn.delete(`/api/crypto/wallets/${e}`)}async function vu(e){return(await gn.post(`/api/crypto/wallets/${e}/sync`)).data}async function wu(e){return(await gn.get(`/api/crypto/wallets/${e}/portfolio`)).data}async function ju(e){return(await gn.get(`/api/crypto/wallets/${e}/defi-positions`)).data}async function ku(){return(await gn.get("/api/crypto/contracts")).data}async function Nu(e){return(await gn.post("/api/crypto/contracts",e)).data}async function _u(e){await gn.delete(`/api/crypto/contracts/${e}`)}async function Eu(e,t=30){return(await gn.get(`/api/crypto/positions/${encodeURIComponent(e)}/history`,{params:{days:t}})).data}async function Su(e){return(await gn.get(`/api/crypto/positions/${encodeURIComponent(e)}/performance`)).data}async function Cu(e,t="en"){return(await gn.get(`/api/crypto/positions/${encodeURIComponent(e)}/insights`,{params:{language:t}})).data}async function Pu(){return(await gn.get("/api/crypto/rewards/unattributed")).data}async function Ou(e,t){return(await gn.post("/api/crypto/rewards/batch-attribute",{reward_ids:e,position_id:t})).data}async function Au(e=90){return(await gn.post("/api/crypto/rewards/scan",{days:e})).data}async function Ru(e){return(await gn.post(`/api/crypto/rewards/${e}/create-transaction`)).data}async function Tu(e){return(await gn.post("/api/crypto/rewards/batch-create-transactions",{reward_ids:e})).data}async function Mu(e){return(await gn.get(`/api/crypto/positions/${encodeURIComponent(e)}/roi`)).data}async function Du(e){return(await gn.get(`/api/crypto/positions/${encodeURIComponent(e)}/rewards`)).data}async function Iu(e){return(await gn.post("/api/crypto/positions/scenarios",e)).data}async function Lu(e="symbiotic"){return(await gn.get("/api/crypto/rewards/staking",{params:{source:e}})).data}const Fu=["bank","cash","investment","receivable","crypto"];function Ku({monthlyNet:e,monthlyNetChange:t}){const{t:r}=Oe("common"),{data:n}=hu(),{currency:s}=En(),{isPrivacyMode:o}=On(),l=Bc(),[c,u]=w.useState(!1),{data:d}=i({queryKey:["crypto-wallets"],queryFn:gu}),{data:h}=i({queryKey:["crypto-wallets-balance",null==d?void 0:d.map(e=>e.id)],queryFn:async()=>d&&0!==d.length?Promise.all(d.map(e=>yu(e.id))):[],enabled:!!d&&d.length>0}),{data:m}=i({queryKey:["crypto-defi-positions",null==d?void 0:d.map(e=>e.id)],queryFn:async()=>d&&0!==d.length?Promise.all(d.map(e=>ju(e.id).catch(()=>({wallet_address:"",total_value_usd:0,positions:[]})))):[],enabled:!!d&&d.length>0}),f=((null==h?void 0:h.reduce((e,t)=>e+(Number(t.total_balance_usd)||0),0))||0)+((null==m?void 0:m.reduce((e,t)=>e+(Number(t.total_value_usd)||0),0))||0),p=1/(Number(null==l?void 0:l.USD)||.00667),g=Math.round(f*p)||0,y=(null==n?void 0:n.filter(e=>Fu.includes(e.type)).reduce((e,t)=>e+t.current_balance,0))||0,x=(null==n?void 0:n.filter(e=>!Fu.includes(e.type)).reduce((e,t)=>e+Math.abs(t.current_balance),0))||0,b=y+g-x,v=w.useMemo(()=>e=>tc(e,s,l,!1,o),[s,l,o]);return a.jsx("div",{className:"mb-6 cursor-pointer",onClick:()=>u(!c),children:a.jsx(wc,{className:"hover:shadow-md transition-shadow bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:a.jsxs("div",{className:"text-center py-2",children:[a.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wide",children:r("dashboard.netWorth","Net Worth")}),a.jsx("p",{className:Pa("text-4xl sm:text-5xl font-bold font-numbers tracking-tight",b>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:a.jsx(uu,{end:b,duration:1200,formatter:v})}),void 0!==e&&a.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[a.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[r("dashboard.thisMonth","This month"),":"]}),a.jsxs("span",{className:Pa("flex items-center gap-1 text-sm font-medium",e>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e>=0?a.jsx(q,{size:14}):a.jsx(he,{size:14}),e>=0?"+":"",tc(e,s,l,!1,o)]}),null!=t&&a.jsxs("span",{className:Pa("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",t>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:[t>0?a.jsx(q,{size:10}):t<0?a.jsx(he,{size:10}):a.jsx(me,{size:10}),t>0?"+":"",null==t?void 0:t.toFixed(0),"%"]})]}),c&&a.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 text-sm",children:[a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r("dashboard.assets","Assets")}),a.jsx("span",{className:"font-numbers text-green-600 dark:text-green-400",children:tc(y,s,l,!1,o)})]}),g>0&&a.jsxs("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r("crypto.totalBalance","Crypto")}),a.jsx("span",{className:"font-numbers text-purple-600 dark:text-purple-400",children:tc(g,s,l,!1,o)})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:r("dashboard.liabilities","Liabilities")}),a.jsxs("span",{className:"font-numbers text-red-600 dark:text-red-400",children:["-",tc(x,s,l,!1,o)]})]})]})]})})})}function qu({income:e,expense:t,budgetCategories:r=[],goals:n=[],previousScore:s}){const{t:o}=Oe("common"),[i,l]=w.useState(!1),c=(u={income:e,expense:t,budgetCategories:r,goals:n},w.useMemo(()=>{const{income:e,expense:t,budgetCategories:r=[],goals:n=[]}=u,a=e>0?(e-t)/e*100:0;let s=0;s=a>=20?40:a>=15?35:a>=10?30:a>=5?20:a>=0?10:0;let o=30,i=100;r.length>0&&(i=r.filter(e=>e.spent<=e.allocated).length/r.length*100,o=Math.round(i/100*30));let l=30,c=100;n.length>0&&(c=n.reduce((e,t)=>e+Math.min(t.progress,100),0)/n.length,l=Math.round(c/100*30));const d=s+o+l;let h="F";d>=90?h="A":d>=80?h="B":d>=70?h="C":d>=60&&(h="D");const m=[];return a<10&&m.push("tip.increaseSavings"),i<80&&r.length>0&&m.push("tip.stayWithinBudget"),c<80&&n.length>0&&m.push("tip.focusOnGoals"),a<0&&m.push("tip.reduceSpending"),0===m.length&&m.push("tip.keepItUp"),{score:d,grade:h,color:{A:"#22c55e",B:"#84cc16",C:"#eab308",D:"#f97316",F:"#ef4444"}[h],breakdown:{savingsRate:{score:s,max:40,value:Math.round(a)},budgetAdherence:{score:o,max:30,value:Math.round(i)},goalProgress:{score:l,max:30,value:Math.round(c)}},tips:m}},[u]));var u;const d=void 0!==s?c.score-s:null;return a.jsxs(wc,{className:"overflow-hidden",children:[a.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>l(!i),children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:o("health.title","Financial Health")}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:i?a.jsx(fe,{size:16}):a.jsx(pe,{size:16})})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative w-20 h-20 flex-shrink-0",children:[a.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[a.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"currentColor",strokeWidth:"6",className:"text-gray-200 dark:text-gray-700"}),a.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:c.color,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:c.score/100*226+" 226",className:"transition-all duration-1000 ease-out"})]}),a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[a.jsx("span",{className:"text-2xl font-bold",style:{color:c.color},children:a.jsx(uu,{end:c.score,duration:1e3})}),a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:c.grade})]})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:o(`health.grade.${c.grade}`,c.grade)}),null!==d&&0!==d&&a.jsxs("span",{className:Pa("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",d>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[d>0?a.jsx(q,{size:10}):a.jsx(he,{size:10}),d>0?"+":"",d]})]}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2",children:o(`health.description.${c.grade}`,"Your finances are looking good!")})]})]})]}),i&&a.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 dark:border-gray-800 pt-3 animate-modal-in",children:[a.jsxs("div",{className:"space-y-3 mb-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:o("health.savingsRate","Savings Rate")}),a.jsxs("span",{className:"font-medium",children:[c.breakdown.savingsRate.value,"% (",c.breakdown.savingsRate.score,"/",c.breakdown.savingsRate.max,")"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:c.breakdown.savingsRate.score/c.breakdown.savingsRate.max*100+"%"}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:o("health.budgetAdherence","Budget Adherence")}),a.jsxs("span",{className:"font-medium",children:[c.breakdown.budgetAdherence.value,"% (",c.breakdown.budgetAdherence.score,"/",c.breakdown.budgetAdherence.max,")"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-500",style:{width:c.breakdown.budgetAdherence.score/c.breakdown.budgetAdherence.max*100+"%"}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[a.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:o("health.goalProgress","Goal Progress")}),a.jsxs("span",{className:"font-medium",children:[c.breakdown.goalProgress.value,"% (",c.breakdown.goalProgress.score,"/",c.breakdown.goalProgress.max,")"]})]}),a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-500",style:{width:c.breakdown.goalProgress.score/c.breakdown.goalProgress.max*100+"%"}})})]})]}),c.tips.length>0&&a.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(ge,{size:16,className:"text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-sm text-amber-800 dark:text-amber-300",children:o(`health.${c.tips[0]}`,c.tips[0])})]})})]})]})}function Bu({categories:e,income:t,expense:r,previousIncome:n,previousExpense:s}){const{t:o}=Oe("common"),[i,l]=w.useState(!1);w.useEffect(()=>{localStorage.getItem("spendingInsightsDismissed")&&l(!0)},[]);const c=()=>{l(!1),localStorage.removeItem("spendingInsightsDismissed")};if(i)return a.jsx("div",{className:"relative",children:a.jsxs("button",{onClick:c,className:"w-full text-left text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center gap-2",children:[a.jsx(ye,{size:14}),o("insights.showAgain","Show spending insights")]})});const u=w.useMemo(()=>{const n=[],i=t>0?r/t*100:0;if(i>90?n.push({type:"warning",icon:a.jsx(ye,{size:16}),title:o("insights.highSpending","High Spending Alert"),description:o("insights.highSpendingDesc","You're spending {{ratio}}% of your income",{ratio:Math.round(i)}),value:`${Math.round(i)}%`}):i<50&&n.push({type:"positive",icon:a.jsx(he,{size:16}),title:o("insights.goodSavings","Great Savings!"),description:o("insights.goodSavingsDesc","You're saving {{ratio}}% of your income",{ratio:Math.round(100-i)}),value:`${Math.round(100-i)}%`}),s&&s>0){const e=(r-s)/s*100;e>20?n.push({type:"warning",icon:a.jsx(q,{size:16}),title:o("insights.spendingUp","Spending Increased"),description:o("insights.spendingUpDesc","Up {{change}}% from last month",{change:Math.round(e)}),value:`+${Math.round(e)}%`}):e<-10&&n.push({type:"positive",icon:a.jsx(he,{size:16}),title:o("insights.spendingDown","Spending Decreased"),description:o("insights.spendingDownDesc","Down {{change}}% from last month",{change:Math.abs(Math.round(e))}),value:`${Math.round(e)}%`})}if(e.length>0){const t=e[0];t.percentage>40&&n.push({type:"neutral",icon:a.jsx(ye,{size:16}),title:o("insights.topCategory","Top Category: {{category}}",{category:o(`category.${t.category}`,t.category)}),description:o("insights.topCategoryDesc","{{percentage}}% of your spending",{percentage:Math.round(t.percentage)}),value:Zl(t.amount)})}return e.forEach(e=>{if(e.previous_amount&&e.previous_amount>0){const t=(e.amount-e.previous_amount)/e.previous_amount*100;t>50&&e.amount>.1*r&&n.push({type:"warning",icon:a.jsx(ye,{size:16}),title:o("insights.unusualSpending","Unusual: {{category}}",{category:o(`category.${e.category}`,e.category)}),description:o("insights.unusualSpendingDesc","Up {{change}}% vs last month",{change:Math.round(t)}),value:Zl(e.amount)})}}),n.slice(0,3)},[e,t,r,n,s,o]);return 0===u.length?null:a.jsxs(wc,{className:"overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:o("insights.title","Spending Insights")}),a.jsx("button",{onClick:()=>{l(!0),localStorage.setItem("spendingInsightsDismissed","true")},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":o("button.dismiss","Dismiss"),children:a.jsx(T,{size:14})})]}),a.jsx("div",{className:"space-y-3",children:u.map((e,t)=>a.jsxs("div",{className:Pa("flex items-start gap-3 p-3 rounded-lg transition-colors","warning"===e.type&&"bg-amber-50 dark:bg-amber-900/20","positive"===e.type&&"bg-green-50 dark:bg-green-900/20","neutral"===e.type&&"bg-gray-50 dark:bg-gray-800/50"),children:[a.jsx("div",{className:Pa("p-1.5 rounded-full flex-shrink-0","warning"===e.type&&"bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-400","positive"===e.type&&"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-400","neutral"===e.type&&"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:e.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm truncate",children:e.title}),e.value&&a.jsx("span",{className:Pa("text-sm font-semibold flex-shrink-0","warning"===e.type&&"text-amber-600 dark:text-amber-400","positive"===e.type&&"text-green-600 dark:text-green-400","neutral"===e.type&&"text-gray-600 dark:text-gray-400"),children:e.value})]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:e.description})]})]},t))})]})}function zu({currentMonth:e,previousMonth:t}){const{t:r}=Oe("common"),n=w.useMemo(()=>{if(!t)return[];const n=(e,t,r=!1)=>{const n=e-t,a=t>0?n/t*100:0;return{change:n,changePercent:a,isPositive:r?n<0:n>0,isNeutral:Math.abs(a)<1}},a=n(e.income,t.income),s=n(e.expenses,t.expenses,!0),o=n(e.net,t.net);return[{label:r("comparison.income","Income"),current:e.income,previous:t.income,...a},{label:r("comparison.expenses","Expenses"),current:e.expenses,previous:t.expenses,...s},{label:r("comparison.savings","Savings"),current:e.net,previous:t.net,...o}]},[e,t,r]);return t?a.jsxs(wc,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(xe,{size:16,className:"text-gray-400"}),a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:r("comparison.title","Month vs Month")})]}),a.jsx("div",{className:"space-y-4",children:n.map(e=>a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:e.label}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:Zl(e.current)}),!e.isNeutral&&a.jsxs("span",{className:Pa("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",e.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[e.isPositive?a.jsx(q,{size:10}):a.jsx(he,{size:10}),e.changePercent>0?"+":"",Math.round(e.changePercent),"%"]}),e.isNeutral&&a.jsxs("span",{className:"flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:[a.jsx(me,{size:10}),"0%"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 h-2",children:[a.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,e.previous/Math.max(e.current,e.previous)*100))}%`}})}),a.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:a.jsx("div",{className:Pa("h-full rounded-full transition-all duration-500",e.isPositive?"bg-green-500":e.isNeutral?"bg-gray-400":"bg-red-500"),style:{width:`${Math.min(100,Math.max(0,e.current/Math.max(e.current,e.previous)*100))}%`}})})]}),a.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[a.jsx("span",{children:r("comparison.lastMonth","Last month")}),a.jsx("span",{children:r("comparison.thisMonth","This month")})]})]})},e.label))})]}):null}function Uu({income:e,expense:t,savingsRate:r,budgetCategories:n=[],goals:s=[]}){const{t:o}=Oe("common"),i=w.useMemo(()=>{const i=[];t>e&&e>0&&i.push({id:"overspending",type:"danger",icon:a.jsx(ye,{size:16}),title:o("alerts.overspending","Overspending Alert"),description:o("alerts.overspendingDesc","Expenses exceed income by {{amount}}",{amount:Zl(t-e)})}),r<10&&r>=0&&e>0&&i.push({id:"low-savings",type:"warning",icon:a.jsx($,{size:16}),title:o("alerts.lowSavings","Low Savings Rate"),description:o("alerts.lowSavingsDesc","Only saving {{rate}}% of income",{rate:Math.round(r)})});const l=n.filter(e=>e.spent>e.allocated&&e.allocated>0);if(l.length>0){const e=l.reduce((e,t)=>t.spent-t.allocated>e.spent-e.allocated?t:e);i.push({id:"budget-exceeded",type:"warning",icon:a.jsx(q,{size:16}),title:o("alerts.budgetExceeded","Budget Exceeded"),description:o("alerts.budgetExceededDesc","{{category}} is {{amount}} over budget",{category:o(`category.${e.category}`,e.category),amount:Zl(e.spent-e.allocated)})})}const c=new Date;return s.forEach(e=>{if(e.deadline){const t=new Date(e.deadline),r=Math.ceil((t.getTime()-c.getTime())/864e5),n=e.target>0?e.current/e.target*100:0;r<=30&&r>0&&n<80&&i.push({id:`goal-${e.name}`,type:"info",icon:a.jsx(W,{size:16}),title:o("alerts.goalDeadline","Goal Deadline"),description:o("alerts.goalDeadlineDesc","{{name}}: {{days}} days left, {{progress}}% complete",{name:e.name,days:r,progress:Math.round(n)})})}}),i.slice(0,3)},[e,t,r,n,s,o]);return 0===i.length?null:a.jsxs(wc,{className:"overflow-hidden border-l-4 border-l-amber-500",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(be,{size:16,className:"text-amber-500"}),a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:o("alerts.title","Smart Alerts")}),a.jsx("span",{className:"ml-auto px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:i.length})]}),a.jsx("div",{className:"space-y-3",children:i.map(e=>a.jsxs("div",{className:Pa("flex items-start gap-3 p-3 rounded-lg","danger"===e.type&&"bg-red-50 dark:bg-red-900/20","warning"===e.type&&"bg-amber-50 dark:bg-amber-900/20","info"===e.type&&"bg-blue-50 dark:bg-blue-900/20"),children:[a.jsx("div",{className:Pa("p-1.5 rounded-full flex-shrink-0","danger"===e.type&&"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-400","warning"===e.type&&"bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-400","info"===e.type&&"bg-blue-100 text-blue-600 dark:bg-blue-800 dark:text-blue-400"),children:e.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("span",{className:Pa("font-medium text-sm","danger"===e.type&&"text-red-800 dark:text-red-300","warning"===e.type&&"text-amber-800 dark:text-amber-300","info"===e.type&&"text-blue-800 dark:text-blue-300"),children:e.title}),a.jsx("p",{className:Pa("text-xs mt-0.5","danger"===e.type&&"text-red-600 dark:text-red-400","warning"===e.type&&"text-amber-600 dark:text-amber-400","info"===e.type&&"text-blue-600 dark:text-blue-400"),children:e.description})]})]},e.id))})]})}function $u({onAddTransaction:e,onScanReceipt:t,className:r}){const{t:n}=Oe("common"),s=m(),o=e||(()=>s({to:"/transactions"})),i=t||(()=>s({to:"/transactions"})),l=[{icon:a.jsx(G,{size:22}),label:n("quickActions.add","Add"),onClick:o,color:"bg-primary-500 text-white"},{icon:a.jsx(ve,{size:22}),label:n("quickActions.scan","Scan"),onClick:i,color:"bg-purple-500 text-white"},{icon:a.jsx(K,{size:22}),label:n("quickActions.upload","Upload"),to:"/upload",color:"bg-blue-500 text-white"},{icon:a.jsx(q,{size:22}),label:n("quickActions.analytics","Analytics"),to:"/analytics",color:"bg-green-500 text-white"},{icon:a.jsx($,{size:22}),label:n("quickActions.accounts","Accounts"),to:"/accounts",color:"bg-orange-500 text-white"},{icon:a.jsx(W,{size:22}),label:n("quickActions.goals","Goals"),to:"/goals",color:"bg-pink-500 text-white"}];return a.jsx("div",{className:Pa("overflow-x-auto scrollbar-hide -mx-4 px-4",r),children:a.jsx("div",{className:"flex gap-2.5 pb-2 min-w-max",children:l.map((e,t)=>{const r=a.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[a.jsx("div",{className:Pa("w-14 h-14 rounded-2xl flex items-center justify-center","transition-transform active:scale-95",e.color),children:e.icon}),a.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:e.label})]});return e.to?a.jsx(u,{to:e.to,className:"flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-xl p-0.5",children:r},t):a.jsx("button",{onClick:e.onClick,className:"flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-xl p-0.5",children:r},t)})})})}async function Wu(e){const t=new URLSearchParams;(null==e?void 0:e.start)&&t.append("start_date",e.start),(null==e?void 0:e.end)&&t.append("end_date",e.end);return(await gn.get(`/api/analytics?${t.toString()}`)).data}async function Vu(e){const t=new URLSearchParams;(null==e?void 0:e.start)&&t.append("start_date",e.start),(null==e?void 0:e.end)&&t.append("end_date",e.end);return(await gn.get(`/api/analytics/categories?${t.toString()}`)).data}async function Gu(){return(await gn.get("/api/analytics/insights")).data}function Hu(){const{t:e}=Oe("common"),{currency:t}=En(),{data:r}=qc(),{data:n,isLoading:s,error:o}=i({queryKey:["forecast",6],queryFn:()=>async function(e=6){return(await gn.get(`/api/analytics/forecast?months=${e}`)).data}(6),staleTime:3e5});if(s)return a.jsxs(wc,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[a.jsx(Gc,{className:"h-6 w-6 rounded"}),a.jsx(Gc,{className:"h-6 w-48"})]}),a.jsx(Gc,{className:"h-80 w-full rounded-lg"}),a.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[a.jsx(Gc,{className:"h-20 rounded-lg"}),a.jsx(Gc,{className:"h-20 rounded-lg"})]})]});if(o||!n)return a.jsxs(wc,{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx(xe,{className:"w-5 h-5 text-gray-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("forecast.title")})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-gray-500",children:[a.jsx(ye,{className:"w-8 h-8 mb-2"}),a.jsx("p",{children:e("forecast.error")})]})]});const{months:l,summary:c,current_balance:u}=n,d=l&&l.length>0,h=l[l.length-1],m=c.end_balance-u,f=m>=0,p=null!==c.months_until_negative;return a.jsxs(wc,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(xe,{className:"w-5 h-5 text-primary-500"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("forecast.title")})]}),p&&a.jsxs("div",{className:"flex items-center gap-1 text-sm text-amber-600 dark:text-amber-400",children:[a.jsx(ye,{className:"w-4 h-4"}),a.jsx("span",{children:e("forecast.warningNegative",{months:c.months_until_negative})})]})]}),d?a.jsx("div",{className:"h-80",role:"img","aria-label":e("forecast.chartLabel"),children:a.jsx(iu,{data:l})}):a.jsx("div",{className:"flex items-center justify-center h-80 text-gray-400 dark:text-gray-500",children:e("forecast.noData")}),d&&a.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{className:Pa("p-4 rounded-lg",f?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e("forecast.projectedBalance",{month:null==h?void 0:h.month.split("-")[1]})}),a.jsx("p",{className:Pa("text-2xl font-bold",f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:Zl(c.end_balance,t,(null==r?void 0:r.rates)||{},!1)}),a.jsxs("div",{className:Pa("flex items-center gap-1 mt-1 text-sm",f?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[f?a.jsx(q,{className:"w-4 h-4"}):a.jsx(he,{className:"w-4 h-4"}),a.jsxs("span",{children:[f?"+":"",Zl(m,t,(null==r?void 0:r.rates)||{},!1)]})]})]}),a.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e("forecast.avgMonthlySavings")}),a.jsxs("p",{className:Pa("text-2xl font-bold",c.avg_monthly_net>=0?"text-gray-900 dark:text-gray-100":"text-red-600 dark:text-red-400"),children:[c.avg_monthly_net>=0?"+":"",Zl(c.avg_monthly_net,t,(null==r?void 0:r.rates)||{},!1)]}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("forecast.perMonth")})]})]})]})}function Yu(){const{t:e}=Oe("common"),[t,r]=w.useState(!1);w.useEffect(()=>{"true"===localStorage.getItem("onboarding_dismissed")&&r(!0)},[]);const{data:n=[]}=i({queryKey:["accounts"],queryFn:()=>du()}),{data:s=[]}=i({queryKey:["transactions-check"],queryFn:()=>Bl()}),{data:o=[]}=i({queryKey:["goals"],queryFn:Ds}),l=n.length>0,c=s.length>0,d=o.length>0,h=[{id:"account",titleKey:"onboarding.steps.account.title",descriptionKey:"onboarding.steps.account.description",icon:a.jsx($,{className:"h-5 w-5"}),link:"/accounts",isComplete:l},{id:"upload",titleKey:"onboarding.steps.upload.title",descriptionKey:"onboarding.steps.upload.description",icon:a.jsx(K,{className:"h-5 w-5"}),link:"/upload",isComplete:c},{id:"goals",titleKey:"onboarding.steps.goals.title",descriptionKey:"onboarding.steps.goals.description",icon:a.jsx(W,{className:"h-5 w-5"}),link:"/goals",isComplete:d}],m=h.filter(e=>e.isComplete).length,f=m===h.length,p=Math.round(m/h.length*100);if(t||f)return null;return a.jsxs(wc,{className:"mb-6 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-950 dark:to-blue-950 border-primary-200 dark:border-primary-800",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:a.jsx(Y,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("onboarding.title")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("onboarding.subtitle",{completed:m,total:h.length})})]})]}),a.jsx("button",{onClick:()=>{localStorage.setItem("onboarding_dismissed","true"),r(!0)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":e("button.close"),children:a.jsx(T,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${p}%`}})})}),a.jsx("div",{className:"space-y-2",children:h.map(t=>a.jsxs(u,{to:t.link,className:"flex items-center gap-3 p-3 rounded-lg transition-colors "+(t.isComplete?"bg-green-50 dark:bg-green-950/50":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-750"),children:[a.jsx("div",{className:"p-2 rounded-full "+(t.isComplete?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"),children:t.isComplete?a.jsx(we,{className:"h-5 w-5"}):t.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium "+(t.isComplete?"text-green-700 dark:text-green-400 line-through":"text-gray-900 dark:text-gray-100"),children:e(t.titleKey)}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e(t.descriptionKey)})]}),!t.isComplete&&a.jsx(je,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]},t.id))})]})}function Ju({icon:e,title:t,description:r,action:n,className:s,compact:o=!1}){return a.jsxs("div",{className:Pa("flex flex-col items-center justify-center px-4",o?"py-6":"py-12",s),children:[e&&a.jsx("div",{className:Pa("flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",o?"w-12 h-12 mb-3":"w-16 h-16 mb-4"),children:a.jsx("div",{className:Pa("text-gray-400 dark:text-gray-500",o?"[&>svg]:w-6 [&>svg]:h-6":"[&>svg]:w-8 [&>svg]:h-8"),children:e})}),a.jsx("h3",{className:Pa("font-medium text-gray-700 dark:text-gray-300 text-center",o?"text-sm mb-1":"text-lg mb-2"),children:t}),r&&a.jsx("p",{className:Pa("text-gray-500 dark:text-gray-400 text-center max-w-sm",o?"text-xs mb-3":"text-sm mb-4"),children:r}),n&&a.jsx("div",{className:o?"mt-1":"mt-2",children:n})]})}function Qu(){return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(Gc,{className:"w-40 h-8 mb-2"}),a.jsx(Gc,{className:"w-56 h-5"})]}),a.jsx(Zc,{className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[a.jsx(Jc,{}),a.jsx(Jc,{}),a.jsx(Jc,{})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[a.jsxs(wc,{className:"lg:col-span-2 h-80",children:[a.jsx(Gc,{className:"w-32 h-5 mb-4"}),a.jsx(Gc,{className:"w-full h-56"})]}),a.jsxs(wc,{children:[a.jsx(Gc,{className:"w-28 h-5 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Gc,{className:"w-full h-12 rounded-lg"}),a.jsx(Gc,{className:"w-full h-12 rounded-lg"}),a.jsx(Gc,{className:"w-full h-12 rounded-lg"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(wc,{children:[a.jsx(Gc,{className:"w-40 h-5 mb-6"}),a.jsx(Qc,{})]}),a.jsxs(wc,{children:[a.jsx(Gc,{className:"w-36 h-5 mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Xc,{}),a.jsx(Xc,{})]})]})]})]})}const Xu={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},Zu={date:De({formats:{full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:De({formats:{full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:De({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},ed={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},td={ordinalNumber:(e,t)=>{const r=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${r}`;case"quarter":return`${r}`;case"month":return`${r}`;case"week":return`${r}`;case"date":return`${r}`;case"hour":return`${r}`;case"minute":return`${r}`;case"second":return`${r}`;default:return`${r}`}},era:Ie({values:{narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},defaultWidth:"wide"}),quarter:Ie({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Ie({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},defaultWidth:"wide"}),day:Ie({values:{narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},defaultWidth:"wide"}),dayPeriod:Ie({values:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultWidth:"wide",formattingValues:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultFormattingWidth:"wide"})},rd={code:"ja",formatDistance:(e,t,r)=>{let n;r=r||{};const a=Xu[e];return n="string"==typeof a?a:1===t?r.addSuffix&&a.oneWithSuffix?a.oneWithSuffix:a.one:r.addSuffix&&a.otherWithSuffix?a.otherWithSuffix.replace("{{count}}",String(t)):a.other.replace("{{count}}",String(t)),r.addSuffix?r.comparison&&r.comparison>0?n+"":n+"":n},formatLong:Zu,formatRelative:(e,t,r,n)=>ed[e],localize:td,match:{ordinalNumber:Fe({matchPattern:/^?\d+(|||||||)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Le({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},defaultParseWidth:"any"}),quarter:Le({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Le({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:Le({matchPatterns:{narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},defaultMatchWidth:"wide",parsePatterns:{any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},defaultParseWidth:"any"}),dayPeriod:Le({matchPatterns:{any:/^(AM|PM|||||||)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function nd(e,t="yyyy/MM/dd"){try{const r="string"==typeof e?Ke(e):e;return qe(r)?Be(r,t,{locale:rd}):"---"}catch{return"---"}}function ad(e){return nd(e,"yyyyMd HH:mm")}function sd(){const e=new Date,t=e.getFullYear();return{start:`${t}-${String(e.getMonth()+1).padStart(2,"0")}-01`,end:Be(new Date(t,e.getMonth()+1,0),"yyyy-MM-dd")}}function od(e){return nd(e,"MMM d (EEE)")}async function id(e){return(await gn.post("/api/proxy/purchase",e)).data}async function ld(){return(await gn.get("/api/proxy/outstanding")).data}async function cd(e){return(await gn.post("/api/proxy/settle",e)).data}function ud(e){const t=e.replace(/[^\d]/g,"");return t?parseInt(t).toLocaleString("en-US"):""}function dd(e){return parseInt(e.replace(/[,.\s]/g,""),10)||0}function hd({isOpen:e,onClose:t}){const{t:r}=Oe("common"),n=h(),{data:s=[]}=hu(),{data:o}=qc(),[i,l]=w.useState(1),[c,u]=w.useState(null),[d,m]=w.useState(""),[f,p]=w.useState(""),[g,x]=w.useState(null),[b,j]=w.useState((new Date).toISOString().split("T")[0]),[k,N]=w.useState(""),[_,E]=w.useState(""),[S,C]=w.useState(""),[P,O]=w.useState({}),A=w.useMemo(()=>s.filter(e=>"receivable"===e.type&&e.is_active),[s]),R=w.useMemo(()=>s.filter(e=>"receivable"!==e.type&&e.is_active),[s]),M=w.useMemo(()=>{var e;return(null==(e=null==o?void 0:o.rates)?void 0:e.VND)?o.rates.VND:170},[o]),D=dd(f),I=dd(k),L=I*(parseFloat(_)||M),F=I-D,K=D>0?(F/D*100).toFixed(1):"0";w.useEffect(()=>{e&&(l(1),u(null),m(""),p(""),x(null),j((new Date).toISOString().split("T")[0]),N(""),E(M.toFixed(1)),C(""),O({}))},[e,M]),w.useEffect(()=>{!_&&M&&E(M.toFixed(1))},[M]);const q=y({mutationFn:id,onSuccess:()=>{n.invalidateQueries({queryKey:["transactions"]}),n.invalidateQueries({queryKey:["accounts"]}),n.invalidateQueries({queryKey:["proxy-outstanding"]}),t()}}),B=A.find(e=>e.id===c);if(!e)return null;const z=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ke,{className:"w-5 h-5 text-blue-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:r("proxy.title")})]}),a.jsx("button",{onClick:t,className:"p-2.5 -mr-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a.jsx(T,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"px-4 pt-4",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[a.jsx("span",{children:r("proxy.step",{current:i,total:2})}),a.jsx("span",{children:""}),a.jsx("span",{children:r(1===i?"proxy.step1Title":"proxy.step2Title")})]}),a.jsxs("div",{className:"flex gap-1",children:[a.jsx("div",{className:Pa("h-1 flex-1 rounded",i>=1?"bg-blue-500":"bg-gray-200 dark:bg-gray-700")}),a.jsx("div",{className:Pa("h-1 flex-1 rounded",i>=2?"bg-blue-500":"bg-gray-200 dark:bg-gray-700")})]})]}),a.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:1===i?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.client")," *"]}),a.jsxs("select",{value:c||"",onChange:e=>u(Number(e.target.value)||null),className:Pa("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",P.client?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[a.jsx("option",{value:"",children:r("proxy.selectClient")}),A.map(e=>a.jsx("option",{value:e.id,children:e.name.replace("Receivable: ","")},e.id))]}),P.client&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.client}),0===A.length&&a.jsx("p",{className:"text-amber-600 text-xs mt-1",children:r("proxy.noClients")})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.item")," *"]}),a.jsx(vc,{value:d,onChange:e=>m(e.target.value),placeholder:r("proxy.itemPlaceholder"),className:P.item?"border-red-500":""}),P.item&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.item})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.cost")," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),a.jsx(vc,{value:f,onChange:e=>p(ud(e.target.value)),placeholder:"1,000",className:Pa("pl-8",P.cost?"border-red-500":""),inputMode:"numeric"})]}),P.cost&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.cost})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.paymentMethod")," *"]}),a.jsxs("select",{value:g||"",onChange:e=>x(Number(e.target.value)||null),className:Pa("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",P.payment?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[a.jsx("option",{value:"",children:r("proxy.selectPayment")}),R.map(e=>a.jsx("option",{value:e.id,children:e.name},e.id))]}),P.payment&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.payment})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:r("proxy.purchaseDate")}),a.jsx(vc,{type:"date",value:b,onChange:e=>j(e.target.value)})]})]}):a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[a.jsx("span",{children:""}),a.jsx("span",{className:"font-medium",children:d})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[r("proxy.yourCost"),": ",f]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[a.jsx("span",{children:""}),a.jsxs("span",{children:[r("proxy.client"),": ",null==B?void 0:B.name.replace("Receivable: ","")]})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[r("proxy.markupPrice")," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),a.jsx(vc,{value:k,onChange:e=>N(ud(e.target.value)),placeholder:"1,200",className:Pa("pl-8",P.markup?"border-red-500":""),inputMode:"numeric"})]}),P.markup&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.markup}),a.jsx("div",{className:"flex gap-2 mt-2",children:[10,15,20].map(e=>a.jsxs("button",{type:"button",onClick:()=>N(ud(String(Math.round(D*(1+e/100))))),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:["+",e,"%"]},e))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:r("proxy.exchangeRate")}),a.jsxs("div",{className:"relative",children:[a.jsx(vc,{value:_,onChange:e=>E(e.target.value),placeholder:"170",className:P.rate?"border-red-500":"",inputMode:"decimal"}),a.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"VND/JPY"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[r("proxy.currentRate"),": ",M.toFixed(1)," VND/JPY"]}),P.rate&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:P.rate})]}),a.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsxs("span",{children:[r("proxy.clientPays"),":"]}),a.jsxs("span",{className:"font-bold",children:["",L.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsxs("span",{children:[r("proxy.yourProfit"),":"]}),a.jsxs("span",{className:Pa("font-bold",F>=0?"text-green-600":"text-red-600"),children:["",F.toLocaleString()]})]}),a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[r("proxy.profitMargin"),":"]}),a.jsxs("span",{className:"font-medium",children:[K,"%"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:r("proxy.notes")}),a.jsx("textarea",{value:S,onChange:e=>C(e.target.value),placeholder:r("proxy.notesPlaceholder"),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 resize-none",rows:2})]})]})}),a.jsx("div",{className:"flex justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:1===i?a.jsxs(a.Fragment,{children:[a.jsx(bc,{variant:"secondary",onClick:t,children:r("button.cancel")}),a.jsxs(bc,{onClick:()=>{(()=>{const e={};return c||(e.client=r("proxy.errors.clientRequired")),d.trim()||(e.item=r("proxy.errors.itemRequired")),(!f||dd(f)<=0)&&(e.cost=r("proxy.errors.costRequired")),g||(e.payment=r("proxy.errors.paymentRequired")),O(e),0===Object.keys(e).length})()&&(k||N(f),l(2))},disabled:0===A.length,children:[r("button.next")," ",a.jsx(Ne,{className:"w-4 h-4 ml-1"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs(bc,{variant:"secondary",onClick:()=>l(1),children:[a.jsx(_e,{className:"w-4 h-4 mr-1"})," ",r("button.back")]}),a.jsx(bc,{onClick:()=>{(()=>{const e={};return(!k||dd(k)<=0)&&(e.markup=r("proxy.errors.markupRequired")),(!_||parseFloat(_)<=0)&&(e.rate=r("proxy.errors.rateRequired")),O(e),0===Object.keys(e).length})()&&q.mutate({client_account_id:c,item:d.trim(),cost:dd(f),payment_account_id:g,markup_price:dd(k),exchange_rate:parseFloat(_),purchase_date:b,notes:S.trim()||void 0})},disabled:q.isPending,children:q.isPending?r("button.creating"):r("proxy.createPurchase")})]})})]})]});return"undefined"==typeof document?null:v.createPortal(z,document.body)}function md(e){const t=e.replace(/[^\d]/g,"");return t?parseInt(t).toLocaleString("en-US"):""}function fd(e){return parseInt(e.replace(/[,.\s]/g,""),10)||0}function pd({isOpen:e,onClose:t,client:r}){const{t:n}=Oe("common"),s=h(),{data:o=[]}=hu(),[i,l]=w.useState(new Set),[c,u]=w.useState(null),[d,m]=w.useState(""),[f,p]=w.useState((new Date).toISOString().split("T")[0]),[g,x]=w.useState({}),b=w.useMemo(()=>o.filter(e=>"receivable"!==e.type&&e.is_active),[o]),j=w.useMemo(()=>r?r.items.filter(e=>i.has(e.transaction_id)):[],[r,i]),k=j.reduce((e,t)=>e+t.amount_jpy,0),N=j.reduce((e,t)=>e+t.charge_vnd,0);w.useEffect(()=>{e&&r&&(l(new Set(r.items.map(e=>e.transaction_id))),u(null),m(""),p((new Date).toISOString().split("T")[0]),x({}))},[e,r]),w.useEffect(()=>{N>0&&m(md(String(N)))},[N]);const _=y({mutationFn:cd,onSuccess:()=>{s.invalidateQueries({queryKey:["transactions"]}),s.invalidateQueries({queryKey:["accounts"]}),s.invalidateQueries({queryKey:["proxy-outstanding"]}),t()}});if(!e||!r)return null;const E=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),a.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ee,{className:"w-5 h-5 text-green-500"}),a.jsx("h2",{className:"text-lg font-semibold",children:n("proxy.settleTitle")})]}),a.jsx("button",{onClick:t,className:"p-2.5 -mr-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:a.jsx(T,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("proxy.client")}),a.jsx("p",{className:"font-semibold text-lg",children:r.client_name}),a.jsxs("p",{className:"text-sm text-gray-500",children:[n("proxy.outstanding"),": ",r.total_jpy.toLocaleString()]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium",children:n("proxy.selectItemsToSettle")}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{r&&l(new Set(r.items.map(e=>e.transaction_id)))},className:"text-xs text-blue-500 hover:underline",children:n("proxy.selectAll")}),a.jsx("button",{onClick:()=>l(new Set),className:"text-xs text-blue-500 hover:underline",children:n("proxy.selectNone")})]})]}),a.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg max-h-40 overflow-y-auto",children:r.items.map(e=>a.jsxs("label",{className:Pa("flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50","border-b border-gray-100 dark:border-gray-700 last:border-0"),children:[a.jsx("input",{type:"checkbox",checked:i.has(e.transaction_id),onChange:()=>{return t=e.transaction_id,void l(e=>{const r=new Set(e);return r.has(t)?r.delete(t):r.add(t),r});var t},className:"rounded border-gray-300 text-blue-600"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium truncate",children:e.item}),a.jsx("p",{className:"text-xs text-gray-500",children:e.date})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-mono text-sm",children:["",e.amount_jpy.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["",e.charge_vnd.toLocaleString()]})]})]},e.transaction_id))}),g.items&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.items})]}),a.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg mb-4",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{children:[n("proxy.settlementAmount")," (JPY):"]}),a.jsxs("span",{className:"font-bold",children:["",k.toLocaleString()]})]})}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[n("proxy.receiveTo")," *"]}),a.jsxs("select",{value:c||"",onChange:e=>u(Number(e.target.value)||null),className:Pa("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",g.receive?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[a.jsx("option",{value:"",children:n("proxy.selectAccount")}),b.map(e=>a.jsxs("option",{value:e.id,children:[e.name," (",e.currency,")"]},e.id))]}),g.receive&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.receive})]}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("label",{className:"block text-sm font-medium mb-1",children:[n("proxy.amountReceived")," *"]}),a.jsxs("div",{className:"relative",children:[a.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),a.jsx(vc,{value:d,onChange:e=>m(md(e.target.value)),placeholder:"544,000",className:Pa("pl-8",g.amount?"border-red-500":""),inputMode:"numeric"})]}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[n("proxy.expected"),": ",N.toLocaleString()]}),g.amount&&a.jsx("p",{className:"text-red-500 text-xs mt-1",children:g.amount})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-1",children:n("proxy.paymentDate")}),a.jsx(vc,{type:"date",value:f,onChange:e=>p(e.target.value)})]})]}),a.jsxs("div",{className:"flex justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(bc,{variant:"secondary",onClick:t,children:n("button.cancel")}),a.jsx(bc,{onClick:()=>{(()=>{const e={};return 0===i.size&&(e.items=n("proxy.errors.selectItems")),c||(e.receive=n("proxy.errors.receiveRequired")),(!d||fd(d)<=0)&&(e.amount=n("proxy.errors.amountRequired")),x(e),0===Object.keys(e).length})()&&r&&_.mutate({client_account_id:r.client_id,transaction_ids:Array.from(i),receive_account_id:c,vnd_amount:fd(d),payment_date:f})},disabled:_.isPending||0===i.size,children:_.isPending?n("button.processing"):n("proxy.confirmPayment")})]})]})]});return"undefined"==typeof document?null:v.createPortal(E,document.body)}function gd(){const{t:e}=Oe("common"),[t,r]=w.useState(!1),[n,s]=w.useState(null),{data:o=[],isLoading:l}=i({queryKey:["proxy-outstanding"],queryFn:ld}),c=o.reduce((e,t)=>e+t.total_jpy,0);return l?a.jsx(wc,{className:"animate-pulse",children:a.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})}):0===o.length?null:a.jsxs(a.Fragment,{children:[a.jsxs(wc,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Se,{className:"w-5 h-5 text-blue-500"}),a.jsx("h3",{className:"font-semibold",children:e("proxy.outstandingReceivables")})]}),a.jsxs("button",{onClick:()=>r(!0),className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[a.jsx(G,{className:"w-4 h-4"}),e("proxy.newPurchase")]})]}),a.jsx("div",{className:"space-y-2",children:o.map(t=>{const r=(e=>{if(!e)return 0;const t=new Date(e),r=new Date;return Math.floor((r.getTime()-t.getTime())/864e5)})(t.oldest_date);return a.jsxs("button",{onClick:()=>s(t),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:t.client_name}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t.item_count," ",e("proxy.items"),r>0&&`  ${e("proxy.oldestDays",{days:r})}`]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"text-right",children:[a.jsxs("p",{className:"font-mono font-semibold",children:["",t.total_jpy.toLocaleString()]}),a.jsxs("p",{className:"text-xs text-gray-500",children:["",t.total_vnd.toLocaleString()]})]}),a.jsx(je,{className:"w-4 h-4 text-gray-400"})]})]},t.client_id)})}),a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsxs("span",{className:"text-gray-500",children:[e("proxy.total"),":"]}),a.jsxs("span",{className:"font-bold",children:["",c.toLocaleString()]})]})})]}),a.jsx(hd,{isOpen:t,onClose:()=>r(!1)}),a.jsx(pd,{isOpen:!!n,onClose:()=>s(null),client:n})]})}const yd=g("/")({component:function(){var e,t,r,n,s,o,l,c,d,h,m;const{t:f}=Oe("common"),{data:p,isLoading:g}=i({queryKey:["dashboard-summary"],queryFn:()=>async function(){return(await gn.get("/api/dashboard/summary")).data}()}),{data:y,isLoading:x}=i({queryKey:["monthly-trends",12],queryFn:()=>async function(e=12){return(await gn.get(`/api/analytics/monthly?months=${e}`)).data}(12)}),{data:b,isLoading:v}=i({queryKey:["category-breakdown"],queryFn:()=>Vu()}),{data:w,isLoading:j}=i({queryKey:["goals"],queryFn:Ds}),{data:k,isLoading:N}=i({queryKey:["goals-progress",null==w?void 0:w.map(e=>e.id)],queryFn:async()=>w&&0!==w.length?Promise.all(w.map(e=>qs(e.id,!0))):[],enabled:!!w&&w.length>0});return g||x||v||j?a.jsx(Qu,{}):a.jsxs("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-5 sm:py-8 pb-28",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:f("dashboard.title")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:f("dashboard.subtitle",{month:(_=new Date,nd(_,"yyyyM"))})})]}),a.jsx(Yu,{}),a.jsx("section",{className:"mt-6",children:a.jsx(Ku,{monthlyNet:null==p?void 0:p.net,monthlyNetChange:null==p?void 0:p.net_change})}),a.jsx("section",{className:"mt-6",children:a.jsx($u,{})}),y&&y.length>0&&a.jsx("section",{className:"mt-6",children:a.jsx(Uu,{income:(null==(e=y[y.length-1])?void 0:e.income)||0,expense:(null==(t=y[y.length-1])?void 0:t.expenses)||0,savingsRate:(null==(r=y[y.length-1])?void 0:r.income)>0?((null==(n=y[y.length-1])?void 0:n.income)-(null==(s=y[y.length-1])?void 0:s.expenses))/(null==(o=y[y.length-1])?void 0:o.income)*100:0})}),a.jsx("section",{className:"mt-6",children:a.jsx(Hu,{})}),a.jsx("section",{className:"mt-6",children:a.jsx(Vc,{summary:p})}),y&&y.length>0&&a.jsxs("section",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsx(qu,{income:(null==(l=y[y.length-1])?void 0:l.income)||0,expense:(null==(c=y[y.length-1])?void 0:c.expenses)||0,goals:(null==k?void 0:k.map(e=>({progress:e.total_saved/e.target_amount*100})))||[]}),a.jsx(Bu,{categories:b||[],income:(null==(d=y[y.length-1])?void 0:d.income)||0,expense:(null==(h=y[y.length-1])?void 0:h.expenses)||0,previousExpense:y.length>1?null==(m=y[y.length-2])?void 0:m.expenses:void 0})]}),a.jsxs("section",{className:"mt-6 grid grid-cols-1 lg:grid-cols-3 gap-4",children:[a.jsx(lu,{data:y,className:"lg:col-span-2"}),a.jsxs("div",{className:"space-y-4",children:[y&&y.length>1&&a.jsx(zu,{currentMonth:y[y.length-1],previousMonth:y[y.length-2]}),a.jsx(cu,{})]})]}),a.jsxs("section",{className:"mt-6 grid grid-cols-1 lg:grid-cols-2 gap-4",children:[a.jsxs(wc,{className:"p-5",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100 mb-4",children:f("dashboard.categoryBreakdown")}),b&&b.length>0?a.jsxs(a.Fragment,{children:[a.jsx($c,{categories:b,maxItems:4}),a.jsx(u,{to:"/analytics",className:"mt-4 block text-center text-sm font-medium text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:f("dashboard.viewAllCategories")})]}):a.jsx(Ju,{icon:a.jsx(X,{}),title:f("dashboard.noCategories","No spending data yet"),description:f("dashboard.noCategoriesDescription","Add transactions to see your spending breakdown"),compact:!0,action:a.jsx(u,{to:"/transactions",className:"text-sm font-medium text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:f("dashboard.addTransaction","Add transaction")})})]}),a.jsxs(wc,{className:"p-5",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 dark:text-gray-100",children:f("dashboard.goalAchievability")}),a.jsx(u,{to:"/goals",className:"text-sm font-medium text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:f("dashboard.viewDetails")})]}),k&&k.length>0&&!N?a.jsx("div",{className:"space-y-4",children:k.slice(0,3).map(e=>e.achievability&&a.jsx(zc,{goalId:e.goal_id,goalName:f("dashboard.yearGoal",{years:e.years}),achievability:e.achievability,targetAmount:e.target_amount,currentAmount:e.total_saved},e.goal_id))}):w&&w.length>0?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(fc,{size:"md"})}):a.jsx(Ju,{icon:a.jsx(W,{}),title:f("dashboard.noGoals","No goals yet"),description:f("dashboard.noGoalsDescription","Set financial goals to track your progress"),compact:!0,action:a.jsx(u,{to:"/goals",className:"text-sm font-medium text-primary-600 hover:text-primary-700 dark:text-primary-400 dark:hover:text-primary-300",children:f("dashboard.createGoal","Create a goal")})})]})]}),a.jsx("section",{className:"mt-6",children:a.jsx(gd,{})})]});var _}}),xd=gc.update({id:"/upload",path:"/upload",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./upload.lazy-x1eIM732.js"),__vite__mapDeps([13,1,2,3,4,5,6])).then(e=>e.Route)),bd=yc.update({id:"/transactions",path:"/transactions",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./transactions.lazy-DP0AXEFm.js"),__vite__mapDeps([14,1,2,15,16,17,18,3,5,19,4,6])).then(e=>e.Route)),vd=xc.update({id:"/settings",path:"/settings",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./settings.lazy-vgdLymCu.js"),__vite__mapDeps([20,1,2,21,5,15,22,18,3,4,6])).then(e=>e.Route)),wd=jc.update({id:"/register",path:"/register",getParentRoute:()=>pc}),jd=kc.update({id:"/recurring",path:"/recurring",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./recurring.lazy-Cg1UbHJd.js"),__vite__mapDeps([23,1,2,22,18,3,5,15,19,4,6])).then(e=>e.Route)),kd=Nc.update({id:"/login",path:"/login",getParentRoute:()=>pc}),Nd=Mc.update({id:"/landing",path:"/landing",getParentRoute:()=>pc}),_d=Dc.update({id:"/goals",path:"/goals",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./goals.lazy-DU-5zpU_.js"),__vite__mapDeps([24,1,2,16,3,4,5,6])).then(e=>e.Route)),Ed=Ic.update({id:"/budget",path:"/budget",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./budget.lazy-BOdyaOPf.js"),__vite__mapDeps([25,1,2,3,5,18,4,6])).then(e=>e.Route)),Sd=Lc.update({id:"/analytics",path:"/analytics",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./analytics.lazy-Cw90etOy.js"),__vite__mapDeps([26,1,2,8,3,4,5,6,9,0,11,7])).then(e=>e.Route)),Cd=Fc.update({id:"/accounts",path:"/accounts",getParentRoute:()=>pc}).lazy(()=>xs(()=>import("./accounts.lazy-CyhGBUP8.js"),__vite__mapDeps([27,1,2,3,21,5,4,17,18,19,6])).then(e=>e.Route)),Pd={IndexRoute:yd.update({id:"/",path:"/",getParentRoute:()=>pc}),AccountsRoute:Cd,AnalyticsRoute:Sd,BudgetRoute:Ed,GoalsRoute:_d,LandingRoute:Nd,LoginRoute:kd,RecurringRoute:jd,RegisterRoute:wd,SettingsRoute:vd,TransactionsRoute:bd,UploadRoute:xd};function Od(){const{isOnline:e,isSyncing:t,pendingCount:r,lastError:n}=w.useContext(us),{t:s}=Oe(),[o,i]=w.useState(!1);if(w.useEffect(()=>{if(e&&!t&&0===r&&!n){i(!0);const e=setTimeout(()=>i(!1),3e3);return()=>clearTimeout(e)}},[e,t,r,n]),e&&!t&&0===r&&!o&&!n)return null;return a.jsx("div",{className:"fixed top-4 right-4 z-[9999]",role:"status","aria-live":"polite",children:a.jsxs("div",{className:`\n        flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg\n        ${e?n?"bg-red-500 dark:bg-red-600":t?"bg-blue-500 dark:bg-blue-600":"bg-green-500 dark:bg-green-600":"bg-gray-600 dark:bg-gray-700"}\n        text-white text-sm font-medium\n        transition-all duration-300 ease-in-out\n      `,children:[!e&&a.jsxs(a.Fragment,{children:[a.jsx(Ce,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:s("sync.offline","Offline")}),r>0&&a.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:r})]}),e&&n&&a.jsxs(a.Fragment,{children:[a.jsx(O,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:s("sync.error","Sync error")})]}),e&&t&&a.jsxs(a.Fragment,{children:[a.jsx(Pe,{size:16,className:"animate-spin","aria-hidden":"true"}),a.jsxs("span",{children:[s("sync.syncing","Syncing"),r>0&&` (${r})`]})]}),e&&!t&&!n&&o&&a.jsxs(a.Fragment,{children:[a.jsx(R,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:s("sync.synced","All synced")})]})]})})}const Ad=x({routeTree:pc._addFileChildren(Pd)._addFileTypes()});function Rd(){return a.jsxs(a.Fragment,{children:[a.jsx(Od,{}),a.jsx(b,{router:Ad})]})}Ae.use(Re).use(Te).use(Me).init({fallbackLng:"ja",supportedLngs:["ja","en","vi"],defaultNS:"common",ns:["common","landing"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},debug:!1}),async function(){if(!function(){try{return"undefined"!=typeof indexedDB&&null!==indexedDB}catch{return!1}}())return!1;try{await Xa.open();return await Xa.app_meta.get("app-state")||await Xa.app_meta.put({id:"app-state",schema_version:1}),!0}catch(e){return!1}}().then(e=>{}),ze.createRoot(document.getElementById("root")).render(a.jsx(E.StrictMode,{children:a.jsx(Dn,{children:a.jsx(Ge,{client:ms,persistOptions:{persister:gs,maxAge:864e5,dehydrateOptions:{shouldDehydrateQuery:e=>"success"===e.state.status&&function(e){const t=e[0];return"string"!=typeof t||!hs.includes(t)}([...e.queryKey])}},children:a.jsx(ds,{children:a.jsx(vn,{children:a.jsx(_n,{children:a.jsx(Pn,{children:a.jsx(Da,{children:a.jsx(Rd,{})})})})})})})})}));export{Vs as $,_u as A,bc as B,wc as C,gu as D,Ju as E,ku as F,kn as G,jn as H,vc as I,Fs as J,Ls as K,fc as L,Bs as M,Is as N,Ks as O,zc as P,Ds as Q,qs as R,Hc as S,Vu as T,Zl as U,Gs as V,Hs as W,zs as X,Us as Y,$s as Z,Ws as _,gn as a,qc as a0,Gu as a1,Wu as a2,fu as a3,pu as a4,mu as a5,yu as a6,wu as a7,In as a8,Iu as a9,Au as aa,Ru as ab,Tu as ac,Mu as ad,Du as ae,Lu as af,Eu as ag,Su as ah,Cu as ai,Ou as aj,Pu as ak,ju as al,ls as am,es as an,Hl as ao,Ia as ap,du as b,Pa as c,$l as d,Wl as e,ad as f,Bc as g,Ul as h,On as i,nd as j,rc as k,En as l,sd as m,Vl as n,Gl as o,tc as p,Yc as q,od as r,Jl as s,Ql as t,hu as u,Bl as v,xu as w,bu as x,vu as y,Nu as z};
