const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TrendLineChart-Cc6NPPws.js","assets/vendor-tanstack-DOuiVnRb.js","assets/vendor-react-B9eo89kj.js","assets/vendor-i18n-CtQU9zWU.js","assets/vendor-recharts-BfEtinVu.js","assets/vendor-icons-Boynwk5e.js","assets/vendor-date-fteVm545.js","assets/ZoomableChart-CODyVQ9c.js","assets/IncomeExpenseBarChart-Bm4BTOsE.js","assets/CategoryBarChart-LA4bWzNn.js","assets/CategoryPieChart-CEXJMnND.js","assets/CashFlowSummary-btHQIScg.js","assets/ForecastChart-BqPydK2H.js","assets/upload.lazy-qhbkwUpj.js","assets/transactions.lazy-DYPAn6rF.js","assets/Select-BuxQOdGm.js","assets/Badge-48IvP9fE.js","assets/recurring-service-CZDZgyPV.js","assets/RecurringOptions-Cm24qQcQ.js","assets/settings.lazy-qeQ4CMDe.js","assets/crypto-Dbpx5UD4.js","assets/RecurringTransactionsList-CML8po5F.js","assets/recurring.lazy-Cvz6NF60.js","assets/goals.lazy-B8MiVW1r.js","assets/budget.lazy-CkZdGL0a.js","assets/analytics.lazy-CAmL8o3I.js","assets/accounts.lazy-DN8p8WiY.js"])))=>i.map(i=>d[i]);
var Gl=Object.defineProperty;var Yl=(e,t,a)=>t in e?Gl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a;var Zt=(e,t,a)=>Yl(e,typeof t!="symbol"?t+"":t,a);import{h as Jl,d as Ql,j as r,Q as Xl,I as Zl,u as We,a as eu,t as Fo,L as Ve,b as sa,c as or,e as jt,f as tu,O as Bo,g as ft,k as oa,l as nu,R as ru}from"./vendor-tanstack-DOuiVnRb.js";import{a as Pt,r as g,c as Ko,g as au,$ as su,b as ou,R as iu}from"./vendor-react-B9eo89kj.js";import{c as cu,_ as it}from"./vendor-recharts-BfEtinVu.js";import{I as lu,C as qi,a as uu,b as zi,X as Bt,S as Ui,M as Wi,E as qo,c as zo,d as du,e as Fs,U as fu,L as Bs,T as Tn,f as Vi,g as hu,h as Hi,R as vs,i as ir,P as Ks,j as mu,H as pu,W as ia,k as qs,l as gu,m as yu,n as xu,o as bu,p as vu,B as Gi,G as Yi,q as Ji,r as Ct,s as wu,t as ju,u as on,v as Qi,w as ku,x as Nu,y as Su,z as nn,A as ws,D as _u,F as Eu,J as Cu,K as Xi,N as Pu,O as Au,Q as Ru,V as Ou,Y as Tu,Z as $u,_ as Du}from"./vendor-icons-Boynwk5e.js";import{u as we,i as Mu,B as Iu,a as Lu,b as Fu}from"./vendor-i18n-CtQU9zWU.js";import{b as Xa,a as Xn,c as Zn,d as Bu,p as Ku,i as qu,f as Zi}from"./vendor-date-fteVm545.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function a(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(i){if(i.ep)return;i.ep=!0;const l=a(i);fetch(i.href,l)}})();var js={},Uo=Pt;js.createRoot=Uo.createRoot,js.hydrateRoot=Uo.hydrateRoot;var zu=["added","removed","updated"];function Wo(e){return zu.includes(e)}async function Uu({queryClient:e,persister:t,maxAge:a=1e3*60*60*24,buster:s="",hydrateOptions:i}){try{const l=await t.restoreClient();if(l)if(l.timestamp){const d=Date.now()-l.timestamp>a,u=l.buster!==s;if(d||u)return t.removeClient();Jl(e,l.clientState,i)}else return t.removeClient()}catch(l){throw await t.removeClient(),l}}async function Vo({queryClient:e,persister:t,buster:a="",dehydrateOptions:s}){const i={buster:a,timestamp:Date.now(),clientState:Ql(e,s)};await t.persistClient(i)}function Wu(e){const t=e.queryClient.getQueryCache().subscribe(s=>{Wo(s.type)&&Vo(e)}),a=e.queryClient.getMutationCache().subscribe(s=>{Wo(s.type)&&Vo(e)});return()=>{t(),a()}}var Vu=({children:e,persistOptions:t,onSuccess:a,onError:s,...i})=>{const[l,d]=g.useState(!0),u=g.useRef({persistOptions:t,onSuccess:a,onError:s}),p=g.useRef(!1);return g.useEffect(()=>{u.current={persistOptions:t,onSuccess:a,onError:s}}),g.useEffect(()=>{const y={...u.current.persistOptions,queryClient:i.client};return p.current||(p.current=!0,Uu(y).then(()=>{var x,b;return(b=(x=u.current).onSuccess)==null?void 0:b.call(x)}).catch(()=>{var x,b;return(b=(x=u.current).onError)==null?void 0:b.call(x)}).finally(()=>{d(!1)})),l?void 0:Wu(y)},[i.client,l]),r.jsx(Xl,{...i,children:r.jsx(Zl,{value:l,children:e})})};function ec(e,t){return function(){return e.apply(t,arguments)}}const{toString:Hu}=Object.prototype,{getPrototypeOf:zs}=Object,{iterator:ca,toStringTag:tc}=Symbol,la=(e=>t=>{const a=Hu.call(t);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),pt=e=>(e=e.toLowerCase(),t=>la(t)===e),ua=e=>t=>typeof t===e,{isArray:$n}=Array,Rn=ua("undefined");function cr(e){return e!==null&&!Rn(e)&&e.constructor!==null&&!Rn(e.constructor)&&nt(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const nc=pt("ArrayBuffer");function Gu(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&nc(e.buffer),t}const Yu=ua("string"),nt=ua("function"),rc=ua("number"),lr=e=>e!==null&&typeof e=="object",Ju=e=>e===!0||e===!1,Yr=e=>{if(la(e)!=="object")return!1;const t=zs(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(tc in e)&&!(ca in e)},Qu=e=>{if(!lr(e)||cr(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Xu=pt("Date"),Zu=pt("File"),ed=pt("Blob"),td=pt("FileList"),nd=e=>lr(e)&&nt(e.pipe),rd=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||nt(e.append)&&((t=la(e))==="formdata"||t==="object"&&nt(e.toString)&&e.toString()==="[object FormData]"))},ad=pt("URLSearchParams"),[sd,od,id,cd]=["ReadableStream","Request","Response","Headers"].map(pt),ld=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ur(e,t,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let s,i;if(typeof e!="object"&&(e=[e]),$n(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{if(cr(e))return;const l=a?Object.getOwnPropertyNames(e):Object.keys(e),d=l.length;let u;for(s=0;s<d;s++)u=l[s],t.call(null,e[u],u,e)}}function ac(e,t){if(cr(e))return null;t=t.toLowerCase();const a=Object.keys(e);let s=a.length,i;for(;s-- >0;)if(i=a[s],t===i.toLowerCase())return i;return null}const rn=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,sc=e=>!Rn(e)&&e!==rn;function ks(){const{caseless:e,skipUndefined:t}=sc(this)&&this||{},a={},s=(i,l)=>{const d=e&&ac(a,l)||l;Yr(a[d])&&Yr(i)?a[d]=ks(a[d],i):Yr(i)?a[d]=ks({},i):$n(i)?a[d]=i.slice():(!t||!Rn(i))&&(a[d]=i)};for(let i=0,l=arguments.length;i<l;i++)arguments[i]&&ur(arguments[i],s);return a}const ud=(e,t,a,{allOwnKeys:s}={})=>(ur(t,(i,l)=>{a&&nt(i)?e[l]=ec(i,a):e[l]=i},{allOwnKeys:s}),e),dd=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),fd=(e,t,a,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),a&&Object.assign(e.prototype,a)},hd=(e,t,a,s)=>{let i,l,d;const u={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),l=i.length;l-- >0;)d=i[l],(!s||s(d,e,t))&&!u[d]&&(t[d]=e[d],u[d]=!0);e=a!==!1&&zs(e)}while(e&&(!a||a(e,t))&&e!==Object.prototype);return t},md=(e,t,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=t.length;const s=e.indexOf(t,a);return s!==-1&&s===a},pd=e=>{if(!e)return null;if($n(e))return e;let t=e.length;if(!rc(t))return null;const a=new Array(t);for(;t-- >0;)a[t]=e[t];return a},gd=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&zs(Uint8Array)),yd=(e,t)=>{const s=(e&&e[ca]).call(e);let i;for(;(i=s.next())&&!i.done;){const l=i.value;t.call(e,l[0],l[1])}},xd=(e,t)=>{let a;const s=[];for(;(a=e.exec(t))!==null;)s.push(a);return s},bd=pt("HTMLFormElement"),vd=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,s,i){return s.toUpperCase()+i}),Ho=(({hasOwnProperty:e})=>(t,a)=>e.call(t,a))(Object.prototype),wd=pt("RegExp"),oc=(e,t)=>{const a=Object.getOwnPropertyDescriptors(e),s={};ur(a,(i,l)=>{let d;(d=t(i,l,e))!==!1&&(s[l]=d||i)}),Object.defineProperties(e,s)},jd=e=>{oc(e,(t,a)=>{if(nt(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const s=e[a];if(nt(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},kd=(e,t)=>{const a={},s=i=>{i.forEach(l=>{a[l]=!0})};return $n(e)?s(e):s(String(e).split(t)),a},Nd=()=>{},Sd=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function _d(e){return!!(e&&nt(e.append)&&e[tc]==="FormData"&&e[ca])}const Ed=e=>{const t=new Array(10),a=(s,i)=>{if(lr(s)){if(t.indexOf(s)>=0)return;if(cr(s))return s;if(!("toJSON"in s)){t[i]=s;const l=$n(s)?[]:{};return ur(s,(d,u)=>{const p=a(d,i+1);!Rn(p)&&(l[u]=p)}),t[i]=void 0,l}}return s};return a(e,0)},Cd=pt("AsyncFunction"),Pd=e=>e&&(lr(e)||nt(e))&&nt(e.then)&&nt(e.catch),ic=((e,t)=>e?setImmediate:t?((a,s)=>(rn.addEventListener("message",({source:i,data:l})=>{i===rn&&l===a&&s.length&&s.shift()()},!1),i=>{s.push(i),rn.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",nt(rn.postMessage)),Ad=typeof queueMicrotask<"u"?queueMicrotask.bind(rn):typeof process<"u"&&process.nextTick||ic,Rd=e=>e!=null&&nt(e[ca]),L={isArray:$n,isArrayBuffer:nc,isBuffer:cr,isFormData:rd,isArrayBufferView:Gu,isString:Yu,isNumber:rc,isBoolean:Ju,isObject:lr,isPlainObject:Yr,isEmptyObject:Qu,isReadableStream:sd,isRequest:od,isResponse:id,isHeaders:cd,isUndefined:Rn,isDate:Xu,isFile:Zu,isBlob:ed,isRegExp:wd,isFunction:nt,isStream:nd,isURLSearchParams:ad,isTypedArray:gd,isFileList:td,forEach:ur,merge:ks,extend:ud,trim:ld,stripBOM:dd,inherits:fd,toFlatObject:hd,kindOf:la,kindOfTest:pt,endsWith:md,toArray:pd,forEachEntry:yd,matchAll:xd,isHTMLForm:bd,hasOwnProperty:Ho,hasOwnProp:Ho,reduceDescriptors:oc,freezeMethods:jd,toObjectSet:kd,toCamelCase:vd,noop:Nd,toFiniteNumber:Sd,findKey:ac,global:rn,isContextDefined:sc,isSpecCompliantForm:_d,toJSONObject:Ed,isAsyncFn:Cd,isThenable:Pd,setImmediate:ic,asap:Ad,isIterable:Rd};function ye(e,t,a,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),a&&(this.config=a),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}L.inherits(ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:L.toJSONObject(this.config),code:this.code,status:this.status}}});const cc=ye.prototype,lc={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{lc[e]={value:e}});Object.defineProperties(ye,lc);Object.defineProperty(cc,"isAxiosError",{value:!0});ye.from=(e,t,a,s,i,l)=>{const d=Object.create(cc);L.toFlatObject(e,d,function(x){return x!==Error.prototype},y=>y!=="isAxiosError");const u=e&&e.message?e.message:"Error",p=t==null&&e?e.code:t;return ye.call(d,u,p,a,s,i),e&&d.cause==null&&Object.defineProperty(d,"cause",{value:e,configurable:!0}),d.name=e&&e.name||"Error",l&&Object.assign(d,l),d};const Od=null;function Ns(e){return L.isPlainObject(e)||L.isArray(e)}function uc(e){return L.endsWith(e,"[]")?e.slice(0,-2):e}function Go(e,t,a){return e?e.concat(t).map(function(i,l){return i=uc(i),!a&&l?"["+i+"]":i}).join(a?".":""):t}function Td(e){return L.isArray(e)&&!e.some(Ns)}const $d=L.toFlatObject(L,{},null,function(t){return/^is[A-Z]/.test(t)});function da(e,t,a){if(!L.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,a=L.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,$){return!L.isUndefined($[E])});const s=a.metaTokens,i=a.visitor||x,l=a.dots,d=a.indexes,p=(a.Blob||typeof Blob<"u"&&Blob)&&L.isSpecCompliantForm(t);if(!L.isFunction(i))throw new TypeError("visitor must be a function");function y(k){if(k===null)return"";if(L.isDate(k))return k.toISOString();if(L.isBoolean(k))return k.toString();if(!p&&L.isBlob(k))throw new ye("Blob is not supported. Use a Buffer instead.");return L.isArrayBuffer(k)||L.isTypedArray(k)?p&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function x(k,E,$){let B=k;if(k&&!$&&typeof k=="object"){if(L.endsWith(E,"{}"))E=s?E:E.slice(0,-2),k=JSON.stringify(k);else if(L.isArray(k)&&Td(k)||(L.isFileList(k)||L.endsWith(E,"[]"))&&(B=L.toArray(k)))return E=uc(E),B.forEach(function(W,V){!(L.isUndefined(W)||W===null)&&t.append(d===!0?Go([E],V,l):d===null?E:E+"[]",y(W))}),!1}return Ns(k)?!0:(t.append(Go($,E,l),y(k)),!1)}const b=[],A=Object.assign($d,{defaultVisitor:x,convertValue:y,isVisitable:Ns});function D(k,E){if(!L.isUndefined(k)){if(b.indexOf(k)!==-1)throw Error("Circular reference detected in "+E.join("."));b.push(k),L.forEach(k,function(B,z){(!(L.isUndefined(B)||B===null)&&i.call(t,B,L.isString(z)?z.trim():z,E,A))===!0&&D(B,E?E.concat(z):[z])}),b.pop()}}if(!L.isObject(e))throw new TypeError("data must be an object");return D(e),t}function Yo(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function Us(e,t){this._pairs=[],e&&da(e,this,t)}const dc=Us.prototype;dc.append=function(t,a){this._pairs.push([t,a])};dc.toString=function(t){const a=t?function(s){return t.call(this,s,Yo)}:Yo;return this._pairs.map(function(i){return a(i[0])+"="+a(i[1])},"").join("&")};function Dd(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function fc(e,t,a){if(!t)return e;const s=a&&a.encode||Dd;L.isFunction(a)&&(a={serialize:a});const i=a&&a.serialize;let l;if(i?l=i(t,a):l=L.isURLSearchParams(t)?t.toString():new Us(t,a).toString(s),l){const d=e.indexOf("#");d!==-1&&(e=e.slice(0,d)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class Jo{constructor(){this.handlers=[]}use(t,a,s){return this.handlers.push({fulfilled:t,rejected:a,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){L.forEach(this.handlers,function(s){s!==null&&t(s)})}}const hc={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Md=typeof URLSearchParams<"u"?URLSearchParams:Us,Id=typeof FormData<"u"?FormData:null,Ld=typeof Blob<"u"?Blob:null,Fd={isBrowser:!0,classes:{URLSearchParams:Md,FormData:Id,Blob:Ld},protocols:["http","https","file","blob","url","data"]},Ws=typeof window<"u"&&typeof document<"u",Ss=typeof navigator=="object"&&navigator||void 0,Bd=Ws&&(!Ss||["ReactNative","NativeScript","NS"].indexOf(Ss.product)<0),Kd=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",qd=Ws&&window.location.href||"http://localhost",zd=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ws,hasStandardBrowserEnv:Bd,hasStandardBrowserWebWorkerEnv:Kd,navigator:Ss,origin:qd},Symbol.toStringTag,{value:"Module"})),Je={...zd,...Fd};function Ud(e,t){return da(e,new Je.classes.URLSearchParams,{visitor:function(a,s,i,l){return Je.isNode&&L.isBuffer(a)?(this.append(s,a.toString("base64")),!1):l.defaultVisitor.apply(this,arguments)},...t})}function Wd(e){return L.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Vd(e){const t={},a=Object.keys(e);let s;const i=a.length;let l;for(s=0;s<i;s++)l=a[s],t[l]=e[l];return t}function mc(e){function t(a,s,i,l){let d=a[l++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),p=l>=a.length;return d=!d&&L.isArray(i)?i.length:d,p?(L.hasOwnProp(i,d)?i[d]=[i[d],s]:i[d]=s,!u):((!i[d]||!L.isObject(i[d]))&&(i[d]=[]),t(a,s,i[d],l)&&L.isArray(i[d])&&(i[d]=Vd(i[d])),!u)}if(L.isFormData(e)&&L.isFunction(e.entries)){const a={};return L.forEachEntry(e,(s,i)=>{t(Wd(s),i,a,0)}),a}return null}function Hd(e,t,a){if(L.isString(e))try{return(t||JSON.parse)(e),L.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(a||JSON.stringify)(e)}const dr={transitional:hc,adapter:["xhr","http","fetch"],transformRequest:[function(t,a){const s=a.getContentType()||"",i=s.indexOf("application/json")>-1,l=L.isObject(t);if(l&&L.isHTMLForm(t)&&(t=new FormData(t)),L.isFormData(t))return i?JSON.stringify(mc(t)):t;if(L.isArrayBuffer(t)||L.isBuffer(t)||L.isStream(t)||L.isFile(t)||L.isBlob(t)||L.isReadableStream(t))return t;if(L.isArrayBufferView(t))return t.buffer;if(L.isURLSearchParams(t))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(l){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Ud(t,this.formSerializer).toString();if((u=L.isFileList(t))||s.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return da(u?{"files[]":t}:t,p&&new p,this.formSerializer)}}return l||i?(a.setContentType("application/json",!1),Hd(t)):t}],transformResponse:[function(t){const a=this.transitional||dr.transitional,s=a&&a.forcedJSONParsing,i=this.responseType==="json";if(L.isResponse(t)||L.isReadableStream(t))return t;if(t&&L.isString(t)&&(s&&!this.responseType||i)){const d=!(a&&a.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(u){if(d)throw u.name==="SyntaxError"?ye.from(u,ye.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Je.classes.FormData,Blob:Je.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};L.forEach(["delete","get","head","post","put","patch"],e=>{dr.headers[e]={}});const Gd=L.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Yd=e=>{const t={};let a,s,i;return e&&e.split(`
`).forEach(function(d){i=d.indexOf(":"),a=d.substring(0,i).trim().toLowerCase(),s=d.substring(i+1).trim(),!(!a||t[a]&&Gd[a])&&(a==="set-cookie"?t[a]?t[a].push(s):t[a]=[s]:t[a]=t[a]?t[a]+", "+s:s)}),t},Qo=Symbol("internals");function er(e){return e&&String(e).trim().toLowerCase()}function Jr(e){return e===!1||e==null?e:L.isArray(e)?e.map(Jr):String(e)}function Jd(e){const t=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=a.exec(e);)t[s[1]]=s[2];return t}const Qd=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Za(e,t,a,s,i){if(L.isFunction(s))return s.call(this,t,a);if(i&&(t=a),!!L.isString(t)){if(L.isString(s))return t.indexOf(s)!==-1;if(L.isRegExp(s))return s.test(t)}}function Xd(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,a,s)=>a.toUpperCase()+s)}function Zd(e,t){const a=L.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+a,{value:function(i,l,d){return this[s].call(this,t,i,l,d)},configurable:!0})})}let rt=class{constructor(t){t&&this.set(t)}set(t,a,s){const i=this;function l(u,p,y){const x=er(p);if(!x)throw new Error("header name must be a non-empty string");const b=L.findKey(i,x);(!b||i[b]===void 0||y===!0||y===void 0&&i[b]!==!1)&&(i[b||p]=Jr(u))}const d=(u,p)=>L.forEach(u,(y,x)=>l(y,x,p));if(L.isPlainObject(t)||t instanceof this.constructor)d(t,a);else if(L.isString(t)&&(t=t.trim())&&!Qd(t))d(Yd(t),a);else if(L.isObject(t)&&L.isIterable(t)){let u={},p,y;for(const x of t){if(!L.isArray(x))throw TypeError("Object iterator must return a key-value pair");u[y=x[0]]=(p=u[y])?L.isArray(p)?[...p,x[1]]:[p,x[1]]:x[1]}d(u,a)}else t!=null&&l(a,t,s);return this}get(t,a){if(t=er(t),t){const s=L.findKey(this,t);if(s){const i=this[s];if(!a)return i;if(a===!0)return Jd(i);if(L.isFunction(a))return a.call(this,i,s);if(L.isRegExp(a))return a.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,a){if(t=er(t),t){const s=L.findKey(this,t);return!!(s&&this[s]!==void 0&&(!a||Za(this,this[s],s,a)))}return!1}delete(t,a){const s=this;let i=!1;function l(d){if(d=er(d),d){const u=L.findKey(s,d);u&&(!a||Za(s,s[u],u,a))&&(delete s[u],i=!0)}}return L.isArray(t)?t.forEach(l):l(t),i}clear(t){const a=Object.keys(this);let s=a.length,i=!1;for(;s--;){const l=a[s];(!t||Za(this,this[l],l,t,!0))&&(delete this[l],i=!0)}return i}normalize(t){const a=this,s={};return L.forEach(this,(i,l)=>{const d=L.findKey(s,l);if(d){a[d]=Jr(i),delete a[l];return}const u=t?Xd(l):String(l).trim();u!==l&&delete a[l],a[u]=Jr(i),s[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const a=Object.create(null);return L.forEach(this,(s,i)=>{s!=null&&s!==!1&&(a[i]=t&&L.isArray(s)?s.join(", "):s)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,a])=>t+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...a){const s=new this(t);return a.forEach(i=>s.set(i)),s}static accessor(t){const s=(this[Qo]=this[Qo]={accessors:{}}).accessors,i=this.prototype;function l(d){const u=er(d);s[u]||(Zd(i,d),s[u]=!0)}return L.isArray(t)?t.forEach(l):l(t),this}};rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);L.reduceDescriptors(rt.prototype,({value:e},t)=>{let a=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[a]=s}}});L.freezeMethods(rt);function es(e,t){const a=this||dr,s=t||a,i=rt.from(s.headers);let l=s.data;return L.forEach(e,function(u){l=u.call(a,l,i.normalize(),t?t.status:void 0)}),i.normalize(),l}function pc(e){return!!(e&&e.__CANCEL__)}function Dn(e,t,a){ye.call(this,e??"canceled",ye.ERR_CANCELED,t,a),this.name="CanceledError"}L.inherits(Dn,ye,{__CANCEL__:!0});function gc(e,t,a){const s=a.config.validateStatus;!a.status||!s||s(a.status)?e(a):t(new ye("Request failed with status code "+a.status,[ye.ERR_BAD_REQUEST,ye.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function ef(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function tf(e,t){e=e||10;const a=new Array(e),s=new Array(e);let i=0,l=0,d;return t=t!==void 0?t:1e3,function(p){const y=Date.now(),x=s[l];d||(d=y),a[i]=p,s[i]=y;let b=l,A=0;for(;b!==i;)A+=a[b++],b=b%e;if(i=(i+1)%e,i===l&&(l=(l+1)%e),y-d<t)return;const D=x&&y-x;return D?Math.round(A*1e3/D):void 0}}function nf(e,t){let a=0,s=1e3/t,i,l;const d=(y,x=Date.now())=>{a=x,i=null,l&&(clearTimeout(l),l=null),e(...y)};return[(...y)=>{const x=Date.now(),b=x-a;b>=s?d(y,x):(i=y,l||(l=setTimeout(()=>{l=null,d(i)},s-b)))},()=>i&&d(i)]}const ra=(e,t,a=3)=>{let s=0;const i=tf(50,250);return nf(l=>{const d=l.loaded,u=l.lengthComputable?l.total:void 0,p=d-s,y=i(p),x=d<=u;s=d;const b={loaded:d,total:u,progress:u?d/u:void 0,bytes:p,rate:y||void 0,estimated:y&&u&&x?(u-d)/y:void 0,event:l,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(b)},a)},Xo=(e,t)=>{const a=e!=null;return[s=>t[0]({lengthComputable:a,total:e,loaded:s}),t[1]]},Zo=e=>(...t)=>L.asap(()=>e(...t)),rf=Je.hasStandardBrowserEnv?((e,t)=>a=>(a=new URL(a,Je.origin),e.protocol===a.protocol&&e.host===a.host&&(t||e.port===a.port)))(new URL(Je.origin),Je.navigator&&/(msie|trident)/i.test(Je.navigator.userAgent)):()=>!0,af=Je.hasStandardBrowserEnv?{write(e,t,a,s,i,l,d){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(t)}`];L.isNumber(a)&&u.push(`expires=${new Date(a).toUTCString()}`),L.isString(s)&&u.push(`path=${s}`),L.isString(i)&&u.push(`domain=${i}`),l===!0&&u.push("secure"),L.isString(d)&&u.push(`SameSite=${d}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function sf(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function of(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function yc(e,t,a){let s=!sf(t);return e&&(s||a==!1)?of(e,t):t}const ei=e=>e instanceof rt?{...e}:e;function cn(e,t){t=t||{};const a={};function s(y,x,b,A){return L.isPlainObject(y)&&L.isPlainObject(x)?L.merge.call({caseless:A},y,x):L.isPlainObject(x)?L.merge({},x):L.isArray(x)?x.slice():x}function i(y,x,b,A){if(L.isUndefined(x)){if(!L.isUndefined(y))return s(void 0,y,b,A)}else return s(y,x,b,A)}function l(y,x){if(!L.isUndefined(x))return s(void 0,x)}function d(y,x){if(L.isUndefined(x)){if(!L.isUndefined(y))return s(void 0,y)}else return s(void 0,x)}function u(y,x,b){if(b in t)return s(y,x);if(b in e)return s(void 0,y)}const p={url:l,method:l,data:l,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(y,x,b)=>i(ei(y),ei(x),b,!0)};return L.forEach(Object.keys({...e,...t}),function(x){const b=p[x]||i,A=b(e[x],t[x],x);L.isUndefined(A)&&b!==u||(a[x]=A)}),a}const xc=e=>{const t=cn({},e);let{data:a,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:l,headers:d,auth:u}=t;if(t.headers=d=rt.from(d),t.url=fc(yc(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),L.isFormData(a)){if(Je.hasStandardBrowserEnv||Je.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(L.isFunction(a.getHeaders)){const p=a.getHeaders(),y=["content-type","content-length"];Object.entries(p).forEach(([x,b])=>{y.includes(x.toLowerCase())&&d.set(x,b)})}}if(Je.hasStandardBrowserEnv&&(s&&L.isFunction(s)&&(s=s(t)),s||s!==!1&&rf(t.url))){const p=i&&l&&af.read(l);p&&d.set(i,p)}return t},cf=typeof XMLHttpRequest<"u",lf=cf&&function(e){return new Promise(function(a,s){const i=xc(e);let l=i.data;const d=rt.from(i.headers).normalize();let{responseType:u,onUploadProgress:p,onDownloadProgress:y}=i,x,b,A,D,k;function E(){D&&D(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(x),i.signal&&i.signal.removeEventListener("abort",x)}let $=new XMLHttpRequest;$.open(i.method.toUpperCase(),i.url,!0),$.timeout=i.timeout;function B(){if(!$)return;const W=rt.from("getAllResponseHeaders"in $&&$.getAllResponseHeaders()),ae={data:!u||u==="text"||u==="json"?$.responseText:$.response,status:$.status,statusText:$.statusText,headers:W,config:e,request:$};gc(function(X){a(X),E()},function(X){s(X),E()},ae),$=null}"onloadend"in $?$.onloadend=B:$.onreadystatechange=function(){!$||$.readyState!==4||$.status===0&&!($.responseURL&&$.responseURL.indexOf("file:")===0)||setTimeout(B)},$.onabort=function(){$&&(s(new ye("Request aborted",ye.ECONNABORTED,e,$)),$=null)},$.onerror=function(V){const ae=V&&V.message?V.message:"Network Error",J=new ye(ae,ye.ERR_NETWORK,e,$);J.event=V||null,s(J),$=null},$.ontimeout=function(){let V=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const ae=i.transitional||hc;i.timeoutErrorMessage&&(V=i.timeoutErrorMessage),s(new ye(V,ae.clarifyTimeoutError?ye.ETIMEDOUT:ye.ECONNABORTED,e,$)),$=null},l===void 0&&d.setContentType(null),"setRequestHeader"in $&&L.forEach(d.toJSON(),function(V,ae){$.setRequestHeader(ae,V)}),L.isUndefined(i.withCredentials)||($.withCredentials=!!i.withCredentials),u&&u!=="json"&&($.responseType=i.responseType),y&&([A,k]=ra(y,!0),$.addEventListener("progress",A)),p&&$.upload&&([b,D]=ra(p),$.upload.addEventListener("progress",b),$.upload.addEventListener("loadend",D)),(i.cancelToken||i.signal)&&(x=W=>{$&&(s(!W||W.type?new Dn(null,e,$):W),$.abort(),$=null)},i.cancelToken&&i.cancelToken.subscribe(x),i.signal&&(i.signal.aborted?x():i.signal.addEventListener("abort",x)));const z=ef(i.url);if(z&&Je.protocols.indexOf(z)===-1){s(new ye("Unsupported protocol "+z+":",ye.ERR_BAD_REQUEST,e));return}$.send(l||null)})},uf=(e,t)=>{const{length:a}=e=e?e.filter(Boolean):[];if(t||a){let s=new AbortController,i;const l=function(y){if(!i){i=!0,u();const x=y instanceof Error?y:this.reason;s.abort(x instanceof ye?x:new Dn(x instanceof Error?x.message:x))}};let d=t&&setTimeout(()=>{d=null,l(new ye(`timeout ${t} of ms exceeded`,ye.ETIMEDOUT))},t);const u=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(y=>{y.unsubscribe?y.unsubscribe(l):y.removeEventListener("abort",l)}),e=null)};e.forEach(y=>y.addEventListener("abort",l));const{signal:p}=s;return p.unsubscribe=()=>L.asap(u),p}},df=function*(e,t){let a=e.byteLength;if(a<t){yield e;return}let s=0,i;for(;s<a;)i=s+t,yield e.slice(s,i),s=i},ff=async function*(e,t){for await(const a of hf(e))yield*df(a,t)},hf=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:a,value:s}=await t.read();if(a)break;yield s}}finally{await t.cancel()}},ti=(e,t,a,s)=>{const i=ff(e,t);let l=0,d,u=p=>{d||(d=!0,s&&s(p))};return new ReadableStream({async pull(p){try{const{done:y,value:x}=await i.next();if(y){u(),p.close();return}let b=x.byteLength;if(a){let A=l+=b;a(A)}p.enqueue(new Uint8Array(x))}catch(y){throw u(y),y}},cancel(p){return u(p),i.return()}},{highWaterMark:2})},ni=64*1024,{isFunction:zr}=L,mf=(({Request:e,Response:t})=>({Request:e,Response:t}))(L.global),{ReadableStream:ri,TextEncoder:ai}=L.global,si=(e,...t)=>{try{return!!e(...t)}catch{return!1}},pf=e=>{e=L.merge.call({skipUndefined:!0},mf,e);const{fetch:t,Request:a,Response:s}=e,i=t?zr(t):typeof fetch=="function",l=zr(a),d=zr(s);if(!i)return!1;const u=i&&zr(ri),p=i&&(typeof ai=="function"?(k=>E=>k.encode(E))(new ai):async k=>new Uint8Array(await new a(k).arrayBuffer())),y=l&&u&&si(()=>{let k=!1;const E=new a(Je.origin,{body:new ri,method:"POST",get duplex(){return k=!0,"half"}}).headers.has("Content-Type");return k&&!E}),x=d&&u&&si(()=>L.isReadableStream(new s("").body)),b={stream:x&&(k=>k.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(k=>{!b[k]&&(b[k]=(E,$)=>{let B=E&&E[k];if(B)return B.call(E);throw new ye(`Response type '${k}' is not supported`,ye.ERR_NOT_SUPPORT,$)})});const A=async k=>{if(k==null)return 0;if(L.isBlob(k))return k.size;if(L.isSpecCompliantForm(k))return(await new a(Je.origin,{method:"POST",body:k}).arrayBuffer()).byteLength;if(L.isArrayBufferView(k)||L.isArrayBuffer(k))return k.byteLength;if(L.isURLSearchParams(k)&&(k=k+""),L.isString(k))return(await p(k)).byteLength},D=async(k,E)=>{const $=L.toFiniteNumber(k.getContentLength());return $??A(E)};return async k=>{let{url:E,method:$,data:B,signal:z,cancelToken:W,timeout:V,onDownloadProgress:ae,onUploadProgress:J,responseType:X,headers:ce,withCredentials:_e="same-origin",fetchOptions:Te}=xc(k),ie=t||fetch;X=X?(X+"").toLowerCase():"text";let fe=uf([z,W&&W.toAbortSignal()],V),Ne=null;const $e=fe&&fe.unsubscribe&&(()=>{fe.unsubscribe()});let Ue;try{if(J&&y&&$!=="get"&&$!=="head"&&(Ue=await D(ce,B))!==0){let Ee=new a(E,{method:"POST",body:B,duplex:"half"}),q;if(L.isFormData(B)&&(q=Ee.headers.get("content-type"))&&ce.setContentType(q),Ee.body){const[de,he]=Xo(Ue,ra(Zo(J)));B=ti(Ee.body,ni,de,he)}}L.isString(_e)||(_e=_e?"include":"omit");const Pe=l&&"credentials"in a.prototype,Qe={...Te,signal:fe,method:$.toUpperCase(),headers:ce.normalize().toJSON(),body:B,duplex:"half",credentials:Pe?_e:void 0};Ne=l&&new a(E,Qe);let Ae=await(l?ie(Ne,Te):ie(E,Qe));const Be=x&&(X==="stream"||X==="response");if(x&&(ae||Be&&$e)){const Ee={};["status","statusText","headers"].forEach(le=>{Ee[le]=Ae[le]});const q=L.toFiniteNumber(Ae.headers.get("content-length")),[de,he]=ae&&Xo(q,ra(Zo(ae),!0))||[];Ae=new s(ti(Ae.body,ni,de,()=>{he&&he(),$e&&$e()}),Ee)}X=X||"text";let Ke=await b[L.findKey(b,X)||"text"](Ae,k);return!Be&&$e&&$e(),await new Promise((Ee,q)=>{gc(Ee,q,{data:Ke,headers:rt.from(Ae.headers),status:Ae.status,statusText:Ae.statusText,config:k,request:Ne})})}catch(Pe){throw $e&&$e(),Pe&&Pe.name==="TypeError"&&/Load failed|fetch/i.test(Pe.message)?Object.assign(new ye("Network Error",ye.ERR_NETWORK,k,Ne),{cause:Pe.cause||Pe}):ye.from(Pe,Pe&&Pe.code,k,Ne)}}},gf=new Map,bc=e=>{let t=e&&e.env||{};const{fetch:a,Request:s,Response:i}=t,l=[s,i,a];let d=l.length,u=d,p,y,x=gf;for(;u--;)p=l[u],y=x.get(p),y===void 0&&x.set(p,y=u?new Map:pf(t)),x=y;return y};bc();const Vs={http:Od,xhr:lf,fetch:{get:bc}};L.forEach(Vs,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const oi=e=>`- ${e}`,yf=e=>L.isFunction(e)||e===null||e===!1;function xf(e,t){e=L.isArray(e)?e:[e];const{length:a}=e;let s,i;const l={};for(let d=0;d<a;d++){s=e[d];let u;if(i=s,!yf(s)&&(i=Vs[(u=String(s)).toLowerCase()],i===void 0))throw new ye(`Unknown adapter '${u}'`);if(i&&(L.isFunction(i)||(i=i.get(t))))break;l[u||"#"+d]=i}if(!i){const d=Object.entries(l).map(([p,y])=>`adapter ${p} `+(y===!1?"is not supported by the environment":"is not available in the build"));let u=a?d.length>1?`since :
`+d.map(oi).join(`
`):" "+oi(d[0]):"as no adapter specified";throw new ye("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i}const vc={getAdapter:xf,adapters:Vs};function ts(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Dn(null,e)}function ii(e){return ts(e),e.headers=rt.from(e.headers),e.data=es.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vc.getAdapter(e.adapter||dr.adapter,e)(e).then(function(s){return ts(e),s.data=es.call(e,e.transformResponse,s),s.headers=rt.from(s.headers),s},function(s){return pc(s)||(ts(e),s&&s.response&&(s.response.data=es.call(e,e.transformResponse,s.response),s.response.headers=rt.from(s.response.headers))),Promise.reject(s)})}const wc="1.13.2",fa={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{fa[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const ci={};fa.transitional=function(t,a,s){function i(l,d){return"[Axios v"+wc+"] Transitional option '"+l+"'"+d+(s?". "+s:"")}return(l,d,u)=>{if(t===!1)throw new ye(i(d," has been removed"+(a?" in "+a:"")),ye.ERR_DEPRECATED);return a&&!ci[d]&&(ci[d]=!0,console.warn(i(d," has been deprecated since v"+a+" and will be removed in the near future"))),t?t(l,d,u):!0}};fa.spelling=function(t){return(a,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function bf(e,t,a){if(typeof e!="object")throw new ye("options must be an object",ye.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const l=s[i],d=t[l];if(d){const u=e[l],p=u===void 0||d(u,l,e);if(p!==!0)throw new ye("option "+l+" must be "+p,ye.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ye("Unknown option "+l,ye.ERR_BAD_OPTION)}}const Qr={assertOptions:bf,validators:fa},bt=Qr.validators;let sn=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Jo,response:new Jo}}async request(t,a){try{return await this._request(t,a)}catch(s){if(s instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const l=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?l&&!String(s.stack).endsWith(l.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+l):s.stack=l}catch{}}throw s}}_request(t,a){typeof t=="string"?(a=a||{},a.url=t):a=t||{},a=cn(this.defaults,a);const{transitional:s,paramsSerializer:i,headers:l}=a;s!==void 0&&Qr.assertOptions(s,{silentJSONParsing:bt.transitional(bt.boolean),forcedJSONParsing:bt.transitional(bt.boolean),clarifyTimeoutError:bt.transitional(bt.boolean)},!1),i!=null&&(L.isFunction(i)?a.paramsSerializer={serialize:i}:Qr.assertOptions(i,{encode:bt.function,serialize:bt.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),Qr.assertOptions(a,{baseUrl:bt.spelling("baseURL"),withXsrfToken:bt.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let d=l&&L.merge(l.common,l[a.method]);l&&L.forEach(["delete","get","head","post","put","patch","common"],k=>{delete l[k]}),a.headers=rt.concat(d,l);const u=[];let p=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(a)===!1||(p=p&&E.synchronous,u.unshift(E.fulfilled,E.rejected))});const y=[];this.interceptors.response.forEach(function(E){y.push(E.fulfilled,E.rejected)});let x,b=0,A;if(!p){const k=[ii.bind(this),void 0];for(k.unshift(...u),k.push(...y),A=k.length,x=Promise.resolve(a);b<A;)x=x.then(k[b++],k[b++]);return x}A=u.length;let D=a;for(;b<A;){const k=u[b++],E=u[b++];try{D=k(D)}catch($){E.call(this,$);break}}try{x=ii.call(this,D)}catch(k){return Promise.reject(k)}for(b=0,A=y.length;b<A;)x=x.then(y[b++],y[b++]);return x}getUri(t){t=cn(this.defaults,t);const a=yc(t.baseURL,t.url,t.allowAbsoluteUrls);return fc(a,t.params,t.paramsSerializer)}};L.forEach(["delete","get","head","options"],function(t){sn.prototype[t]=function(a,s){return this.request(cn(s||{},{method:t,url:a,data:(s||{}).data}))}});L.forEach(["post","put","patch"],function(t){function a(s){return function(l,d,u){return this.request(cn(u||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:l,data:d}))}}sn.prototype[t]=a(),sn.prototype[t+"Form"]=a(!0)});let vf=class jc{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(l){a=l});const s=this;this.promise.then(i=>{if(!s._listeners)return;let l=s._listeners.length;for(;l-- >0;)s._listeners[l](i);s._listeners=null}),this.promise.then=i=>{let l;const d=new Promise(u=>{s.subscribe(u),l=u}).then(i);return d.cancel=function(){s.unsubscribe(l)},d},t(function(l,d,u){s.reason||(s.reason=new Dn(l,d,u),a(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const a=this._listeners.indexOf(t);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const t=new AbortController,a=s=>{t.abort(s)};return this.subscribe(a),t.signal.unsubscribe=()=>this.unsubscribe(a),t.signal}static source(){let t;return{token:new jc(function(i){t=i}),cancel:t}}};function wf(e){return function(a){return e.apply(null,a)}}function jf(e){return L.isObject(e)&&e.isAxiosError===!0}const _s={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(_s).forEach(([e,t])=>{_s[t]=e});function kc(e){const t=new sn(e),a=ec(sn.prototype.request,t);return L.extend(a,sn.prototype,t,{allOwnKeys:!0}),L.extend(a,t,null,{allOwnKeys:!0}),a.create=function(i){return kc(cn(e,i))},a}const Ie=kc(dr);Ie.Axios=sn;Ie.CanceledError=Dn;Ie.CancelToken=vf;Ie.isCancel=pc;Ie.VERSION=wc;Ie.toFormData=da;Ie.AxiosError=ye;Ie.Cancel=Ie.CanceledError;Ie.all=function(t){return Promise.all(t)};Ie.spread=wf;Ie.isAxiosError=jf;Ie.mergeConfig=cn;Ie.AxiosHeaders=rt;Ie.formToJSON=e=>mc(L.isHTMLForm(e)?new FormData(e):e);Ie.getAdapter=vc.getAdapter;Ie.HttpStatusCode=_s;Ie.default=Ie;const{Axios:$y,AxiosError:Dy,CanceledError:My,isCancel:Iy,CancelToken:Ly,VERSION:Fy,all:By,Cancel:Ky,isAxiosError:qy,spread:zy,toFormData:Uy,AxiosHeaders:Wy,HttpStatusCode:Vy,formToJSON:Hy,getAdapter:Gy,mergeConfig:Yy}=Ie,kf="",re=Ie.create({baseURL:kf,timeout:6e4,headers:{"Content-Type":"application/json"}});re.interceptors.response.use(e=>e,e=>{var t;return console.error("API Error:",((t=e.response)==null?void 0:t.data)||e.message),Promise.reject(e)});const Nc=g.createContext(void 0),en="smartmoney_access_token",tr="smartmoney_refresh_token";function Nf({children:e}){const[t,a]=g.useState(null),[s,i]=g.useState(!0),l=g.useCallback(()=>{localStorage.removeItem(en),localStorage.removeItem(tr),a(null),i(!1)},[]),d=g.useCallback(async()=>{const p=localStorage.getItem(tr);if(!p)return!1;try{const x=await Ie.post("/api/auth/refresh",{refresh_token:p}),{access_token:b,refresh_token:A}=x.data;localStorage.setItem(en,b),localStorage.setItem(tr,A);const D=await re.get("/api/auth/me",{headers:{Authorization:`Bearer ${b}`}});return a(D.data),!0}catch{return localStorage.removeItem(en),localStorage.removeItem(tr),!1}},[]);g.useEffect(()=>{const p=re.interceptors.request.use(x=>{const b=localStorage.getItem(en);return b&&(x.headers.Authorization=`Bearer ${b}`),x},x=>Promise.reject(x)),y=re.interceptors.response.use(x=>x,async x=>{var D,k;const b=x.config,A=(D=b==null?void 0:b.url)==null?void 0:D.includes("/api/auth/");if(((k=x.response)==null?void 0:k.status)===401&&!b._retry&&!A)if(b._retry=!0,await d()){const $=localStorage.getItem(en);return b.headers.Authorization=`Bearer ${$}`,re(b)}else l();return Promise.reject(x)});return()=>{re.interceptors.request.eject(p),re.interceptors.response.eject(y)}},[d,l]),g.useEffect(()=>{(async()=>{if(localStorage.getItem(en))try{const x=await re.get("/api/auth/me");a(x.data)}catch{await d()||a(null)}i(!1)})()},[d]);const u=async(p,y)=>{const x=new URLSearchParams;x.append("username",p),x.append("password",y);const b=await re.post("/api/auth/login",x,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{access_token:A,refresh_token:D}=b.data;localStorage.setItem(en,A),localStorage.setItem(tr,D);const k=await re.get("/api/auth/me",{headers:{Authorization:`Bearer ${A}`}});a(k.data)};return r.jsx(Nc.Provider,{value:{user:t,isLoading:s,isAuthenticated:!!t,login:u,logout:l,refreshToken:d},children:e})}function ha(){const e=g.useContext(Nc);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}async function Sf(){return(await re.get("/api/settings")).data}async function Jy(e){return(await re.put("/api/settings",e)).data}const Sc=g.createContext(void 0);function _f({children:e}){const{data:t,isLoading:a}=We({queryKey:["settings"],queryFn:Sf}),s={settings:t,isLoading:a,currency:(t==null?void 0:t.currency)||"JPY",baseDate:(t==null?void 0:t.base_date)||25};return r.jsx(Sc.Provider,{value:s,children:e})}function fr(){const e=g.useContext(Sc);if(e===void 0)throw new Error("useSettings must be used within a SettingsProvider");return e}const _c=g.createContext(void 0),li="smartmoney_privacy_mode";function Ef({children:e}){const[t,a]=g.useState(()=>localStorage.getItem(li)==="true");g.useEffect(()=>{localStorage.setItem(li,String(t))},[t]);const s=()=>{a(i=>!i)};return r.jsx(_c.Provider,{value:{isPrivacyMode:t,togglePrivacyMode:s},children:e})}function hr(){const e=g.useContext(_c);if(e===void 0)throw new Error("usePrivacy must be used within a PrivacyProvider");return e}const Ec=g.createContext(void 0),Cc="smartmoney-theme";function ui(){return typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function di(){if(typeof window<"u"){const e=localStorage.getItem(Cc);if(e==="light"||e==="dark"||e==="system")return e}return"system"}function Cf({children:e}){const[t,a]=g.useState(()=>di()),[s,i]=g.useState(()=>{const u=di();return u==="system"?ui():u});g.useEffect(()=>{const u=()=>{const p=t==="system"?ui():t;i(p);const y=document.documentElement;y.classList.remove("light","dark"),y.classList.add(p)};if(u(),t==="system"){const p=window.matchMedia("(prefers-color-scheme: dark)"),y=()=>u();return p.addEventListener("change",y),()=>p.removeEventListener("change",y)}},[t]);const l=u=>{a(u),localStorage.setItem(Cc,u)},d=()=>{l(s==="dark"?"light":"dark")};return r.jsx(Ec.Provider,{value:{theme:t,resolvedTheme:s,setTheme:l,toggleTheme:d},children:e})}function Pc(){const e=g.useContext(Ec);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const Hs="-",Pf=e=>{const t=Rf(e),{conflictingClassGroups:a,conflictingClassGroupModifiers:s}=e;return{getClassGroupId:d=>{const u=d.split(Hs);return u[0]===""&&u.length!==1&&u.shift(),Ac(u,t)||Af(d)},getConflictingClassGroupIds:(d,u)=>{const p=a[d]||[];return u&&s[d]?[...p,...s[d]]:p}}},Ac=(e,t)=>{var d;if(e.length===0)return t.classGroupId;const a=e[0],s=t.nextPart.get(a),i=s?Ac(e.slice(1),s):void 0;if(i)return i;if(t.validators.length===0)return;const l=e.join(Hs);return(d=t.validators.find(({validator:u})=>u(l)))==null?void 0:d.classGroupId},fi=/^\[(.+)\]$/,Af=e=>{if(fi.test(e)){const t=fi.exec(e)[1],a=t==null?void 0:t.substring(0,t.indexOf(":"));if(a)return"arbitrary.."+a}},Rf=e=>{const{theme:t,prefix:a}=e,s={nextPart:new Map,validators:[]};return Tf(Object.entries(e.classGroups),a).forEach(([l,d])=>{Es(d,s,l,t)}),s},Es=(e,t,a,s)=>{e.forEach(i=>{if(typeof i=="string"){const l=i===""?t:hi(t,i);l.classGroupId=a;return}if(typeof i=="function"){if(Of(i)){Es(i(s),t,a,s);return}t.validators.push({validator:i,classGroupId:a});return}Object.entries(i).forEach(([l,d])=>{Es(d,hi(t,l),a,s)})})},hi=(e,t)=>{let a=e;return t.split(Hs).forEach(s=>{a.nextPart.has(s)||a.nextPart.set(s,{nextPart:new Map,validators:[]}),a=a.nextPart.get(s)}),a},Of=e=>e.isThemeGetter,Tf=(e,t)=>t?e.map(([a,s])=>{const i=s.map(l=>typeof l=="string"?t+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([d,u])=>[t+d,u])):l);return[a,i]}):e,$f=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,a=new Map,s=new Map;const i=(l,d)=>{a.set(l,d),t++,t>e&&(t=0,s=a,a=new Map)};return{get(l){let d=a.get(l);if(d!==void 0)return d;if((d=s.get(l))!==void 0)return i(l,d),d},set(l,d){a.has(l)?a.set(l,d):i(l,d)}}},Rc="!",Df=e=>{const{separator:t,experimentalParseClassName:a}=e,s=t.length===1,i=t[0],l=t.length,d=u=>{const p=[];let y=0,x=0,b;for(let $=0;$<u.length;$++){let B=u[$];if(y===0){if(B===i&&(s||u.slice($,$+l)===t)){p.push(u.slice(x,$)),x=$+l;continue}if(B==="/"){b=$;continue}}B==="["?y++:B==="]"&&y--}const A=p.length===0?u:u.substring(x),D=A.startsWith(Rc),k=D?A.substring(1):A,E=b&&b>x?b-x:void 0;return{modifiers:p,hasImportantModifier:D,baseClassName:k,maybePostfixModifierPosition:E}};return a?u=>a({className:u,parseClassName:d}):d},Mf=e=>{if(e.length<=1)return e;const t=[];let a=[];return e.forEach(s=>{s[0]==="["?(t.push(...a.sort(),s),a=[]):a.push(s)}),t.push(...a.sort()),t},If=e=>({cache:$f(e.cacheSize),parseClassName:Df(e),...Pf(e)}),Lf=/\s+/,Ff=(e,t)=>{const{parseClassName:a,getClassGroupId:s,getConflictingClassGroupIds:i}=t,l=[],d=e.trim().split(Lf);let u="";for(let p=d.length-1;p>=0;p-=1){const y=d[p],{modifiers:x,hasImportantModifier:b,baseClassName:A,maybePostfixModifierPosition:D}=a(y);let k=!!D,E=s(k?A.substring(0,D):A);if(!E){if(!k){u=y+(u.length>0?" "+u:u);continue}if(E=s(A),!E){u=y+(u.length>0?" "+u:u);continue}k=!1}const $=Mf(x).join(":"),B=b?$+Rc:$,z=B+E;if(l.includes(z))continue;l.push(z);const W=i(E,k);for(let V=0;V<W.length;++V){const ae=W[V];l.push(B+ae)}u=y+(u.length>0?" "+u:u)}return u};function Bf(){let e=0,t,a,s="";for(;e<arguments.length;)(t=arguments[e++])&&(a=Oc(t))&&(s&&(s+=" "),s+=a);return s}const Oc=e=>{if(typeof e=="string")return e;let t,a="";for(let s=0;s<e.length;s++)e[s]&&(t=Oc(e[s]))&&(a&&(a+=" "),a+=t);return a};function Kf(e,...t){let a,s,i,l=d;function d(p){const y=t.reduce((x,b)=>b(x),e());return a=If(y),s=a.cache.get,i=a.cache.set,l=u,u(p)}function u(p){const y=s(p);if(y)return y;const x=Ff(p,a);return i(p,x),x}return function(){return l(Bf.apply(null,arguments))}}const Re=e=>{const t=a=>a[e]||[];return t.isThemeGetter=!0,t},Tc=/^\[(?:([a-z-]+):)?(.+)\]$/i,qf=/^\d+\/\d+$/,zf=new Set(["px","full","screen"]),Uf=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Wf=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Vf=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Hf=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gf=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,St=e=>Cn(e)||zf.has(e)||qf.test(e),It=e=>Mn(e,"length",nh),Cn=e=>!!e&&!Number.isNaN(Number(e)),ns=e=>Mn(e,"number",Cn),nr=e=>!!e&&Number.isInteger(Number(e)),Yf=e=>e.endsWith("%")&&Cn(e.slice(0,-1)),xe=e=>Tc.test(e),Lt=e=>Uf.test(e),Jf=new Set(["length","size","percentage"]),Qf=e=>Mn(e,Jf,$c),Xf=e=>Mn(e,"position",$c),Zf=new Set(["image","url"]),eh=e=>Mn(e,Zf,ah),th=e=>Mn(e,"",rh),rr=()=>!0,Mn=(e,t,a)=>{const s=Tc.exec(e);return s?s[1]?typeof t=="string"?s[1]===t:t.has(s[1]):a(s[2]):!1},nh=e=>Wf.test(e)&&!Vf.test(e),$c=()=>!1,rh=e=>Hf.test(e),ah=e=>Gf.test(e),sh=()=>{const e=Re("colors"),t=Re("spacing"),a=Re("blur"),s=Re("brightness"),i=Re("borderColor"),l=Re("borderRadius"),d=Re("borderSpacing"),u=Re("borderWidth"),p=Re("contrast"),y=Re("grayscale"),x=Re("hueRotate"),b=Re("invert"),A=Re("gap"),D=Re("gradientColorStops"),k=Re("gradientColorStopPositions"),E=Re("inset"),$=Re("margin"),B=Re("opacity"),z=Re("padding"),W=Re("saturate"),V=Re("scale"),ae=Re("sepia"),J=Re("skew"),X=Re("space"),ce=Re("translate"),_e=()=>["auto","contain","none"],Te=()=>["auto","hidden","clip","visible","scroll"],ie=()=>["auto",xe,t],fe=()=>[xe,t],Ne=()=>["",St,It],$e=()=>["auto",Cn,xe],Ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Pe=()=>["solid","dashed","dotted","double","none"],Qe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ae=()=>["start","end","center","between","around","evenly","stretch"],Be=()=>["","0",xe],Ke=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ee=()=>[Cn,xe];return{cacheSize:500,separator:":",theme:{colors:[rr],spacing:[St,It],blur:["none","",Lt,xe],brightness:Ee(),borderColor:[e],borderRadius:["none","","full",Lt,xe],borderSpacing:fe(),borderWidth:Ne(),contrast:Ee(),grayscale:Be(),hueRotate:Ee(),invert:Be(),gap:fe(),gradientColorStops:[e],gradientColorStopPositions:[Yf,It],inset:ie(),margin:ie(),opacity:Ee(),padding:fe(),saturate:Ee(),scale:Ee(),sepia:Be(),skew:Ee(),space:fe(),translate:fe()},classGroups:{aspect:[{aspect:["auto","square","video",xe]}],container:["container"],columns:[{columns:[Lt]}],"break-after":[{"break-after":Ke()}],"break-before":[{"break-before":Ke()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Ue(),xe]}],overflow:[{overflow:Te()}],"overflow-x":[{"overflow-x":Te()}],"overflow-y":[{"overflow-y":Te()}],overscroll:[{overscroll:_e()}],"overscroll-x":[{"overscroll-x":_e()}],"overscroll-y":[{"overscroll-y":_e()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[E]}],"inset-x":[{"inset-x":[E]}],"inset-y":[{"inset-y":[E]}],start:[{start:[E]}],end:[{end:[E]}],top:[{top:[E]}],right:[{right:[E]}],bottom:[{bottom:[E]}],left:[{left:[E]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",nr,xe]}],basis:[{basis:ie()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",xe]}],grow:[{grow:Be()}],shrink:[{shrink:Be()}],order:[{order:["first","last","none",nr,xe]}],"grid-cols":[{"grid-cols":[rr]}],"col-start-end":[{col:["auto",{span:["full",nr,xe]},xe]}],"col-start":[{"col-start":$e()}],"col-end":[{"col-end":$e()}],"grid-rows":[{"grid-rows":[rr]}],"row-start-end":[{row:["auto",{span:[nr,xe]},xe]}],"row-start":[{"row-start":$e()}],"row-end":[{"row-end":$e()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",xe]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",xe]}],gap:[{gap:[A]}],"gap-x":[{"gap-x":[A]}],"gap-y":[{"gap-y":[A]}],"justify-content":[{justify:["normal",...Ae()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...Ae(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...Ae(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[z]}],px:[{px:[z]}],py:[{py:[z]}],ps:[{ps:[z]}],pe:[{pe:[z]}],pt:[{pt:[z]}],pr:[{pr:[z]}],pb:[{pb:[z]}],pl:[{pl:[z]}],m:[{m:[$]}],mx:[{mx:[$]}],my:[{my:[$]}],ms:[{ms:[$]}],me:[{me:[$]}],mt:[{mt:[$]}],mr:[{mr:[$]}],mb:[{mb:[$]}],ml:[{ml:[$]}],"space-x":[{"space-x":[X]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[X]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",xe,t]}],"min-w":[{"min-w":[xe,t,"min","max","fit"]}],"max-w":[{"max-w":[xe,t,"none","full","min","max","fit","prose",{screen:[Lt]},Lt]}],h:[{h:[xe,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[xe,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[xe,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[xe,t,"auto","min","max","fit"]}],"font-size":[{text:["base",Lt,It]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",ns]}],"font-family":[{font:[rr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",xe]}],"line-clamp":[{"line-clamp":["none",Cn,ns]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",St,xe]}],"list-image":[{"list-image":["none",xe]}],"list-style-type":[{list:["none","disc","decimal",xe]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[B]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[B]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Pe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",St,It]}],"underline-offset":[{"underline-offset":["auto",St,xe]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:fe()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",xe]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",xe]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[B]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Ue(),Xf]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",Qf]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},eh]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[k]}],"gradient-via-pos":[{via:[k]}],"gradient-to-pos":[{to:[k]}],"gradient-from":[{from:[D]}],"gradient-via":[{via:[D]}],"gradient-to":[{to:[D]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[u]}],"border-w-x":[{"border-x":[u]}],"border-w-y":[{"border-y":[u]}],"border-w-s":[{"border-s":[u]}],"border-w-e":[{"border-e":[u]}],"border-w-t":[{"border-t":[u]}],"border-w-r":[{"border-r":[u]}],"border-w-b":[{"border-b":[u]}],"border-w-l":[{"border-l":[u]}],"border-opacity":[{"border-opacity":[B]}],"border-style":[{border:[...Pe(),"hidden"]}],"divide-x":[{"divide-x":[u]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[u]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[B]}],"divide-style":[{divide:Pe()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...Pe()]}],"outline-offset":[{"outline-offset":[St,xe]}],"outline-w":[{outline:[St,It]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:Ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[B]}],"ring-offset-w":[{"ring-offset":[St,It]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",Lt,th]}],"shadow-color":[{shadow:[rr]}],opacity:[{opacity:[B]}],"mix-blend":[{"mix-blend":[...Qe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Qe()}],filter:[{filter:["","none"]}],blur:[{blur:[a]}],brightness:[{brightness:[s]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",Lt,xe]}],grayscale:[{grayscale:[y]}],"hue-rotate":[{"hue-rotate":[x]}],invert:[{invert:[b]}],saturate:[{saturate:[W]}],sepia:[{sepia:[ae]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[a]}],"backdrop-brightness":[{"backdrop-brightness":[s]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[y]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[x]}],"backdrop-invert":[{"backdrop-invert":[b]}],"backdrop-opacity":[{"backdrop-opacity":[B]}],"backdrop-saturate":[{"backdrop-saturate":[W]}],"backdrop-sepia":[{"backdrop-sepia":[ae]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",xe]}],duration:[{duration:Ee()}],ease:[{ease:["linear","in","out","in-out",xe]}],delay:[{delay:Ee()}],animate:[{animate:["none","spin","ping","pulse","bounce",xe]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[V]}],"scale-x":[{"scale-x":[V]}],"scale-y":[{"scale-y":[V]}],rotate:[{rotate:[nr,xe]}],"translate-x":[{"translate-x":[ce]}],"translate-y":[{"translate-y":[ce]}],"skew-x":[{"skew-x":[J]}],"skew-y":[{"skew-y":[J]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",xe]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",xe]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":fe()}],"scroll-mx":[{"scroll-mx":fe()}],"scroll-my":[{"scroll-my":fe()}],"scroll-ms":[{"scroll-ms":fe()}],"scroll-me":[{"scroll-me":fe()}],"scroll-mt":[{"scroll-mt":fe()}],"scroll-mr":[{"scroll-mr":fe()}],"scroll-mb":[{"scroll-mb":fe()}],"scroll-ml":[{"scroll-ml":fe()}],"scroll-p":[{"scroll-p":fe()}],"scroll-px":[{"scroll-px":fe()}],"scroll-py":[{"scroll-py":fe()}],"scroll-ps":[{"scroll-ps":fe()}],"scroll-pe":[{"scroll-pe":fe()}],"scroll-pt":[{"scroll-pt":fe()}],"scroll-pr":[{"scroll-pr":fe()}],"scroll-pb":[{"scroll-pb":fe()}],"scroll-pl":[{"scroll-pl":fe()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",xe]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[St,It,ns]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},oh=Kf(sh);function te(...e){return oh(cu(e))}const Dc=g.createContext(null);let ih=0;const ch={success:zi,error:uu,warning:qi,info:lu},lh={success:"bg-green-50 dark:bg-green-900/90 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/90 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50 dark:bg-yellow-900/90 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50 dark:bg-blue-900/90 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"},uh={success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-yellow-500 dark:text-yellow-400",info:"text-blue-500 dark:text-blue-400"};function dh({children:e}){const[t,a]=g.useState([]),s=g.useCallback(y=>{a(x=>x.map(b=>b.id===y?{...b,exiting:!0}:b)),setTimeout(()=>{a(x=>x.filter(b=>b.id!==y))},200)},[]),i=g.useCallback((y,x="info",b=4e3)=>{const A=++ih;a(D=>[...D,{id:A,message:y,type:x,duration:b}]),b>0&&setTimeout(()=>s(A),b)},[s]),l=g.useCallback((y,x)=>i(y,"success",x),[i]),d=g.useCallback((y,x)=>i(y,"error",x),[i]),u=g.useCallback((y,x)=>i(y,"warning",x),[i]),p=g.useCallback((y,x)=>i(y,"info",x),[i]);return r.jsxs(Dc.Provider,{value:{showToast:i,success:l,error:d,warning:u,info:p},children:[e,Pt.createPortal(r.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:t.map(y=>{const x=ch[y.type];return r.jsxs("div",{className:te("flex items-start gap-3 p-4 rounded-lg border shadow-lg pointer-events-auto",lh[y.type],y.exiting?"animate-toast-out":"animate-toast-in"),children:[r.jsx(x,{className:te("w-5 h-5 flex-shrink-0 mt-0.5",uh[y.type])}),r.jsx("p",{className:"flex-1 text-sm font-medium",children:y.message}),r.jsx("button",{onClick:()=>s(y.id),className:"flex-shrink-0 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded",children:r.jsx(Bt,{className:"w-4 h-4"})})]},y.id)})}),document.body)]})}function Qy(){const e=g.useContext(Dc);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}var Mc={exports:{}};(function(e,t){(function(a,s){e.exports=s()})(Ko,function(){var a=function(n,o){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,f){c.__proto__=f}||function(c,f){for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&(c[h]=f[h])})(n,o)},s=function(){return(s=Object.assign||function(n){for(var o,c=1,f=arguments.length;c<f;c++)for(var h in o=arguments[c])Object.prototype.hasOwnProperty.call(o,h)&&(n[h]=o[h]);return n}).apply(this,arguments)};function i(n,o,c){for(var f,h=0,m=o.length;h<m;h++)!f&&h in o||((f=f||Array.prototype.slice.call(o,0,h))[h]=o[h]);return n.concat(f||Array.prototype.slice.call(o))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ko,d=Object.keys,u=Array.isArray;function p(n,o){return typeof o!="object"||d(o).forEach(function(c){n[c]=o[c]}),n}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var y=Object.getPrototypeOf,x={}.hasOwnProperty;function b(n,o){return x.call(n,o)}function A(n,o){typeof o=="function"&&(o=o(y(n))),(typeof Reflect>"u"?d:Reflect.ownKeys)(o).forEach(function(c){k(n,c,o[c])})}var D=Object.defineProperty;function k(n,o,c,f){D(n,o,p(c&&b(c,"get")&&typeof c.get=="function"?{get:c.get,set:c.set,configurable:!0}:{value:c,configurable:!0,writable:!0},f))}function E(n){return{from:function(o){return n.prototype=Object.create(o.prototype),k(n.prototype,"constructor",n),{extend:A.bind(null,n.prototype)}}}}var $=Object.getOwnPropertyDescriptor,B=[].slice;function z(n,o,c){return B.call(n,o,c)}function W(n,o){return o(n)}function V(n){if(!n)throw new Error("Assertion Failed")}function ae(n){l.setImmediate?setImmediate(n):setTimeout(n,0)}function J(n,o){if(typeof o=="string"&&b(n,o))return n[o];if(!o)return n;if(typeof o!="string"){for(var c=[],f=0,h=o.length;f<h;++f){var m=J(n,o[f]);c.push(m)}return c}var v=o.indexOf(".");if(v!==-1){var w=n[o.substr(0,v)];return w==null?void 0:J(w,o.substr(v+1))}}function X(n,o,c){if(n&&o!==void 0&&!("isFrozen"in Object&&Object.isFrozen(n)))if(typeof o!="string"&&"length"in o){V(typeof c!="string"&&"length"in c);for(var f=0,h=o.length;f<h;++f)X(n,o[f],c[f])}else{var m,v,w=o.indexOf(".");w!==-1?(m=o.substr(0,w),(v=o.substr(w+1))===""?c===void 0?u(n)&&!isNaN(parseInt(m))?n.splice(m,1):delete n[m]:n[m]=c:X(w=!(w=n[m])||!b(n,m)?n[m]={}:w,v,c)):c===void 0?u(n)&&!isNaN(parseInt(o))?n.splice(o,1):delete n[o]:n[o]=c}}function ce(n){var o,c={};for(o in n)b(n,o)&&(c[o]=n[o]);return c}var _e=[].concat;function Te(n){return _e.apply([],n)}var zt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(Te([8,16,32,64].map(function(n){return["Int","Uint","Float"].map(function(o){return o+n+"Array"})}))).filter(function(n){return l[n]}),ie=new Set(zt.map(function(n){return l[n]})),fe=null;function Ne(n){return fe=new WeakMap,n=function o(c){if(!c||typeof c!="object")return c;var f=fe.get(c);if(f)return f;if(u(c)){f=[],fe.set(c,f);for(var h=0,m=c.length;h<m;++h)f.push(o(c[h]))}else if(ie.has(c.constructor))f=c;else{var v,w=y(c);for(v in f=w===Object.prototype?{}:Object.create(w),fe.set(c,f),c)b(c,v)&&(f[v]=o(c[v]))}return f}(n),fe=null,n}var $e={}.toString;function Ue(n){return $e.call(n).slice(8,-1)}var Pe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Qe=typeof Pe=="symbol"?function(n){var o;return n!=null&&(o=n[Pe])&&o.apply(n)}:function(){return null};function Ae(n,o){return o=n.indexOf(o),0<=o&&n.splice(o,1),0<=o}var Be={};function Ke(n){var o,c,f,h;if(arguments.length===1){if(u(n))return n.slice();if(this===Be&&typeof n=="string")return[n];if(h=Qe(n)){for(c=[];!(f=h.next()).done;)c.push(f.value);return c}if(n==null)return[n];if(typeof(o=n.length)!="number")return[n];for(c=new Array(o);o--;)c[o]=n[o];return c}for(o=arguments.length,c=new Array(o);o--;)c[o]=arguments[o];return c}var Ee=typeof Symbol<"u"?function(n){return n[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Bn=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],lt=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Bn),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function de(n,o){this.name=n,this.message=o}function he(n,o){return n+". Errors: "+Object.keys(o).map(function(c){return o[c].toString()}).filter(function(c,f,h){return h.indexOf(c)===f}).join(`
`)}function le(n,o,c,f){this.failures=o,this.failedKeys=f,this.successCount=c,this.message=he(n,o)}function G(n,o){this.name="BulkError",this.failures=Object.keys(o).map(function(c){return o[c]}),this.failuresByPos=o,this.message=he(n,this.failures)}E(de).from(Error).extend({toString:function(){return this.name+": "+this.message}}),E(le).from(de),E(G).from(de);var De=lt.reduce(function(n,o){return n[o]=o+"Error",n},{}),tt=de,oe=lt.reduce(function(n,o){var c=o+"Error";function f(h,m){this.name=c,h?typeof h=="string"?(this.message="".concat(h).concat(m?`
 `+m:""),this.inner=m||null):typeof h=="object"&&(this.message="".concat(h.name," ").concat(h.message),this.inner=h):(this.message=q[o]||c,this.inner=null)}return E(f).from(tt),n[o]=f,n},{});oe.Syntax=SyntaxError,oe.Type=TypeError,oe.Range=RangeError;var Kt=Bn.reduce(function(n,o){return n[o+"Error"]=oe[o],n},{}),gr=lt.reduce(function(n,o){return["Syntax","Type","Range"].indexOf(o)===-1&&(n[o+"Error"]=oe[o]),n},{});function Se(){}function Ln(n){return n}function xl(n,o){return n==null||n===Ln?o:function(c){return o(n(c))}}function qt(n,o){return function(){n.apply(this,arguments),o.apply(this,arguments)}}function bl(n,o){return n===Se?o:function(){var c=n.apply(this,arguments);c!==void 0&&(arguments[0]=c);var f=this.onsuccess,h=this.onerror;this.onsuccess=null,this.onerror=null;var m=o.apply(this,arguments);return f&&(this.onsuccess=this.onsuccess?qt(f,this.onsuccess):f),h&&(this.onerror=this.onerror?qt(h,this.onerror):h),m!==void 0?m:c}}function vl(n,o){return n===Se?o:function(){n.apply(this,arguments);var c=this.onsuccess,f=this.onerror;this.onsuccess=this.onerror=null,o.apply(this,arguments),c&&(this.onsuccess=this.onsuccess?qt(c,this.onsuccess):c),f&&(this.onerror=this.onerror?qt(f,this.onerror):f)}}function wl(n,o){return n===Se?o:function(c){var f=n.apply(this,arguments);p(c,f);var h=this.onsuccess,m=this.onerror;return this.onsuccess=null,this.onerror=null,c=o.apply(this,arguments),h&&(this.onsuccess=this.onsuccess?qt(h,this.onsuccess):h),m&&(this.onerror=this.onerror?qt(m,this.onerror):m),f===void 0?c===void 0?void 0:c:p(f,c)}}function jl(n,o){return n===Se?o:function(){return o.apply(this,arguments)!==!1&&n.apply(this,arguments)}}function ya(n,o){return n===Se?o:function(){var c=n.apply(this,arguments);if(c&&typeof c.then=="function"){for(var f=this,h=arguments.length,m=new Array(h);h--;)m[h]=arguments[h];return c.then(function(){return o.apply(f,m)})}return o.apply(this,arguments)}}gr.ModifyError=le,gr.DexieError=de,gr.BulkError=G;var gt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ro(n){gt=n}var Fn={},ao=100,zt=typeof Promise>"u"?[]:function(){var n=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[n,y(n),n];var o=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[o,y(o),n]}(),Bn=zt[0],lt=zt[1],zt=zt[2],lt=lt&&lt.then,Ut=Bn&&Bn.constructor,xa=!!zt,Kn=function(n,o){qn.push([n,o]),yr&&(queueMicrotask(Nl),yr=!1)},ba=!0,yr=!0,Wt=[],xr=[],va=Ln,At={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Se,pgp:!1,env:{},finalize:Se},ue=At,qn=[],Vt=0,br=[];function ne(n){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var o=this._PSD=ue;if(typeof n!="function"){if(n!==Fn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ja(this,this._value))}this._state=null,this._value=null,++o.ref,function c(f,h){try{h(function(m){if(f._state===null){if(m===f)throw new TypeError("A promise cannot be resolved with itself.");var v=f._lib&&mn();m&&typeof m.then=="function"?c(f,function(w,N){m instanceof ne?m._then(w,N):m.then(w,N)}):(f._state=!0,f._value=m,oo(f)),v&&pn()}},ja.bind(null,f))}catch(m){ja(f,m)}}(this,n)}var wa={get:function(){var n=ue,o=kr;function c(f,h){var m=this,v=!n.global&&(n!==ue||o!==kr),w=v&&!Ot(),N=new ne(function(S,R){ka(m,new so(co(f,n,v,w),co(h,n,v,w),S,R,n))});return this._consoleTask&&(N._consoleTask=this._consoleTask),N}return c.prototype=Fn,c},set:function(n){k(this,"then",n&&n.prototype===Fn?wa:{get:function(){return n},set:wa.set})}};function so(n,o,c,f,h){this.onFulfilled=typeof n=="function"?n:null,this.onRejected=typeof o=="function"?o:null,this.resolve=c,this.reject=f,this.psd=h}function ja(n,o){var c,f;xr.push(o),n._state===null&&(c=n._lib&&mn(),o=va(o),n._state=!1,n._value=o,f=n,Wt.some(function(h){return h._value===f._value})||Wt.push(f),oo(n),c&&pn())}function oo(n){var o=n._listeners;n._listeners=[];for(var c=0,f=o.length;c<f;++c)ka(n,o[c]);var h=n._PSD;--h.ref||h.finalize(),Vt===0&&(++Vt,Kn(function(){--Vt==0&&Na()},[]))}function ka(n,o){if(n._state!==null){var c=n._state?o.onFulfilled:o.onRejected;if(c===null)return(n._state?o.resolve:o.reject)(n._value);++o.psd.ref,++Vt,Kn(kl,[c,n,o])}else n._listeners.push(o)}function kl(n,o,c){try{var f,h=o._value;!o._state&&xr.length&&(xr=[]),f=gt&&o._consoleTask?o._consoleTask.run(function(){return n(h)}):n(h),o._state||xr.indexOf(h)!==-1||function(m){for(var v=Wt.length;v;)if(Wt[--v]._value===m._value)return Wt.splice(v,1)}(o),c.resolve(f)}catch(m){c.reject(m)}finally{--Vt==0&&Na(),--c.psd.ref||c.psd.finalize()}}function Nl(){Ht(At,function(){mn()&&pn()})}function mn(){var n=ba;return yr=ba=!1,n}function pn(){var n,o,c;do for(;0<qn.length;)for(n=qn,qn=[],c=n.length,o=0;o<c;++o){var f=n[o];f[0].apply(null,f[1])}while(0<qn.length);yr=ba=!0}function Na(){var n=Wt;Wt=[],n.forEach(function(f){f._PSD.onunhandled.call(null,f._value,f)});for(var o=br.slice(0),c=o.length;c;)o[--c]()}function vr(n){return new ne(Fn,!1,n)}function Oe(n,o){var c=ue;return function(){var f=mn(),h=ue;try{return Tt(c,!0),n.apply(this,arguments)}catch(m){o&&o(m)}finally{Tt(h,!1),f&&pn()}}}A(ne.prototype,{then:wa,_then:function(n,o){ka(this,new so(null,null,n,o,ue))},catch:function(n){if(arguments.length===1)return this.then(null,n);var o=n,c=arguments[1];return typeof o=="function"?this.then(null,function(f){return(f instanceof o?c:vr)(f)}):this.then(null,function(f){return(f&&f.name===o?c:vr)(f)})},finally:function(n){return this.then(function(o){return ne.resolve(n()).then(function(){return o})},function(o){return ne.resolve(n()).then(function(){return vr(o)})})},timeout:function(n,o){var c=this;return n<1/0?new ne(function(f,h){var m=setTimeout(function(){return h(new oe.Timeout(o))},n);c.then(f,h).finally(clearTimeout.bind(null,m))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&k(ne.prototype,Symbol.toStringTag,"Dexie.Promise"),At.env=io(),A(ne,{all:function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o,c){n.length===0&&o([]);var f=n.length;n.forEach(function(h,m){return ne.resolve(h).then(function(v){n[m]=v,--f||o(n)},c)})})},resolve:function(n){return n instanceof ne?n:n&&typeof n.then=="function"?new ne(function(o,c){n.then(o,c)}):new ne(Fn,!0,n)},reject:vr,race:function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o,c){n.map(function(f){return ne.resolve(f).then(o,c)})})},PSD:{get:function(){return ue},set:function(n){return ue=n}},totalEchoes:{get:function(){return kr}},newPSD:Rt,usePSD:Ht,scheduler:{get:function(){return Kn},set:function(n){Kn=n}},rejectionMapper:{get:function(){return va},set:function(n){va=n}},follow:function(n,o){return new ne(function(c,f){return Rt(function(h,m){var v=ue;v.unhandleds=[],v.onunhandled=m,v.finalize=qt(function(){var w,N=this;w=function(){N.unhandleds.length===0?h():m(N.unhandleds[0])},br.push(function S(){w(),br.splice(br.indexOf(S),1)}),++Vt,Kn(function(){--Vt==0&&Na()},[])},v.finalize),n()},o,c,f)})}}),Ut&&(Ut.allSettled&&k(ne,"allSettled",function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o){n.length===0&&o([]);var c=n.length,f=new Array(c);n.forEach(function(h,m){return ne.resolve(h).then(function(v){return f[m]={status:"fulfilled",value:v}},function(v){return f[m]={status:"rejected",reason:v}}).then(function(){return--c||o(f)})})})}),Ut.any&&typeof AggregateError<"u"&&k(ne,"any",function(){var n=Ke.apply(null,arguments).map(Nr);return new ne(function(o,c){n.length===0&&c(new AggregateError([]));var f=n.length,h=new Array(f);n.forEach(function(m,v){return ne.resolve(m).then(function(w){return o(w)},function(w){h[v]=w,--f||c(new AggregateError(h))})})})}),Ut.withResolvers&&(ne.withResolvers=Ut.withResolvers));var qe={awaits:0,echoes:0,id:0},Sl=0,wr=[],jr=0,kr=0,_l=0;function Rt(n,o,c,f){var h=ue,m=Object.create(h);return m.parent=h,m.ref=0,m.global=!1,m.id=++_l,At.env,m.env=xa?{Promise:ne,PromiseProp:{value:ne,configurable:!0,writable:!0},all:ne.all,race:ne.race,allSettled:ne.allSettled,any:ne.any,resolve:ne.resolve,reject:ne.reject}:{},o&&p(m,o),++h.ref,m.finalize=function(){--this.parent.ref||this.parent.finalize()},f=Ht(m,n,c,f),m.ref===0&&m.finalize(),f}function gn(){return qe.id||(qe.id=++Sl),++qe.awaits,qe.echoes+=ao,qe.id}function Ot(){return!!qe.awaits&&(--qe.awaits==0&&(qe.id=0),qe.echoes=qe.awaits*ao,!0)}function Nr(n){return qe.echoes&&n&&n.constructor===Ut?(gn(),n.then(function(o){return Ot(),o},function(o){return Ot(),Le(o)})):n}function El(){var n=wr[wr.length-1];wr.pop(),Tt(n,!1)}function Tt(n,o){var c,f=ue;(o?!qe.echoes||jr++&&n===ue:!jr||--jr&&n===ue)||queueMicrotask(o?(function(h){++kr,qe.echoes&&--qe.echoes!=0||(qe.echoes=qe.awaits=qe.id=0),wr.push(ue),Tt(h,!0)}).bind(null,n):El),n!==ue&&(ue=n,f===At&&(At.env=io()),xa&&(c=At.env.Promise,o=n.env,(f.global||n.global)&&(Object.defineProperty(l,"Promise",o.PromiseProp),c.all=o.all,c.race=o.race,c.resolve=o.resolve,c.reject=o.reject,o.allSettled&&(c.allSettled=o.allSettled),o.any&&(c.any=o.any))))}function io(){var n=l.Promise;return xa?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:n.all,race:n.race,allSettled:n.allSettled,any:n.any,resolve:n.resolve,reject:n.reject}:{}}function Ht(n,o,c,f,h){var m=ue;try{return Tt(n,!0),o(c,f,h)}finally{Tt(m,!1)}}function co(n,o,c,f){return typeof n!="function"?n:function(){var h=ue;c&&gn(),Tt(o,!0);try{return n.apply(this,arguments)}finally{Tt(h,!1),f&&queueMicrotask(Ot)}}}function Sa(n){Promise===Ut&&qe.echoes===0?jr===0?n():enqueueNativeMicroTask(n):setTimeout(n,0)}(""+lt).indexOf("[native code]")===-1&&(gn=Ot=Se);var Le=ne.reject,Gt="",kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lo="String expected.",yn=[],Sr="__dbnames",_a="readonly",Ea="readwrite";function Yt(n,o){return n?o?function(){return n.apply(this,arguments)&&o.apply(this,arguments)}:n:o}var uo={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function _r(n){return typeof n!="string"||/\./.test(n)?function(o){return o}:function(o){return o[n]===void 0&&n in o&&delete(o=Ne(o))[n],o}}function fo(){throw oe.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function je(n,o){try{var c=ho(n),f=ho(o);if(c!==f)return c==="Array"?1:f==="Array"?-1:c==="binary"?1:f==="binary"?-1:c==="string"?1:f==="string"?-1:c==="Date"?1:f!=="Date"?NaN:-1;switch(c){case"number":case"Date":case"string":return o<n?1:n<o?-1:0;case"binary":return function(h,m){for(var v=h.length,w=m.length,N=v<w?v:w,S=0;S<N;++S)if(h[S]!==m[S])return h[S]<m[S]?-1:1;return v===w?0:v<w?-1:1}(mo(n),mo(o));case"Array":return function(h,m){for(var v=h.length,w=m.length,N=v<w?v:w,S=0;S<N;++S){var R=je(h[S],m[S]);if(R!==0)return R}return v===w?0:v<w?-1:1}(n,o)}}catch{}return NaN}function ho(n){var o=typeof n;return o!="object"?o:ArrayBuffer.isView(n)?"binary":(n=Ue(n),n==="ArrayBuffer"?"binary":n)}function mo(n){return n instanceof Uint8Array?n:ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n)}function Er(n,o,c){var f=n.schema.yProps;return f?(o&&0<c.numFailures&&(o=o.filter(function(h,m){return!c.failures[m]})),Promise.all(f.map(function(h){return h=h.updatesTable,o?n.db.table(h).where("k").anyOf(o).delete():n.db.table(h).clear()})).then(function(){return c})):c}var zn=(po.prototype.execute=function(n){var o=this["@@propmod"];if(o.add!==void 0){var c=o.add;if(u(c))return i(i([],u(n)?n:[],!0),c).sort();if(typeof c=="number")return(Number(n)||0)+c;if(typeof c=="bigint")try{return BigInt(n)+c}catch{return BigInt(0)+c}throw new TypeError("Invalid term ".concat(c))}if(o.remove!==void 0){var f=o.remove;if(u(f))return u(n)?n.filter(function(h){return!f.includes(h)}).sort():[];if(typeof f=="number")return Number(n)-f;if(typeof f=="bigint")try{return BigInt(n)-f}catch{return BigInt(0)-f}throw new TypeError("Invalid subtrahend ".concat(f))}return c=(c=o.replacePrefix)===null||c===void 0?void 0:c[0],c&&typeof n=="string"&&n.startsWith(c)?o.replacePrefix[1]+n.substring(c.length):n},po);function po(n){this["@@propmod"]=n}function go(n,o){for(var c=d(o),f=c.length,h=!1,m=0;m<f;++m){var v=c[m],w=o[v],N=J(n,v);w instanceof zn?(X(n,v,w.execute(N)),h=!0):N!==w&&(X(n,v,w),h=!0)}return h}var yo=(Ce.prototype._trans=function(n,o,c){var f=this._tx||ue.trans,h=this.name,m=gt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(n==="readonly"?"read":"write"," ").concat(this.name));function v(S,R,j){if(!j.schema[h])throw new oe.NotFound("Table "+h+" not part of transaction");return o(j.idbtrans,j)}var w=mn();try{var N=f&&f.db._novip===this.db._novip?f===ue.trans?f._promise(n,v,c):Rt(function(){return f._promise(n,v,c)},{trans:f,transless:ue.transless||ue}):function S(R,j,T,_){if(R.idbdb&&(R._state.openComplete||ue.letThrough||R._vip)){var C=R._createTransaction(j,T,R._dbSchema);try{C.create(),R._state.PR1398_maxLoop=3}catch(P){return P.name===De.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return S(R,j,T,_)})):Le(P)}return C._promise(j,function(P,O){return Rt(function(){return ue.trans=C,_(P,O,C)})}).then(function(P){if(j==="readwrite")try{C.idbtrans.commit()}catch{}return j==="readonly"?P:C._completion.then(function(){return P})})}if(R._state.openComplete)return Le(new oe.DatabaseClosed(R._state.dbOpenError));if(!R._state.isBeingOpened){if(!R._state.autoOpen)return Le(new oe.DatabaseClosed);R.open().catch(Se)}return R._state.dbReadyPromise.then(function(){return S(R,j,T,_)})}(this.db,n,[this.name],v);return m&&(N._consoleTask=m,N=N.catch(function(S){return console.trace(S),Le(S)})),N}finally{w&&pn()}},Ce.prototype.get=function(n,o){var c=this;return n&&n.constructor===Object?this.where(n).first(o):n==null?Le(new oe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(f){return c.core.get({trans:f,key:n}).then(function(h){return c.hook.reading.fire(h)})}).then(o)},Ce.prototype.where=function(n){if(typeof n=="string")return new this.db.WhereClause(this,n);if(u(n))return new this.db.WhereClause(this,"[".concat(n.join("+"),"]"));var o=d(n);if(o.length===1)return this.where(o[0]).equals(n[o[0]]);var c=this.schema.indexes.concat(this.schema.primKey).filter(function(w){if(w.compound&&o.every(function(S){return 0<=w.keyPath.indexOf(S)})){for(var N=0;N<o.length;++N)if(o.indexOf(w.keyPath[N])===-1)return!1;return!0}return!1}).sort(function(w,N){return w.keyPath.length-N.keyPath.length})[0];if(c&&this.db._maxKey!==Gt){var m=c.keyPath.slice(0,o.length);return this.where(m).equals(m.map(function(N){return n[N]}))}!c&&gt&&console.warn("The query ".concat(JSON.stringify(n)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(o.join("+"),"]"));var f=this.schema.idxByName;function h(w,N){return je(w,N)===0}var v=o.reduce(function(j,N){var S=j[0],R=j[1],j=f[N],T=n[N];return[S||j,S||!j?Yt(R,j&&j.multi?function(_){return _=J(_,N),u(_)&&_.some(function(C){return h(T,C)})}:function(_){return h(T,J(_,N))}):R]},[null,null]),m=v[0],v=v[1];return m?this.where(m.name).equals(n[m.keyPath]).filter(v):c?this.filter(v):this.where(o).equals("")},Ce.prototype.filter=function(n){return this.toCollection().and(n)},Ce.prototype.count=function(n){return this.toCollection().count(n)},Ce.prototype.offset=function(n){return this.toCollection().offset(n)},Ce.prototype.limit=function(n){return this.toCollection().limit(n)},Ce.prototype.each=function(n){return this.toCollection().each(n)},Ce.prototype.toArray=function(n){return this.toCollection().toArray(n)},Ce.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},Ce.prototype.orderBy=function(n){return new this.db.Collection(new this.db.WhereClause(this,u(n)?"[".concat(n.join("+"),"]"):n))},Ce.prototype.reverse=function(){return this.toCollection().reverse()},Ce.prototype.mapToClass=function(n){var o,c=this.db,f=this.name;function h(){return o!==null&&o.apply(this,arguments)||this}(this.schema.mappedClass=n).prototype instanceof fo&&(function(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Class extends value "+String(S)+" is not a constructor or null");function R(){this.constructor=N}a(N,S),N.prototype=S===null?Object.create(S):(R.prototype=S.prototype,new R)}(h,o=n),Object.defineProperty(h.prototype,"db",{get:function(){return c},enumerable:!1,configurable:!0}),h.prototype.table=function(){return f},n=h);for(var m=new Set,v=n.prototype;v;v=y(v))Object.getOwnPropertyNames(v).forEach(function(N){return m.add(N)});function w(N){if(!N)return N;var S,R=Object.create(n.prototype);for(S in N)if(!m.has(S))try{R[S]=N[S]}catch{}return R}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=w,this.hook("reading",w),n},Ce.prototype.defineClass=function(){return this.mapToClass(function(n){p(this,n)})},Ce.prototype.add=function(n,o){var c=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,v=n;return m&&h&&(v=_r(m)(n)),this._trans("readwrite",function(w){return c.core.mutate({trans:w,type:"add",keys:o!=null?[o]:null,values:[v]})}).then(function(w){return w.numFailures?ne.reject(w.failures[0]):w.lastResult}).then(function(w){if(m)try{X(n,m,w)}catch{}return w})},Ce.prototype.upsert=function(n,o){var c=this,f=this.schema.primKey.keyPath;return this._trans("readwrite",function(h){return c.core.get({trans:h,key:n}).then(function(m){var v=m??{};return go(v,o),f&&X(v,f,n),c.core.mutate({trans:h,type:"put",values:[v],keys:[n],upsert:!0,updates:{keys:[n],changeSpecs:[o]}}).then(function(w){return w.numFailures?ne.reject(w.failures[0]):!!m})})})},Ce.prototype.update=function(n,o){return typeof n!="object"||u(n)?this.where(":id").equals(n).modify(o):(n=J(n,this.schema.primKey.keyPath),n===void 0?Le(new oe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(o))},Ce.prototype.put=function(n,o){var c=this,f=this.schema.primKey,h=f.auto,m=f.keyPath,v=n;return m&&h&&(v=_r(m)(n)),this._trans("readwrite",function(w){return c.core.mutate({trans:w,type:"put",values:[v],keys:o!=null?[o]:null})}).then(function(w){return w.numFailures?ne.reject(w.failures[0]):w.lastResult}).then(function(w){if(m)try{X(n,m,w)}catch{}return w})},Ce.prototype.delete=function(n){var o=this;return this._trans("readwrite",function(c){return o.core.mutate({trans:c,type:"delete",keys:[n]}).then(function(f){return Er(o,[n],f)}).then(function(f){return f.numFailures?ne.reject(f.failures[0]):void 0})})},Ce.prototype.clear=function(){var n=this;return this._trans("readwrite",function(o){return n.core.mutate({trans:o,type:"deleteRange",range:uo}).then(function(c){return Er(n,null,c)})}).then(function(o){return o.numFailures?ne.reject(o.failures[0]):void 0})},Ce.prototype.bulkGet=function(n){var o=this;return this._trans("readonly",function(c){return o.core.getMany({keys:n,trans:c}).then(function(f){return f.map(function(h){return o.hook.reading.fire(h)})})})},Ce.prototype.bulkAdd=function(n,o,c){var f=this,h=Array.isArray(o)?o:void 0,m=(c=c||(h?void 0:o))?c.allKeys:void 0;return this._trans("readwrite",function(v){var S=f.schema.primKey,w=S.auto,S=S.keyPath;if(S&&h)throw new oe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(h&&h.length!==n.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var N=n.length,S=S&&w?n.map(_r(S)):n;return f.core.mutate({trans:v,type:"add",keys:h,values:S,wantResults:m}).then(function(C){var j=C.numFailures,T=C.results,_=C.lastResult,C=C.failures;if(j===0)return m?T:_;throw new G("".concat(f.name,".bulkAdd(): ").concat(j," of ").concat(N," operations failed"),C)})})},Ce.prototype.bulkPut=function(n,o,c){var f=this,h=Array.isArray(o)?o:void 0,m=(c=c||(h?void 0:o))?c.allKeys:void 0;return this._trans("readwrite",function(v){var S=f.schema.primKey,w=S.auto,S=S.keyPath;if(S&&h)throw new oe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(h&&h.length!==n.length)throw new oe.InvalidArgument("Arguments objects and keys must have the same length");var N=n.length,S=S&&w?n.map(_r(S)):n;return f.core.mutate({trans:v,type:"put",keys:h,values:S,wantResults:m}).then(function(C){var j=C.numFailures,T=C.results,_=C.lastResult,C=C.failures;if(j===0)return m?T:_;throw new G("".concat(f.name,".bulkPut(): ").concat(j," of ").concat(N," operations failed"),C)})})},Ce.prototype.bulkUpdate=function(n){var o=this,c=this.core,f=n.map(function(v){return v.key}),h=n.map(function(v){return v.changes}),m=[];return this._trans("readwrite",function(v){return c.getMany({trans:v,keys:f,cache:"clone"}).then(function(w){var N=[],S=[];n.forEach(function(j,T){var _=j.key,C=j.changes,P=w[T];if(P){for(var O=0,M=Object.keys(C);O<M.length;O++){var I=M[O],F=C[I];if(I===o.schema.primKey.keyPath){if(je(F,_)!==0)throw new oe.Constraint("Cannot update primary key in bulkUpdate()")}else X(P,I,F)}m.push(T),N.push(_),S.push(P)}});var R=N.length;return c.mutate({trans:v,type:"put",keys:N,values:S,updates:{keys:f,changeSpecs:h}}).then(function(j){var T=j.numFailures,_=j.failures;if(T===0)return R;for(var C=0,P=Object.keys(_);C<P.length;C++){var O,M=P[C],I=m[Number(M)];I!=null&&(O=_[M],delete _[M],_[I]=O)}throw new G("".concat(o.name,".bulkUpdate(): ").concat(T," of ").concat(R," operations failed"),_)})})})},Ce.prototype.bulkDelete=function(n){var o=this,c=n.length;return this._trans("readwrite",function(f){return o.core.mutate({trans:f,type:"delete",keys:n}).then(function(h){return Er(o,n,h)})}).then(function(v){var h=v.numFailures,m=v.lastResult,v=v.failures;if(h===0)return m;throw new G("".concat(o.name,".bulkDelete(): ").concat(h," of ").concat(c," operations failed"),v)})},Ce);function Ce(){}function Un(n){function o(v,w){if(w){for(var N=arguments.length,S=new Array(N-1);--N;)S[N-1]=arguments[N];return c[v].subscribe.apply(null,S),n}if(typeof v=="string")return c[v]}var c={};o.addEventType=m;for(var f=1,h=arguments.length;f<h;++f)m(arguments[f]);return o;function m(v,w,N){if(typeof v!="object"){var S;w=w||jl;var R={subscribers:[],fire:N=N||Se,subscribe:function(j){R.subscribers.indexOf(j)===-1&&(R.subscribers.push(j),R.fire=w(R.fire,j))},unsubscribe:function(j){R.subscribers=R.subscribers.filter(function(T){return T!==j}),R.fire=R.subscribers.reduce(w,N)}};return c[v]=o[v]=R}d(S=v).forEach(function(j){var T=S[j];if(u(T))m(j,S[j][0],S[j][1]);else{if(T!=="asap")throw new oe.InvalidArgument("Invalid event config");var _=m(j,Ln,function(){for(var C=arguments.length,P=new Array(C);C--;)P[C]=arguments[C];_.subscribers.forEach(function(O){ae(function(){O.apply(null,P)})})})}})}}function Wn(n,o){return E(o).from({prototype:n}),o}function xn(n,o){return!(n.filter||n.algorithm||n.or)&&(o?n.justLimit:!n.replayFilter)}function Ca(n,o){n.filter=Yt(n.filter,o)}function Pa(n,o,c){var f=n.replayFilter;n.replayFilter=f?function(){return Yt(f(),o())}:o,n.justLimit=c&&!f}function Cr(n,o){if(n.isPrimKey)return o.primaryKey;var c=o.getIndexByKeyPath(n.index);if(!c)throw new oe.Schema("KeyPath "+n.index+" on object store "+o.name+" is not indexed");return c}function xo(n,o,c){var f=Cr(n,o.schema);return o.openCursor({trans:c,values:!n.keysOnly,reverse:n.dir==="prev",unique:!!n.unique,query:{index:f,range:n.range}})}function Pr(n,o,c,f){var h=n.replayFilter?Yt(n.filter,n.replayFilter()):n.filter;if(n.or){var m={},v=function(w,N,S){var R,j;h&&!h(N,S,function(T){return N.stop(T)},function(T){return N.fail(T)})||((j=""+(R=N.primaryKey))=="[object ArrayBuffer]"&&(j=""+new Uint8Array(R)),b(m,j)||(m[j]=!0,o(w,N,S)))};return Promise.all([n.or._iterate(v,c),bo(xo(n,f,c),n.algorithm,v,!n.keysOnly&&n.valueMapper)])}return bo(xo(n,f,c),Yt(n.algorithm,h),o,!n.keysOnly&&n.valueMapper)}function bo(n,o,c,f){var h=Oe(f?function(m,v,w){return c(f(m),v,w)}:c);return n.then(function(m){if(m)return m.start(function(){var v=function(){return m.continue()};o&&!o(m,function(w){return v=w},function(w){m.stop(w),v=Se},function(w){m.fail(w),v=Se})||h(m.value,m,function(w){return v=w}),v()})})}var Cl=(ke.prototype._read=function(n,o){var c=this._ctx;return c.error?c.table._trans(null,Le.bind(null,c.error)):c.table._trans("readonly",n).then(o)},ke.prototype._write=function(n){var o=this._ctx;return o.error?o.table._trans(null,Le.bind(null,o.error)):o.table._trans("readwrite",n,"locked")},ke.prototype._addAlgorithm=function(n){var o=this._ctx;o.algorithm=Yt(o.algorithm,n)},ke.prototype._iterate=function(n,o){return Pr(this._ctx,n,o,this._ctx.table.core)},ke.prototype.clone=function(n){var o=Object.create(this.constructor.prototype),c=Object.create(this._ctx);return n&&p(c,n),o._ctx=c,o},ke.prototype.raw=function(){return this._ctx.valueMapper=null,this},ke.prototype.each=function(n){var o=this._ctx;return this._read(function(c){return Pr(o,n,c,o.table.core)})},ke.prototype.count=function(n){var o=this;return this._read(function(c){var f=o._ctx,h=f.table.core;if(xn(f,!0))return h.count({trans:c,query:{index:Cr(f,h.schema),range:f.range}}).then(function(v){return Math.min(v,f.limit)});var m=0;return Pr(f,function(){return++m,!1},c,h).then(function(){return m})}).then(n)},ke.prototype.sortBy=function(n,o){var c=n.split(".").reverse(),f=c[0],h=c.length-1;function m(N,S){return S?m(N[c[S]],S-1):N[f]}var v=this._ctx.dir==="next"?1:-1;function w(N,S){return je(m(N,h),m(S,h))*v}return this.toArray(function(N){return N.sort(w)}).then(o)},ke.prototype.toArray=function(n){var o=this;return this._read(function(c){var f=o._ctx;if(f.dir==="next"&&xn(f,!0)&&0<f.limit){var h=f.valueMapper,m=Cr(f,f.table.core.schema);return f.table.core.query({trans:c,limit:f.limit,values:!0,query:{index:m,range:f.range}}).then(function(w){return w=w.result,h?w.map(h):w})}var v=[];return Pr(f,function(w){return v.push(w)},c,f.table.core).then(function(){return v})},n)},ke.prototype.offset=function(n){var o=this._ctx;return n<=0||(o.offset+=n,xn(o)?Pa(o,function(){var c=n;return function(f,h){return c===0||(c===1?--c:h(function(){f.advance(c),c=0}),!1)}}):Pa(o,function(){var c=n;return function(){return--c<0}})),this},ke.prototype.limit=function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),Pa(this._ctx,function(){var o=n;return function(c,f,h){return--o<=0&&f(h),0<=o}},!0),this},ke.prototype.until=function(n,o){return Ca(this._ctx,function(c,f,h){return!n(c.value)||(f(h),o)}),this},ke.prototype.first=function(n){return this.limit(1).toArray(function(o){return o[0]}).then(n)},ke.prototype.last=function(n){return this.reverse().first(n)},ke.prototype.filter=function(n){var o;return Ca(this._ctx,function(c){return n(c.value)}),(o=this._ctx).isMatch=Yt(o.isMatch,n),this},ke.prototype.and=function(n){return this.filter(n)},ke.prototype.or=function(n){return new this.db.WhereClause(this._ctx.table,n,this)},ke.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ke.prototype.desc=function(){return this.reverse()},ke.prototype.eachKey=function(n){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(c,f){n(f.key,f)})},ke.prototype.eachUniqueKey=function(n){return this._ctx.unique="unique",this.eachKey(n)},ke.prototype.eachPrimaryKey=function(n){var o=this._ctx;return o.keysOnly=!o.isMatch,this.each(function(c,f){n(f.primaryKey,f)})},ke.prototype.keys=function(n){var o=this._ctx;o.keysOnly=!o.isMatch;var c=[];return this.each(function(f,h){c.push(h.key)}).then(function(){return c}).then(n)},ke.prototype.primaryKeys=function(n){var o=this._ctx;if(o.dir==="next"&&xn(o,!0)&&0<o.limit)return this._read(function(f){var h=Cr(o,o.table.core.schema);return o.table.core.query({trans:f,values:!1,limit:o.limit,query:{index:h,range:o.range}})}).then(function(f){return f.result}).then(n);o.keysOnly=!o.isMatch;var c=[];return this.each(function(f,h){c.push(h.primaryKey)}).then(function(){return c}).then(n)},ke.prototype.uniqueKeys=function(n){return this._ctx.unique="unique",this.keys(n)},ke.prototype.firstKey=function(n){return this.limit(1).keys(function(o){return o[0]}).then(n)},ke.prototype.lastKey=function(n){return this.reverse().firstKey(n)},ke.prototype.distinct=function(){var n=this._ctx,n=n.index&&n.table.schema.idxByName[n.index];if(!n||!n.multi)return this;var o={};return Ca(this._ctx,function(h){var f=h.primaryKey.toString(),h=b(o,f);return o[f]=!0,!h}),this},ke.prototype.modify=function(n){var o=this,c=this._ctx;return this._write(function(f){var h=typeof n=="function"?n:function(P){return go(P,n)},m=c.table.core,S=m.schema.primaryKey,v=S.outbound,w=S.extractKey,N=200,S=o.db._options.modifyChunkSize;S&&(N=typeof S=="object"?S[m.name]||S["*"]||200:S);function R(P,I){var M=I.failures,I=I.numFailures;T+=P-I;for(var F=0,K=d(M);F<K.length;F++){var H=K[F];j.push(M[H])}}var j=[],T=0,_=[],C=n===vo;return o.clone().primaryKeys().then(function(P){function O(I){var F=Math.min(N,P.length-I),K=P.slice(I,I+F);return(C?Promise.resolve([]):m.getMany({trans:f,keys:K,cache:"immutable"})).then(function(H){var Z=[],U=[],Y=v?[]:null,ee=C?K:[];if(!C)for(var Q=0;Q<F;++Q){var se=H[Q],ge={value:Ne(se),primKey:P[I+Q]};h.call(ge,ge.value,ge)!==!1&&(ge.value==null?ee.push(P[I+Q]):v||je(w(se),w(ge.value))===0?(U.push(ge.value),v&&Y.push(P[I+Q])):(ee.push(P[I+Q]),Z.push(ge.value)))}return Promise.resolve(0<Z.length&&m.mutate({trans:f,type:"add",values:Z}).then(function(be){for(var ve in be.failures)ee.splice(parseInt(ve),1);R(Z.length,be)})).then(function(){return(0<U.length||M&&typeof n=="object")&&m.mutate({trans:f,type:"put",keys:Y,values:U,criteria:M,changeSpec:typeof n!="function"&&n,isAdditionalChunk:0<I}).then(function(be){return R(U.length,be)})}).then(function(){return(0<ee.length||M&&C)&&m.mutate({trans:f,type:"delete",keys:ee,criteria:M,isAdditionalChunk:0<I}).then(function(be){return Er(c.table,ee,be)}).then(function(be){return R(ee.length,be)})}).then(function(){return P.length>I+F&&O(I+N)})})}var M=xn(c)&&c.limit===1/0&&(typeof n!="function"||C)&&{index:c.index,range:c.range};return O(0).then(function(){if(0<j.length)throw new le("Error modifying one or more objects",j,T,_);return P.length})})})},ke.prototype.delete=function(){var n=this._ctx,o=n.range;return!xn(n)||n.table.schema.yProps||!n.isPrimKey&&o.type!==3?this.modify(vo):this._write(function(c){var f=n.table.core.schema.primaryKey,h=o;return n.table.core.count({trans:c,query:{index:f,range:h}}).then(function(m){return n.table.core.mutate({trans:c,type:"deleteRange",range:h}).then(function(N){var w=N.failures,N=N.numFailures;if(N)throw new le("Could not delete some values",Object.keys(w).map(function(S){return w[S]}),m-N);return m-N})})})},ke);function ke(){}var vo=function(n,o){return o.value=null};function Pl(n,o){return n<o?-1:n===o?0:1}function Al(n,o){return o<n?-1:n===o?0:1}function at(n,o,c){return n=n instanceof jo?new n.Collection(n):n,n._ctx.error=new(c||TypeError)(o),n}function bn(n){return new n.Collection(n,function(){return wo("")}).limit(0)}function Ar(n,o,c,f){var h,m,v,w,N,S,R,j=c.length;if(!c.every(function(C){return typeof C=="string"}))return at(n,lo);function T(C){h=C==="next"?function(O){return O.toUpperCase()}:function(O){return O.toLowerCase()},m=C==="next"?function(O){return O.toLowerCase()}:function(O){return O.toUpperCase()},v=C==="next"?Pl:Al;var P=c.map(function(O){return{lower:m(O),upper:h(O)}}).sort(function(O,M){return v(O.lower,M.lower)});w=P.map(function(O){return O.upper}),N=P.map(function(O){return O.lower}),R=(S=C)==="next"?"":f}T("next"),n=new n.Collection(n,function(){return $t(w[0],N[j-1]+f)}),n._ondirectionchange=function(C){T(C)};var _=0;return n._addAlgorithm(function(C,P,O){var M=C.key;if(typeof M!="string")return!1;var I=m(M);if(o(I,N,_))return!0;for(var F=null,K=_;K<j;++K){var H=function(Z,U,Y,ee,Q,se){for(var ge=Math.min(Z.length,ee.length),be=-1,ve=0;ve<ge;++ve){var st=U[ve];if(st!==ee[ve])return Q(Z[ve],Y[ve])<0?Z.substr(0,ve)+Y[ve]+Y.substr(ve+1):Q(Z[ve],ee[ve])<0?Z.substr(0,ve)+ee[ve]+Y.substr(ve+1):0<=be?Z.substr(0,be)+U[be]+Y.substr(be+1):null;Q(Z[ve],st)<0&&(be=ve)}return ge<ee.length&&se==="next"?Z+Y.substr(Z.length):ge<Z.length&&se==="prev"?Z.substr(0,Y.length):be<0?null:Z.substr(0,be)+ee[be]+Y.substr(be+1)}(M,I,w[K],N[K],v,S);H===null&&F===null?_=K+1:(F===null||0<v(F,H))&&(F=H)}return P(F!==null?function(){C.continue(F+R)}:O),!1}),n}function $t(n,o,c,f){return{type:2,lower:n,upper:o,lowerOpen:c,upperOpen:f}}function wo(n){return{type:1,lower:n,upper:n}}var jo=(Object.defineProperty(ze.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ze.prototype.between=function(n,o,c,f){c=c!==!1,f=f===!0;try{return 0<this._cmp(n,o)||this._cmp(n,o)===0&&(c||f)&&(!c||!f)?bn(this):new this.Collection(this,function(){return $t(n,o,!c,!f)})}catch{return at(this,kt)}},ze.prototype.equals=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return wo(n)})},ze.prototype.above=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(n,void 0,!0)})},ze.prototype.aboveOrEqual=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(n,void 0,!1)})},ze.prototype.below=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(void 0,n,!1,!0)})},ze.prototype.belowOrEqual=function(n){return n==null?at(this,kt):new this.Collection(this,function(){return $t(void 0,n)})},ze.prototype.startsWith=function(n){return typeof n!="string"?at(this,lo):this.between(n,n+Gt,!0,!0)},ze.prototype.startsWithIgnoreCase=function(n){return n===""?this.startsWith(n):Ar(this,function(o,c){return o.indexOf(c[0])===0},[n],Gt)},ze.prototype.equalsIgnoreCase=function(n){return Ar(this,function(o,c){return o===c[0]},[n],"")},ze.prototype.anyOfIgnoreCase=function(){var n=Ke.apply(Be,arguments);return n.length===0?bn(this):Ar(this,function(o,c){return c.indexOf(o)!==-1},n,"")},ze.prototype.startsWithAnyOfIgnoreCase=function(){var n=Ke.apply(Be,arguments);return n.length===0?bn(this):Ar(this,function(o,c){return c.some(function(f){return o.indexOf(f)===0})},n,Gt)},ze.prototype.anyOf=function(){var n=this,o=Ke.apply(Be,arguments),c=this._cmp;try{o.sort(c)}catch{return at(this,kt)}if(o.length===0)return bn(this);var f=new this.Collection(this,function(){return $t(o[0],o[o.length-1])});f._ondirectionchange=function(m){c=m==="next"?n._ascending:n._descending,o.sort(c)};var h=0;return f._addAlgorithm(function(m,v,w){for(var N=m.key;0<c(N,o[h]);)if(++h===o.length)return v(w),!1;return c(N,o[h])===0||(v(function(){m.continue(o[h])}),!1)}),f},ze.prototype.notEqual=function(n){return this.inAnyRange([[-1/0,n],[n,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ze.prototype.noneOf=function(){var n=Ke.apply(Be,arguments);if(n.length===0)return new this.Collection(this);try{n.sort(this._ascending)}catch{return at(this,kt)}var o=n.reduce(function(c,f){return c?c.concat([[c[c.length-1][1],f]]):[[-1/0,f]]},null);return o.push([n[n.length-1],this.db._maxKey]),this.inAnyRange(o,{includeLowers:!1,includeUppers:!1})},ze.prototype.inAnyRange=function(M,o){var c=this,f=this._cmp,h=this._ascending,m=this._descending,v=this._min,w=this._max;if(M.length===0)return bn(this);if(!M.every(function(I){return I[0]!==void 0&&I[1]!==void 0&&h(I[0],I[1])<=0}))return at(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",oe.InvalidArgument);var N=!o||o.includeLowers!==!1,S=o&&o.includeUppers===!0,R,j=h;function T(I,F){return j(I[0],F[0])}try{(R=M.reduce(function(I,F){for(var K=0,H=I.length;K<H;++K){var Z=I[K];if(f(F[0],Z[1])<0&&0<f(F[1],Z[0])){Z[0]=v(Z[0],F[0]),Z[1]=w(Z[1],F[1]);break}}return K===H&&I.push(F),I},[])).sort(T)}catch{return at(this,kt)}var _=0,C=S?function(I){return 0<h(I,R[_][1])}:function(I){return 0<=h(I,R[_][1])},P=N?function(I){return 0<m(I,R[_][0])}:function(I){return 0<=m(I,R[_][0])},O=C,M=new this.Collection(this,function(){return $t(R[0][0],R[R.length-1][1],!N,!S)});return M._ondirectionchange=function(I){j=I==="next"?(O=C,h):(O=P,m),R.sort(T)},M._addAlgorithm(function(I,F,K){for(var H,Z=I.key;O(Z);)if(++_===R.length)return F(K),!1;return!C(H=Z)&&!P(H)||(c._cmp(Z,R[_][1])===0||c._cmp(Z,R[_][0])===0||F(function(){j===h?I.continue(R[_][0]):I.continue(R[_][1])}),!1)}),M},ze.prototype.startsWithAnyOf=function(){var n=Ke.apply(Be,arguments);return n.every(function(o){return typeof o=="string"})?n.length===0?bn(this):this.inAnyRange(n.map(function(o){return[o,o+Gt]})):at(this,"startsWithAnyOf() only works with strings")},ze);function ze(){}function yt(n){return Oe(function(o){return Vn(o),n(o.target.error),!1})}function Vn(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}var Hn="storagemutated",Aa="x-storagemutated-1",Dt=Un(null,Hn),Rl=(xt.prototype._lock=function(){return V(!ue.global),++this._reculock,this._reculock!==1||ue.global||(ue.lockOwnerFor=this),this},xt.prototype._unlock=function(){if(V(!ue.global),--this._reculock==0)for(ue.global||(ue.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var n=this._blockedFuncs.shift();try{Ht(n[1],n[0])}catch{}}return this},xt.prototype._locked=function(){return this._reculock&&ue.lockOwnerFor!==this},xt.prototype.create=function(n){var o=this;if(!this.mode)return this;var c=this.db.idbdb,f=this.db._state.dbOpenError;if(V(!this.idbtrans),!n&&!c)switch(f&&f.name){case"DatabaseClosedError":throw new oe.DatabaseClosed(f);case"MissingAPIError":throw new oe.MissingAPI(f.message,f);default:throw new oe.OpenFailed(f)}if(!this.active)throw new oe.TransactionInactive;return V(this._completion._state===null),(n=this.idbtrans=n||(this.db.core||c).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Oe(function(h){Vn(h),o._reject(n.error)}),n.onabort=Oe(function(h){Vn(h),o.active&&o._reject(new oe.Abort(n.error)),o.active=!1,o.on("abort").fire(h)}),n.oncomplete=Oe(function(){o.active=!1,o._resolve(),"mutatedParts"in n&&Dt.storagemutated.fire(n.mutatedParts)}),this},xt.prototype._promise=function(n,o,c){var f=this;if(n==="readwrite"&&this.mode!=="readwrite")return Le(new oe.ReadOnly("Transaction is readonly"));if(!this.active)return Le(new oe.TransactionInactive);if(this._locked())return new ne(function(m,v){f._blockedFuncs.push([function(){f._promise(n,o,c).then(m,v)},ue])});if(c)return Rt(function(){var m=new ne(function(v,w){f._lock();var N=o(v,w,f);N&&N.then&&N.then(v,w)});return m.finally(function(){return f._unlock()}),m._lib=!0,m});var h=new ne(function(m,v){var w=o(m,v,f);w&&w.then&&w.then(m,v)});return h._lib=!0,h},xt.prototype._root=function(){return this.parent?this.parent._root():this},xt.prototype.waitFor=function(n){var o,c=this._root(),f=ne.resolve(n);c._waitingFor?c._waitingFor=c._waitingFor.then(function(){return f}):(c._waitingFor=f,c._waitingQueue=[],o=c.idbtrans.objectStore(c.storeNames[0]),function m(){for(++c._spinCount;c._waitingQueue.length;)c._waitingQueue.shift()();c._waitingFor&&(o.get(-1/0).onsuccess=m)}());var h=c._waitingFor;return new ne(function(m,v){f.then(function(w){return c._waitingQueue.push(Oe(m.bind(null,w)))},function(w){return c._waitingQueue.push(Oe(v.bind(null,w)))}).finally(function(){c._waitingFor===h&&(c._waitingFor=null)})})},xt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new oe.Abort))},xt.prototype.table=function(n){var o=this._memoizedTables||(this._memoizedTables={});if(b(o,n))return o[n];var c=this.schema[n];if(!c)throw new oe.NotFound("Table "+n+" not part of transaction");return c=new this.db.Table(n,c,this),c.core=this.db.core.table(n),o[n]=c},xt);function xt(){}function Ra(n,o,c,f,h,m,v,w){return{name:n,keyPath:o,unique:c,multi:f,auto:h,compound:m,src:(c&&!v?"&":"")+(f?"*":"")+(h?"++":"")+ko(o),type:w}}function ko(n){return typeof n=="string"?n:n?"["+[].join.call(n,"+")+"]":""}function Oa(n,o,c){return{name:n,primKey:o,indexes:c,mappedClass:null,idxByName:(f=function(h){return[h.name,h]},c.reduce(function(h,m,v){return v=f(m,v),v&&(h[v[0]]=v[1]),h},{}))};var f}var Gn=function(n){try{return n.only([[]]),Gn=function(){return[[]]},[[]]}catch{return Gn=function(){return Gt},Gt}};function Ta(n){return n==null?function(){}:typeof n=="string"?(o=n).split(".").length===1?function(c){return c[o]}:function(c){return J(c,o)}:function(c){return J(c,n)};var o}function No(n){return[].slice.call(n)}var Ol=0;function Yn(n){return n==null?":id":typeof n=="string"?n:"[".concat(n.join("+"),"]")}function Tl(n,o,N){function f(O){if(O.type===3)return null;if(O.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var _=O.lower,C=O.upper,P=O.lowerOpen,O=O.upperOpen;return _===void 0?C===void 0?null:o.upperBound(C,!!O):C===void 0?o.lowerBound(_,!!P):o.bound(_,C,!!P,!!O)}function h(T){var _,C=T.name;return{name:C,schema:T,mutate:function(P){var O=P.trans,M=P.type,I=P.keys,F=P.values,K=P.range;return new Promise(function(H,Z){H=Oe(H);var U=O.objectStore(C),Y=U.keyPath==null,ee=M==="put"||M==="add";if(!ee&&M!=="delete"&&M!=="deleteRange")throw new Error("Invalid operation type: "+M);var Q,se=(I||F||{length:1}).length;if(I&&F&&I.length!==F.length)throw new Error("Given keys array must have same length as given values array.");if(se===0)return H({numFailures:0,failures:{},results:[],lastResult:void 0});function ge(Xe){++st,Vn(Xe)}var be=[],ve=[],st=0;if(M==="deleteRange"){if(K.type===4)return H({numFailures:st,failures:ve,results:[],lastResult:void 0});K.type===3?be.push(Q=U.clear()):be.push(Q=U.delete(f(K)))}else{var Y=ee?Y?[F,I]:[F,null]:[I,null],me=Y[0],Ge=Y[1];if(ee)for(var Ye=0;Ye<se;++Ye)be.push(Q=Ge&&Ge[Ye]!==void 0?U[M](me[Ye],Ge[Ye]):U[M](me[Ye])),Q.onerror=ge;else for(Ye=0;Ye<se;++Ye)be.push(Q=U[M](me[Ye])),Q.onerror=ge}function qr(Xe){Xe=Xe.target.result,be.forEach(function(Xt,Qa){return Xt.error!=null&&(ve[Qa]=Xt.error)}),H({numFailures:st,failures:ve,results:M==="delete"?I:be.map(function(Xt){return Xt.result}),lastResult:Xe})}Q.onerror=function(Xe){ge(Xe),qr(Xe)},Q.onsuccess=qr})},getMany:function(P){var O=P.trans,M=P.keys;return new Promise(function(I,F){I=Oe(I);for(var K,H=O.objectStore(C),Z=M.length,U=new Array(Z),Y=0,ee=0,Q=function(be){be=be.target,U[be._pos]=be.result,++ee===Y&&I(U)},se=yt(F),ge=0;ge<Z;++ge)M[ge]!=null&&((K=H.get(M[ge]))._pos=ge,K.onsuccess=Q,K.onerror=se,++Y);Y===0&&I(U)})},get:function(P){var O=P.trans,M=P.key;return new Promise(function(I,F){I=Oe(I);var K=O.objectStore(C).get(M);K.onsuccess=function(H){return I(H.target.result)},K.onerror=yt(F)})},query:(_=S,function(P){return new Promise(function(O,M){O=Oe(O);var I,F,K,Y=P.trans,H=P.values,Z=P.limit,Q=P.query,U=Z===1/0?void 0:Z,ee=Q.index,Q=Q.range,Y=Y.objectStore(C),ee=ee.isPrimaryKey?Y:Y.index(ee.name),Q=f(Q);if(Z===0)return O({result:[]});_?((U=H?ee.getAll(Q,U):ee.getAllKeys(Q,U)).onsuccess=function(se){return O({result:se.target.result})},U.onerror=yt(M)):(I=0,F=!H&&"openKeyCursor"in ee?ee.openKeyCursor(Q):ee.openCursor(Q),K=[],F.onsuccess=function(se){var ge=F.result;return ge?(K.push(H?ge.value:ge.primaryKey),++I===Z?O({result:K}):void ge.continue()):O({result:K})},F.onerror=yt(M))})}),openCursor:function(P){var O=P.trans,M=P.values,I=P.query,F=P.reverse,K=P.unique;return new Promise(function(H,Z){H=Oe(H);var ee=I.index,U=I.range,Y=O.objectStore(C),Y=ee.isPrimaryKey?Y:Y.index(ee.name),ee=F?K?"prevunique":"prev":K?"nextunique":"next",Q=!M&&"openKeyCursor"in Y?Y.openKeyCursor(f(U),ee):Y.openCursor(f(U),ee);Q.onerror=yt(Z),Q.onsuccess=Oe(function(se){var ge,be,ve,st,me=Q.result;me?(me.___id=++Ol,me.done=!1,ge=me.continue.bind(me),be=(be=me.continuePrimaryKey)&&be.bind(me),ve=me.advance.bind(me),st=function(){throw new Error("Cursor not stopped")},me.trans=O,me.stop=me.continue=me.continuePrimaryKey=me.advance=function(){throw new Error("Cursor not started")},me.fail=Oe(Z),me.next=function(){var Ge=this,Ye=1;return this.start(function(){return Ye--?Ge.continue():Ge.stop()}).then(function(){return Ge})},me.start=function(Ge){function Ye(){if(Q.result)try{Ge()}catch(Xe){me.fail(Xe)}else me.done=!0,me.start=function(){throw new Error("Cursor behind last entry")},me.stop()}var qr=new Promise(function(Xe,Xt){Xe=Oe(Xe),Q.onerror=yt(Xt),me.fail=Xt,me.stop=function(Qa){me.stop=me.continue=me.continuePrimaryKey=me.advance=st,Xe(Qa)}});return Q.onsuccess=Oe(function(Xe){Q.onsuccess=Ye,Ye()}),me.continue=ge,me.continuePrimaryKey=be,me.advance=ve,Ye(),qr},H(me)):H(null)},Z)})},count:function(P){var O=P.query,M=P.trans,I=O.index,F=O.range;return new Promise(function(K,H){var Z=M.objectStore(C),U=I.isPrimaryKey?Z:Z.index(I.name),Z=f(F),U=Z?U.count(Z):U.count();U.onsuccess=Oe(function(Y){return K(Y.target.result)}),U.onerror=yt(H)})}}}var m,v,w,R=(v=N,w=No((m=n).objectStoreNames),{schema:{name:m.name,tables:w.map(function(T){return v.objectStore(T)}).map(function(T){var _=T.keyPath,O=T.autoIncrement,C=u(_),P={},O={name:T.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:_==null,compound:C,keyPath:_,autoIncrement:O,unique:!0,extractKey:Ta(_)},indexes:No(T.indexNames).map(function(M){return T.index(M)}).map(function(K){var I=K.name,F=K.unique,H=K.multiEntry,K=K.keyPath,H={name:I,compound:u(K),keyPath:K,unique:F,multiEntry:H,extractKey:Ta(K)};return P[Yn(K)]=H}),getIndexByKeyPath:function(M){return P[Yn(M)]}};return P[":id"]=O.primaryKey,_!=null&&(P[Yn(_)]=O.primaryKey),O})},hasGetAll:0<w.length&&"getAll"in v.objectStore(w[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),N=R.schema,S=R.hasGetAll,R=N.tables.map(h),j={};return R.forEach(function(T){return j[T.name]=T}),{stack:"dbcore",transaction:n.transaction.bind(n),table:function(T){if(!j[T])throw new Error("Table '".concat(T,"' not found"));return j[T]},MIN_KEY:-1/0,MAX_KEY:Gn(o),schema:N}}function $l(n,o,c,f){var h=c.IDBKeyRange;return c.indexedDB,{dbcore:(f=Tl(o,h,f),n.dbcore.reduce(function(m,v){return v=v.create,s(s({},m),v(m))},f))}}function Rr(n,f){var c=f.db,f=$l(n._middlewares,c,n._deps,f);n.core=f.dbcore,n.tables.forEach(function(h){var m=h.name;n.core.schema.tables.some(function(v){return v.name===m})&&(h.core=n.core.table(m),n[m]instanceof n.Table&&(n[m].core=h.core))})}function Or(n,o,c,f){c.forEach(function(h){var m=f[h];o.forEach(function(v){var w=function N(S,R){return $(S,R)||(S=y(S))&&N(S,R)}(v,h);(!w||"value"in w&&w.value===void 0)&&(v===n.Transaction.prototype||v instanceof n.Transaction?k(v,h,{get:function(){return this.table(h)},set:function(N){D(this,h,{value:N,writable:!0,configurable:!0,enumerable:!0})}}):v[h]=new n.Table(h,m))})})}function $a(n,o){o.forEach(function(c){for(var f in c)c[f]instanceof n.Table&&delete c[f]})}function Dl(n,o){return n._cfg.version-o._cfg.version}function Ml(n,o,c,f){var h=n._dbSchema;c.objectStoreNames.contains("$meta")&&!h.$meta&&(h.$meta=Oa("$meta",_o("")[0],[]),n._storeNames.push("$meta"));var m=n._createTransaction("readwrite",n._storeNames,h);m.create(c),m._completion.catch(f);var v=m._reject.bind(m),w=ue.transless||ue;Rt(function(){return ue.trans=m,ue.transless=w,o!==0?(Rr(n,c),S=o,((N=m).storeNames.includes("$meta")?N.table("$meta").get("version").then(function(R){return R??S}):ne.resolve(S)).then(function(R){return T=R,_=m,C=c,P=[],R=(j=n)._versions,O=j._dbSchema=$r(0,j.idbdb,C),(R=R.filter(function(M){return M._cfg.version>=T})).length!==0?(R.forEach(function(M){P.push(function(){var I=O,F=M._cfg.dbschema;Dr(j,I,C),Dr(j,F,C),O=j._dbSchema=F;var K=Da(I,F);K.add.forEach(function(ee){Ma(C,ee[0],ee[1].primKey,ee[1].indexes)}),K.change.forEach(function(ee){if(ee.recreate)throw new oe.Upgrade("Not yet support for changing primary key");var Q=C.objectStore(ee.name);ee.add.forEach(function(se){return Tr(Q,se)}),ee.change.forEach(function(se){Q.deleteIndex(se.name),Tr(Q,se)}),ee.del.forEach(function(se){return Q.deleteIndex(se)})});var H=M._cfg.contentUpgrade;if(H&&M._cfg.version>T){Rr(j,C),_._memoizedTables={};var Z=ce(F);K.del.forEach(function(ee){Z[ee]=I[ee]}),$a(j,[j.Transaction.prototype]),Or(j,[j.Transaction.prototype],d(Z),Z),_.schema=Z;var U,Y=Ee(H);return Y&&gn(),K=ne.follow(function(){var ee;(U=H(_))&&Y&&(ee=Ot.bind(null,null),U.then(ee,ee))}),U&&typeof U.then=="function"?ne.resolve(U):K.then(function(){return U})}}),P.push(function(I){var F,K,H=M._cfg.dbschema;F=H,K=I,[].slice.call(K.db.objectStoreNames).forEach(function(Z){return F[Z]==null&&K.db.deleteObjectStore(Z)}),$a(j,[j.Transaction.prototype]),Or(j,[j.Transaction.prototype],j._storeNames,j._dbSchema),_.schema=j._dbSchema}),P.push(function(I){j.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(j.idbdb.version/10)===M._cfg.version?(j.idbdb.deleteObjectStore("$meta"),delete j._dbSchema.$meta,j._storeNames=j._storeNames.filter(function(F){return F!=="$meta"})):I.objectStore("$meta").put(M._cfg.version,"version"))})}),function M(){return P.length?ne.resolve(P.shift()(_.idbtrans)).then(M):ne.resolve()}().then(function(){So(O,C)})):ne.resolve();var j,T,_,C,P,O}).catch(v)):(d(h).forEach(function(R){Ma(c,R,h[R].primKey,h[R].indexes)}),Rr(n,c),void ne.follow(function(){return n.on.populate.fire(m)}).catch(v));var N,S})}function Il(n,o){So(n._dbSchema,o),o.db.version%10!=0||o.objectStoreNames.contains("$meta")||o.db.createObjectStore("$meta").add(Math.ceil(o.db.version/10-1),"version");var c=$r(0,n.idbdb,o);Dr(n,n._dbSchema,o);for(var f=0,h=Da(c,n._dbSchema).change;f<h.length;f++){var m=function(v){if(v.change.length||v.recreate)return console.warn("Unable to patch indexes of table ".concat(v.name," because it has changes on the type of index or primary key.")),{value:void 0};var w=o.objectStore(v.name);v.add.forEach(function(N){gt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(v.name,".").concat(N.src)),Tr(w,N)})}(h[f]);if(typeof m=="object")return m.value}}function Da(n,o){var c,f={del:[],add:[],change:[]};for(c in n)o[c]||f.del.push(c);for(c in o){var h=n[c],m=o[c];if(h){var v={name:c,def:m,recreate:!1,del:[],add:[],change:[]};if(""+(h.primKey.keyPath||"")!=""+(m.primKey.keyPath||"")||h.primKey.auto!==m.primKey.auto)v.recreate=!0,f.change.push(v);else{var w=h.idxByName,N=m.idxByName,S=void 0;for(S in w)N[S]||v.del.push(S);for(S in N){var R=w[S],j=N[S];R?R.src!==j.src&&v.change.push(j):v.add.push(j)}(0<v.del.length||0<v.add.length||0<v.change.length)&&f.change.push(v)}}else f.add.push([c,m])}return f}function Ma(n,o,c,f){var h=n.db.createObjectStore(o,c.keyPath?{keyPath:c.keyPath,autoIncrement:c.auto}:{autoIncrement:c.auto});return f.forEach(function(m){return Tr(h,m)}),h}function So(n,o){d(n).forEach(function(c){o.db.objectStoreNames.contains(c)||(gt&&console.debug("Dexie: Creating missing table",c),Ma(o,c,n[c].primKey,n[c].indexes))})}function Tr(n,o){n.createIndex(o.name,o.keyPath,{unique:o.unique,multiEntry:o.multi})}function $r(n,o,c){var f={};return z(o.objectStoreNames,0).forEach(function(h){for(var m=c.objectStore(h),v=Ra(ko(S=m.keyPath),S||"",!0,!1,!!m.autoIncrement,S&&typeof S!="string",!0),w=[],N=0;N<m.indexNames.length;++N){var R=m.index(m.indexNames[N]),S=R.keyPath,R=Ra(R.name,S,!!R.unique,!!R.multiEntry,!1,S&&typeof S!="string",!1);w.push(R)}f[h]=Oa(h,v,w)}),f}function Dr(n,o,c){for(var f=c.db.objectStoreNames,h=0;h<f.length;++h){var m=f[h],v=c.objectStore(m);n._hasGetAll="getAll"in v;for(var w=0;w<v.indexNames.length;++w){var N=v.indexNames[w],S=v.index(N).keyPath,R=typeof S=="string"?S:"["+z(S).join("+")+"]";!o[m]||(S=o[m].idxByName[R])&&(S.name=N,delete o[m].idxByName[R],o[m].idxByName[N]=S)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(n._hasGetAll=!1)}function _o(n){return n.split(",").map(function(o,c){var m=o.split(":"),f=(h=m[1])===null||h===void 0?void 0:h.trim(),h=(o=m[0].trim()).replace(/([&*]|\+\+)/g,""),m=/^\[/.test(h)?h.match(/^\[(.*)\]$/)[1].split("+"):h;return Ra(h,m||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),u(m),c===0,f)})}var Ll=(vn.prototype._createTableSchema=Oa,vn.prototype._parseIndexSyntax=_o,vn.prototype._parseStoresSpec=function(n,o){var c=this;d(n).forEach(function(f){if(n[f]!==null){var h=c._parseIndexSyntax(n[f]),m=h.shift();if(!m)throw new oe.Schema("Invalid schema for table "+f+": "+n[f]);if(m.unique=!0,m.multi)throw new oe.Schema("Primary key cannot be multiEntry*");h.forEach(function(v){if(v.auto)throw new oe.Schema("Only primary key can be marked as autoIncrement (++)");if(!v.keyPath)throw new oe.Schema("Index must have a name and cannot be an empty string")}),h=c._createTableSchema(f,m,h),o[f]=h}})},vn.prototype.stores=function(c){var o=this.db;this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,c):c;var c=o._versions,f={},h={};return c.forEach(function(m){p(f,m._cfg.storesSource),h=m._cfg.dbschema={},m._parseStoresSpec(f,h)}),o._dbSchema=h,$a(o,[o._allTables,o,o.Transaction.prototype]),Or(o,[o._allTables,o,o.Transaction.prototype,this._cfg.tables],d(h),h),o._storeNames=d(h),this},vn.prototype.upgrade=function(n){return this._cfg.contentUpgrade=ya(this._cfg.contentUpgrade||Se,n),this},vn);function vn(){}function Ia(n,o){var c=n._dbNamesDB;return c||(c=n._dbNamesDB=new Nt(Sr,{addons:[],indexedDB:n,IDBKeyRange:o})).version(1).stores({dbnames:"name"}),c.table("dbnames")}function La(n){return n&&typeof n.databases=="function"}function Fa(n){return Rt(function(){return ue.letThrough=!0,n()})}function Ba(n){return!("from"in n)}var He=function(n,o){if(!this){var c=new He;return n&&"d"in n&&p(c,n),c}p(this,arguments.length?{d:1,from:n,to:1<arguments.length?o:n}:{d:0})};function Jn(n,o,c){var f=je(o,c);if(!isNaN(f)){if(0<f)throw RangeError();if(Ba(n))return p(n,{from:o,to:c,d:1});var h=n.l,f=n.r;if(je(c,n.from)<0)return h?Jn(h,o,c):n.l={from:o,to:c,d:1,l:null,r:null},Co(n);if(0<je(o,n.to))return f?Jn(f,o,c):n.r={from:o,to:c,d:1,l:null,r:null},Co(n);je(o,n.from)<0&&(n.from=o,n.l=null,n.d=f?f.d+1:1),0<je(c,n.to)&&(n.to=c,n.r=null,n.d=n.l?n.l.d+1:1),c=!n.r,h&&!n.l&&Qn(n,h),f&&c&&Qn(n,f)}}function Qn(n,o){Ba(o)||function c(f,N){var m=N.from,v=N.to,w=N.l,N=N.r;Jn(f,m,v),w&&c(f,w),N&&c(f,N)}(n,o)}function Eo(n,o){var c=Mr(o),f=c.next();if(f.done)return!1;for(var h=f.value,m=Mr(n),v=m.next(h.from),w=v.value;!f.done&&!v.done;){if(je(w.from,h.to)<=0&&0<=je(w.to,h.from))return!0;je(h.from,w.from)<0?h=(f=c.next(w.from)).value:w=(v=m.next(h.from)).value}return!1}function Mr(n){var o=Ba(n)?null:{s:0,n};return{next:function(c){for(var f=0<arguments.length;o;)switch(o.s){case 0:if(o.s=1,f)for(;o.n.l&&je(c,o.n.from)<0;)o={up:o,n:o.n.l,s:1};else for(;o.n.l;)o={up:o,n:o.n.l,s:1};case 1:if(o.s=2,!f||je(c,o.n.to)<=0)return{value:o.n,done:!1};case 2:if(o.n.r){o.s=3,o={up:o,n:o.n.r,s:0};continue}case 3:o=o.up}return{done:!0}}}}function Co(n){var o,c,f=(((o=n.r)===null||o===void 0?void 0:o.d)||0)-(((c=n.l)===null||c===void 0?void 0:c.d)||0),h=1<f?"r":f<-1?"l":"";h&&(o=h=="r"?"l":"r",c=s({},n),f=n[h],n.from=f.from,n.to=f.to,n[h]=f[h],c[h]=f[o],(n[o]=c).d=Po(c)),n.d=Po(n)}function Po(c){var o=c.r,c=c.l;return(o?c?Math.max(o.d,c.d):o.d:c?c.d:0)+1}function Ir(n,o){return d(o).forEach(function(c){n[c]?Qn(n[c],o[c]):n[c]=function f(h){var m,v,w={};for(m in h)b(h,m)&&(v=h[m],w[m]=!v||typeof v!="object"||ie.has(v.constructor)?v:f(v));return w}(o[c])}),n}function Ka(n,o){return n.all||o.all||Object.keys(n).some(function(c){return o[c]&&Eo(o[c],n[c])})}A(He.prototype,((lt={add:function(n){return Qn(this,n),this},addKey:function(n){return Jn(this,n,n),this},addKeys:function(n){var o=this;return n.forEach(function(c){return Jn(o,c,c)}),this},hasKey:function(n){var o=Mr(this).next(n).value;return o&&je(o.from,n)<=0&&0<=je(o.to,n)}})[Pe]=function(){return Mr(this)},lt));var Jt={},qa={},za=!1;function Lr(n){Ir(qa,n),za||(za=!0,setTimeout(function(){za=!1,Ua(qa,!(qa={}))},0))}function Ua(n,o){o===void 0&&(o=!1);var c=new Set;if(n.all)for(var f=0,h=Object.values(Jt);f<h.length;f++)Ao(v=h[f],n,c,o);else for(var m in n){var v,w=/^idb\:\/\/(.*)\/(.*)\//.exec(m);w&&(m=w[1],w=w[2],(v=Jt["idb://".concat(m,"/").concat(w)])&&Ao(v,n,c,o))}c.forEach(function(N){return N()})}function Ao(n,o,c,f){for(var h=[],m=0,v=Object.entries(n.queries.query);m<v.length;m++){for(var w=v[m],N=w[0],S=[],R=0,j=w[1];R<j.length;R++){var T=j[R];Ka(o,T.obsSet)?T.subscribers.forEach(function(O){return c.add(O)}):f&&S.push(T)}f&&h.push([N,S])}if(f)for(var _=0,C=h;_<C.length;_++){var P=C[_],N=P[0],S=P[1];n.queries.query[N]=S}}function Fl(n){var o=n._state,c=n._deps.indexedDB;if(o.isBeingOpened||n.idbdb)return o.dbReadyPromise.then(function(){return o.dbOpenError?Le(o.dbOpenError):n});o.isBeingOpened=!0,o.dbOpenError=null,o.openComplete=!1;var f=o.openCanceller,h=Math.round(10*n.verno),m=!1;function v(){if(o.openCanceller!==f)throw new oe.DatabaseClosed("db.open() was cancelled")}function w(){return new ne(function(T,_){if(v(),!c)throw new oe.MissingAPI;var C=n.name,P=o.autoSchema||!h?c.open(C):c.open(C,h);if(!P)throw new oe.MissingAPI;P.onerror=yt(_),P.onblocked=Oe(n._fireOnBlocked),P.onupgradeneeded=Oe(function(O){var M;R=P.transaction,o.autoSchema&&!n._options.allowEmptyDB?(P.onerror=Vn,R.abort(),P.result.close(),(M=c.deleteDatabase(C)).onsuccess=M.onerror=Oe(function(){_(new oe.NoSuchDatabase("Database ".concat(C," doesnt exist")))})):(R.onerror=yt(_),O=O.oldVersion>Math.pow(2,62)?0:O.oldVersion,j=O<1,n.idbdb=P.result,m&&Il(n,R),Ml(n,O/10,R,_))},_),P.onsuccess=Oe(function(){R=null;var O,M,I,F,K,H=n.idbdb=P.result,Z=z(H.objectStoreNames);if(0<Z.length)try{var U=H.transaction((F=Z).length===1?F[0]:F,"readonly");if(o.autoSchema)M=H,I=U,(O=n).verno=M.version/10,I=O._dbSchema=$r(0,M,I),O._storeNames=z(M.objectStoreNames,0),Or(O,[O._allTables],d(I),I);else if(Dr(n,n._dbSchema,U),((K=Da($r(0,(K=n).idbdb,U),K._dbSchema)).add.length||K.change.some(function(Y){return Y.add.length||Y.change.length}))&&!m)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),H.close(),h=H.version+1,m=!0,T(w());Rr(n,U)}catch{}yn.push(n),H.onversionchange=Oe(function(Y){o.vcFired=!0,n.on("versionchange").fire(Y)}),H.onclose=Oe(function(){n.close({disableAutoOpen:!1})}),j&&(K=n._deps,U=C,H=K.indexedDB,K=K.IDBKeyRange,La(H)||U===Sr||Ia(H,K).put({name:U}).catch(Se)),T()},_)}).catch(function(T){switch(T==null?void 0:T.name){case"UnknownError":if(0<o.PR1398_maxLoop)return o.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),w();break;case"VersionError":if(0<h)return h=0,w()}return ne.reject(T)})}var N,S=o.dbReadyResolve,R=null,j=!1;return ne.race([f,(typeof navigator>"u"?ne.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(T){function _(){return indexedDB.databases().finally(T)}N=setInterval(_,100),_()}).finally(function(){return clearInterval(N)}):Promise.resolve()).then(w)]).then(function(){return v(),o.onReadyBeingFired=[],ne.resolve(Fa(function(){return n.on.ready.fire(n.vip)})).then(function T(){if(0<o.onReadyBeingFired.length){var _=o.onReadyBeingFired.reduce(ya,Se);return o.onReadyBeingFired=[],ne.resolve(Fa(function(){return _(n.vip)})).then(T)}})}).finally(function(){o.openCanceller===f&&(o.onReadyBeingFired=null,o.isBeingOpened=!1)}).catch(function(T){o.dbOpenError=T;try{R&&R.abort()}catch{}return f===o.openCanceller&&n._close(),Le(T)}).finally(function(){o.openComplete=!0,S()}).then(function(){var T;return j&&(T={},n.tables.forEach(function(_){_.schema.indexes.forEach(function(C){C.name&&(T["idb://".concat(n.name,"/").concat(_.name,"/").concat(C.name)]=new He(-1/0,[[[]]]))}),T["idb://".concat(n.name,"/").concat(_.name,"/")]=T["idb://".concat(n.name,"/").concat(_.name,"/:dels")]=new He(-1/0,[[[]]])}),Dt(Hn).fire(T),Ua(T,!0)),n})}function Wa(n){function o(m){return n.next(m)}var c=h(o),f=h(function(m){return n.throw(m)});function h(m){return function(N){var w=m(N),N=w.value;return w.done?N:N&&typeof N.then=="function"?N.then(c,f):u(N)?Promise.all(N).then(c,f):c(N)}}return h(o)()}function Fr(n,o,c){for(var f=u(n)?n.slice():[n],h=0;h<c;++h)f.push(o);return f}var Bl={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(n){return s(s({},n),{table:function(o){var c=n.table(o),f=c.schema,h={},m=[];function v(j,T,_){var C=Yn(j),P=h[C]=h[C]||[],O=j==null?0:typeof j=="string"?1:j.length,M=0<T,M=s(s({},_),{name:M?"".concat(C,"(virtual-from:").concat(_.name,")"):_.name,lowLevelIndex:_,isVirtual:M,keyTail:T,keyLength:O,extractKey:Ta(j),unique:!M&&_.unique});return P.push(M),M.isPrimaryKey||m.push(M),1<O&&v(O===2?j[0]:j.slice(0,O-1),T+1,_),P.sort(function(I,F){return I.keyTail-F.keyTail}),M}o=v(f.primaryKey.keyPath,0,f.primaryKey),h[":id"]=[o];for(var w=0,N=f.indexes;w<N.length;w++){var S=N[w];v(S.keyPath,0,S)}function R(j){var T,_=j.query.index;return _.isVirtual?s(s({},j),{query:{index:_.lowLevelIndex,range:(T=j.query.range,_=_.keyTail,{type:T.type===1?2:T.type,lower:Fr(T.lower,T.lowerOpen?n.MAX_KEY:n.MIN_KEY,_),lowerOpen:!0,upper:Fr(T.upper,T.upperOpen?n.MIN_KEY:n.MAX_KEY,_),upperOpen:!0})}}):j}return s(s({},c),{schema:s(s({},f),{primaryKey:o,indexes:m,getIndexByKeyPath:function(j){return(j=h[Yn(j)])&&j[0]}}),count:function(j){return c.count(R(j))},query:function(j){return c.query(R(j))},openCursor:function(j){var T=j.query.index,_=T.keyTail,C=T.isVirtual,P=T.keyLength;return C?c.openCursor(R(j)).then(function(M){return M&&O(M)}):c.openCursor(j);function O(M){return Object.create(M,{continue:{value:function(I){I!=null?M.continue(Fr(I,j.reverse?n.MAX_KEY:n.MIN_KEY,_)):j.unique?M.continue(M.key.slice(0,P).concat(j.reverse?n.MIN_KEY:n.MAX_KEY,_)):M.continue()}},continuePrimaryKey:{value:function(I,F){M.continuePrimaryKey(Fr(I,n.MAX_KEY,_),F)}},primaryKey:{get:function(){return M.primaryKey}},key:{get:function(){var I=M.key;return P===1?I[0]:I.slice(0,P)}},value:{get:function(){return M.value}}})}}})}})}};function Va(n,o,c,f){return c=c||{},f=f||"",d(n).forEach(function(h){var m,v,w;b(o,h)?(m=n[h],v=o[h],typeof m=="object"&&typeof v=="object"&&m&&v?(w=Ue(m))!==Ue(v)?c[f+h]=o[h]:w==="Object"?Va(m,v,c,f+h+"."):m!==v&&(c[f+h]=o[h]):m!==v&&(c[f+h]=o[h])):c[f+h]=void 0}),d(o).forEach(function(h){b(n,h)||(c[f+h]=o[h])}),c}function Ha(n,o){return o.type==="delete"?o.keys:o.keys||o.values.map(n.extractKey)}var Kl={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(n){return s(s({},n),{table:function(o){var c=n.table(o),f=c.schema.primaryKey;return s(s({},c),{mutate:function(h){var m=ue.trans,v=m.table(o).hook,w=v.deleting,N=v.creating,S=v.updating;switch(h.type){case"add":if(N.fire===Se)break;return m._promise("readwrite",function(){return R(h)},!0);case"put":if(N.fire===Se&&S.fire===Se)break;return m._promise("readwrite",function(){return R(h)},!0);case"delete":if(w.fire===Se)break;return m._promise("readwrite",function(){return R(h)},!0);case"deleteRange":if(w.fire===Se)break;return m._promise("readwrite",function(){return function j(T,_,C){return c.query({trans:T,values:!1,query:{index:f,range:_},limit:C}).then(function(P){var O=P.result;return R({type:"delete",keys:O,trans:T}).then(function(M){return 0<M.numFailures?Promise.reject(M.failures[0]):O.length<C?{failures:[],numFailures:0,lastResult:void 0}:j(T,s(s({},_),{lower:O[O.length-1],lowerOpen:!0}),C)})})}(h.trans,h.range,1e4)},!0)}return c.mutate(h);function R(j){var T,_,C,P=ue.trans,O=j.keys||Ha(f,j);if(!O)throw new Error("Keys missing");return(j=j.type==="add"||j.type==="put"?s(s({},j),{keys:O}):s({},j)).type!=="delete"&&(j.values=i([],j.values)),j.keys&&(j.keys=i([],j.keys)),T=c,C=O,((_=j).type==="add"?Promise.resolve([]):T.getMany({trans:_.trans,keys:C,cache:"immutable"})).then(function(M){var I=O.map(function(F,K){var H,Z,U,Y=M[K],ee={onerror:null,onsuccess:null};return j.type==="delete"?w.fire.call(ee,F,Y,P):j.type==="add"||Y===void 0?(H=N.fire.call(ee,F,j.values[K],P),F==null&&H!=null&&(j.keys[K]=F=H,f.outbound||X(j.values[K],f.keyPath,F))):(H=Va(Y,j.values[K]),(Z=S.fire.call(ee,H,F,Y,P))&&(U=j.values[K],Object.keys(Z).forEach(function(Q){b(U,Q)?U[Q]=Z[Q]:X(U,Q,Z[Q])}))),ee});return c.mutate(j).then(function(F){for(var K=F.failures,H=F.results,Z=F.numFailures,F=F.lastResult,U=0;U<O.length;++U){var Y=(H||O)[U],ee=I[U];Y==null?ee.onerror&&ee.onerror(K[U]):ee.onsuccess&&ee.onsuccess(j.type==="put"&&M[U]?j.values[U]:Y)}return{failures:K,results:H,numFailures:Z,lastResult:F}}).catch(function(F){return I.forEach(function(K){return K.onerror&&K.onerror(F)}),Promise.reject(F)})})}}})}})}};function Ro(n,o,c){try{if(!o||o.keys.length<n.length)return null;for(var f=[],h=0,m=0;h<o.keys.length&&m<n.length;++h)je(o.keys[h],n[m])===0&&(f.push(c?Ne(o.values[h]):o.values[h]),++m);return f.length===n.length?f:null}catch{return null}}var ql={stack:"dbcore",level:-1,create:function(n){return{table:function(o){var c=n.table(o);return s(s({},c),{getMany:function(f){if(!f.cache)return c.getMany(f);var h=Ro(f.keys,f.trans._cache,f.cache==="clone");return h?ne.resolve(h):c.getMany(f).then(function(m){return f.trans._cache={keys:f.keys,values:f.cache==="clone"?Ne(m):m},m})},mutate:function(f){return f.type!=="add"&&(f.trans._cache=null),c.mutate(f)}})}}}};function Oo(n,o){return n.trans.mode==="readonly"&&!!n.subscr&&!n.trans.explicit&&n.trans.db._options.cache!=="disabled"&&!o.schema.primaryKey.outbound}function To(n,o){switch(n){case"query":return o.values&&!o.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var zl={stack:"dbcore",level:0,name:"Observability",create:function(n){var o=n.schema.name,c=new He(n.MIN_KEY,n.MAX_KEY);return s(s({},n),{transaction:function(f,h,m){if(ue.subscr&&h!=="readonly")throw new oe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ue.querier));return n.transaction(f,h,m)},table:function(f){var h=n.table(f),m=h.schema,v=m.primaryKey,j=m.indexes,w=v.extractKey,N=v.outbound,S=v.autoIncrement&&j.filter(function(_){return _.compound&&_.keyPath.includes(v.keyPath)}),R=s(s({},h),{mutate:function(_){function C(Q){return Q="idb://".concat(o,"/").concat(f,"/").concat(Q),F[Q]||(F[Q]=new He)}var P,O,M,I=_.trans,F=_.mutatedParts||(_.mutatedParts={}),K=C(""),H=C(":dels"),Z=_.type,ee=_.type==="deleteRange"?[_.range]:_.type==="delete"?[_.keys]:_.values.length<50?[Ha(v,_).filter(function(Q){return Q}),_.values]:[],U=ee[0],Y=ee[1],ee=_.trans._cache;return u(U)?(K.addKeys(U),(ee=Z==="delete"||U.length===Y.length?Ro(U,ee):null)||H.addKeys(U),(ee||Y)&&(P=C,O=ee,M=Y,m.indexes.forEach(function(Q){var se=P(Q.name||"");function ge(ve){return ve!=null?Q.extractKey(ve):null}function be(ve){return Q.multiEntry&&u(ve)?ve.forEach(function(st){return se.addKey(st)}):se.addKey(ve)}(O||M).forEach(function(ve,Ge){var me=O&&ge(O[Ge]),Ge=M&&ge(M[Ge]);je(me,Ge)!==0&&(me!=null&&be(me),Ge!=null&&be(Ge))})}))):U?(Y={from:(Y=U.lower)!==null&&Y!==void 0?Y:n.MIN_KEY,to:(Y=U.upper)!==null&&Y!==void 0?Y:n.MAX_KEY},H.add(Y),K.add(Y)):(K.add(c),H.add(c),m.indexes.forEach(function(Q){return C(Q.name).add(c)})),h.mutate(_).then(function(Q){return!U||_.type!=="add"&&_.type!=="put"||(K.addKeys(Q.results),S&&S.forEach(function(se){for(var ge=_.values.map(function(me){return se.extractKey(me)}),be=se.keyPath.findIndex(function(me){return me===v.keyPath}),ve=0,st=Q.results.length;ve<st;++ve)ge[ve][be]=Q.results[ve];C(se.name).addKeys(ge)})),I.mutatedParts=Ir(I.mutatedParts||{},F),Q})}}),j=function(C){var P=C.query,C=P.index,P=P.range;return[C,new He((C=P.lower)!==null&&C!==void 0?C:n.MIN_KEY,(P=P.upper)!==null&&P!==void 0?P:n.MAX_KEY)]},T={get:function(_){return[v,new He(_.key)]},getMany:function(_){return[v,new He().addKeys(_.keys)]},count:j,query:j,openCursor:j};return d(T).forEach(function(_){R[_]=function(C){var P=ue.subscr,O=!!P,M=Oo(ue,h)&&To(_,C)?C.obsSet={}:P;if(O){var I=function(Y){return Y="idb://".concat(o,"/").concat(f,"/").concat(Y),M[Y]||(M[Y]=new He)},F=I(""),K=I(":dels"),P=T[_](C),O=P[0],P=P[1];if((_==="query"&&O.isPrimaryKey&&!C.values?K:I(O.name||"")).add(P),!O.isPrimaryKey){if(_!=="count"){var H=_==="query"&&N&&C.values&&h.query(s(s({},C),{values:!1}));return h[_].apply(this,arguments).then(function(Y){if(_==="query"){if(N&&C.values)return H.then(function(ge){return ge=ge.result,F.addKeys(ge),Y});var ee=C.values?Y.result.map(w):Y.result;(C.values?F:K).addKeys(ee)}else if(_==="openCursor"){var Q=Y,se=C.values;return Q&&Object.create(Q,{key:{get:function(){return K.addKey(Q.primaryKey),Q.key}},primaryKey:{get:function(){var ge=Q.primaryKey;return K.addKey(ge),ge}},value:{get:function(){return se&&F.addKey(Q.primaryKey),Q.value}}})}return Y})}K.add(c)}}return h[_].apply(this,arguments)}}),R}})}};function $o(n,o,c){if(c.numFailures===0)return o;if(o.type==="deleteRange")return null;var f=o.keys?o.keys.length:"values"in o&&o.values?o.values.length:1;return c.numFailures===f?null:(o=s({},o),u(o.keys)&&(o.keys=o.keys.filter(function(h,m){return!(m in c.failures)})),"values"in o&&u(o.values)&&(o.values=o.values.filter(function(h,m){return!(m in c.failures)})),o)}function Ga(n,o){return c=n,((f=o).lower===void 0||(f.lowerOpen?0<je(c,f.lower):0<=je(c,f.lower)))&&(n=n,(o=o).upper===void 0||(o.upperOpen?je(n,o.upper)<0:je(n,o.upper)<=0));var c,f}function Do(n,o,T,f,h,m){if(!T||T.length===0)return n;var v=o.query.index,w=v.multiEntry,N=o.query.range,S=f.schema.primaryKey.extractKey,R=v.extractKey,j=(v.lowLevelIndex||v).extractKey,T=T.reduce(function(_,C){var P=_,O=[];if(C.type==="add"||C.type==="put")for(var M=new He,I=C.values.length-1;0<=I;--I){var F,K=C.values[I],H=S(K);M.hasKey(H)||(F=R(K),(w&&u(F)?F.some(function(Q){return Ga(Q,N)}):Ga(F,N))&&(M.addKey(H),O.push(K)))}switch(C.type){case"add":var Z=new He().addKeys(o.values?_.map(function(se){return S(se)}):_),P=_.concat(o.values?O.filter(function(se){return se=S(se),!Z.hasKey(se)&&(Z.addKey(se),!0)}):O.map(function(se){return S(se)}).filter(function(se){return!Z.hasKey(se)&&(Z.addKey(se),!0)}));break;case"put":var U=new He().addKeys(C.values.map(function(se){return S(se)}));P=_.filter(function(se){return!U.hasKey(o.values?S(se):se)}).concat(o.values?O:O.map(function(se){return S(se)}));break;case"delete":var Y=new He().addKeys(C.keys);P=_.filter(function(se){return!Y.hasKey(o.values?S(se):se)});break;case"deleteRange":var ee=C.range;P=_.filter(function(se){return!Ga(S(se),ee)})}return P},n);return T===n?n:(T.sort(function(_,C){return je(j(_),j(C))||je(S(_),S(C))}),o.limit&&o.limit<1/0&&(T.length>o.limit?T.length=o.limit:n.length===o.limit&&T.length<o.limit&&(h.dirty=!0)),m?Object.freeze(T):T)}function Mo(n,o){return je(n.lower,o.lower)===0&&je(n.upper,o.upper)===0&&!!n.lowerOpen==!!o.lowerOpen&&!!n.upperOpen==!!o.upperOpen}function Ul(n,o){return function(c,f,h,m){if(c===void 0)return f!==void 0?-1:0;if(f===void 0)return 1;if((f=je(c,f))===0){if(h&&m)return 0;if(h)return 1;if(m)return-1}return f}(n.lower,o.lower,n.lowerOpen,o.lowerOpen)<=0&&0<=function(c,f,h,m){if(c===void 0)return f!==void 0?1:0;if(f===void 0)return-1;if((f=je(c,f))===0){if(h&&m)return 0;if(h)return-1;if(m)return 1}return f}(n.upper,o.upper,n.upperOpen,o.upperOpen)}function Wl(n,o,c,f){n.subscribers.add(c),f.addEventListener("abort",function(){var h,m;n.subscribers.delete(c),n.subscribers.size===0&&(h=n,m=o,setTimeout(function(){h.subscribers.size===0&&Ae(m,h)},3e3))})}var Vl={stack:"dbcore",level:0,name:"Cache",create:function(n){var o=n.schema.name;return s(s({},n),{transaction:function(c,f,h){var m,v,w=n.transaction(c,f,h);return f==="readwrite"&&(v=(m=new AbortController).signal,h=function(N){return function(){if(m.abort(),f==="readwrite"){for(var S=new Set,R=0,j=c;R<j.length;R++){var T=j[R],_=Jt["idb://".concat(o,"/").concat(T)];if(_){var C=n.table(T),P=_.optimisticOps.filter(function(se){return se.trans===w});if(w._explicit&&N&&w.mutatedParts)for(var O=0,M=Object.values(_.queries.query);O<M.length;O++)for(var I=0,F=(Z=M[O]).slice();I<F.length;I++)Ka((U=F[I]).obsSet,w.mutatedParts)&&(Ae(Z,U),U.subscribers.forEach(function(se){return S.add(se)}));else if(0<P.length){_.optimisticOps=_.optimisticOps.filter(function(se){return se.trans!==w});for(var K=0,H=Object.values(_.queries.query);K<H.length;K++)for(var Z,U,Y,ee=0,Q=(Z=H[K]).slice();ee<Q.length;ee++)(U=Q[ee]).res!=null&&w.mutatedParts&&(N&&!U.dirty?(Y=Object.isFrozen(U.res),Y=Do(U.res,U.req,P,C,U,Y),U.dirty?(Ae(Z,U),U.subscribers.forEach(function(se){return S.add(se)})):Y!==U.res&&(U.res=Y,U.promise=ne.resolve({result:Y}))):(U.dirty&&Ae(Z,U),U.subscribers.forEach(function(se){return S.add(se)})))}}}S.forEach(function(se){return se()})}}},w.addEventListener("abort",h(!1),{signal:v}),w.addEventListener("error",h(!1),{signal:v}),w.addEventListener("complete",h(!0),{signal:v})),w},table:function(c){var f=n.table(c),h=f.schema.primaryKey;return s(s({},f),{mutate:function(m){var v=ue.trans;if(h.outbound||v.db._options.cache==="disabled"||v.explicit||v.idbtrans.mode!=="readwrite")return f.mutate(m);var w=Jt["idb://".concat(o,"/").concat(c)];return w?(v=f.mutate(m),m.type!=="add"&&m.type!=="put"||!(50<=m.values.length||Ha(h,m).some(function(N){return N==null}))?(w.optimisticOps.push(m),m.mutatedParts&&Lr(m.mutatedParts),v.then(function(N){0<N.numFailures&&(Ae(w.optimisticOps,m),(N=$o(0,m,N))&&w.optimisticOps.push(N),m.mutatedParts&&Lr(m.mutatedParts))}),v.catch(function(){Ae(w.optimisticOps,m),m.mutatedParts&&Lr(m.mutatedParts)})):v.then(function(N){var S=$o(0,s(s({},m),{values:m.values.map(function(R,j){var T;return N.failures[j]?R:(R=(T=h.keyPath)!==null&&T!==void 0&&T.includes(".")?Ne(R):s({},R),X(R,h.keyPath,N.results[j]),R)})}),N);w.optimisticOps.push(S),queueMicrotask(function(){return m.mutatedParts&&Lr(m.mutatedParts)})}),v):f.mutate(m)},query:function(m){if(!Oo(ue,f)||!To("query",m))return f.query(m);var v=((S=ue.trans)===null||S===void 0?void 0:S.db._options.cache)==="immutable",j=ue,w=j.requery,N=j.signal,S=function(C,P,O,M){var I=Jt["idb://".concat(C,"/").concat(P)];if(!I)return[];if(!(P=I.queries[O]))return[null,!1,I,null];var F=P[(M.query?M.query.index.name:null)||""];if(!F)return[null,!1,I,null];switch(O){case"query":var K=F.find(function(H){return H.req.limit===M.limit&&H.req.values===M.values&&Mo(H.req.query.range,M.query.range)});return K?[K,!0,I,F]:[F.find(function(H){return("limit"in H.req?H.req.limit:1/0)>=M.limit&&(!M.values||H.req.values)&&Ul(H.req.query.range,M.query.range)}),!1,I,F];case"count":return K=F.find(function(H){return Mo(H.req.query.range,M.query.range)}),[K,!!K,I,F]}}(o,c,"query",m),R=S[0],j=S[1],T=S[2],_=S[3];return R&&j?R.obsSet=m.obsSet:(j=f.query(m).then(function(C){var P=C.result;if(R&&(R.res=P),v){for(var O=0,M=P.length;O<M;++O)Object.freeze(P[O]);Object.freeze(P)}else C.result=Ne(P);return C}).catch(function(C){return _&&R&&Ae(_,R),Promise.reject(C)}),R={obsSet:m.obsSet,promise:j,subscribers:new Set,type:"query",req:m,dirty:!1},_?_.push(R):(_=[R],(T=T||(Jt["idb://".concat(o,"/").concat(c)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[m.query.index.name||""]=_)),Wl(R,_,w,N),R.promise.then(function(C){return{result:Do(C.result,m,T==null?void 0:T.optimisticOps,f,R,v)}})}})}})}};function Br(n,o){return new Proxy(n,{get:function(c,f,h){return f==="db"?o:Reflect.get(c,f,h)}})}var Nt=(Fe.prototype.version=function(n){if(isNaN(n)||n<.1)throw new oe.Type("Given version is not a positive number");if(n=Math.round(10*n)/10,this.idbdb||this._state.isBeingOpened)throw new oe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var o=this._versions,c=o.filter(function(f){return f._cfg.version===n})[0];return c||(c=new this.Version(n),o.push(c),o.sort(Dl),c.stores({}),this._state.autoSchema=!1,c)},Fe.prototype._whenReady=function(n){var o=this;return this.idbdb&&(this._state.openComplete||ue.letThrough||this._vip)?n():new ne(function(c,f){if(o._state.openComplete)return f(new oe.DatabaseClosed(o._state.dbOpenError));if(!o._state.isBeingOpened){if(!o._state.autoOpen)return void f(new oe.DatabaseClosed);o.open().catch(Se)}o._state.dbReadyPromise.then(c,f)}).then(n)},Fe.prototype.use=function(n){var o=n.stack,c=n.create,f=n.level,h=n.name;return h&&this.unuse({stack:o,name:h}),n=this._middlewares[o]||(this._middlewares[o]=[]),n.push({stack:o,create:c,level:f??10,name:h}),n.sort(function(m,v){return m.level-v.level}),this},Fe.prototype.unuse=function(n){var o=n.stack,c=n.name,f=n.create;return o&&this._middlewares[o]&&(this._middlewares[o]=this._middlewares[o].filter(function(h){return f?h.create!==f:!!c&&h.name!==c})),this},Fe.prototype.open=function(){var n=this;return Ht(At,function(){return Fl(n)})},Fe.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var n=this._state,o=yn.indexOf(this);if(0<=o&&yn.splice(o,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}n.isBeingOpened||(n.dbReadyPromise=new ne(function(c){n.dbReadyResolve=c}),n.openCanceller=new ne(function(c,f){n.cancelOpen=f}))},Fe.prototype.close=function(c){var o=(c===void 0?{disableAutoOpen:!0}:c).disableAutoOpen,c=this._state;o?(c.isBeingOpened&&c.cancelOpen(new oe.DatabaseClosed),this._close(),c.autoOpen=!1,c.dbOpenError=new oe.DatabaseClosed):(this._close(),c.autoOpen=this._options.autoOpen||c.isBeingOpened,c.openComplete=!1,c.dbOpenError=null)},Fe.prototype.delete=function(n){var o=this;n===void 0&&(n={disableAutoOpen:!0});var c=0<arguments.length&&typeof arguments[0]!="object",f=this._state;return new ne(function(h,m){function v(){o.close(n);var w=o._deps.indexedDB.deleteDatabase(o.name);w.onsuccess=Oe(function(){var N,S,R;N=o._deps,S=o.name,R=N.indexedDB,N=N.IDBKeyRange,La(R)||S===Sr||Ia(R,N).delete(S).catch(Se),h()}),w.onerror=yt(m),w.onblocked=o._fireOnBlocked}if(c)throw new oe.InvalidArgument("Invalid closeOptions argument to db.delete()");f.isBeingOpened?f.dbReadyPromise.then(v):v()})},Fe.prototype.backendDB=function(){return this.idbdb},Fe.prototype.isOpen=function(){return this.idbdb!==null},Fe.prototype.hasBeenClosed=function(){var n=this._state.dbOpenError;return n&&n.name==="DatabaseClosed"},Fe.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fe.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fe.prototype,"tables",{get:function(){var n=this;return d(this._allTables).map(function(o){return n._allTables[o]})},enumerable:!1,configurable:!0}),Fe.prototype.transaction=function(){var n=(function(o,c,f){var h=arguments.length;if(h<2)throw new oe.InvalidArgument("Too few arguments");for(var m=new Array(h-1);--h;)m[h-1]=arguments[h];return f=m.pop(),[o,Te(m),f]}).apply(this,arguments);return this._transaction.apply(this,n)},Fe.prototype._transaction=function(n,o,c){var f=this,h=ue.trans;h&&h.db===this&&n.indexOf("!")===-1||(h=null);var m,v,w=n.indexOf("?")!==-1;n=n.replace("!","").replace("?","");try{if(v=o.map(function(S){if(S=S instanceof f.Table?S.name:S,typeof S!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return S}),n=="r"||n===_a)m=_a;else{if(n!="rw"&&n!=Ea)throw new oe.InvalidArgument("Invalid transaction mode: "+n);m=Ea}if(h){if(h.mode===_a&&m===Ea){if(!w)throw new oe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");h=null}h&&v.forEach(function(S){if(h&&h.storeNames.indexOf(S)===-1){if(!w)throw new oe.SubTransaction("Table "+S+" not included in parent transaction.");h=null}}),w&&h&&!h.active&&(h=null)}}catch(S){return h?h._promise(null,function(R,j){j(S)}):Le(S)}var N=(function S(R,j,T,_,C){return ne.resolve().then(function(){var P=ue.transless||ue,O=R._createTransaction(j,T,R._dbSchema,_);if(O.explicit=!0,P={trans:O,transless:P},_)O.idbtrans=_.idbtrans;else try{O.create(),O.idbtrans._explicit=!0,R._state.PR1398_maxLoop=3}catch(F){return F.name===De.InvalidState&&R.isOpen()&&0<--R._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),R.close({disableAutoOpen:!1}),R.open().then(function(){return S(R,j,T,null,C)})):Le(F)}var M,I=Ee(C);return I&&gn(),P=ne.follow(function(){var F;(M=C.call(O,O))&&(I?(F=Ot.bind(null,null),M.then(F,F)):typeof M.next=="function"&&typeof M.throw=="function"&&(M=Wa(M)))},P),(M&&typeof M.then=="function"?ne.resolve(M).then(function(F){return O.active?F:Le(new oe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):P.then(function(){return M})).then(function(F){return _&&O._resolve(),O._completion.then(function(){return F})}).catch(function(F){return O._reject(F),Le(F)})})}).bind(null,this,m,v,h,c);return h?h._promise(m,N,"lock"):ue.trans?Ht(ue.transless,function(){return f._whenReady(N)}):this._whenReady(N)},Fe.prototype.table=function(n){if(!b(this._allTables,n))throw new oe.InvalidTable("Table ".concat(n," does not exist"));return this._allTables[n]},Fe);function Fe(n,o){var c=this;this._middlewares={},this.verno=0;var f=Fe.dependencies;this._options=o=s({addons:Fe.addons,autoOpen:!0,indexedDB:f.indexedDB,IDBKeyRange:f.IDBKeyRange,cache:"cloned"},o),this._deps={indexedDB:o.indexedDB,IDBKeyRange:o.IDBKeyRange},f=o.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var h,m,v,w,N,S={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Se,dbReadyPromise:null,cancelOpen:Se,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:o.autoOpen};S.dbReadyPromise=new ne(function(j){S.dbReadyResolve=j}),S.openCanceller=new ne(function(j,T){S.cancelOpen=T}),this._state=S,this.name=n,this.on=Un(this,"populate","blocked","versionchange","close",{ready:[ya,Se]}),this.once=function(j,T){var _=function(){for(var C=[],P=0;P<arguments.length;P++)C[P]=arguments[P];c.on(j).unsubscribe(_),T.apply(c,C)};return c.on(j,_)},this.on.ready.subscribe=W(this.on.ready.subscribe,function(j){return function(T,_){Fe.vip(function(){var C,P=c._state;P.openComplete?(P.dbOpenError||ne.resolve().then(T),_&&j(T)):P.onReadyBeingFired?(P.onReadyBeingFired.push(T),_&&j(T)):(j(T),C=c,_||j(function O(){C.on.ready.unsubscribe(T),C.on.ready.unsubscribe(O)}))})}}),this.Collection=(h=this,Wn(Cl.prototype,function(M,O){this.db=h;var _=uo,C=null;if(O)try{_=O()}catch(I){C=I}var P=M._ctx,O=P.table,M=O.hook.reading.fire;this._ctx={table:O,index:P.index,isPrimKey:!P.index||O.schema.primKey.keyPath&&P.index===O.schema.primKey.name,range:_,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:C,or:P.or,valueMapper:M!==Ln?M:null}})),this.Table=(m=this,Wn(yo.prototype,function(j,T,_){this.db=m,this._tx=_,this.name=j,this.schema=T,this.hook=m._allTables[j]?m._allTables[j].hook:Un(null,{creating:[bl,Se],reading:[xl,Ln],updating:[wl,Se],deleting:[vl,Se]})})),this.Transaction=(v=this,Wn(Rl.prototype,function(j,T,_,C,P){var O=this;j!=="readonly"&&T.forEach(function(M){M=(M=_[M])===null||M===void 0?void 0:M.yProps,M&&(T=T.concat(M.map(function(I){return I.updatesTable})))}),this.db=v,this.mode=j,this.storeNames=T,this.schema=_,this.chromeTransactionDurability=C,this.idbtrans=null,this.on=Un(this,"complete","error","abort"),this.parent=P||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ne(function(M,I){O._resolve=M,O._reject=I}),this._completion.then(function(){O.active=!1,O.on.complete.fire()},function(M){var I=O.active;return O.active=!1,O.on.error.fire(M),O.parent?O.parent._reject(M):I&&O.idbtrans&&O.idbtrans.abort(),Le(M)})})),this.Version=(w=this,Wn(Ll.prototype,function(j){this.db=w,this._cfg={version:j,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(N=this,Wn(jo.prototype,function(j,T,_){if(this.db=N,this._ctx={table:j,index:T===":id"?null:T,or:_},this._cmp=this._ascending=je,this._descending=function(C,P){return je(P,C)},this._max=function(C,P){return 0<je(C,P)?C:P},this._min=function(C,P){return je(C,P)<0?C:P},this._IDBKeyRange=N._deps.IDBKeyRange,!this._IDBKeyRange)throw new oe.MissingAPI})),this.on("versionchange",function(j){0<j.newVersion?console.warn("Another connection wants to upgrade database '".concat(c.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(c.name,"'. Closing db now to resume the delete request.")),c.close({disableAutoOpen:!1})}),this.on("blocked",function(j){!j.newVersion||j.newVersion<j.oldVersion?console.warn("Dexie.delete('".concat(c.name,"') was blocked")):console.warn("Upgrade '".concat(c.name,"' blocked by other connection holding version ").concat(j.oldVersion/10))}),this._maxKey=Gn(o.IDBKeyRange),this._createTransaction=function(j,T,_,C){return new c.Transaction(j,T,_,c._options.chromeTransactionDurability,C)},this._fireOnBlocked=function(j){c.on("blocked").fire(j),yn.filter(function(T){return T.name===c.name&&T!==c&&!T._state.vcFired}).map(function(T){return T.on("versionchange").fire(j)})},this.use(ql),this.use(Vl),this.use(zl),this.use(Bl),this.use(Kl);var R=new Proxy(this,{get:function(j,T,_){if(T==="_vip")return!0;if(T==="table")return function(P){return Br(c.table(P),R)};var C=Reflect.get(j,T,_);return C instanceof yo?Br(C,R):T==="tables"?C.map(function(P){return Br(P,R)}):T==="_createTransaction"?function(){return Br(C.apply(this,arguments),R)}:C}});this.vip=R,f.forEach(function(j){return j(c)})}var Kr,lt=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Hl=(Ya.prototype.subscribe=function(n,o,c){return this._subscribe(n&&typeof n!="function"?n:{next:n,error:o,complete:c})},Ya.prototype[lt]=function(){return this},Ya);function Ya(n){this._subscribe=n}try{Kr={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{Kr={indexedDB:null,IDBKeyRange:null}}function Io(n){var o,c=!1,f=new Hl(function(h){var m=Ee(n),v,w=!1,N={},S={},R={get closed(){return w},unsubscribe:function(){w||(w=!0,v&&v.abort(),j&&Dt.storagemutated.unsubscribe(_))}};h.start&&h.start(R);var j=!1,T=function(){return Sa(C)},_=function(P){Ir(N,P),Ka(S,N)&&T()},C=function(){var P,O,M;!w&&Kr.indexedDB&&(N={},P={},v&&v.abort(),v=new AbortController,M=function(I){var F=mn();try{m&&gn();var K=Rt(n,I);return K=m?K.finally(Ot):K}finally{F&&pn()}}(O={subscr:P,signal:v.signal,requery:T,querier:n,trans:null}),Promise.resolve(M).then(function(I){c=!0,o=I,w||O.signal.aborted||(N={},function(F){for(var K in F)if(b(F,K))return;return 1}(S=P)||j||(Dt(Hn,_),j=!0),Sa(function(){return!w&&h.next&&h.next(I)}))},function(I){c=!1,["DatabaseClosedError","AbortError"].includes(I==null?void 0:I.name)||w||Sa(function(){w||h.error&&h.error(I)})}))};return setTimeout(T,0),R});return f.hasValue=function(){return c},f.getValue=function(){return o},f}var Qt=Nt;function Ja(n){var o=Mt;try{Mt=!0,Dt.storagemutated.fire(n),Ua(n,!0)}finally{Mt=o}}A(Qt,s(s({},gr),{delete:function(n){return new Qt(n,{addons:[]}).delete()},exists:function(n){return new Qt(n,{addons:[]}).open().then(function(o){return o.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(n){try{return o=Qt.dependencies,c=o.indexedDB,o=o.IDBKeyRange,(La(c)?Promise.resolve(c.databases()).then(function(f){return f.map(function(h){return h.name}).filter(function(h){return h!==Sr})}):Ia(c,o).toCollection().primaryKeys()).then(n)}catch{return Le(new oe.MissingAPI)}var o,c},defineClass:function(){return function(n){p(this,n)}},ignoreTransaction:function(n){return ue.trans?Ht(ue.transless,n):n()},vip:Fa,async:function(n){return function(){try{var o=Wa(n.apply(this,arguments));return o&&typeof o.then=="function"?o:ne.resolve(o)}catch(c){return Le(c)}}},spawn:function(n,o,c){try{var f=Wa(n.apply(c,o||[]));return f&&typeof f.then=="function"?f:ne.resolve(f)}catch(h){return Le(h)}},currentTransaction:{get:function(){return ue.trans||null}},waitFor:function(n,o){return o=ne.resolve(typeof n=="function"?Qt.ignoreTransaction(n):n).timeout(o||6e4),ue.trans?ue.trans.waitFor(o):o},Promise:ne,debug:{get:function(){return gt},set:function(n){ro(n)}},derive:E,extend:p,props:A,override:W,Events:Un,on:Dt,liveQuery:Io,extendObservabilitySet:Ir,getByKeyPath:J,setByKeyPath:X,delByKeyPath:function(n,o){typeof o=="string"?X(n,o,void 0):"length"in o&&[].map.call(o,function(c){X(n,c,void 0)})},shallowClone:ce,deepClone:Ne,getObjectDiff:Va,cmp:je,asap:ae,minKey:-1/0,addons:[],connections:yn,errnames:De,dependencies:Kr,cache:Jt,semVer:"4.2.1",version:"4.2.1".split(".").map(function(n){return parseInt(n)}).reduce(function(n,o,c){return n+o/Math.pow(10,2*c)})})),Qt.maxKey=Gn(Qt.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Dt(Hn,function(n){Mt||(n=new CustomEvent(Aa,{detail:n}),Mt=!0,dispatchEvent(n),Mt=!1)}),addEventListener(Aa,function(n){n=n.detail,Mt||Ja(n)}));var wn,Mt=!1,Lo=function(){};return typeof BroadcastChannel<"u"&&((Lo=function(){(wn=new BroadcastChannel(Aa)).onmessage=function(n){return n.data&&Ja(n.data)}})(),typeof wn.unref=="function"&&wn.unref(),Dt(Hn,function(n){Mt||wn.postMessage(n)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(n){if(!Nt.disableBfCache&&n.persisted){gt&&console.debug("Dexie: handling persisted pagehide"),wn!=null&&wn.close();for(var o=0,c=yn;o<c.length;o++)c[o].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(n){!Nt.disableBfCache&&n.persisted&&(gt&&console.debug("Dexie: handling persisted pageshow"),Lo(),Ja({all:new He(-1/0,[[]])}))})),ne.rejectionMapper=function(n,o){return!n||n instanceof de||n instanceof TypeError||n instanceof SyntaxError||!n.name||!Kt[n.name]?n:(o=new Kt[n.name](o||n.message,n),"stack"in n&&k(o,"stack",{get:function(){return this.inner.stack}}),o)},ro(gt),s(Nt,Object.freeze({__proto__:null,Dexie:Nt,liveQuery:Io,Entity:fo,cmp:je,PropModification:zn,replacePrefix:function(n,o){return new zn({replacePrefix:[n,o]})},add:function(n){return new zn({add:n})},remove:function(n){return new zn({remove:n})},default:Nt,RangeSet:He,mergeRanges:Qn,rangesOverlap:Eo}),{default:Nt}),Nt})})(Mc);var fh=Mc.exports;const Cs=au(fh),mi=Symbol.for("Dexie"),aa=globalThis[mi]||(globalThis[mi]=Cs);if(Cs.semVer!==aa.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Cs.semVer} and ${aa.semVer}`);const{liveQuery:Xy,mergeRanges:Zy,rangesOverlap:ex,RangeSet:tx,cmp:nx,Entity:rx,PropModification:ax,replacePrefix:sx,add:ox,remove:ix,DexieYProvider:cx}=aa,hh="smartmoney-db",Ic=1;class mh extends aa{constructor(){super(hh);Zt(this,"transactions");Zt(this,"accounts");Zt(this,"budgets");Zt(this,"goals");Zt(this,"sync_queue");Zt(this,"app_meta");this.version(Ic).stores({transactions:"++id, date, category, source, type, account_id, [date+category], [date+account_id]",accounts:"++id, name, type, is_active, currency",budgets:"++id, month",goals:"++id, status, end_date",sync_queue:"++id, timestamp, retry_count, status, entity_type",app_meta:"id"})}}const dt=new mh;function ph(){try{return typeof indexedDB<"u"&&indexedDB!==null}catch{return!1}}async function gh(){if(!ph())return console.warn("IndexedDB not available in this browser"),!1;try{return await dt.open(),await dt.app_meta.get("app-state")||await dt.app_meta.put({id:"app-state",schema_version:Ic}),!0}catch(e){return console.error("Failed to initialize IndexedDB:",e),!1}}const pi=[1e3,2e3,4e3,8e3,16e3],gi=5;async function lx(e,t,a,s){const i={operation_type:e,entity_type:t,entity_id:a,payload:s,timestamp:Date.now(),retry_count:0,status:"pending"};return await dt.sync_queue.add(i)}function yh(e,t){const a=`/api/${e}s`;return typeof t=="number"&&t>0?`${a}/${t}`:a}function xh(e){switch(e){case"CREATE":return"POST";case"UPDATE":return"PUT";case"DELETE":return"DELETE"}}async function bh(e){const t=yh(e.entity_type,e.entity_id),a=xh(e.operation_type),s=await re.request({method:a,url:t,data:e.operation_type!=="DELETE"?e.payload:void 0});if(s.status>=400)throw new Error(`Sync failed: ${s.status}`)}async function vh(){const e=await dt.sync_queue.where("status").equals("pending").and(s=>s.retry_count<gi).sortBy("timestamp");let t=0,a=0;for(const s of e)try{if(await dt.sync_queue.update(s.id,{status:"processing"}),s.retry_count>0){const i=pi[Math.min(s.retry_count-1,pi.length-1)];await new Promise(l=>setTimeout(l,i))}await bh(s),await dt.sync_queue.delete(s.id),t++}catch(i){const l=i instanceof Error?i.message:"Unknown error",d=s.retry_count+1;await dt.sync_queue.update(s.id,{status:d>=gi?"failed":"pending",retry_count:d,last_error:l}),a++}return{processed:t,failed:a}}async function Ps(){return await dt.sync_queue.where("status").equals("pending").count()}let Xr=null,rs=!1;const As=new Set;let Zr={isOnline:navigator.onLine,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null};function wh(e){return As.add(e),e(Zr),()=>As.delete(e)}function an(e){Zr={...Zr,...e},As.forEach(t=>t(Zr))}async function ea(){if(!(rs||!navigator.onLine)){rs=!0,an({isSyncing:!0});try{const e=await vh(),t=await Ps();an({isSyncing:!1,pendingCount:t,lastSyncAt:new Date,lastError:e.failed>0?`${e.failed} operations failed`:null})}catch(e){an({isSyncing:!1,lastError:e instanceof Error?e.message:"Sync failed"})}finally{rs=!1}}}function jh(){const e=async()=>{an({isOnline:!0}),await ea()},t=()=>{an({isOnline:!1})};window.addEventListener("online",e),window.addEventListener("offline",t),document.addEventListener("visibilitychange",async()=>{!document.hidden&&navigator.onLine&&await ea()}),Xr=setInterval(async()=>{if(navigator.onLine){const a=await Ps();an({pendingCount:a}),a>0&&await ea()}},3e4),Ps().then(a=>an({pendingCount:a}))}function kh(){Xr&&(clearInterval(Xr),Xr=null)}const Lc={isOnline:!0,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null},Fc=g.createContext({...Lc,triggerSync:async()=>{}});function Nh({children:e}){const[t,a]=g.useState(Lc);g.useEffect(()=>{jh();const i=wh(a);return()=>{i(),kh()}},[]);const s=g.useCallback(async()=>{await ea()},[]);return r.jsx(Fc.Provider,{value:{...t,triggerSync:s},children:e})}function Sh(){return g.useContext(Fc)}const _h=["auth","user","session","credit"],Eh=new eu({defaultOptions:{queries:{gcTime:1e3*60*60*24,staleTime:1e3*60*5,retry:2,refetchOnWindowFocus:!1,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}});function Ch(e){const t=e[0];return typeof t!="string"?!0:!_h.includes(t)}function Rs(){}function Ph(e,{interval:t=1e3,onError:a=Rs}={}){if(typeof e!="function")throw new Error("argument is not function.");let s=0,i=null,l=!1,d=!1;return async(...u)=>{if(i=u,!d){for(d=!0;l;)await new Promise(p=>Fo.setTimeout(p,t));for(;Date.now()<s;)await new Promise(p=>Fo.setTimeout(p,s-Date.now()));d=!1,l=!0;try{await e(...i)}catch(p){try{a(p)}catch{}}s=Date.now()+t,l=!1}}}var Ah=({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:a=1e3,serialize:s=JSON.stringify,deserialize:i=JSON.parse,retry:l})=>{if(e){const d=async u=>{try{const p=await s(u);await e.setItem(t,p);return}catch(p){return p}};return{persistClient:Ph(async u=>{let p=u,y=await d(p),x=0;for(;y&&p;)x++,p=await(l==null?void 0:l({persistedClient:p,error:y,errorCount:x})),p&&(y=await d(p))},{interval:a}),restoreClient:async()=>{const u=await e.getItem(t);if(u)return await i(u)},removeClient:()=>e.removeItem(t)}}return{persistClient:Rs,restoreClient:()=>Promise.resolve(void 0),removeClient:Rs}};const Rh="tanstack-query-cache",Oh={getItem:async e=>{try{const t=await dt.app_meta.get(e);return t?JSON.stringify(t):null}catch(t){return console.warn("Failed to read from IndexedDB:",t),null}},setItem:async(e,t)=>{try{const a=JSON.parse(t);await dt.app_meta.put({id:e,...a})}catch(a){console.warn("Failed to write to IndexedDB:",a)}},removeItem:async e=>{try{await dt.app_meta.delete(e)}catch(t){console.warn("Failed to remove from IndexedDB:",t)}}},Th=Ah({storage:Oh,throttleTime:1e4,key:Rh}),$h="modulepreload",Dh=function(e){return"/"+e},yi={},et=function(t,a,s){let i=Promise.resolve();if(a&&a.length>0){document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),u=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=Promise.allSettled(a.map(p=>{if(p=Dh(p),p in yi)return;yi[p]=!0;const y=p.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":$h,y||(b.as="script"),b.crossOrigin="",b.href=p,u&&b.setAttribute("nonce",u),document.head.appendChild(b),y)return new Promise((A,D)=>{b.addEventListener("load",A),b.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(d){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=d,window.dispatchEvent(u),!u.defaultPrevented)throw d}return i.then(d=>{for(const u of d||[])u.status==="rejected"&&l(u.reason);return t().catch(l)})},as=[{code:"ja",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function xi(){const{i18n:e,t}=we("common"),[a,s]=g.useState(!1),i=g.useRef(null),l=as.find(u=>u.code===e.language)||as[0],d=u=>{e.changeLanguage(u),s(!1)};return g.useEffect(()=>{function u(p){i.current&&!i.current.contains(p.target)&&s(!1)}return a&&document.addEventListener("mousedown",u),()=>{document.removeEventListener("mousedown",u)}},[a]),r.jsxs("div",{className:"relative",ref:i,children:[r.jsxs("button",{onClick:()=>s(!a),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":t("language.selectLanguage"),"aria-expanded":a,"aria-haspopup":"true",children:[r.jsx("span",{className:"text-xl","aria-hidden":"true",children:l.flag}),r.jsx("span",{className:"text-sm font-medium hidden sm:inline text-gray-700 dark:text-gray-200",children:l.name}),r.jsx("svg",{className:te("w-4 h-4 transition-transform",a&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),a&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:as.map(u=>r.jsxs("button",{onClick:()=>d(u.code),className:te("w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","first:rounded-t-lg last:rounded-b-lg","text-gray-700 dark:text-gray-200",e.language===u.code&&"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400"),role:"menuitem",children:[r.jsx("span",{className:"text-xl","aria-hidden":"true",children:u.flag}),r.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:u.name}),e.language===u.code&&r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-label":"Selected",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},u.code))})]})}function bi(){const{t:e}=we("common"),{resolvedTheme:t,setTheme:a}=Pc(),s=()=>{a(t==="dark"?"light":"dark")};return r.jsx("button",{onClick:s,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus-ring","aria-label":e(t==="dark"?"aria.lightMode":"aria.darkMode"),title:e(t==="dark"?"aria.lightMode":"aria.darkMode"),children:t==="dark"?r.jsx(Ui,{className:"w-5 h-5","aria-hidden":"true"}):r.jsx(Wi,{className:"w-5 h-5","aria-hidden":"true"})})}function Mh(){const{t:e}=we("common"),{logout:t}=ha(),{isPrivacyMode:a,togglePrivacyMode:s}=hr();return r.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-16",children:[r.jsxs(Ve,{to:"/",className:"flex items-center gap-3 hover:opacity-80 transition-opacity",children:[r.jsx("svg",{className:"w-8 h-8 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),r.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"})]}),r.jsxs("nav",{className:"hidden md:flex items-center gap-6",role:"navigation","aria-label":e("aria.mainNavigation"),children:[r.jsx(_t,{to:"/",children:e("header.dashboard")}),r.jsx(_t,{to:"/upload",children:e("header.upload")}),r.jsx(_t,{to:"/transactions",children:e("header.transactions")}),r.jsx(_t,{to:"/recurring",children:e("header.recurring")}),r.jsx(_t,{to:"/accounts",children:e("header.accounts")}),r.jsx(_t,{to:"/analytics",children:e("header.analytics")}),r.jsx(_t,{to:"/goals",children:e("header.goals")}),r.jsx(_t,{to:"/budget",children:e("header.budget")}),r.jsx(_t,{to:"/settings",children:e("header.settings")}),r.jsx("button",{onClick:s,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(a?"aria.showAmounts":"aria.hideAmounts"),title:e(a?"aria.showAmounts":"aria.hideAmounts"),children:a?r.jsx(qo,{className:"w-5 h-5","aria-hidden":"true"}):r.jsx(zo,{className:"w-5 h-5","aria-hidden":"true"})}),r.jsx(bi,{}),r.jsx(xi,{}),r.jsx("button",{onClick:t,className:"text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors px-3 py-1 rounded focus-ring",title:e("auth.logout"),children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]}),r.jsxs("div",{className:"md:hidden flex items-center gap-1",children:[r.jsx("button",{onClick:s,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(a?"aria.showAmounts":"aria.hideAmounts"),children:a?r.jsx(qo,{className:"w-5 h-5","aria-hidden":"true"}):r.jsx(zo,{className:"w-5 h-5","aria-hidden":"true"})}),r.jsx(bi,{}),r.jsx(xi,{})]})]})})})}function _t({to:e,children:t}){return r.jsx(Ve,{to:e,className:te("text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors pb-1","focus-ring rounded"),activeProps:{className:"text-primary-600 dark:text-primary-400 font-medium border-b-2 border-primary-600 dark:border-primary-400"},children:t})}function Ih(){const e=new Date().getFullYear();return r.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsx("div",{className:"text-center text-sm text-gray-500",children:r.jsxs("p",{children:[" ",e," SmartMoney. All rights reserved."]})})})})}const Lh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Fh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})}),Bh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Kh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),qh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),zh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),Uh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),Wh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),Vh=({className:e})=>r.jsxs("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),Hh=({className:e})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),Gh=[{path:"/",icon:Lh,labelKey:"nav.dashboard"},{path:"/transactions",icon:Fh,labelKey:"nav.transactions"},{path:"/budget",icon:Bh,labelKey:"nav.budget"},{path:"/analytics",icon:Kh,labelKey:"nav.analytics"},{path:"more",icon:qh,labelKey:"nav.more"}],vi=[{path:"/upload",icon:zh,labelKey:"header.upload"},{path:"/accounts",icon:Uh,labelKey:"header.accounts"},{path:"/goals",icon:Wh,labelKey:"header.goals"},{path:"/settings",icon:Vh,labelKey:"header.settings"}];function Yh(){const{t:e}=we("common"),t=sa(),{logout:a}=ha(),[s,i]=g.useState(!1),l=u=>u==="/"?t.pathname==="/":t.pathname.startsWith(u),d=vi.some(u=>l(u.path));return r.jsxs(r.Fragment,{children:[s&&r.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>i(!1)}),s&&r.jsx("div",{className:"fixed bottom-16 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 md:hidden rounded-t-2xl shadow-lg animate-slide-up",children:r.jsxs("div",{className:"p-4 space-y-2",children:[vi.map(u=>r.jsxs(Ve,{to:u.path,onClick:()=>i(!1),className:te("flex items-center gap-3 px-4 py-3 rounded-xl transition-colors",l(u.path)?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[r.jsx(u.icon,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:e(u.labelKey)})]},u.path)),r.jsxs("button",{onClick:()=>{i(!1),a()},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[r.jsx(Hh,{className:"w-5 h-5"}),r.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})}),r.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 md:hidden safe-area-bottom",children:r.jsx("div",{className:"flex items-center justify-around h-16",children:Gh.map(u=>{const p=u.path==="more"?d:l(u.path);return u.path==="more"?r.jsxs("button",{onClick:()=>i(!s),className:te("flex flex-col items-center justify-center flex-1 h-full py-2 transition-colors",p||s?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"),children:[r.jsx(u.icon,{className:"w-6 h-6"}),r.jsx("span",{className:"text-xs mt-1 font-medium",children:e(u.labelKey)})]},u.path):r.jsxs(Ve,{to:u.path,onClick:()=>i(!1),className:te("flex flex-col items-center justify-center flex-1 h-full py-2 transition-colors",p?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400"),children:[r.jsx(u.icon,{className:"w-6 h-6"}),r.jsx("span",{className:"text-xs mt-1 font-medium",children:e(u.labelKey)})]},u.path)})})})]})}function Jh({onClick:e,hasUnread:t=!1}){const a=r.jsxs("button",{onClick:e,className:te("fixed bottom-24 right-4 sm:bottom-6 sm:right-6 z-50","w-14 h-14 rounded-full","bg-primary-500 text-white shadow-lg","hover:bg-primary-600 hover:scale-105","active:scale-95","transition-all duration-200","flex items-center justify-center","focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2"),"aria-label":"Open AI Assistant",children:[r.jsx(du,{className:"w-6 h-6"}),t&&r.jsx("span",{className:"absolute -top-1 -right-1 w-4 h-4 bg-red-500 rounded-full animate-pulse"})]});return typeof document<"u"?Pt.createPortal(a,document.body):null}function Qh({onClose:e,credits:t}){const{t:a}=we();return r.jsxs("div",{className:te("flex items-center justify-between","px-4 py-3 border-b border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800"),children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Fs,{className:"w-5 h-5 text-primary-500"}),r.jsx("h2",{className:"font-semibold text-gray-900 dark:text-white",children:a("chat.title")})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[t!==null&&r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("chat.credits",{count:t})}),r.jsx("button",{onClick:e,className:te("p-1.5 rounded-lg","text-gray-500 hover:text-gray-700","dark:text-gray-400 dark:hover:text-gray-200","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors"),"aria-label":a("common.close"),children:r.jsx(Bt,{className:"w-5 h-5"})})]})]})}function Xh({role:e,content:t}){const a=e==="user";return r.jsxs("div",{className:te("flex gap-3",a?"flex-row-reverse":"flex-row"),children:[r.jsx("div",{className:te("flex-shrink-0 w-8 h-8 rounded-full","flex items-center justify-center",a?"bg-primary-100 dark:bg-primary-900":"bg-gray-100 dark:bg-gray-700"),children:a?r.jsx(fu,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"}):r.jsx(Fs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),r.jsx("div",{className:te("max-w-[80%] px-4 py-2.5 rounded-2xl","text-sm leading-relaxed",a?"bg-primary-500 text-white rounded-br-md":"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-white rounded-bl-md"),children:r.jsx("p",{className:"whitespace-pre-wrap",children:t})})]})}function Zh({action:e,onApply:t,onSkip:a,isApplying:s=!1}){const{t:i}=we(),l=()=>e.type==="create_goal"?r.jsx(Tn,{className:"w-5 h-5 text-primary-500"}):e.type==="create_budget"?r.jsx(Vi,{className:"w-5 h-5 text-primary-500"}):null,d=()=>i(`chat.action.${e.type}`);return r.jsxs("div",{className:te("bg-primary-50 dark:bg-primary-900/30","border border-primary-200 dark:border-primary-700","rounded-lg p-3 mt-2"),children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:l()}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:d()}),r.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-0.5",children:e.description})]})]}),r.jsxs("div",{className:"flex gap-2 mt-3",children:[r.jsx("button",{onClick:t,disabled:s,className:te("flex-1 px-3 py-1.5 text-sm font-medium rounded-md","bg-primary-500 text-white","hover:bg-primary-600","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors","flex items-center justify-center gap-1.5"),children:s?r.jsxs(r.Fragment,{children:[r.jsx(Bs,{className:"w-3.5 h-3.5 animate-spin"}),i("common.loading")]}):i("chat.apply")}),r.jsx("button",{onClick:a,disabled:s,className:te("px-3 py-1.5 text-sm font-medium rounded-md","border border-gray-300 dark:border-gray-600","text-gray-700 dark:text-gray-300","hover:bg-gray-100 dark:hover:bg-gray-700","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors"),children:i("chat.skip")})]})]})}function em({messages:e,isLoading:t,applyingAction:a,onApplyAction:s,onSkipAction:i}){const{t:l}=we(),d=g.useRef(null);return g.useEffect(()=>{var u;(u=d.current)==null||u.scrollIntoView({behavior:"smooth"})},[e,t]),r.jsxs("div",{className:te("flex-1 overflow-y-auto","px-4 py-4 space-y-4","bg-gray-50 dark:bg-gray-900"),children:[e.length===0&&!t&&r.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 mt-8",children:r.jsx("p",{children:l("chat.welcomeMessage")})}),e.map((u,p)=>r.jsxs("div",{children:[r.jsx(Xh,{role:u.role,content:u.content}),u.action&&r.jsx("div",{className:"ml-11",children:r.jsx(Zh,{action:u.action,onApply:()=>s(p),onSkip:()=>i(p),isApplying:a===p})})]},p)),t&&r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center",children:r.jsx(Bs,{className:"w-4 h-4 text-gray-600 dark:text-gray-400 animate-spin"})}),r.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 px-4 py-2.5 rounded-2xl rounded-bl-md",children:r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:l("chat.thinking")})})]}),r.jsx("div",{ref:d})]})}function tm({onSend:e,disabled:t=!1}){const{t:a}=we(),[s,i]=g.useState(""),l=g.useRef(null);g.useEffect(()=>{const p=l.current;p&&(p.style.height="auto",p.style.height=Math.min(p.scrollHeight,120)+"px")},[s]);const d=()=>{const p=s.trim();p&&!t&&(e(p),i(""))},u=p=>{p.key==="Enter"&&!p.shiftKey&&(p.preventDefault(),d())};return r.jsx("div",{className:te("px-4 py-3 border-t border-gray-200 dark:border-gray-700","bg-white dark:bg-gray-800"),children:r.jsxs("div",{className:te("flex items-end gap-2","bg-gray-100 dark:bg-gray-700 rounded-2xl","px-4 py-2"),children:[r.jsx("textarea",{ref:l,value:s,onChange:p=>i(p.target.value),onKeyDown:u,placeholder:a("chat.placeholder"),disabled:t,rows:1,className:te("flex-1 bg-transparent resize-none","text-sm text-gray-900 dark:text-white","placeholder-gray-500 dark:placeholder-gray-400","focus:outline-none","disabled:opacity-50 disabled:cursor-not-allowed","max-h-[120px]")}),r.jsx("button",{onClick:d,disabled:t||!s.trim(),className:te("p-2 rounded-full","bg-primary-500 text-white","hover:bg-primary-600","disabled:opacity-50 disabled:cursor-not-allowed","transition-colors","flex-shrink-0"),"aria-label":a("chat.send"),children:r.jsx(hu,{className:"w-4 h-4"})})]})})}async function nm(e,t="ja"){return(await re.post("/api/chat",{messages:e,language:t})).data}async function Bc(){return(await re.get("/api/goals/")).data}async function ux(e){return(await re.get(`/api/goals/${e}`)).data}async function rm(e){return(await re.post("/api/goals/",e)).data}async function dx(e,t){return(await re.put(`/api/goals/${e}`,t)).data}async function fx(e){await re.delete(`/api/goals/${e}`)}async function am(e,t=!0,a=3){const s=new URLSearchParams;return t&&(s.append("include_achievability","true"),s.append("trend_months",a.toString())),(await re.get(`/api/goals/${e}/progress?${s.toString()}`)).data}async function hx(){return(await re.get("/api/goals/status/has-emergency-fund")).data.has_emergency_fund}async function sm(e){return(await re.post("/api/budgets/generate",e)).data}async function mx(){return(await re.get("/api/budgets/current")).data}async function px(e,t){return(await re.post(`/api/budgets/${e}/regenerate`,t)).data}async function gx(){return(await re.get("/api/budgets/tracking/current")).data}async function yx(){return(await re.get("/api/budgets/suggestions")).data}async function xx(e,t,a){return(await re.patch(`/api/budgets/${e}/allocations/${encodeURIComponent(t)}`,{amount:a})).data}async function bx(e,t){return(await re.delete(`/api/budgets/${e}/allocations/${encodeURIComponent(t)}`)).data}function om({isOpen:e,onClose:t}){const{t:a,i18n:s}=we(),i=or(),[l,d]=g.useState([]),[u,p]=g.useState(!1),[y,x]=g.useState(null),[b,A]=g.useState(null);g.useEffect(()=>{const B=z=>{z.key==="Escape"&&e&&t()};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[e,t]);const D=g.useCallback(async B=>{const z={role:"user",content:B},W=[...l,z];d(W),p(!0);try{const V=await nm(W,s.language);d(ae=>[...ae,{role:"assistant",content:V.message,action:V.suggested_action}]),x(V.credits_remaining)}catch(V){const ae=V instanceof Error?V.message:"Unknown error";ae.includes("402")||ae.includes("credits")?d(J=>[...J,{role:"assistant",content:a("chat.noCredits")}]):d(J=>[...J,{role:"assistant",content:a("chat.error")}])}finally{p(!1)}},[l,s.language,a]),k=g.useCallback(async B=>{const z=l[B];if(z!=null&&z.action){A(B);try{await E(z.action),d(W=>{const V=[...W];return V[B]={...V[B],action:null},[...V,{role:"assistant",content:a("chat.actionApplied")}]}),z.action.type==="create_goal"?i.invalidateQueries({queryKey:["goals"]}):z.action.type==="create_budget"&&i.invalidateQueries({queryKey:["budget"]})}catch(W){console.error("Failed to apply action:",W),d(V=>[...V,{role:"assistant",content:a("chat.actionFailed")}])}finally{A(null)}}},[l,i,a]),E=async B=>{if(B.type==="create_goal"){const z=B.payload,V=["emergency_fund","home_down_payment","vacation_travel","vehicle","education","wedding","large_purchase","debt_payoff","retirement","investment","custom"].includes(z.goal_type||"")?z.goal_type:"custom";await rm({goal_type:V,target_amount:z.target_amount||1e5,years:z.years||1,name:z.name})}else if(B.type==="create_budget"){const z=B.payload;await sm({monthly_income:z.monthly_income||3e5,feedback:z.feedback,language:s.language})}},$=g.useCallback(B=>{d(z=>{const W=[...z];return W[B]={...W[B],action:null},W})},[]);return r.jsxs(r.Fragment,{children:[e&&r.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 sm:hidden",onClick:t}),r.jsxs("div",{className:te("fixed right-0 top-0 h-full z-50","w-full sm:w-96","bg-white dark:bg-gray-800","shadow-2xl","flex flex-col","transform transition-transform duration-300 ease-out",e?"translate-x-0":"-translate-x-full pointer-events-none"),children:[r.jsx(Qh,{onClose:t,credits:y}),r.jsx(em,{messages:l,isLoading:u,applyingAction:b,onApplyAction:k,onSkipAction:$}),r.jsx(tm,{onSend:D,disabled:u})]})]})}const im=["/transactions"];function cm({onAddTransaction:e}){const{t}=we("common"),a=jt(),s=sa(),[i,l]=g.useState(!1);if(im.includes(s.pathname))return null;const d=[{icon:r.jsx(Hi,{size:20}),label:t("transaction.addTransaction","Add Transaction"),onClick:()=>{l(!1),e?e():a({to:"/transactions"})},color:"bg-green-500 hover:bg-green-600"},{icon:r.jsx(vs,{size:20}),label:t("receipt.scanReceipt","Scan Receipt"),onClick:()=>{l(!1),a({to:"/transactions"})},color:"bg-purple-500 hover:bg-purple-600"},{icon:r.jsx(ir,{size:20}),label:t("header.upload","Upload CSV"),onClick:()=>{l(!1),a({to:"/upload"})},color:"bg-blue-500 hover:bg-blue-600"}];return r.jsxs(r.Fragment,{children:[i&&r.jsx("div",{className:"fixed inset-0 bg-black/30 z-40 md:hidden",onClick:()=>l(!1)}),r.jsxs("div",{className:"fixed bottom-20 right-4 z-50 md:hidden flex flex-col-reverse items-end gap-3",children:[i&&r.jsx("div",{className:"flex flex-col-reverse gap-3 mb-2",children:d.map((u,p)=>r.jsxs("button",{onClick:u.onClick,className:te("flex items-center gap-3 pl-4 pr-5 py-3 rounded-full text-white shadow-lg","transform transition-all duration-200","animate-in fade-in slide-in-from-bottom-2",u.color),style:{animationDelay:`${p*50}ms`,animationFillMode:"both"},children:[u.icon,r.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:u.label})]},p))}),r.jsx("button",{onClick:()=>l(!i),className:te("w-14 h-14 rounded-full shadow-lg flex items-center justify-center","transform transition-all duration-300","active:scale-95",i?"bg-gray-700 dark:bg-gray-600 rotate-45":"bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600"),"aria-label":i?t("common.close","Close"):t("fab.quickActions","Quick Actions"),children:i?r.jsx(Bt,{size:24,className:"text-white"}):r.jsx(Ks,{size:24,className:"text-white"})})]})]})}function lm({children:e,className:t}){const a=sa(),[s,i]=g.useState(!1),[l,d]=g.useState(e);return g.useEffect(()=>{i(!1);const u=setTimeout(()=>{d(e),i(!0)},100);return()=>clearTimeout(u)},[a.pathname]),g.useEffect(()=>{d(e)},[e]),r.jsx("div",{className:te("transition-all duration-300 ease-out",s?"opacity-100 translate-y-0":"opacity-0 translate-y-2",t),children:l})}var wi=1,um=.9,dm=.8,fm=.17,ss=.1,os=.999,hm=.9999,mm=.99,pm=/[\\\/_+.#"@\[\(\{&]/,gm=/[\\\/_+.#"@\[\(\{&]/g,ym=/[\s-]/,Kc=/[\s-]/g;function Os(e,t,a,s,i,l,d){if(l===t.length)return i===e.length?wi:mm;var u=`${i},${l}`;if(d[u]!==void 0)return d[u];for(var p=s.charAt(l),y=a.indexOf(p,i),x=0,b,A,D,k;y>=0;)b=Os(e,t,a,s,y+1,l+1,d),b>x&&(y===i?b*=wi:pm.test(e.charAt(y-1))?(b*=dm,D=e.slice(i,y-1).match(gm),D&&i>0&&(b*=Math.pow(os,D.length))):ym.test(e.charAt(y-1))?(b*=um,k=e.slice(i,y-1).match(Kc),k&&i>0&&(b*=Math.pow(os,k.length))):(b*=fm,i>0&&(b*=Math.pow(os,y-i))),e.charAt(y)!==t.charAt(l)&&(b*=hm)),(b<ss&&a.charAt(y-1)===s.charAt(l+1)||s.charAt(l+1)===s.charAt(l)&&a.charAt(y-1)!==s.charAt(l))&&(A=Os(e,t,a,s,y+1,l+2,d),A*ss>b&&(b=A*ss)),b>x&&(x=b),y=a.indexOf(p,y+1);return d[u]=x,x}function ji(e){return e.toLowerCase().replace(Kc," ")}function xm(e,t,a){return e=a&&a.length>0?`${e+" "+a.join(" ")}`:e,Os(e,t,ji(e),ji(t),0,0,{})}function Pn(e,t,{checkForDefaultPrevented:a=!0}={}){return function(i){if(e==null||e(i),a===!1||!i.defaultPrevented)return t==null?void 0:t(i)}}function bm(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function qc(...e){return t=>e.forEach(a=>bm(a,t))}function mr(...e){return g.useCallback(qc(...e),e)}function vm(e,t){const a=g.createContext(t);function s(l){const{children:d,...u}=l,p=g.useMemo(()=>u,Object.values(u));return g.createElement(a.Provider,{value:p},d)}function i(l){const d=g.useContext(a);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${e}\``)}return s.displayName=e+"Provider",[s,i]}function wm(e,t=[]){let a=[];function s(l,d){const u=g.createContext(d),p=a.length;a=[...a,d];function y(b){const{scope:A,children:D,...k}=b,E=(A==null?void 0:A[e][p])||u,$=g.useMemo(()=>k,Object.values(k));return g.createElement(E.Provider,{value:$},D)}function x(b,A){const D=(A==null?void 0:A[e][p])||u,k=g.useContext(D);if(k)return k;if(d!==void 0)return d;throw new Error(`\`${b}\` must be used within \`${l}\``)}return y.displayName=l+"Provider",[y,x]}const i=()=>{const l=a.map(d=>g.createContext(d));return function(u){const p=(u==null?void 0:u[e])||l;return g.useMemo(()=>({[`__scope${e}`]:{...u,[e]:p}}),[u,p])}};return i.scopeName=e,[s,jm(i,...t)]}function jm(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const s=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(l){const d=s.reduce((u,{useScope:p,scopeName:y})=>{const b=p(l)[`__scope${y}`];return{...u,...b}},{});return g.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return a.scopeName=t.scopeName,a}const Ts=globalThis!=null&&globalThis.document?g.useLayoutEffect:()=>{},km=su.useId||(()=>{});let Nm=0;function is(e){const[t,a]=g.useState(km());return Ts(()=>{a(s=>s??String(Nm++))},[e]),e||(t?`radix-${t}`:"")}function ln(e){const t=g.useRef(e);return g.useEffect(()=>{t.current=e}),g.useMemo(()=>(...a)=>{var s;return(s=t.current)===null||s===void 0?void 0:s.call(t,...a)},[])}function Sm({prop:e,defaultProp:t,onChange:a=()=>{}}){const[s,i]=_m({defaultProp:t,onChange:a}),l=e!==void 0,d=l?e:s,u=ln(a),p=g.useCallback(y=>{if(l){const b=typeof y=="function"?y(e):y;b!==e&&u(b)}else i(y)},[l,e,i,u]);return[d,p]}function _m({defaultProp:e,onChange:t}){const a=g.useState(e),[s]=a,i=g.useRef(s),l=ln(t);return g.useEffect(()=>{i.current!==s&&(l(s),i.current=s)},[s,i,l]),a}const Gs=g.forwardRef((e,t)=>{const{children:a,...s}=e,i=g.Children.toArray(a),l=i.find(Cm);if(l){const d=l.props.children,u=i.map(p=>p===l?g.Children.count(d)>1?g.Children.only(null):g.isValidElement(d)?d.props.children:null:p);return g.createElement($s,it({},s,{ref:t}),g.isValidElement(d)?g.cloneElement(d,void 0,u):null)}return g.createElement($s,it({},s,{ref:t}),a)});Gs.displayName="Slot";const $s=g.forwardRef((e,t)=>{const{children:a,...s}=e;return g.isValidElement(a)?g.cloneElement(a,{...Pm(s,a.props),ref:t?qc(t,a.ref):a.ref}):g.Children.count(a)>1?g.Children.only(null):null});$s.displayName="SlotClone";const Em=({children:e})=>g.createElement(g.Fragment,null,e);function Cm(e){return g.isValidElement(e)&&e.type===Em}function Pm(e,t){const a={...t};for(const s in t){const i=e[s],l=t[s];/^on[A-Z]/.test(s)?i&&l?a[s]=(...u)=>{l(...u),i(...u)}:i&&(a[s]=i):s==="style"?a[s]={...i,...l}:s==="className"&&(a[s]=[i,l].filter(Boolean).join(" "))}return{...e,...a}}const Am=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ht=Am.reduce((e,t)=>{const a=g.forwardRef((s,i)=>{const{asChild:l,...d}=s,u=l?Gs:t;return g.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),g.createElement(u,it({},d,{ref:i}))});return a.displayName=`Primitive.${t}`,{...e,[t]:a}},{});function Rm(e,t){e&&Pt.flushSync(()=>e.dispatchEvent(t))}function Om(e,t=globalThis==null?void 0:globalThis.document){const a=ln(e);g.useEffect(()=>{const s=i=>{i.key==="Escape"&&a(i)};return t.addEventListener("keydown",s),()=>t.removeEventListener("keydown",s)},[a,t])}const Ds="dismissableLayer.update",Tm="dismissableLayer.pointerDownOutside",$m="dismissableLayer.focusOutside";let ki;const Dm=g.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Mm=g.forwardRef((e,t)=>{var a;const{disableOutsidePointerEvents:s=!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,onDismiss:p,...y}=e,x=g.useContext(Dm),[b,A]=g.useState(null),D=(a=b==null?void 0:b.ownerDocument)!==null&&a!==void 0?a:globalThis==null?void 0:globalThis.document,[,k]=g.useState({}),E=mr(t,ce=>A(ce)),$=Array.from(x.layers),[B]=[...x.layersWithOutsidePointerEventsDisabled].slice(-1),z=$.indexOf(B),W=b?$.indexOf(b):-1,V=x.layersWithOutsidePointerEventsDisabled.size>0,ae=W>=z,J=Im(ce=>{const _e=ce.target,Te=[...x.branches].some(ie=>ie.contains(_e));!ae||Te||(l==null||l(ce),u==null||u(ce),ce.defaultPrevented||p==null||p())},D),X=Lm(ce=>{const _e=ce.target;[...x.branches].some(ie=>ie.contains(_e))||(d==null||d(ce),u==null||u(ce),ce.defaultPrevented||p==null||p())},D);return Om(ce=>{W===x.layers.size-1&&(i==null||i(ce),!ce.defaultPrevented&&p&&(ce.preventDefault(),p()))},D),g.useEffect(()=>{if(b)return s&&(x.layersWithOutsidePointerEventsDisabled.size===0&&(ki=D.body.style.pointerEvents,D.body.style.pointerEvents="none"),x.layersWithOutsidePointerEventsDisabled.add(b)),x.layers.add(b),Ni(),()=>{s&&x.layersWithOutsidePointerEventsDisabled.size===1&&(D.body.style.pointerEvents=ki)}},[b,D,s,x]),g.useEffect(()=>()=>{b&&(x.layers.delete(b),x.layersWithOutsidePointerEventsDisabled.delete(b),Ni())},[b,x]),g.useEffect(()=>{const ce=()=>k({});return document.addEventListener(Ds,ce),()=>document.removeEventListener(Ds,ce)},[]),g.createElement(ht.div,it({},y,{ref:E,style:{pointerEvents:V?ae?"auto":"none":void 0,...e.style},onFocusCapture:Pn(e.onFocusCapture,X.onFocusCapture),onBlurCapture:Pn(e.onBlurCapture,X.onBlurCapture),onPointerDownCapture:Pn(e.onPointerDownCapture,J.onPointerDownCapture)}))});function Im(e,t=globalThis==null?void 0:globalThis.document){const a=ln(e),s=g.useRef(!1),i=g.useRef(()=>{});return g.useEffect(()=>{const l=u=>{if(u.target&&!s.current){let y=function(){zc(Tm,a,p,{discrete:!0})};const p={originalEvent:u};u.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=y,t.addEventListener("click",i.current,{once:!0})):y()}else t.removeEventListener("click",i.current);s.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",l),t.removeEventListener("click",i.current)}},[t,a]),{onPointerDownCapture:()=>s.current=!0}}function Lm(e,t=globalThis==null?void 0:globalThis.document){const a=ln(e),s=g.useRef(!1);return g.useEffect(()=>{const i=l=>{l.target&&!s.current&&zc($m,a,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,a]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Ni(){const e=new CustomEvent(Ds);document.dispatchEvent(e)}function zc(e,t,a,{discrete:s}){const i=a.originalEvent.target,l=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&i.addEventListener(e,t,{once:!0}),s?Rm(i,l):i.dispatchEvent(l)}const cs="focusScope.autoFocusOnMount",ls="focusScope.autoFocusOnUnmount",Si={bubbles:!1,cancelable:!0},Fm=g.forwardRef((e,t)=>{const{loop:a=!1,trapped:s=!1,onMountAutoFocus:i,onUnmountAutoFocus:l,...d}=e,[u,p]=g.useState(null),y=ln(i),x=ln(l),b=g.useRef(null),A=mr(t,E=>p(E)),D=g.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;g.useEffect(()=>{if(s){let E=function(W){if(D.paused||!u)return;const V=W.target;u.contains(V)?b.current=V:Ft(b.current,{select:!0})},$=function(W){if(D.paused||!u)return;const V=W.relatedTarget;V!==null&&(u.contains(V)||Ft(b.current,{select:!0}))},B=function(W){if(document.activeElement===document.body)for(const ae of W)ae.removedNodes.length>0&&Ft(u)};document.addEventListener("focusin",E),document.addEventListener("focusout",$);const z=new MutationObserver(B);return u&&z.observe(u,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",E),document.removeEventListener("focusout",$),z.disconnect()}}},[s,u,D.paused]),g.useEffect(()=>{if(u){Ei.add(D);const E=document.activeElement;if(!u.contains(E)){const B=new CustomEvent(cs,Si);u.addEventListener(cs,y),u.dispatchEvent(B),B.defaultPrevented||(Bm(Wm(Uc(u)),{select:!0}),document.activeElement===E&&Ft(u))}return()=>{u.removeEventListener(cs,y),setTimeout(()=>{const B=new CustomEvent(ls,Si);u.addEventListener(ls,x),u.dispatchEvent(B),B.defaultPrevented||Ft(E??document.body,{select:!0}),u.removeEventListener(ls,x),Ei.remove(D)},0)}}},[u,y,x,D]);const k=g.useCallback(E=>{if(!a&&!s||D.paused)return;const $=E.key==="Tab"&&!E.altKey&&!E.ctrlKey&&!E.metaKey,B=document.activeElement;if($&&B){const z=E.currentTarget,[W,V]=Km(z);W&&V?!E.shiftKey&&B===V?(E.preventDefault(),a&&Ft(W,{select:!0})):E.shiftKey&&B===W&&(E.preventDefault(),a&&Ft(V,{select:!0})):B===z&&E.preventDefault()}},[a,s,D.paused]);return g.createElement(ht.div,it({tabIndex:-1},d,{ref:A,onKeyDown:k}))});function Bm(e,{select:t=!1}={}){const a=document.activeElement;for(const s of e)if(Ft(s,{select:t}),document.activeElement!==a)return}function Km(e){const t=Uc(e),a=_i(t,e),s=_i(t.reverse(),e);return[a,s]}function Uc(e){const t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const i=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||i?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function _i(e,t){for(const a of e)if(!qm(a,{upTo:t}))return a}function qm(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function zm(e){return e instanceof HTMLInputElement&&"select"in e}function Ft(e,{select:t=!1}={}){if(e&&e.focus){const a=document.activeElement;e.focus({preventScroll:!0}),e!==a&&zm(e)&&t&&e.select()}}const Ei=Um();function Um(){let e=[];return{add(t){const a=e[0];t!==a&&(a==null||a.pause()),e=Ci(e,t),e.unshift(t)},remove(t){var a;e=Ci(e,t),(a=e[0])===null||a===void 0||a.resume()}}}function Ci(e,t){const a=[...e],s=a.indexOf(t);return s!==-1&&a.splice(s,1),a}function Wm(e){return e.filter(t=>t.tagName!=="A")}const Vm=g.forwardRef((e,t)=>{var a;const{container:s=globalThis==null||(a=globalThis.document)===null||a===void 0?void 0:a.body,...i}=e;return s?ou.createPortal(g.createElement(ht.div,it({},i,{ref:t})),s):null});function Hm(e,t){return g.useReducer((a,s)=>{const i=t[a][s];return i??a},e)}const ma=e=>{const{present:t,children:a}=e,s=Gm(t),i=typeof a=="function"?a({present:s.isPresent}):g.Children.only(a),l=mr(s.ref,i.ref);return typeof a=="function"||s.isPresent?g.cloneElement(i,{ref:l}):null};ma.displayName="Presence";function Gm(e){const[t,a]=g.useState(),s=g.useRef({}),i=g.useRef(e),l=g.useRef("none"),d=e?"mounted":"unmounted",[u,p]=Hm(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return g.useEffect(()=>{const y=Ur(s.current);l.current=u==="mounted"?y:"none"},[u]),Ts(()=>{const y=s.current,x=i.current;if(x!==e){const A=l.current,D=Ur(y);e?p("MOUNT"):D==="none"||(y==null?void 0:y.display)==="none"?p("UNMOUNT"):p(x&&A!==D?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,p]),Ts(()=>{if(t){const y=b=>{const D=Ur(s.current).includes(b.animationName);b.target===t&&D&&Pt.flushSync(()=>p("ANIMATION_END"))},x=b=>{b.target===t&&(l.current=Ur(s.current))};return t.addEventListener("animationstart",x),t.addEventListener("animationcancel",y),t.addEventListener("animationend",y),()=>{t.removeEventListener("animationstart",x),t.removeEventListener("animationcancel",y),t.removeEventListener("animationend",y)}}else p("ANIMATION_END")},[t,p]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:g.useCallback(y=>{y&&(s.current=getComputedStyle(y)),a(y)},[])}}function Ur(e){return(e==null?void 0:e.animationName)||"none"}let us=0;function Ym(){g.useEffect(()=>{var e,t;const a=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(e=a[0])!==null&&e!==void 0?e:Pi()),document.body.insertAdjacentElement("beforeend",(t=a[1])!==null&&t!==void 0?t:Pi()),us++,()=>{us===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),us--}},[])}function Pi(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var wt=function(){return wt=Object.assign||function(t){for(var a,s=1,i=arguments.length;s<i;s++){a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(t[l]=a[l])}return t},wt.apply(this,arguments)};function Wc(e,t){var a={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(a[s[i]]=e[s[i]]);return a}function Jm(e,t,a){if(a||arguments.length===2)for(var s=0,i=t.length,l;s<i;s++)(l||!(s in t))&&(l||(l=Array.prototype.slice.call(t,0,s)),l[s]=t[s]);return e.concat(l||Array.prototype.slice.call(t))}var ta="right-scroll-bar-position",na="width-before-scroll-bar",Qm="with-scroll-bars-hidden",Xm="--removed-body-scroll-bar-size";function ds(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Zm(e,t){var a=g.useState(function(){return{value:e,callback:t,facade:{get current(){return a.value},set current(s){var i=a.value;i!==s&&(a.value=s,a.callback(s,i))}}}})[0];return a.callback=t,a.facade}var ep=typeof window<"u"?g.useLayoutEffect:g.useEffect,Ai=new WeakMap;function tp(e,t){var a=Zm(null,function(s){return e.forEach(function(i){return ds(i,s)})});return ep(function(){var s=Ai.get(a);if(s){var i=new Set(s),l=new Set(e),d=a.current;i.forEach(function(u){l.has(u)||ds(u,null)}),l.forEach(function(u){i.has(u)||ds(u,d)})}Ai.set(a,e)},[e]),a}function np(e){return e}function rp(e,t){t===void 0&&(t=np);var a=[],s=!1,i={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:e},useMedium:function(l){var d=t(l,s);return a.push(d),function(){a=a.filter(function(u){return u!==d})}},assignSyncMedium:function(l){for(s=!0;a.length;){var d=a;a=[],d.forEach(l)}a={push:function(u){return l(u)},filter:function(){return a}}},assignMedium:function(l){s=!0;var d=[];if(a.length){var u=a;a=[],u.forEach(l),d=a}var p=function(){var x=d;d=[],x.forEach(l)},y=function(){return Promise.resolve().then(p)};y(),a={push:function(x){d.push(x),y()},filter:function(x){return d=d.filter(x),a}}}};return i}function ap(e){e===void 0&&(e={});var t=rp(null);return t.options=wt({async:!0,ssr:!1},e),t}var Vc=function(e){var t=e.sideCar,a=Wc(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=t.read();if(!s)throw new Error("Sidecar medium not found");return g.createElement(s,wt({},a))};Vc.isSideCarExport=!0;function sp(e,t){return e.useMedium(t),Vc}var Hc=ap(),fs=function(){},pa=g.forwardRef(function(e,t){var a=g.useRef(null),s=g.useState({onScrollCapture:fs,onWheelCapture:fs,onTouchMoveCapture:fs}),i=s[0],l=s[1],d=e.forwardProps,u=e.children,p=e.className,y=e.removeScrollBar,x=e.enabled,b=e.shards,A=e.sideCar,D=e.noIsolation,k=e.inert,E=e.allowPinchZoom,$=e.as,B=$===void 0?"div":$,z=Wc(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),W=A,V=tp([a,t]),ae=wt(wt({},z),i);return g.createElement(g.Fragment,null,x&&g.createElement(W,{sideCar:Hc,removeScrollBar:y,shards:b,noIsolation:D,inert:k,setCallbacks:l,allowPinchZoom:!!E,lockRef:a}),d?g.cloneElement(g.Children.only(u),wt(wt({},ae),{ref:V})):g.createElement(B,wt({},ae,{className:p,ref:V}),u))});pa.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};pa.classNames={fullWidth:na,zeroRight:ta};var op=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function ip(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=op();return t&&e.setAttribute("nonce",t),e}function cp(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lp(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var up=function(){var e=0,t=null;return{add:function(a){e==0&&(t=ip())&&(cp(t,a),lp(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},dp=function(){var e=up();return function(t,a){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},Gc=function(){var e=dp(),t=function(a){var s=a.styles,i=a.dynamic;return e(s,i),null};return t},fp={left:0,top:0,right:0,gap:0},hs=function(e){return parseInt(e||"",10)||0},hp=function(e){var t=window.getComputedStyle(document.body),a=t[e==="padding"?"paddingLeft":"marginLeft"],s=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[hs(a),hs(s),hs(i)]},mp=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return fp;var t=hp(e),a=document.documentElement.clientWidth,s=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,s-a+t[2]-t[0])}},pp=Gc(),An="data-scroll-locked",gp=function(e,t,a,s){var i=e.left,l=e.top,d=e.right,u=e.gap;return a===void 0&&(a="margin"),`
  .`.concat(Qm,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(u,"px ").concat(s,`;
  }
  body[`).concat(An,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(s,";"),a==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(u,"px ").concat(s,`;
    `),a==="padding"&&"padding-right: ".concat(u,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(ta,` {
    right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(na,` {
    margin-right: `).concat(u,"px ").concat(s,`;
  }
  
  .`).concat(ta," .").concat(ta,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(na," .").concat(na,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(An,`] {
    `).concat(Xm,": ").concat(u,`px;
  }
`)},Ri=function(){var e=parseInt(document.body.getAttribute(An)||"0",10);return isFinite(e)?e:0},yp=function(){g.useEffect(function(){return document.body.setAttribute(An,(Ri()+1).toString()),function(){var e=Ri()-1;e<=0?document.body.removeAttribute(An):document.body.setAttribute(An,e.toString())}},[])},xp=function(e){var t=e.noRelative,a=e.noImportant,s=e.gapMode,i=s===void 0?"margin":s;yp();var l=g.useMemo(function(){return mp(i)},[i]);return g.createElement(pp,{styles:gp(l,!t,i,a?"":"!important")})},Ms=!1;if(typeof window<"u")try{var Wr=Object.defineProperty({},"passive",{get:function(){return Ms=!0,!0}});window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{Ms=!1}var jn=Ms?{passive:!1}:!1,bp=function(e){return e.tagName==="TEXTAREA"},Yc=function(e,t){var a=window.getComputedStyle(e);return a[t]!=="hidden"&&!(a.overflowY===a.overflowX&&!bp(e)&&a[t]==="visible")},vp=function(e){return Yc(e,"overflowY")},wp=function(e){return Yc(e,"overflowX")},Oi=function(e,t){var a=t;do{typeof ShadowRoot<"u"&&a instanceof ShadowRoot&&(a=a.host);var s=Jc(e,a);if(s){var i=Qc(e,a),l=i[1],d=i[2];if(l>d)return!0}a=a.parentNode}while(a&&a!==document.body);return!1},jp=function(e){var t=e.scrollTop,a=e.scrollHeight,s=e.clientHeight;return[t,a,s]},kp=function(e){var t=e.scrollLeft,a=e.scrollWidth,s=e.clientWidth;return[t,a,s]},Jc=function(e,t){return e==="v"?vp(t):wp(t)},Qc=function(e,t){return e==="v"?jp(t):kp(t)},Np=function(e,t){return e==="h"&&t==="rtl"?-1:1},Sp=function(e,t,a,s,i){var l=Np(e,window.getComputedStyle(t).direction),d=l*s,u=a.target,p=t.contains(u),y=!1,x=d>0,b=0,A=0;do{var D=Qc(e,u),k=D[0],E=D[1],$=D[2],B=E-$-l*k;(k||B)&&Jc(e,u)&&(b+=B,A+=k),u=u.parentNode}while(!p&&u!==document.body||p&&(t.contains(u)||t===u));return(x&&b===0||!x&&A===0)&&(y=!0),y},Vr=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ti=function(e){return[e.deltaX,e.deltaY]},$i=function(e){return e&&"current"in e?e.current:e},_p=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Ep=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Cp=0,kn=[];function Pp(e){var t=g.useRef([]),a=g.useRef([0,0]),s=g.useRef(),i=g.useState(Cp++)[0],l=g.useState(function(){return Gc()})[0],d=g.useRef(e);g.useEffect(function(){d.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var E=Jm([e.lockRef.current],(e.shards||[]).map($i),!0).filter(Boolean);return E.forEach(function($){return $.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),E.forEach(function($){return $.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var u=g.useCallback(function(E,$){if("touches"in E&&E.touches.length===2)return!d.current.allowPinchZoom;var B=Vr(E),z=a.current,W="deltaX"in E?E.deltaX:z[0]-B[0],V="deltaY"in E?E.deltaY:z[1]-B[1],ae,J=E.target,X=Math.abs(W)>Math.abs(V)?"h":"v";if("touches"in E&&X==="h"&&J.type==="range")return!1;var ce=Oi(X,J);if(!ce)return!0;if(ce?ae=X:(ae=X==="v"?"h":"v",ce=Oi(X,J)),!ce)return!1;if(!s.current&&"changedTouches"in E&&(W||V)&&(s.current=ae),!ae)return!0;var _e=s.current||ae;return Sp(_e,$,E,_e==="h"?W:V)},[]),p=g.useCallback(function(E){var $=E;if(!(!kn.length||kn[kn.length-1]!==l)){var B="deltaY"in $?Ti($):Vr($),z=t.current.filter(function(ae){return ae.name===$.type&&ae.target===$.target&&_p(ae.delta,B)})[0];if(z&&z.should){$.cancelable&&$.preventDefault();return}if(!z){var W=(d.current.shards||[]).map($i).filter(Boolean).filter(function(ae){return ae.contains($.target)}),V=W.length>0?u($,W[0]):!d.current.noIsolation;V&&$.cancelable&&$.preventDefault()}}},[]),y=g.useCallback(function(E,$,B,z){var W={name:E,delta:$,target:B,should:z};t.current.push(W),setTimeout(function(){t.current=t.current.filter(function(V){return V!==W})},1)},[]),x=g.useCallback(function(E){a.current=Vr(E),s.current=void 0},[]),b=g.useCallback(function(E){y(E.type,Ti(E),E.target,u(E,e.lockRef.current))},[]),A=g.useCallback(function(E){y(E.type,Vr(E),E.target,u(E,e.lockRef.current))},[]);g.useEffect(function(){return kn.push(l),e.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:A}),document.addEventListener("wheel",p,jn),document.addEventListener("touchmove",p,jn),document.addEventListener("touchstart",x,jn),function(){kn=kn.filter(function(E){return E!==l}),document.removeEventListener("wheel",p,jn),document.removeEventListener("touchmove",p,jn),document.removeEventListener("touchstart",x,jn)}},[]);var D=e.removeScrollBar,k=e.inert;return g.createElement(g.Fragment,null,k?g.createElement(l,{styles:Ep(i)}):null,D?g.createElement(xp,{gapMode:"margin"}):null)}const Ap=sp(Hc,Pp);var Xc=g.forwardRef(function(e,t){return g.createElement(pa,wt({},e,{ref:t,sideCar:Ap}))});Xc.classNames=pa.classNames;var Rp=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Nn=new WeakMap,Hr=new WeakMap,Gr={},ms=0,Zc=function(e){return e&&(e.host||Zc(e.parentNode))},Op=function(e,t){return t.map(function(a){if(e.contains(a))return a;var s=Zc(a);return s&&e.contains(s)?s:(console.error("aria-hidden",a,"in not contained inside",e,". Doing nothing"),null)}).filter(function(a){return!!a})},Tp=function(e,t,a,s){var i=Op(t,Array.isArray(e)?e:[e]);Gr[a]||(Gr[a]=new WeakMap);var l=Gr[a],d=[],u=new Set,p=new Set(i),y=function(b){!b||u.has(b)||(u.add(b),y(b.parentNode))};i.forEach(y);var x=function(b){!b||p.has(b)||Array.prototype.forEach.call(b.children,function(A){if(u.has(A))x(A);else try{var D=A.getAttribute(s),k=D!==null&&D!=="false",E=(Nn.get(A)||0)+1,$=(l.get(A)||0)+1;Nn.set(A,E),l.set(A,$),d.push(A),E===1&&k&&Hr.set(A,!0),$===1&&A.setAttribute(a,"true"),k||A.setAttribute(s,"true")}catch(B){console.error("aria-hidden: cannot operate on ",A,B)}})};return x(t),u.clear(),ms++,function(){d.forEach(function(b){var A=Nn.get(b)-1,D=l.get(b)-1;Nn.set(b,A),l.set(b,D),A||(Hr.has(b)||b.removeAttribute(s),Hr.delete(b)),D||b.removeAttribute(a)}),ms--,ms||(Nn=new WeakMap,Nn=new WeakMap,Hr=new WeakMap,Gr={})}},$p=function(e,t,a){a===void 0&&(a="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),i=Rp(e);return i?(s.push.apply(s,Array.from(i.querySelectorAll("[aria-live], script"))),Tp(s,i,a,"aria-hidden")):function(){return null}};const el="Dialog",[tl]=wm(el),[Dp,fn]=tl(el),Mp=e=>{const{__scopeDialog:t,children:a,open:s,defaultOpen:i,onOpenChange:l,modal:d=!0}=e,u=g.useRef(null),p=g.useRef(null),[y=!1,x]=Sm({prop:s,defaultProp:i,onChange:l});return g.createElement(Dp,{scope:t,triggerRef:u,contentRef:p,contentId:is(),titleId:is(),descriptionId:is(),open:y,onOpenChange:x,onOpenToggle:g.useCallback(()=>x(b=>!b),[x]),modal:d},a)},nl="DialogPortal",[Ip,rl]=tl(nl,{forceMount:void 0}),Lp=e=>{const{__scopeDialog:t,forceMount:a,children:s,container:i}=e,l=fn(nl,t);return g.createElement(Ip,{scope:t,forceMount:a},g.Children.map(s,d=>g.createElement(ma,{present:a||l.open},g.createElement(Vm,{asChild:!0,container:i},d))))},Is="DialogOverlay",Fp=g.forwardRef((e,t)=>{const a=rl(Is,e.__scopeDialog),{forceMount:s=a.forceMount,...i}=e,l=fn(Is,e.__scopeDialog);return l.modal?g.createElement(ma,{present:s||l.open},g.createElement(Bp,it({},i,{ref:t}))):null}),Bp=g.forwardRef((e,t)=>{const{__scopeDialog:a,...s}=e,i=fn(Is,a);return g.createElement(Xc,{as:Gs,allowPinchZoom:!0,shards:[i.contentRef]},g.createElement(ht.div,it({"data-state":sl(i.open)},s,{ref:t,style:{pointerEvents:"auto",...s.style}})))}),On="DialogContent",Kp=g.forwardRef((e,t)=>{const a=rl(On,e.__scopeDialog),{forceMount:s=a.forceMount,...i}=e,l=fn(On,e.__scopeDialog);return g.createElement(ma,{present:s||l.open},l.modal?g.createElement(qp,it({},i,{ref:t})):g.createElement(zp,it({},i,{ref:t})))}),qp=g.forwardRef((e,t)=>{const a=fn(On,e.__scopeDialog),s=g.useRef(null),i=mr(t,a.contentRef,s);return g.useEffect(()=>{const l=s.current;if(l)return $p(l)},[]),g.createElement(al,it({},e,{ref:i,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Pn(e.onCloseAutoFocus,l=>{var d;l.preventDefault(),(d=a.triggerRef.current)===null||d===void 0||d.focus()}),onPointerDownOutside:Pn(e.onPointerDownOutside,l=>{const d=l.detail.originalEvent,u=d.button===0&&d.ctrlKey===!0;(d.button===2||u)&&l.preventDefault()}),onFocusOutside:Pn(e.onFocusOutside,l=>l.preventDefault())}))}),zp=g.forwardRef((e,t)=>{const a=fn(On,e.__scopeDialog),s=g.useRef(!1),i=g.useRef(!1);return g.createElement(al,it({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var d;if((d=e.onCloseAutoFocus)===null||d===void 0||d.call(e,l),!l.defaultPrevented){var u;s.current||(u=a.triggerRef.current)===null||u===void 0||u.focus(),l.preventDefault()}s.current=!1,i.current=!1},onInteractOutside:l=>{var d,u;(d=e.onInteractOutside)===null||d===void 0||d.call(e,l),l.defaultPrevented||(s.current=!0,l.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const p=l.target;((u=a.triggerRef.current)===null||u===void 0?void 0:u.contains(p))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&i.current&&l.preventDefault()}}))}),al=g.forwardRef((e,t)=>{const{__scopeDialog:a,trapFocus:s,onOpenAutoFocus:i,onCloseAutoFocus:l,...d}=e,u=fn(On,a),p=g.useRef(null),y=mr(t,p);return Ym(),g.createElement(g.Fragment,null,g.createElement(Fm,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:i,onUnmountAutoFocus:l},g.createElement(Mm,it({role:"dialog",id:u.contentId,"aria-describedby":u.descriptionId,"aria-labelledby":u.titleId,"data-state":sl(u.open)},d,{ref:y,onDismiss:()=>u.onOpenChange(!1)}))),!1)}),Up="DialogTitle";function sl(e){return e?"open":"closed"}const Wp="DialogTitleWarning";vm(Wp,{contentName:On,titleName:Up,docsSlug:"dialog"});const Vp=Mp,Hp=Lp,Gp=Fp,Yp=Kp;var ar='[cmdk-group=""]',ps='[cmdk-group-items=""]',Jp='[cmdk-group-heading=""]',Ys='[cmdk-item=""]',Di=`${Ys}:not([aria-disabled="true"])`,Ls="cmdk-item-select",tn="data-value",Qp=(e,t,a)=>xm(e,t,a),ol=g.createContext(void 0),pr=()=>g.useContext(ol),il=g.createContext(void 0),Js=()=>g.useContext(il),cl=g.createContext(void 0),ll=g.forwardRef((e,t)=>{let a=En(()=>{var q,de;return{search:"",value:(de=(q=e.value)!=null?q:e.defaultValue)!=null?de:"",filtered:{count:0,items:new Map,groups:new Set}}}),s=En(()=>new Set),i=En(()=>new Map),l=En(()=>new Map),d=En(()=>new Set),u=ul(e),{label:p,children:y,value:x,onValueChange:b,filter:A,shouldFilter:D,loop:k,disablePointerSelection:E=!1,vimBindings:$=!0,...B}=e,z=g.useId(),W=g.useId(),V=g.useId(),ae=g.useRef(null),J=cg();un(()=>{if(x!==void 0){let q=x.trim();a.current.value=q,X.emit()}},[x]),un(()=>{J(6,Ne)},[]);let X=g.useMemo(()=>({subscribe:q=>(d.current.add(q),()=>d.current.delete(q)),snapshot:()=>a.current,setState:(q,de,he)=>{var le,G,De;if(!Object.is(a.current[q],de)){if(a.current[q]=de,q==="search")fe(),Te(),J(1,ie);else if(q==="value"&&(he||J(5,Ne),((le=u.current)==null?void 0:le.value)!==void 0)){let tt=de??"";(De=(G=u.current).onValueChange)==null||De.call(G,tt);return}X.emit()}},emit:()=>{d.current.forEach(q=>q())}}),[]),ce=g.useMemo(()=>({value:(q,de,he)=>{var le;de!==((le=l.current.get(q))==null?void 0:le.value)&&(l.current.set(q,{value:de,keywords:he}),a.current.filtered.items.set(q,_e(de,he)),J(2,()=>{Te(),X.emit()}))},item:(q,de)=>(s.current.add(q),de&&(i.current.has(de)?i.current.get(de).add(q):i.current.set(de,new Set([q]))),J(3,()=>{fe(),Te(),a.current.value||ie(),X.emit()}),()=>{l.current.delete(q),s.current.delete(q),a.current.filtered.items.delete(q);let he=$e();J(4,()=>{fe(),(he==null?void 0:he.getAttribute("id"))===q&&ie(),X.emit()})}),group:q=>(i.current.has(q)||i.current.set(q,new Set),()=>{l.current.delete(q),i.current.delete(q)}),filter:()=>u.current.shouldFilter,label:p||e["aria-label"],disablePointerSelection:E,listId:z,inputId:V,labelId:W,listInnerRef:ae}),[]);function _e(q,de){var he,le;let G=(le=(he=u.current)==null?void 0:he.filter)!=null?le:Qp;return q?G(q,a.current.search,de):0}function Te(){if(!a.current.search||u.current.shouldFilter===!1)return;let q=a.current.filtered.items,de=[];a.current.filtered.groups.forEach(le=>{let G=i.current.get(le),De=0;G.forEach(tt=>{let oe=q.get(tt);De=Math.max(oe,De)}),de.push([le,De])});let he=ae.current;Ue().sort((le,G)=>{var De,tt;let oe=le.getAttribute("id"),Kt=G.getAttribute("id");return((De=q.get(Kt))!=null?De:0)-((tt=q.get(oe))!=null?tt:0)}).forEach(le=>{let G=le.closest(ps);G?G.appendChild(le.parentElement===G?le:le.closest(`${ps} > *`)):he.appendChild(le.parentElement===he?le:le.closest(`${ps} > *`))}),de.sort((le,G)=>G[1]-le[1]).forEach(le=>{let G=ae.current.querySelector(`${ar}[${tn}="${encodeURIComponent(le[0])}"]`);G==null||G.parentElement.appendChild(G)})}function ie(){let q=Ue().find(he=>he.getAttribute("aria-disabled")!=="true"),de=q==null?void 0:q.getAttribute(tn);X.setState("value",de||void 0)}function fe(){var q,de,he,le;if(!a.current.search||u.current.shouldFilter===!1){a.current.filtered.count=s.current.size;return}a.current.filtered.groups=new Set;let G=0;for(let De of s.current){let tt=(de=(q=l.current.get(De))==null?void 0:q.value)!=null?de:"",oe=(le=(he=l.current.get(De))==null?void 0:he.keywords)!=null?le:[],Kt=_e(tt,oe);a.current.filtered.items.set(De,Kt),Kt>0&&G++}for(let[De,tt]of i.current)for(let oe of tt)if(a.current.filtered.items.get(oe)>0){a.current.filtered.groups.add(De);break}a.current.filtered.count=G}function Ne(){var q,de,he;let le=$e();le&&(((q=le.parentElement)==null?void 0:q.firstChild)===le&&((he=(de=le.closest(ar))==null?void 0:de.querySelector(Jp))==null||he.scrollIntoView({block:"nearest"})),le.scrollIntoView({block:"nearest"}))}function $e(){var q;return(q=ae.current)==null?void 0:q.querySelector(`${Ys}[aria-selected="true"]`)}function Ue(){var q;return Array.from((q=ae.current)==null?void 0:q.querySelectorAll(Di))}function Pe(q){let de=Ue()[q];de&&X.setState("value",de.getAttribute(tn))}function Qe(q){var de;let he=$e(),le=Ue(),G=le.findIndex(tt=>tt===he),De=le[G+q];(de=u.current)!=null&&de.loop&&(De=G+q<0?le[le.length-1]:G+q===le.length?le[0]:le[G+q]),De&&X.setState("value",De.getAttribute(tn))}function Ae(q){let de=$e(),he=de==null?void 0:de.closest(ar),le;for(;he&&!le;)he=q>0?og(he,ar):ig(he,ar),le=he==null?void 0:he.querySelector(Di);le?X.setState("value",le.getAttribute(tn)):Qe(q)}let Be=()=>Pe(Ue().length-1),Ke=q=>{q.preventDefault(),q.metaKey?Be():q.altKey?Ae(1):Qe(1)},Ee=q=>{q.preventDefault(),q.metaKey?Pe(0):q.altKey?Ae(-1):Qe(-1)};return g.createElement(ht.div,{ref:t,tabIndex:-1,...B,"cmdk-root":"",onKeyDown:q=>{var de;if((de=B.onKeyDown)==null||de.call(B,q),!q.defaultPrevented)switch(q.key){case"n":case"j":{$&&q.ctrlKey&&Ke(q);break}case"ArrowDown":{Ke(q);break}case"p":case"k":{$&&q.ctrlKey&&Ee(q);break}case"ArrowUp":{Ee(q);break}case"Home":{q.preventDefault(),Pe(0);break}case"End":{q.preventDefault(),Be();break}case"Enter":if(!q.nativeEvent.isComposing&&q.keyCode!==229){q.preventDefault();let he=$e();if(he){let le=new Event(Ls);he.dispatchEvent(le)}}}}},g.createElement("label",{"cmdk-label":"",htmlFor:ce.inputId,id:ce.labelId,style:ug},p),ga(e,q=>g.createElement(il.Provider,{value:X},g.createElement(ol.Provider,{value:ce},q))))}),Xp=g.forwardRef((e,t)=>{var a,s;let i=g.useId(),l=g.useRef(null),d=g.useContext(cl),u=pr(),p=ul(e),y=(s=(a=p.current)==null?void 0:a.forceMount)!=null?s:d==null?void 0:d.forceMount;un(()=>{if(!y)return u.item(i,d==null?void 0:d.id)},[y]);let x=dl(i,l,[e.value,e.children,l],e.keywords),b=Js(),A=dn(J=>J.value&&J.value===x.current),D=dn(J=>y||u.filter()===!1?!0:J.search?J.filtered.items.get(i)>0:!0);g.useEffect(()=>{let J=l.current;if(!(!J||e.disabled))return J.addEventListener(Ls,k),()=>J.removeEventListener(Ls,k)},[D,e.onSelect,e.disabled]);function k(){var J,X;E(),(X=(J=p.current).onSelect)==null||X.call(J,x.current)}function E(){b.setState("value",x.current,!0)}if(!D)return null;let{disabled:$,value:B,onSelect:z,forceMount:W,keywords:V,...ae}=e;return g.createElement(ht.div,{ref:sr([l,t]),...ae,id:i,"cmdk-item":"",role:"option","aria-disabled":!!$,"aria-selected":!!A,"data-disabled":!!$,"data-selected":!!A,onPointerMove:$||u.disablePointerSelection?void 0:E,onClick:$?void 0:k},e.children)}),Zp=g.forwardRef((e,t)=>{let{heading:a,children:s,forceMount:i,...l}=e,d=g.useId(),u=g.useRef(null),p=g.useRef(null),y=g.useId(),x=pr(),b=dn(D=>i||x.filter()===!1?!0:D.search?D.filtered.groups.has(d):!0);un(()=>x.group(d),[]),dl(d,u,[e.value,e.heading,p]);let A=g.useMemo(()=>({id:d,forceMount:i}),[i]);return g.createElement(ht.div,{ref:sr([u,t]),...l,"cmdk-group":"",role:"presentation",hidden:b?void 0:!0},a&&g.createElement("div",{ref:p,"cmdk-group-heading":"","aria-hidden":!0,id:y},a),ga(e,D=>g.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?y:void 0},g.createElement(cl.Provider,{value:A},D))))}),eg=g.forwardRef((e,t)=>{let{alwaysRender:a,...s}=e,i=g.useRef(null),l=dn(d=>!d.search);return!a&&!l?null:g.createElement(ht.div,{ref:sr([i,t]),...s,"cmdk-separator":"",role:"separator"})}),tg=g.forwardRef((e,t)=>{let{onValueChange:a,...s}=e,i=e.value!=null,l=Js(),d=dn(x=>x.search),u=dn(x=>x.value),p=pr(),y=g.useMemo(()=>{var x;let b=(x=p.listInnerRef.current)==null?void 0:x.querySelector(`${Ys}[${tn}="${encodeURIComponent(u)}"]`);return b==null?void 0:b.getAttribute("id")},[]);return g.useEffect(()=>{e.value!=null&&l.setState("search",e.value)},[e.value]),g.createElement(ht.input,{ref:t,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":p.listId,"aria-labelledby":p.labelId,"aria-activedescendant":y,id:p.inputId,type:"text",value:i?e.value:d,onChange:x=>{i||l.setState("search",x.target.value),a==null||a(x.target.value)}})}),ng=g.forwardRef((e,t)=>{let{children:a,label:s="Suggestions",...i}=e,l=g.useRef(null),d=g.useRef(null),u=pr();return g.useEffect(()=>{if(d.current&&l.current){let p=d.current,y=l.current,x,b=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let A=p.offsetHeight;y.style.setProperty("--cmdk-list-height",A.toFixed(1)+"px")})});return b.observe(p),()=>{cancelAnimationFrame(x),b.unobserve(p)}}},[]),g.createElement(ht.div,{ref:sr([l,t]),...i,"cmdk-list":"",role:"listbox","aria-label":s,id:u.listId},ga(e,p=>g.createElement("div",{ref:sr([d,u.listInnerRef]),"cmdk-list-sizer":""},p)))}),rg=g.forwardRef((e,t)=>{let{open:a,onOpenChange:s,overlayClassName:i,contentClassName:l,container:d,...u}=e;return g.createElement(Vp,{open:a,onOpenChange:s},g.createElement(Hp,{container:d},g.createElement(Gp,{"cmdk-overlay":"",className:i}),g.createElement(Yp,{"aria-label":e.label,"cmdk-dialog":"",className:l},g.createElement(ll,{ref:t,...u}))))}),ag=g.forwardRef((e,t)=>dn(a=>a.filtered.count===0)?g.createElement(ht.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),sg=g.forwardRef((e,t)=>{let{progress:a,children:s,label:i="Loading...",...l}=e;return g.createElement(ht.div,{ref:t,...l,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},ga(e,d=>g.createElement("div",{"aria-hidden":!0},d)))}),vt=Object.assign(ll,{List:ng,Item:Xp,Input:tg,Group:Zp,Separator:eg,Dialog:rg,Empty:ag,Loading:sg});function og(e,t){let a=e.nextElementSibling;for(;a;){if(a.matches(t))return a;a=a.nextElementSibling}}function ig(e,t){let a=e.previousElementSibling;for(;a;){if(a.matches(t))return a;a=a.previousElementSibling}}function ul(e){let t=g.useRef(e);return un(()=>{t.current=e}),t}var un=typeof window>"u"?g.useEffect:g.useLayoutEffect;function En(e){let t=g.useRef();return t.current===void 0&&(t.current=e()),t}function sr(e){return t=>{e.forEach(a=>{typeof a=="function"?a(t):a!=null&&(a.current=t)})}}function dn(e){let t=Js(),a=()=>e(t.snapshot());return g.useSyncExternalStore(t.subscribe,a,a)}function dl(e,t,a,s=[]){let i=g.useRef(),l=pr();return un(()=>{var d;let u=(()=>{var y;for(let x of a){if(typeof x=="string")return x.trim();if(typeof x=="object"&&"current"in x)return x.current?(y=x.current.textContent)==null?void 0:y.trim():i.current}})(),p=s.map(y=>y.trim());l.value(e,u,p),(d=t.current)==null||d.setAttribute(tn,u),i.current=u}),i}var cg=()=>{let[e,t]=g.useState(),a=En(()=>new Map);return un(()=>{a.current.forEach(s=>s()),a.current=new Map},[e]),(s,i)=>{a.current.set(s,i),t({})}};function lg(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function ga({asChild:e,children:t},a){return e&&g.isValidElement(t)?g.cloneElement(lg(t),{ref:t.ref},a(t.props.children)):a(t)}var ug={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Qs(e){return{id:e.id,date:e.date,description:e.description,amount:e.amount,currency:e.currency||"JPY",category:e.category,source:e.source,type:e.is_income?"income":"expense",created_at:e.date,account_id:e.account_id,is_transfer:e.is_transfer,receipt_url:e.receipt_url}}async function fl(e){var s;const t=new URLSearchParams;return e!=null&&e.start_date&&t.append("start_date",e.start_date),e!=null&&e.end_date&&t.append("end_date",e.end_date),(s=e==null?void 0:e.categories)!=null&&s.length&&t.append("categories",e.categories.join(",")),e!=null&&e.source&&t.append("source",e.source),e!=null&&e.type&&e.type!=="all"&&t.append("is_income",e.type==="income"?"true":"false"),e!=null&&e.search&&t.append("search",e.search),(e==null?void 0:e.min_amount)!==void 0&&t.append("min_amount",e.min_amount.toString()),(e==null?void 0:e.max_amount)!==void 0&&t.append("max_amount",e.max_amount.toString()),t.append("limit","5000"),(await re.get(`/api/transactions/?${t.toString()}`)).data.transactions.map(Qs)}function hl(e){const{type:t,...a}=e;return{...a,is_income:t==="income"}}async function vx(e){const t=hl(e),a=await re.post("/api/transactions/",t);return Qs(a.data)}async function wx(e,t){const a=hl(t),s=await re.put(`/api/transactions/${e}`,a);return Qs(s.data)}async function jx(e){await re.delete(`/api/transactions/${e}`)}async function kx(e){const t=new URLSearchParams;return e.forEach(s=>t.append("transaction_ids",s.toString())),(await re.delete(`/api/transactions/bulk/delete?${t.toString()}`)).data}async function Nx(e,t){const a=new URLSearchParams;return e.forEach(i=>a.append("transaction_ids",i.toString())),a.append("category",t),(await re.patch(`/api/transactions/bulk/category?${a.toString()}`)).data}async function Sx(e,t=5){return!e||e.length<2?[]:(await re.get(`/api/transactions/suggestions?q=${encodeURIComponent(e)}&limit=${t}`)).data}const hn={JPY:1,USD:.00667,VND:160},Xs={JPY:0,VND:0,KRW:0,USD:2,EUR:2};function _x(e,t){const a=Xs[t]??0;return Math.round(e*Math.pow(10,a))}function ml(e,t,a){const s=a[t]??hn[t]??1;return e*s}function mt(e,t="JPY",a=hn,s=!1){const i=s?e:ml(e,t,a),l=Xs[t]??0,d=Math.pow(10,l),p={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP";return new Intl.NumberFormat(p,{style:"currency",currency:t,minimumFractionDigits:l,maximumFractionDigits:l}).format(i/d)}function dg(e,t,a="JPY",s=hn,i=!1){const l=mt(Math.abs(e),a,s,i);return t==="income"||e>0?`+${l}`:t==="expense"||e<0?`-${l}`:l}function fg(e,t="JPY",a=hn,s=!1){const i=s?e:ml(e,t,a),l=Xs[t]??0,d=Math.pow(10,l),p={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP",y=l>0?1:0;return new Intl.NumberFormat(p,{style:"currency",currency:t,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:y}).format(i/d)}function Zs(e="JPY"){return{JPY:"***",USD:"$***",VND:"***"}[e]||"***"}function Et(e,t="JPY",a=hn,s=!1,i=!1){return i?Zs(t):mt(e,t,a,s)}function Ex(e,t,a="JPY",s=hn,i=!1,l=!1){if(l){const d=Zs(a);return t==="income"||e>0?`+${d}`:t==="expense"||e<0?`-${d}`:d}return dg(e,t,a,s,i)}function Mi(e,t="JPY",a=hn,s=!1,i=!1){return i?Zs(t):fg(e,t,a,s)}function hg({open:e,onOpenChange:t,onNewTransaction:a,onUpload:s,onShowShortcuts:i}){const{t:l}=we(),d=jt(),{resolvedTheme:u,toggleTheme:p}=Pc(),[y,x]=g.useState(""),[b,A]=g.useState([]),[D,k]=g.useState(!1);g.useEffect(()=>{if(!e||y.length<2){A([]);return}const z=setTimeout(async()=>{k(!0);try{const W=await fl({search:y});A(W.slice(0,5))}catch(W){console.error("Failed to search transactions:",W),A([])}finally{k(!1)}},300);return()=>clearTimeout(z)},[y,e]),g.useEffect(()=>{e||(x(""),A([]))},[e]);const E=g.useCallback(B=>{if(t(!1),B.startsWith("/")){d({to:B});return}switch(B){case"new-transaction":a==null||a();break;case"upload":s==null||s(),d({to:"/upload"});break;case"toggle-theme":p();break;case"shortcuts":i==null||i();break;case"transaction":d({to:"/transactions"});break}},[d,t,a,s,p,i]),$=r.jsxs(vt.Dialog,{open:e,onOpenChange:t,label:l("commandPalette.label","Command Palette"),className:"fixed inset-0 z-[100001] overflow-hidden",style:{touchAction:"pan-y"},children:[r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),r.jsx("div",{className:"fixed left-1/2 top-1/4 -translate-x-1/2 w-full max-w-lg",children:r.jsxs(vt,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[r.jsxs("div",{className:"flex items-center border-b border-gray-200 dark:border-gray-700 px-4",children:[r.jsx(mu,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-3"}),r.jsx(vt.Input,{value:y,onValueChange:x,placeholder:l("commandPalette.placeholder","Search pages, transactions, actions..."),className:"w-full py-4 bg-transparent outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"}),r.jsx("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"})]}),r.jsxs(vt.List,{className:"max-h-80 overflow-y-auto p-2",children:[r.jsx(vt.Empty,{className:"py-6 text-center text-gray-500 dark:text-gray-400",children:D?l("commandPalette.searching","Searching..."):l("commandPalette.noResults","No results found.")}),b.length>0&&r.jsx(vt.Group,{heading:l("commandPalette.transactions","Transactions"),children:b.map(B=>r.jsxs(vt.Item,{value:`transaction-${B.id}`,onSelect:()=>E("transaction"),className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[r.jsx(vs,{className:"w-4 h-4 text-gray-400"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"truncate text-sm",children:B.description}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[B.date,"  ",B.category]})]}),r.jsxs("span",{className:`text-sm font-medium ${B.type==="income"?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,children:[B.type==="income"?"+":"-",mt(B.amount,B.currency)]})]},B.id))}),r.jsxs(vt.Group,{heading:l("commandPalette.pages","Pages"),children:[r.jsx(ut,{icon:r.jsx(pu,{className:"w-4 h-4"}),label:l("nav.dashboard"),shortcut:"G D",value:"/dashboard",onSelect:E}),r.jsx(ut,{icon:r.jsx(vs,{className:"w-4 h-4"}),label:l("nav.transactions"),shortcut:"G T",value:"/transactions",onSelect:E}),r.jsx(ut,{icon:r.jsx(ia,{className:"w-4 h-4"}),label:l("nav.accounts"),shortcut:"G A",value:"/accounts",onSelect:E}),r.jsx(ut,{icon:r.jsx(Hi,{className:"w-4 h-4"}),label:l("nav.budget"),shortcut:"G B",value:"/budget",onSelect:E}),r.jsx(ut,{icon:r.jsx(qs,{className:"w-4 h-4"}),label:l("nav.analytics"),shortcut:"G N",value:"/analytics",onSelect:E}),r.jsx(ut,{icon:r.jsx(Tn,{className:"w-4 h-4"}),label:l("nav.goals"),shortcut:"G G",value:"/goals",onSelect:E}),r.jsx(ut,{icon:r.jsx(gu,{className:"w-4 h-4"}),label:l("nav.recurring"),value:"/recurring",onSelect:E}),r.jsx(ut,{icon:r.jsx(yu,{className:"w-4 h-4"}),label:l("nav.settings"),shortcut:"G S",value:"/settings",onSelect:E})]}),r.jsxs(vt.Group,{heading:l("commandPalette.actions","Actions"),children:[r.jsx(ut,{icon:r.jsx(xu,{className:"w-4 h-4"}),label:l("commandPalette.newTransaction","New Transaction"),shortcut:"Ctrl+N",value:"new-transaction",onSelect:E}),r.jsx(ut,{icon:r.jsx(ir,{className:"w-4 h-4"}),label:l("commandPalette.uploadCsv","Upload CSV"),shortcut:"Ctrl+U",value:"upload",onSelect:E}),r.jsx(ut,{icon:u==="dark"?r.jsx(Ui,{className:"w-4 h-4"}):r.jsx(Wi,{className:"w-4 h-4"}),label:u==="dark"?l("commandPalette.lightMode","Switch to Light Mode"):l("commandPalette.darkMode","Switch to Dark Mode"),value:"toggle-theme",onSelect:E}),r.jsx(ut,{icon:r.jsx(bu,{className:"w-4 h-4"}),label:l("commandPalette.shortcuts","Keyboard Shortcuts"),shortcut:"?",value:"shortcuts",onSelect:E})]})]}),r.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between text-xs text-gray-400 dark:text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),l("commandPalette.navigate","Navigate")]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),l("commandPalette.select","Select")]})]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"}),l("commandPalette.close","Close")]})]})]})})]});return typeof document>"u"?null:Pt.createPortal($,document.body)}function ut({icon:e,label:t,shortcut:a,value:s,onSelect:i}){return r.jsxs(vt.Item,{value:s,onSelect:i,className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[r.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:e}),r.jsx("span",{className:"flex-1",children:t}),a&&r.jsx("kbd",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:a})]})}function mg({open:e,onClose:t}){const{t:a}=we(),s=typeof navigator<"u"&&/Mac/.test(navigator.userAgent),i=[{title:a("shortcuts.general","General"),shortcuts:[{keys:[s?"":"Ctrl","K"],description:a("shortcuts.commandPalette","Open command palette")},{keys:["Esc"],description:a("shortcuts.closeModal","Close modal/dialog")},{keys:["?"],description:a("shortcuts.showHelp","Show keyboard shortcuts")}]},{title:a("shortcuts.actions","Actions"),shortcuts:[{keys:[s?"":"Ctrl","N"],description:a("shortcuts.newTransaction","New transaction")},{keys:[s?"":"Ctrl","U"],description:a("shortcuts.uploadCsv","Upload CSV")},{keys:[s?"":"Ctrl","F"],description:a("shortcuts.focusSearch","Focus search")}]},{title:a("shortcuts.navigation","Navigation"),shortcuts:[{keys:["G","D"],description:a("shortcuts.gotoDashboard","Go to Dashboard")},{keys:["G","T"],description:a("shortcuts.gotoTransactions","Go to Transactions")},{keys:["G","A"],description:a("shortcuts.gotoAccounts","Go to Accounts")},{keys:["G","B"],description:a("shortcuts.gotoBudget","Go to Budget")},{keys:["G","N"],description:a("shortcuts.gotoAnalytics","Go to Analytics")},{keys:["G","G"],description:a("shortcuts.gotoGoals","Go to Goals")},{keys:["G","S"],description:a("shortcuts.gotoSettings","Go to Settings")}]}];if(!e)return null;const l=r.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-lg mx-4 max-h-[80vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:a("shortcuts.title","Keyboard Shortcuts")}),r.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:r.jsx(Bt,{className:"w-5 h-5"})})]}),r.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh] space-y-6",children:i.map(d=>r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:d.title}),r.jsx("div",{className:"space-y-2",children:d.shortcuts.map((u,p)=>r.jsxs("div",{className:"flex items-center justify-between py-1",children:[r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:u.description}),r.jsx("div",{className:"flex items-center gap-1",children:u.keys.map((y,x)=>r.jsxs("span",{children:[r.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:y}),x<u.keys.length-1&&r.jsx("span",{className:"text-gray-400 mx-0.5",children:"+"})]},x))})]},p))})]},d.title))}),r.jsx("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:a("shortcuts.hint","Press Esc to close")})})]})]});return typeof document>"u"?null:Pt.createPortal(l,document.body)}function pg(e,t={}){const{enabled:a=!0}=t,s=g.useCallback(i=>{if(!a)return;const l=i.target;if(!((l.tagName==="INPUT"||l.tagName==="TEXTAREA"||l.isContentEditable)&&i.key!=="Escape"))for(const d of e){const u=i.key.toLowerCase()===d.key.toLowerCase(),p=d.ctrlKey||d.metaKey?i.ctrlKey||i.metaKey:!i.ctrlKey&&!i.metaKey,y=d.shiftKey?i.shiftKey:!i.shiftKey;if(u&&p&&y){i.preventDefault(),d.callback();return}}},[e,a]);g.useEffect(()=>(window.addEventListener("keydown",s),()=>window.removeEventListener("keydown",s)),[s])}const Sn={ESCAPE:"Escape",COMMAND_PALETTE:"k",SEARCH:"f",NEW_TRANSACTION:"n",UPLOAD:"u",HELP:"?"};function gg({children:e}){const t=jt(),[a,s]=g.useState(!1),[i,l]=g.useState(!1),[d,u]=g.useState(!1),[p,y]=g.useState(null),x=g.useCallback(b=>{const D={d:"/dashboard",t:"/transactions",a:"/accounts",b:"/budget",n:"/analytics",g:"/goals",s:"/settings"}[b.toLowerCase()];D&&t({to:D}),y(null)},[t]);return pg([{key:Sn.COMMAND_PALETTE,ctrlKey:!0,callback:()=>l(!0),description:"Open command palette"},{key:Sn.ESCAPE,callback:()=>{i?l(!1):d?u(!1):a&&s(!1),y(null)},description:"Close modal"},{key:Sn.HELP,shiftKey:!0,callback:()=>u(!0),description:"Show shortcuts help"},{key:Sn.NEW_TRANSACTION,ctrlKey:!0,callback:()=>t({to:"/transactions"}),description:"New transaction"},{key:Sn.UPLOAD,ctrlKey:!0,callback:()=>t({to:"/upload"}),description:"Upload CSV"},{key:Sn.SEARCH,ctrlKey:!0,callback:()=>l(!0),description:"Focus search"},{key:"g",callback:()=>y("g"),description:"Navigation prefix"},...["d","t","a","b","n","g","s"].map(b=>({key:b,callback:()=>{p==="g"&&x(b)},description:`Navigate to ${b}`}))]),g.useEffect(()=>{if(p){const b=setTimeout(()=>y(null),1500);return()=>clearTimeout(b)}},[p]),r.jsxs("div",{className:"min-h-screen flex flex-col",children:[r.jsx(Mh,{}),r.jsx("main",{className:"flex-1 pb-20 md:pb-0",children:r.jsx(lm,{children:e})}),r.jsx(Ih,{}),r.jsx(Yh,{}),r.jsx(cm,{}),r.jsx(Jh,{onClick:()=>s(!0)}),r.jsx(om,{isOpen:a,onClose:()=>s(!1)}),r.jsx(hg,{open:i,onOpenChange:l,onShowShortcuts:()=>u(!0)}),r.jsx(mg,{open:d,onClose:()=>u(!1)})]})}function pl({size:e="md",className:t}){return r.jsx("div",{className:te("inline-block animate-spin rounded-full border-2 border-primary-500 border-t-transparent",{"h-4 w-4":e==="sm","h-8 w-8":e==="md","h-12 w-12":e==="lg"},t),role:"status","aria-label":"",children:r.jsx("span",{className:"sr-only",children:"..."})})}function yg(){const{isAuthenticated:e,isLoading:t}=ha(),a=sa(),s=jt();return g.useEffect(()=>{!t&&!e&&!["/login","/register","/landing"].includes(a.pathname)&&s({to:"/login"})},[e,t,a.pathname,s]),t?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx(pl,{size:"lg"})}):a.pathname==="/login"||a.pathname==="/register"||a.pathname==="/landing"?r.jsx(Bo,{}):e?r.jsx(gg,{children:r.jsx(Bo,{})}):null}const ct=tu({component:yg}),xg=ft("/upload")({}),bg=ft("/transactions")({validateSearch:e=>({categories:typeof e.categories=="string"?e.categories:void 0,month:typeof e.month=="string"?e.month:void 0,accountId:typeof e.accountId=="number"?e.accountId:typeof e.accountId=="string"&&!isNaN(Number(e.accountId))?Number(e.accountId):void 0,fromAccounts:e.fromAccounts===!0||e.fromAccounts==="true",type:e.type==="income"||e.type==="expense"?e.type:void 0})}),vg=ft("/settings")({}),Ze=g.forwardRef(({variant:e="primary",size:t="md",loading:a=!1,className:s,children:i,disabled:l,...d},u)=>{const p=l||a;return r.jsxs("button",{ref:u,disabled:p,className:te("inline-flex items-center justify-center gap-2 font-medium rounded-lg","transition-all duration-150 focus-ring","active:scale-[0.97] active:transition-none","disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",{"bg-primary-500 text-white hover:bg-primary-600 shadow-sm hover:shadow":e==="primary","bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600":e==="secondary","border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800":e==="outline","text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800":e==="ghost","bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow":e==="danger"},{"px-3 py-1.5 text-sm":t==="sm","px-6 py-3":t==="md","px-8 py-4 text-lg":t==="lg"},s),...d,children:[a&&r.jsx(Bs,{className:te("animate-spin",t==="sm"?"w-3 h-3":t==="lg"?"w-5 h-5":"w-4 h-4")}),i]})});Ze.displayName="Button";const ot=g.forwardRef(({label:e,error:t,className:a,...s},i)=>r.jsxs("div",{className:"w-full",children:[e&&r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:s.id,children:e}),r.jsx("input",{ref:i,className:te("w-full px-4 py-2 border rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","transition-default focus-ring","disabled:opacity-50 disabled:cursor-not-allowed","max-w-full overflow-hidden text-ellipsis",t?"border-red-500":"border-gray-300 dark:border-gray-600",a),...s}),t&&r.jsx("p",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:t})]}));ot.displayName="Input";function Me({children:e,className:t,hover:a=!1,onClick:s,...i}){return r.jsx("div",{className:te("bg-white dark:bg-gray-800 rounded-xl p-6 border border-gray-200 dark:border-gray-700 shadow-sm",a&&"card-hover",t),onClick:s,...i,children:e})}function wg(){const{t:e}=we("common"),t=jt(),[a,s]=g.useState(""),[i,l]=g.useState(""),[d,u]=g.useState(""),[p,y]=g.useState(""),[x,b]=g.useState(!1),A=async D=>{var k,E;if(D.preventDefault(),y(""),i!==d){y(e("auth.passwordMismatch"));return}if(i.length<6){y(e("auth.passwordTooShort"));return}b(!0);try{await re.post("/api/auth/register",{email:a,password:i}),t({to:"/login"})}catch($){const B=((E=(k=$==null?void 0:$.response)==null?void 0:k.data)==null?void 0:E.detail)||e("auth.registerFailed");y(B)}finally{b(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:r.jsxs(Me,{className:"w-full max-w-md p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.registerDescription")})]}),r.jsxs("form",{onSubmit:A,className:"space-y-6",children:[p&&r.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:p}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),r.jsx(ot,{id:"email",type:"email",value:a,onChange:D=>s(D.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),r.jsx(ot,{id:"password",type:"password",value:i,onChange:D=>l(D.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.confirmPassword")}),r.jsx(ot,{id:"confirmPassword",type:"password",value:d,onChange:D=>u(D.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),r.jsx(Ze,{type:"submit",className:"w-full",disabled:x,children:e(x?"auth.registering":"auth.register")}),r.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.hasAccount")," ",r.jsx(Ve,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.login")})]})]})]})})}const jg=ft("/register")({component:wg}),kg=ft("/recurring")({});function Ng(){const{t:e}=we("common"),t=jt(),{login:a}=ha(),[s,i]=g.useState(""),[l,d]=g.useState(""),[u,p]=g.useState(""),[y,x]=g.useState(!1),b=async A=>{var D,k;A.preventDefault(),p(""),x(!0);try{await a(s,l),t({to:"/"})}catch(E){const $=E instanceof Error?E.message:((k=(D=E==null?void 0:E.response)==null?void 0:D.data)==null?void 0:k.detail)||e("auth.loginFailed");p($)}finally{x(!1)}};return r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:r.jsxs(Me,{className:"w-full max-w-md p-8",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.loginDescription")})]}),r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[u&&r.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:u}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),r.jsx(ot,{id:"email",type:"email",value:s,onChange:A=>i(A.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),r.jsx(ot,{id:"password",type:"password",value:l,onChange:A=>d(A.target.value),placeholder:"********",required:!0,autoComplete:"current-password"})]}),r.jsx(Ze,{type:"submit",className:"w-full",disabled:y,children:e(y?"auth.loggingIn":"auth.login")}),r.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.noAccount")," ",r.jsx(Ve,{to:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.register")})]})]})]})})}const Sg=ft("/login")({component:Ng});function _g(){const e=jt(),{t}=we("landing");return r.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),r.jsx("div",{className:"relative max-w-7xl mx-auto px-6 py-16 lg:py-24",children:r.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:t("hero.headline")}),r.jsx("p",{className:"text-lg text-green-100 mb-6 leading-relaxed",children:t("hero.subheadline")}),r.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[r.jsx(vu,{className:"h-4 w-4 text-green-300"}),r.jsx("span",{className:"text-sm",children:t("hero.valueProp1")})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[r.jsx(Gi,{className:"h-4 w-4 text-green-300"}),r.jsx("span",{className:"text-sm",children:t("hero.valueProp2")})]}),r.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[r.jsx(Yi,{className:"h-4 w-4 text-green-300"}),r.jsx("span",{className:"text-sm",children:t("hero.valueProp3")})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx(Ze,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("hero.cta")}),r.jsx(Ze,{onClick:()=>e({to:"/login"}),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:t("hero.seeLiveDemo")})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20 shadow-2xl",children:r.jsx("img",{src:"/screenshots/dashboard-light.webp",alt:"SmartMoney Dashboard",className:"rounded-lg shadow-lg w-full",loading:"eager"})}),r.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 lg:w-40 hidden md:block",children:r.jsx("img",{src:"/screenshots/dashboard-mobile.webp",alt:"SmartMoney Mobile",className:"rounded-xl shadow-2xl border-4 border-white",loading:"eager"})})]})]})})]})}const Eg=[{id:"dashboard",screenshot:"/screenshots/dashboard-light.webp",screenshotAlt:"Dashboard Screenshot"},{id:"transactions",screenshot:"/screenshots/transactions.webp",screenshotAlt:"Transactions Screenshot"},{id:"budget",screenshot:"/screenshots/budget.webp",screenshotAlt:"Budget Screenshot"},{id:"analytics",screenshot:"/screenshots/analytics.webp",screenshotAlt:"Analytics Screenshot"}];function Cg(){const{t:e}=we("landing");return r.jsx("section",{className:"py-16 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("features.title")}),r.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("features.subtitle")})]}),r.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Eg.map(t=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[r.jsx("div",{className:"aspect-video bg-gray-100 overflow-hidden",children:r.jsx("img",{src:t.screenshot,alt:t.screenshotAlt,className:"w-full h-full object-cover object-top",loading:"lazy"})}),r.jsxs("div",{className:"p-5",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`features.${t.id}.title`)}),r.jsx("p",{className:"text-gray-600 text-sm",children:e(`features.${t.id}.description`)})]})]},t.id))})]})})}const Pg=[{id:"step1",icon:ir,color:"bg-blue-100 text-blue-700"},{id:"step2",icon:qs,color:"bg-green-100 text-green-700"},{id:"step3",icon:Gi,color:"bg-purple-100 text-purple-700"}];function Ag(){const{t:e}=we("landing");return r.jsx("section",{id:"how-it-works",className:"py-16 bg-white",children:r.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("howItWorks.title")}),r.jsx("p",{className:"text-lg text-gray-600",children:e("howItWorks.subtitle")})]}),r.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:Pg.map((t,a)=>r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[r.jsx("div",{className:`h-16 w-16 rounded-full ${t.color} flex items-center justify-center`,children:r.jsx(t.icon,{className:"h-8 w-8"})}),r.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gray-900 text-white text-sm font-bold flex items-center justify-center",children:a+1})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`howItWorks.${t.id}.title`)}),r.jsx("p",{className:"text-gray-600 text-sm",children:e(`howItWorks.${t.id}.description`)})]},t.id))}),r.jsx("div",{className:"hidden md:flex items-center justify-center mt-8",children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-300 to-green-300 rounded"}),r.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-green-300 to-purple-300 rounded"})]})})]})})}function Rg(){const e=jt(),{t}=we("landing");return r.jsx("section",{className:"py-16 bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:t("cta.title")}),r.jsx("p",{className:"text-lg text-green-100 mb-8",children:t("cta.subtitle")}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-6",children:[r.jsx(Ze,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("cta.button")}),r.jsxs(Ze,{onClick:()=>window.open("https://github.com/GodStorm91/smartmoney","_blank"),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[r.jsx(Ji,{className:"h-5 w-5 mr-2"}),t("cta.openSource")]})]}),r.jsx("p",{className:"text-sm text-green-200",children:t("cta.noAccount")})]})})}const gs=[{code:"en",name:"English",flag:""},{code:"ja",name:"",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function Og(){const e=jt(),{t,i18n:a}=we("landing"),[s,i]=g.useState(!1),l=gs.find(u=>u.code===a.language)||gs[0],d=u=>{a.changeLanguage(u),i(!1)};return r.jsx("header",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-8 w-8 text-green-600"}),r.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SmartMoney"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>i(!s),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsx(Yi,{className:"h-4 w-4 text-gray-500"}),r.jsx("span",{className:"text-sm",children:l.flag})]}),s&&r.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:gs.map(u=>r.jsxs("button",{onClick:()=>d(u.code),className:`w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 ${a.language===u.code?"bg-green-50 text-green-700":"text-gray-700"}`,children:[r.jsx("span",{children:u.flag}),r.jsx("span",{children:u.name})]},u.code))})]}),r.jsx(Ze,{onClick:()=>e({to:"/login"}),variant:"outline",size:"sm",children:"Login"}),r.jsx(Ze,{onClick:()=>e({to:"/register"}),size:"sm",children:t("hero.cta")})]})]})})})}function Tg(){const{t:e}=we("landing");return r.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:r.jsx("div",{className:"max-w-7xl mx-auto px-6",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ct,{className:"h-6 w-6 text-green-500"}),r.jsx("span",{className:"text-lg font-bold text-white",children:"SmartMoney"})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[r.jsxs("a",{href:"https://github.com/GodStorm91/smartmoney",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-white transition-colors",children:[r.jsx(Ji,{className:"h-4 w-4"}),"GitHub"]}),r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.privacy")}),r.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.terms")})]}),r.jsx("p",{className:"text-sm",children:e("footer.copyright")})]})})})}function $g(){return r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx(Og,{}),r.jsx(_g,{}),r.jsx(Cg,{}),r.jsx(Ag,{}),r.jsx(Rg,{}),r.jsx(Tg,{})]})}const Dg=ft("/landing")({component:$g}),Mg=ft("/goals")({}),Ig=ft("/budget")({}),Lg=ft("/analytics")({}),Fg=ft("/accounts")({});async function Bg(){return(await re.get("/api/exchange-rates")).data}function In(){return We({queryKey:["exchange-rates"],queryFn:Bg,staleTime:24*60*60*1e3,gcTime:48*60*60*1e3,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}function Kg(){const{data:e}=In();return(e==null?void 0:e.rates)||{}}function qg({goalId:e,goalName:t,achievability:a,targetAmount:s,currentAmount:i,onEdit:l,onDelete:d,topExpenseCategory:u}){const{t:p}=we("common"),{currency:y}=fr(),{data:x}=In(),{isPrivacyMode:b}=hr(),[A,D]=g.useState(!1),k=s>0?Math.min(100,i/s*100):0,E=a.current_monthly_net>=a.required_monthly,$=()=>{if(k>=100)return p("goal.insight.achieved");if(E)return p("goal.insight.onTrackMonths",{months:a.months_remaining});const ae=a.monthly_gap;if(ae>0){const J=Et(ae,y,(x==null?void 0:x.rates)||{},!1,b);return p("goal.insight.saveMore",{amount:J})}return p("goal.insight.everyBitCounts")},B=()=>{D(!0)},z=()=>{d&&d(e),D(!1)},W=()=>{D(!1)},V=k>=100||E?"bg-emerald-500":"bg-amber-500";return r.jsxs(Me,{className:"relative",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsxs("span",{className:te("text-xs font-medium px-2 py-1 rounded-full",E||k>=100?"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/40 dark:text-emerald-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/40 dark:text-amber-400"),children:[k>=100?"":E?"":""," ",k>=100?p("goal.status.completed"):p(E?"goal.status.onTrack":"goal.status.behind")]}),l&&r.jsx("button",{onClick:()=>l(e),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors","aria-label":p("goal.editGoal"),children:r.jsx(wu,{className:"w-4 h-4 text-gray-500 dark:text-gray-400"})})]})]}),r.jsxs("div",{className:"mb-2",children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsxs("span",{className:te("text-2xl font-bold",k>=100||E?"text-emerald-600 dark:text-emerald-400":"text-amber-600 dark:text-amber-400"),children:[Math.round(k),"%"]}),r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:p("goal.monthsRemaining",{months:a.months_remaining})})]}),r.jsx("div",{className:"w-full h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:te("h-full rounded-full transition-all duration-500",V),style:{width:`${Math.min(100,k)}%`}})})]}),r.jsxs("div",{className:"text-center mb-4",children:[r.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:Mi(i,y,(x==null?void 0:x.rates)||{},!0,b)}),r.jsx("span",{className:"text-gray-400 dark:text-gray-500 mx-2",children:"/"}),r.jsx("span",{className:"text-lg text-gray-600 dark:text-gray-400",children:Mi(s,y,(x==null?void 0:x.rates)||{},!0,b)})]}),r.jsxs("div",{className:te("rounded-lg p-3 mb-4",E||k>=100?"bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800":"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800"),children:[r.jsxs("p",{className:te("text-sm",E||k>=100?"text-emerald-700 dark:text-emerald-300":"text-amber-700 dark:text-amber-300"),children:[" ",$()]}),!E&&u&&u.monthlyAmount>0&&r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1.5 ml-5",children:[" ",p("goal.insight.topExpenseTip",{category:p(`categories.${u.name}`,{defaultValue:u.name}),amount:Et(u.monthlyAmount,y,(x==null?void 0:x.rates)||{},!1,b)})]})]}),d&&r.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700 pt-3",children:A?r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-sm text-center text-gray-600 dark:text-gray-400",children:p("goal.deleteConfirm")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:W,className:"flex-1 py-2 text-sm text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg transition-colors",children:p("common.cancel")}),r.jsx("button",{onClick:z,className:"flex-1 py-2 text-sm text-white bg-red-600 hover:bg-red-700 rounded-lg transition-colors",children:p("common.delete")})]})]}):r.jsxs("button",{onClick:B,className:"w-full flex items-center justify-center gap-2 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",children:[r.jsx(ju,{className:"w-4 h-4"}),p("goal.deleteGoal")]})})]})}const zg={:"",:"","":"",:"",:"",:"",:"",:""};function Ug({categories:e,maxItems:t}){const{currency:a}=fr(),{data:s}=In(),{isPrivacyMode:i}=hr(),l=t?e.slice(0,t):e;return r.jsx("div",{className:"space-y-4",children:l.map((d,u)=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-2xl","aria-hidden":"true",children:d.emoji||zg[d.category]||""}),r.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:d.category})]}),r.jsx("span",{className:"text-sm font-semibold font-numbers text-gray-900 dark:text-gray-100",children:Et(d.amount,a,(s==null?void 0:s.rates)||{},!1,i)})]}),r.jsx("div",{className:"h-2 bg-gray-100 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 rounded-full transition-all duration-300",style:{width:`${d.percentage}%`},role:"progressbar","aria-valuenow":d.percentage,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${d.category}: ${d.percentage}%`})})]},u))})}function ys({title:e,amount:t,change:a,icon:s,type:i,clickable:l,...d}){const{currency:u}=fr(),{data:p}=In(),{isPrivacyMode:y}=hr(),b=i?{income:{bg:"bg-green-50 dark:bg-green-900/30",text:"text-green-600 dark:text-green-400",badge:"text-green-700 dark:text-green-300 bg-green-50 dark:bg-green-900/30"},expense:{bg:"bg-red-50 dark:bg-red-900/30",text:"text-red-600 dark:text-red-400",badge:"text-red-700 dark:text-red-300 bg-red-50 dark:bg-red-900/30"},net:{bg:"bg-blue-50 dark:bg-blue-900/30",text:"text-blue-600 dark:text-blue-400",badge:"text-blue-700 dark:text-blue-300 bg-blue-50 dark:bg-blue-900/30"}}[i]:{bg:"bg-gray-50 dark:bg-gray-700",text:"text-gray-600 dark:text-gray-400",badge:"text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-700"};return r.jsxs(Me,{hover:!0,role:"region",className:l?"cursor-pointer transition-all hover:shadow-md hover:scale-[1.01]":void 0,...d,children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("div",{className:te("p-3 rounded-lg",b.bg),children:s}),a!=null&&r.jsxs("span",{className:te("inline-flex items-center gap-1 text-sm font-medium px-2 py-1 rounded-full",b.badge),children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a>=0?r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 10l7-7m0 0l7 7m-7-7v18"}):r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 14l-7 7m0 0l-7-7m7 7V3"})}),a>=0?"+":"",a.toFixed(1),"%"]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-1",children:e}),r.jsx("p",{className:te("text-2xl sm:text-3xl font-bold font-numbers tracking-tight",b.text),children:Et(t,u,(p==null?void 0:p.rates)||{},!1,y)})]})]})}function Wg({summary:e}){const{t}=we("common");return r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[r.jsx(Ve,{to:"/transactions",search:{type:"income"},className:"block",children:r.jsx(ys,{title:t("chart.income"),amount:(e==null?void 0:e.income)||0,change:e==null?void 0:e.income_change,type:"income","aria-label":t("kpi.thisMonthIncome"),clickable:!0,icon:r.jsx("svg",{className:"w-6 h-6 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})})}),r.jsx(Ve,{to:"/transactions",search:{type:"expense"},className:"block",children:r.jsx(ys,{title:t("chart.expense"),amount:(e==null?void 0:e.expense)||0,change:e==null?void 0:e.expense_change,type:"expense","aria-label":t("kpi.thisMonthExpense"),clickable:!0,icon:r.jsx("svg",{className:"w-6 h-6 text-red-600 dark:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 17h8m0 0V9m0 8l-8-8-4 4-6-6"})})})}),r.jsx(ys,{title:t("chart.net"),amount:(e==null?void 0:e.net)||0,change:e==null?void 0:e.net_change,type:"net","aria-label":t("kpi.thisMonthNet"),icon:r.jsx("svg",{className:"w-6 h-6 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}function pe({className:e}){return r.jsx("div",{className:te("animate-pulse bg-gray-200 dark:bg-gray-700 rounded",e)})}function Cx(){return r.jsxs("tr",{className:"animate-pulse",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsx(pe,{className:"w-20 h-4"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(pe,{className:"w-32 h-4"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(pe,{className:"w-16 h-6 rounded-full"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(pe,{className:"w-24 h-4"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(pe,{className:"w-20 h-4 ml-auto"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx(pe,{className:"w-16 h-6 mx-auto"})})]})}function Px(){return r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm animate-pulse",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"w-32 h-5 mb-2"}),r.jsx(pe,{className:"w-20 h-4"})]}),r.jsx(pe,{className:"w-24 h-6"})]})})}function xs({className:e}){return r.jsxs("div",{className:te("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm",e),children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(pe,{className:"w-10 h-10 rounded-lg"}),r.jsx(pe,{className:"w-20 h-4"})]}),r.jsx(pe,{className:"w-32 h-8 mb-2"}),r.jsx(pe,{className:"w-16 h-4"})]})}function Vg({className:e}){return r.jsx("div",{className:te("space-y-4",e),children:[...Array(4)].map((t,a)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(pe,{className:"w-8 h-8 rounded-full"}),r.jsxs("div",{className:"flex-1",children:[r.jsx(pe,{className:"w-24 h-4 mb-1"}),r.jsx(pe,{className:"w-full h-2 rounded-full"})]}),r.jsx(pe,{className:"w-16 h-4"})]},a))})}function Ii({className:e}){return r.jsxs("div",{className:te("space-y-3",e),children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx(pe,{className:"w-28 h-4"}),r.jsx(pe,{className:"w-16 h-4"})]}),r.jsx(pe,{className:"w-full h-3 rounded-full"}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx(pe,{className:"w-20 h-3"}),r.jsx(pe,{className:"w-20 h-3"})]})]})}function Hg({className:e}){return r.jsxs("div",{className:te("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm text-center",e),children:[r.jsx(pe,{className:"w-24 h-4 mx-auto mb-2"}),r.jsx(pe,{className:"w-48 h-10 mx-auto mb-3"}),r.jsxs("div",{className:"flex items-center justify-center gap-2",children:[r.jsx(pe,{className:"w-16 h-4"}),r.jsx(pe,{className:"w-24 h-5"}),r.jsx(pe,{className:"w-12 h-5 rounded-full"})]})]})}class Gg extends g.Component{constructor(t){super(t),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?this.props.fallback||r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500 text-sm",children:"Chart failed to load"}):this.props.children}}const Yg=g.lazy(()=>et(()=>import("./TrendLineChart-Cc6NPPws.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.TrendLineChart}))),Jg=g.lazy(()=>et(()=>import("./ZoomableChart-CODyVQ9c.js"),__vite__mapDeps([7,1,2])).then(e=>({default:e.ZoomableChart})));g.lazy(()=>et(()=>import("./IncomeExpenseBarChart-Bm4BTOsE.js"),__vite__mapDeps([8,1,2,3,4,5,6])).then(e=>({default:e.IncomeExpenseBarChart})));g.lazy(()=>et(()=>import("./CategoryBarChart-LA4bWzNn.js"),__vite__mapDeps([9,1,2,3,4,5,6])).then(e=>({default:e.CategoryBarChart})));g.lazy(()=>et(()=>import("./CategoryPieChart-CEXJMnND.js"),__vite__mapDeps([10,1,2,4,5,3,6])).then(e=>({default:e.CategoryPieChart})));g.lazy(()=>et(()=>import("./CashFlowSummary-btHQIScg.js"),__vite__mapDeps([11,1,2,3,4,5,6])).then(e=>({default:e.CashFlowSummary})));const Qg=g.lazy(()=>et(()=>import("./ForecastChart-BqPydK2H.js"),__vite__mapDeps([12,1,2,3,4,5,6])).then(e=>({default:e.ForecastChart})));function eo({height:e="h-64"}){return r.jsx("div",{className:`${e} flex items-center justify-center`,children:r.jsx(pe,{className:"w-full h-full rounded-lg"})})}function Xg(e){return r.jsx(g.Suspense,{fallback:r.jsx(eo,{}),children:r.jsx(Yg,{...e})})}function Zg(e){return r.jsx(g.Suspense,{fallback:r.jsx(eo,{height:"h-80"}),children:r.jsx(Jg,{...e})})}function e0(e){return r.jsx(Gg,{children:r.jsx(g.Suspense,{fallback:r.jsx(eo,{height:"h-80"}),children:r.jsx(Qg,{...e})})})}function t0({data:e}){const{t}=we("common"),[a,s]=g.useState("net");return r.jsxs(Me,{className:"lg:col-span-2",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t("chart.trend12months")}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>s("net"),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${a==="net"?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t("chart.net")}),r.jsx("button",{onClick:()=>s("income"),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${a==="income"?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t("chart.income")}),r.jsx("button",{onClick:()=>s("expense"),className:`px-3 py-1 text-sm font-medium rounded-lg transition-colors ${a==="expense"?"text-primary-600 bg-primary-50 dark:bg-primary-900/30":"text-gray-600 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:t("chart.expense")})]})]}),r.jsx("div",{className:"h-80",role:"img","aria-label":t("chart.trendChart"),children:e&&e.length>0?r.jsx(Zg,{className:"h-full",children:r.jsx(Xg,{data:e,dataKey:a})}):r.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 dark:text-gray-500",children:t("common.noData")})})]})}function n0(){const{t:e}=we("common");return r.jsxs("div",{className:"bg-gradient-to-br from-primary-500 to-primary-700 rounded-xl p-6 text-white shadow-lg",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:e("dashboard.quickActions")}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(Ve,{to:"/upload",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-4 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsx("span",{className:"font-medium",children:e("dashboard.quickActionUpload")})]})}),r.jsx(Ve,{to:"/goals",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-4 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 21v-4m0 0V5a2 2 0 012-2h6.5l1 1H21l-3 6 3 6h-8.5l-1-1H5a2 2 0 00-2 2zm9-13.5V9"})}),r.jsx("span",{className:"font-medium",children:e("dashboard.quickActionGoals")})]})}),r.jsx(Ve,{to:"/analytics",className:"block w-full bg-white/20 hover:bg-white/30 backdrop-blur-sm rounded-lg p-4 transition-colors",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("span",{className:"font-medium",children:e("dashboard.quickActionAnalytics")})]})})]})]})}function gl({end:e,duration:t=1e3,decimals:a=0,prefix:s="",suffix:i="",className:l="",formatter:d,onComplete:u}){const[p,y]=g.useState(0),x=g.useRef(null),b=g.useRef(null),A=g.useRef(e);g.useEffect(()=>{if(Math.abs(A.current-e)<.01)return;if(A.current=e,y(0),x.current=null,e===0){y(0);return}const k=$=>1-Math.pow(1-$,4),E=$=>{x.current||(x.current=$);const B=$-x.current,z=Math.min(B/t,1),W=k(z);y(W*e),z<1?b.current=requestAnimationFrame(E):(y(e),u==null||u())};return b.current=requestAnimationFrame(E),()=>{b.current&&cancelAnimationFrame(b.current)}},[e,t,u]);const D=d?d(p):`${s}${p.toFixed(a)}${i}`;return r.jsx("span",{className:l,children:D})}async function yl(e){const t=new URLSearchParams;e!=null&&e.includeInactive&&t.append("include_inactive","true");const a=`/api/accounts/${t.toString()?`?${t.toString()}`:""}`;return(await re.get(a)).data}async function r0(e){return(await re.get(`/api/accounts/${e}`)).data}async function a0(e){return(await re.post("/api/accounts/",e)).data}async function s0(e,t){return(await re.patch(`/api/accounts/${e}`,t)).data}function to(e=!1){return We({queryKey:["accounts",{includeInactive:e}],queryFn:()=>yl({includeInactive:e}),staleTime:1e3*60*5})}function Ax(e){return We({queryKey:["accounts",e],queryFn:()=>r0(e),staleTime:1e3*60*5,enabled:!!e})}function Rx(){const e=or();return oa({mutationFn:t=>a0(t),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}})}function Ox(){const e=or();return oa({mutationFn:({id:t,data:a})=>s0(t,a),onSuccess:(t,a)=>{e.invalidateQueries({queryKey:["accounts",a.id]}),e.invalidateQueries({queryKey:["accounts"]})}})}async function o0(){return(await re.get("/api/crypto/wallets")).data}async function i0(e){return(await re.get(`/api/crypto/wallets/${e}`)).data}async function Tx(e){return(await re.post("/api/crypto/wallets",e)).data}async function $x(e){await re.delete(`/api/crypto/wallets/${e}`)}async function Dx(e){return(await re.post(`/api/crypto/wallets/${e}/sync`)).data}async function Mx(e){return(await re.get(`/api/crypto/wallets/${e}/portfolio`)).data}async function c0(e){return(await re.get(`/api/crypto/wallets/${e}/defi-positions`)).data}async function Ix(){return(await re.get("/api/crypto/contracts")).data}async function Lx(e){return(await re.post("/api/crypto/contracts",e)).data}async function Fx(e){await re.delete(`/api/crypto/contracts/${e}`)}async function Bx(e,t=30){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/history`,{params:{days:t}})).data}async function Kx(e){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/performance`)).data}async function qx(e,t="en"){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/insights`,{params:{language:t}})).data}async function zx(){return(await re.get("/api/crypto/rewards/unattributed")).data}async function Ux(e,t){return(await re.post("/api/crypto/rewards/batch-attribute",{reward_ids:e,position_id:t})).data}async function Wx(e=90){return(await re.post("/api/crypto/rewards/scan",{days:e})).data}async function Vx(e){return(await re.post(`/api/crypto/rewards/${e}/create-transaction`)).data}async function Hx(e){return(await re.post("/api/crypto/rewards/batch-create-transactions",{reward_ids:e})).data}async function Gx(e){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/roi`)).data}async function Yx(e){return(await re.get(`/api/crypto/positions/${encodeURIComponent(e)}/rewards`)).data}async function Jx(e){return(await re.post("/api/crypto/positions/scenarios",e)).data}async function Qx(e="symbiotic"){return(await re.get("/api/crypto/rewards/staking",{params:{source:e}})).data}const Li=["bank","cash","investment","receivable","crypto"];function l0({monthlyNet:e,monthlyNetChange:t}){const{t:a}=we("common"),{data:s}=to(),{currency:i}=fr(),{isPrivacyMode:l}=hr(),d=Kg(),[u,p]=g.useState(!1),{data:y}=We({queryKey:["crypto-wallets"],queryFn:o0}),{data:x}=We({queryKey:["crypto-wallets-balance",y==null?void 0:y.map(J=>J.id)],queryFn:async()=>!y||y.length===0?[]:Promise.all(y.map(J=>i0(J.id))),enabled:!!y&&y.length>0}),{data:b}=We({queryKey:["crypto-defi-positions",y==null?void 0:y.map(J=>J.id)],queryFn:async()=>!y||y.length===0?[]:Promise.all(y.map(J=>c0(J.id).catch(()=>({wallet_address:"",total_value_usd:0,positions:[]})))),enabled:!!y&&y.length>0}),A=(x==null?void 0:x.reduce((J,X)=>J+(Number(X.total_balance_usd)||0),0))||0,D=(b==null?void 0:b.reduce((J,X)=>J+(Number(X.total_value_usd)||0),0))||0,k=A+D,E=1/(Number(d==null?void 0:d.USD)||.00667),$=Math.round(k*E)||0,B=(s==null?void 0:s.filter(J=>Li.includes(J.type)).reduce((J,X)=>J+X.current_balance,0))||0,z=(s==null?void 0:s.filter(J=>!Li.includes(J.type)).reduce((J,X)=>J+Math.abs(X.current_balance),0))||0,V=B+$-z,ae=g.useMemo(()=>J=>Et(J,i,d,!1,l),[i,d,l]);return r.jsx("div",{className:"mb-6 cursor-pointer",onClick:()=>p(!u),children:r.jsx(Me,{className:"hover:shadow-md transition-shadow bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900",children:r.jsxs("div",{className:"text-center py-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1 uppercase tracking-wide",children:a("dashboard.netWorth","Net Worth")}),r.jsx("p",{className:te("text-4xl sm:text-5xl font-bold font-numbers tracking-tight",V>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:r.jsx(gl,{end:V,duration:1200,formatter:ae})}),e!==void 0&&r.jsxs("div",{className:"flex items-center justify-center gap-2 mt-3",children:[r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[a("dashboard.thisMonth","This month"),":"]}),r.jsxs("span",{className:te("flex items-center gap-1 text-sm font-medium",e>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[e>=0?r.jsx(Ct,{size:14}):r.jsx(on,{size:14}),e>=0?"+":"",Et(e,i,d,!1,l)]}),t!=null&&r.jsxs("span",{className:te("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",t>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":t<0?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:[t>0?r.jsx(Ct,{size:10}):t<0?r.jsx(on,{size:10}):r.jsx(Qi,{size:10}),t>0?"+":"",t==null?void 0:t.toFixed(0),"%"]})]}),u&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 text-sm",children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a("dashboard.assets","Assets")}),r.jsx("span",{className:"font-numbers text-green-600 dark:text-green-400",children:Et(B,i,d,!1,l)})]}),$>0&&r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a("crypto.totalBalance","Crypto")}),r.jsx("span",{className:"font-numbers text-purple-600 dark:text-purple-400",children:Et($,i,d,!1,l)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:a("dashboard.liabilities","Liabilities")}),r.jsxs("span",{className:"font-numbers text-red-600 dark:text-red-400",children:["-",Et(z,i,d,!1,l)]})]})]})]})})})}function u0(e){return g.useMemo(()=>{const{income:t,expense:a,budgetCategories:s=[],goals:i=[]}=e,l=t>0?(t-a)/t*100:0;let d=0;l>=20?d=40:l>=15?d=35:l>=10?d=30:l>=5?d=20:l>=0?d=10:d=0;let u=30,p=100;s.length>0&&(p=s.filter($=>$.spent<=$.allocated).length/s.length*100,u=Math.round(p/100*30));let y=30,x=100;i.length>0&&(x=i.reduce(($,B)=>$+Math.min(B.progress,100),0)/i.length,y=Math.round(x/100*30));const b=d+u+y;let A="F";b>=90?A="A":b>=80?A="B":b>=70?A="C":b>=60&&(A="D");const D={A:"#22c55e",B:"#84cc16",C:"#eab308",D:"#f97316",F:"#ef4444"},k=[];return l<10&&k.push("tip.increaseSavings"),p<80&&s.length>0&&k.push("tip.stayWithinBudget"),x<80&&i.length>0&&k.push("tip.focusOnGoals"),l<0&&k.push("tip.reduceSpending"),k.length===0&&k.push("tip.keepItUp"),{score:b,grade:A,color:D[A],breakdown:{savingsRate:{score:d,max:40,value:Math.round(l)},budgetAdherence:{score:u,max:30,value:Math.round(p)},goalProgress:{score:y,max:30,value:Math.round(x)}},tips:k}},[e])}function d0({income:e,expense:t,budgetCategories:a=[],goals:s=[],previousScore:i}){const{t:l}=we("common"),[d,u]=g.useState(!1),p=u0({income:e,expense:t,budgetCategories:a,goals:s}),y=i!==void 0?p.score-i:null;return r.jsxs(Me,{className:"overflow-hidden",children:[r.jsxs("div",{className:"p-4 cursor-pointer",onClick:()=>u(!d),children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:l("health.title","Financial Health")}),r.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:d?r.jsx(ku,{size:16}):r.jsx(Nu,{size:16})})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative w-20 h-20 flex-shrink-0",children:[r.jsxs("svg",{className:"w-full h-full transform -rotate-90",children:[r.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:"currentColor",strokeWidth:"6",className:"text-gray-200 dark:text-gray-700"}),r.jsx("circle",{cx:"40",cy:"40",r:"36",fill:"none",stroke:p.color,strokeWidth:"6",strokeLinecap:"round",strokeDasharray:`${p.score/100*226} 226`,className:"transition-all duration-1000 ease-out"})]}),r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[r.jsx("span",{className:"text-2xl font-bold",style:{color:p.color},children:r.jsx(gl,{end:p.score,duration:1e3})}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:p.grade})]})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:l(`health.grade.${p.grade}`,p.grade)}),y!==null&&y!==0&&r.jsxs("span",{className:te("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",y>0?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[y>0?r.jsx(Ct,{size:10}):r.jsx(on,{size:10}),y>0?"+":"",y]})]}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-2",children:l(`health.description.${p.grade}`,"Your finances are looking good!")})]})]})]}),d&&r.jsxs("div",{className:"px-4 pb-4 border-t border-gray-100 dark:border-gray-800 pt-3 animate-modal-in",children:[r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:l("health.savingsRate","Savings Rate")}),r.jsxs("span",{className:"font-medium",children:[p.breakdown.savingsRate.value,"% (",p.breakdown.savingsRate.score,"/",p.breakdown.savingsRate.max,")"]})]}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-blue-500 rounded-full transition-all duration-500",style:{width:`${p.breakdown.savingsRate.score/p.breakdown.savingsRate.max*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:l("health.budgetAdherence","Budget Adherence")}),r.jsxs("span",{className:"font-medium",children:[p.breakdown.budgetAdherence.value,"% (",p.breakdown.budgetAdherence.score,"/",p.breakdown.budgetAdherence.max,")"]})]}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-purple-500 rounded-full transition-all duration-500",style:{width:`${p.breakdown.budgetAdherence.score/p.breakdown.budgetAdherence.max*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:l("health.goalProgress","Goal Progress")}),r.jsxs("span",{className:"font-medium",children:[p.breakdown.goalProgress.value,"% (",p.breakdown.goalProgress.score,"/",p.breakdown.goalProgress.max,")"]})]}),r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-green-500 rounded-full transition-all duration-500",style:{width:`${p.breakdown.goalProgress.score/p.breakdown.goalProgress.max*100}%`}})})]})]}),p.tips.length>0&&r.jsx("div",{className:"bg-amber-50 dark:bg-amber-900/20 rounded-lg p-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(Su,{size:16,className:"text-amber-600 dark:text-amber-400 mt-0.5 flex-shrink-0"}),r.jsx("div",{className:"text-sm text-amber-800 dark:text-amber-300",children:l(`health.${p.tips[0]}`,p.tips[0])})]})})]})]})}function f0({categories:e,income:t,expense:a,previousIncome:s,previousExpense:i}){const{t:l}=we("common"),[d,u]=g.useState(!1);g.useEffect(()=>{localStorage.getItem("spendingInsightsDismissed")&&u(!0)},[]);const p=()=>{u(!0),localStorage.setItem("spendingInsightsDismissed","true")},y=()=>{u(!1),localStorage.removeItem("spendingInsightsDismissed")};if(d)return r.jsx("div",{className:"relative",children:r.jsxs("button",{onClick:y,className:"w-full text-left text-sm text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300 transition-colors flex items-center gap-2",children:[r.jsx(nn,{size:14}),l("insights.showAgain","Show spending insights")]})});const x=g.useMemo(()=>{const b=[],A=t>0?a/t*100:0;if(A>90?b.push({type:"warning",icon:r.jsx(nn,{size:16}),title:l("insights.highSpending","High Spending Alert"),description:l("insights.highSpendingDesc","You're spending {{ratio}}% of your income",{ratio:Math.round(A)}),value:`${Math.round(A)}%`}):A<50&&b.push({type:"positive",icon:r.jsx(on,{size:16}),title:l("insights.goodSavings","Great Savings!"),description:l("insights.goodSavingsDesc","You're saving {{ratio}}% of your income",{ratio:Math.round(100-A)}),value:`${Math.round(100-A)}%`}),i&&i>0){const D=(a-i)/i*100;D>20?b.push({type:"warning",icon:r.jsx(Ct,{size:16}),title:l("insights.spendingUp","Spending Increased"),description:l("insights.spendingUpDesc","Up {{change}}% from last month",{change:Math.round(D)}),value:`+${Math.round(D)}%`}):D<-10&&b.push({type:"positive",icon:r.jsx(on,{size:16}),title:l("insights.spendingDown","Spending Decreased"),description:l("insights.spendingDownDesc","Down {{change}}% from last month",{change:Math.abs(Math.round(D))}),value:`${Math.round(D)}%`})}if(e.length>0){const D=e[0];D.percentage>40&&b.push({type:"neutral",icon:r.jsx(nn,{size:16}),title:l("insights.topCategory","Top Category: {{category}}",{category:l(`category.${D.category}`,D.category)}),description:l("insights.topCategoryDesc","{{percentage}}% of your spending",{percentage:Math.round(D.percentage)}),value:mt(D.amount)})}return e.forEach(D=>{if(D.previous_amount&&D.previous_amount>0){const k=(D.amount-D.previous_amount)/D.previous_amount*100;k>50&&D.amount>a*.1&&b.push({type:"warning",icon:r.jsx(nn,{size:16}),title:l("insights.unusualSpending","Unusual: {{category}}",{category:l(`category.${D.category}`,D.category)}),description:l("insights.unusualSpendingDesc","Up {{change}}% vs last month",{change:Math.round(k)}),value:mt(D.amount)})}}),b.slice(0,3)},[e,t,a,s,i,l]);return x.length===0?null:r.jsxs(Me,{className:"overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:l("insights.title","Spending Insights")}),r.jsx("button",{onClick:p,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":l("button.dismiss","Dismiss"),children:r.jsx(Bt,{size:14})})]}),r.jsx("div",{className:"space-y-3",children:x.map((b,A)=>r.jsxs("div",{className:te("flex items-start gap-3 p-3 rounded-lg transition-colors",b.type==="warning"&&"bg-amber-50 dark:bg-amber-900/20",b.type==="positive"&&"bg-green-50 dark:bg-green-900/20",b.type==="neutral"&&"bg-gray-50 dark:bg-gray-800/50"),children:[r.jsx("div",{className:te("p-1.5 rounded-full flex-shrink-0",b.type==="warning"&&"bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-400",b.type==="positive"&&"bg-green-100 text-green-600 dark:bg-green-800 dark:text-green-400",b.type==="neutral"&&"bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-400"),children:b.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsx("span",{className:"font-medium text-gray-900 dark:text-gray-100 text-sm truncate",children:b.title}),b.value&&r.jsx("span",{className:te("text-sm font-semibold flex-shrink-0",b.type==="warning"&&"text-amber-600 dark:text-amber-400",b.type==="positive"&&"text-green-600 dark:text-green-400",b.type==="neutral"&&"text-gray-600 dark:text-gray-400"),children:b.value})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:b.description})]})]},A))})]})}function h0({currentMonth:e,previousMonth:t}){const{t:a}=we("common"),s=g.useMemo(()=>{if(!t)return[];const i=(p,y,x=!1)=>{const b=p-y,A=y>0?b/y*100:0,D=Math.abs(A)<1,k=x?b<0:b>0;return{change:b,changePercent:A,isPositive:k,isNeutral:D}},l=i(e.income,t.income),d=i(e.expenses,t.expenses,!0),u=i(e.net,t.net);return[{label:a("comparison.income","Income"),current:e.income,previous:t.income,...l},{label:a("comparison.expenses","Expenses"),current:e.expenses,previous:t.expenses,...d},{label:a("comparison.savings","Savings"),current:e.net,previous:t.net,...u}]},[e,t,a]);return t?r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ws,{size:16,className:"text-gray-400"}),r.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:a("comparison.title","Month vs Month")})]}),r.jsx("div",{className:"space-y-4",children:s.map(i=>r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:i.label}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-semibold text-gray-900 dark:text-gray-100",children:mt(i.current)}),!i.isNeutral&&r.jsxs("span",{className:te("flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full",i.isPositive?"bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400"),children:[i.isPositive?r.jsx(Ct,{size:10}):r.jsx(on,{size:10}),i.changePercent>0?"+":"",Math.round(i.changePercent),"%"]}),i.isNeutral&&r.jsxs("span",{className:"flex items-center gap-0.5 text-xs px-1.5 py-0.5 rounded-full bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:[r.jsx(Qi,{size:10}),"0%"]})]})]}),r.jsxs("div",{className:"flex items-center gap-2 h-2",children:[r.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gray-300 dark:bg-gray-600 rounded-full transition-all duration-500",style:{width:`${Math.min(100,Math.max(0,i.previous/Math.max(i.current,i.previous)*100))}%`}})}),r.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:r.jsx("div",{className:te("h-full rounded-full transition-all duration-500",i.isPositive?"bg-green-500":i.isNeutral?"bg-gray-400":"bg-red-500"),style:{width:`${Math.min(100,Math.max(0,i.current/Math.max(i.current,i.previous)*100))}%`}})})]}),r.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[r.jsx("span",{children:a("comparison.lastMonth","Last month")}),r.jsx("span",{children:a("comparison.thisMonth","This month")})]})]})},i.label))})]}):null}function m0({income:e,expense:t,savingsRate:a,budgetCategories:s=[],goals:i=[]}){const{t:l}=we("common"),d=g.useMemo(()=>{const u=[];t>e&&e>0&&u.push({id:"overspending",type:"danger",icon:r.jsx(nn,{size:16}),title:l("alerts.overspending","Overspending Alert"),description:l("alerts.overspendingDesc","Expenses exceed income by {{amount}}",{amount:mt(t-e)})}),a<10&&a>=0&&e>0&&u.push({id:"low-savings",type:"warning",icon:r.jsx(ia,{size:16}),title:l("alerts.lowSavings","Low Savings Rate"),description:l("alerts.lowSavingsDesc","Only saving {{rate}}% of income",{rate:Math.round(a)})});const p=s.filter(x=>x.spent>x.allocated&&x.allocated>0);if(p.length>0){const x=p.reduce((b,A)=>A.spent-A.allocated>b.spent-b.allocated?A:b);u.push({id:"budget-exceeded",type:"warning",icon:r.jsx(Ct,{size:16}),title:l("alerts.budgetExceeded","Budget Exceeded"),description:l("alerts.budgetExceededDesc","{{category}} is {{amount}} over budget",{category:l(`category.${x.category}`,x.category),amount:mt(x.spent-x.allocated)})})}const y=new Date;return i.forEach(x=>{if(x.deadline){const b=new Date(x.deadline),A=Math.ceil((b.getTime()-y.getTime())/(1e3*60*60*24)),D=x.target>0?x.current/x.target*100:0;A<=30&&A>0&&D<80&&u.push({id:`goal-${x.name}`,type:"info",icon:r.jsx(Tn,{size:16}),title:l("alerts.goalDeadline","Goal Deadline"),description:l("alerts.goalDeadlineDesc","{{name}}: {{days}} days left, {{progress}}% complete",{name:x.name,days:A,progress:Math.round(D)})})}}),u.slice(0,3)},[e,t,a,s,i,l]);return d.length===0?null:r.jsxs(Me,{className:"overflow-hidden border-l-4 border-l-amber-500",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(_u,{size:16,className:"text-amber-500"}),r.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:l("alerts.title","Smart Alerts")}),r.jsx("span",{className:"ml-auto px-2 py-0.5 text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400 rounded-full",children:d.length})]}),r.jsx("div",{className:"space-y-3",children:d.map(u=>r.jsxs("div",{className:te("flex items-start gap-3 p-3 rounded-lg",u.type==="danger"&&"bg-red-50 dark:bg-red-900/20",u.type==="warning"&&"bg-amber-50 dark:bg-amber-900/20",u.type==="info"&&"bg-blue-50 dark:bg-blue-900/20"),children:[r.jsx("div",{className:te("p-1.5 rounded-full flex-shrink-0",u.type==="danger"&&"bg-red-100 text-red-600 dark:bg-red-800 dark:text-red-400",u.type==="warning"&&"bg-amber-100 text-amber-600 dark:bg-amber-800 dark:text-amber-400",u.type==="info"&&"bg-blue-100 text-blue-600 dark:bg-blue-800 dark:text-blue-400"),children:u.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("span",{className:te("font-medium text-sm",u.type==="danger"&&"text-red-800 dark:text-red-300",u.type==="warning"&&"text-amber-800 dark:text-amber-300",u.type==="info"&&"text-blue-800 dark:text-blue-300"),children:u.title}),r.jsx("p",{className:te("text-xs mt-0.5",u.type==="danger"&&"text-red-600 dark:text-red-400",u.type==="warning"&&"text-amber-600 dark:text-amber-400",u.type==="info"&&"text-blue-600 dark:text-blue-400"),children:u.description})]})]},u.id))})]})}function p0({onAddTransaction:e,onScanReceipt:t,className:a}){const{t:s}=we("common"),i=jt(),l=e||(()=>i({to:"/transactions"})),d=t||(()=>i({to:"/transactions"})),u=[{icon:r.jsx(Ks,{size:20}),label:s("quickActions.addTransaction","Add"),onClick:l,color:"bg-primary-500 text-white"},{icon:r.jsx(Eu,{size:20}),label:s("quickActions.scan","Scan"),onClick:d,color:"bg-purple-500 text-white"},{icon:r.jsx(ir,{size:20}),label:s("quickActions.upload","Upload"),to:"/upload",color:"bg-blue-500 text-white"},{icon:r.jsx(qs,{size:20}),label:s("quickActions.analytics","Analytics"),to:"/analytics",color:"bg-green-500 text-white"},{icon:r.jsx(ia,{size:20}),label:s("quickActions.accounts","Accounts"),to:"/accounts",color:"bg-orange-500 text-white"},{icon:r.jsx(Tn,{size:20}),label:s("quickActions.goals","Goals"),to:"/goals",color:"bg-pink-500 text-white"}];return r.jsx("div",{className:te("overflow-x-auto scrollbar-hide -mx-4 px-4",a),children:r.jsx("div",{className:"flex gap-3 pb-2 min-w-max",children:u.map((p,y)=>{const x=r.jsxs("div",{className:"flex flex-col items-center gap-1.5",children:[r.jsx("div",{className:te("w-12 h-12 rounded-full flex items-center justify-center","transition-transform active:scale-95",p.color),children:p.icon}),r.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:p.label})]});return p.to?r.jsx(Ve,{to:p.to,className:"flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-xl p-1",children:x},y):r.jsx("button",{onClick:p.onClick,className:"flex-shrink-0 focus:outline-none focus-visible:ring-2 focus-visible:ring-primary-500 rounded-xl p-1",children:x},y)})})})}async function Xx(e){const t=new URLSearchParams;return e!=null&&e.start&&t.append("start_date",e.start),e!=null&&e.end&&t.append("end_date",e.end),(await re.get(`/api/analytics?${t.toString()}`)).data}async function g0(e=12){return(await re.get(`/api/analytics/monthly?months=${e}`)).data}async function y0(e){const t=new URLSearchParams;return e!=null&&e.start&&t.append("start_date",e.start),e!=null&&e.end&&t.append("end_date",e.end),(await re.get(`/api/analytics/categories?${t.toString()}`)).data}async function x0(e){return(await re.get("/api/dashboard/summary")).data}async function Zx(){return(await re.get("/api/analytics/insights")).data}async function b0(e=6){return(await re.get(`/api/analytics/forecast?months=${e}`)).data}function v0(){const{t:e}=we("common"),{currency:t}=fr(),{data:a}=In(),{data:s,isLoading:i,error:l}=We({queryKey:["forecast",6],queryFn:()=>b0(6),staleTime:5*60*1e3});if(i)return r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(pe,{className:"h-6 w-6 rounded"}),r.jsx(pe,{className:"h-6 w-48"})]}),r.jsx(pe,{className:"h-80 w-full rounded-lg"}),r.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[r.jsx(pe,{className:"h-20 rounded-lg"}),r.jsx(pe,{className:"h-20 rounded-lg"})]})]});if(l||!s)return r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsx(ws,{className:"w-5 h-5 text-gray-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("forecast.title")})]}),r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-gray-400 dark:text-gray-500",children:[r.jsx(nn,{className:"w-8 h-8 mb-2"}),r.jsx("p",{children:e("forecast.error")})]})]});const{months:d,summary:u,current_balance:p}=s,y=d&&d.length>0,x=d[d.length-1],b=u.end_balance-p,A=b>=0,D=u.months_until_negative!==null;return r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ws,{className:"w-5 h-5 text-primary-500"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("forecast.title")})]}),D&&r.jsxs("div",{className:"flex items-center gap-1 text-sm text-amber-600 dark:text-amber-400",children:[r.jsx(nn,{className:"w-4 h-4"}),r.jsx("span",{children:e("forecast.warningNegative",{months:u.months_until_negative})})]})]}),y?r.jsx("div",{className:"h-80",role:"img","aria-label":e("forecast.chartLabel"),children:r.jsx(e0,{data:d})}):r.jsx("div",{className:"flex items-center justify-center h-80 text-gray-400 dark:text-gray-500",children:e("forecast.noData")}),y&&r.jsxs("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{className:te("p-4 rounded-lg",A?"bg-green-50 dark:bg-green-900/20":"bg-red-50 dark:bg-red-900/20"),children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e("forecast.projectedBalance",{month:x==null?void 0:x.month.split("-")[1]})}),r.jsx("p",{className:te("text-2xl font-bold",A?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:mt(u.end_balance,t,(a==null?void 0:a.rates)||{},!1)}),r.jsxs("div",{className:te("flex items-center gap-1 mt-1 text-sm",A?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[A?r.jsx(Ct,{className:"w-4 h-4"}):r.jsx(on,{className:"w-4 h-4"}),r.jsxs("span",{children:[A?"+":"",mt(b,t,(a==null?void 0:a.rates)||{},!1)]})]})]}),r.jsxs("div",{className:"p-4 rounded-lg bg-gray-50 dark:bg-gray-800/50",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:e("forecast.avgMonthlySavings")}),r.jsxs("p",{className:te("text-2xl font-bold",u.avg_monthly_net>=0?"text-gray-900 dark:text-gray-100":"text-red-600 dark:text-red-400"),children:[u.avg_monthly_net>=0?"+":"",mt(u.avg_monthly_net,t,(a==null?void 0:a.rates)||{},!1)]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:e("forecast.perMonth")})]})]})]})}function w0(){const{t:e}=we("common"),[t,a]=g.useState(!1);g.useEffect(()=>{localStorage.getItem("onboarding_dismissed")==="true"&&a(!0)},[]);const{data:s=[]}=We({queryKey:["accounts"],queryFn:()=>yl()}),{data:i=[]}=We({queryKey:["transactions-check"],queryFn:()=>fl()}),{data:l=[]}=We({queryKey:["goals"],queryFn:Bc}),d=s.length>0,u=i.length>0,p=l.length>0,y=[{id:"account",titleKey:"onboarding.steps.account.title",descriptionKey:"onboarding.steps.account.description",icon:r.jsx(ia,{className:"h-5 w-5"}),link:"/accounts",isComplete:d},{id:"upload",titleKey:"onboarding.steps.upload.title",descriptionKey:"onboarding.steps.upload.description",icon:r.jsx(ir,{className:"h-5 w-5"}),link:"/upload",isComplete:u},{id:"goals",titleKey:"onboarding.steps.goals.title",descriptionKey:"onboarding.steps.goals.description",icon:r.jsx(Tn,{className:"h-5 w-5"}),link:"/goals",isComplete:p}],x=y.filter(k=>k.isComplete).length,b=x===y.length,A=Math.round(x/y.length*100);if(t||b)return null;const D=()=>{localStorage.setItem("onboarding_dismissed","true"),a(!0)};return r.jsxs(Me,{className:"mb-6 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-950 dark:to-blue-950 border-primary-200 dark:border-primary-800",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:r.jsx(Fs,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("onboarding.title")}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("onboarding.subtitle",{completed:x,total:y.length})})]})]}),r.jsx("button",{onClick:D,className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":e("button.close"),children:r.jsx(Bt,{className:"h-5 w-5"})})]}),r.jsx("div",{className:"mb-4",children:r.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${A}%`}})})}),r.jsx("div",{className:"space-y-2",children:y.map(k=>r.jsxs(Ve,{to:k.link,className:`flex items-center gap-3 p-3 rounded-lg transition-colors ${k.isComplete?"bg-green-50 dark:bg-green-950/50":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-750"}`,children:[r.jsx("div",{className:`p-2 rounded-full ${k.isComplete?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"}`,children:k.isComplete?r.jsx(Cu,{className:"h-5 w-5"}):k.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:`font-medium ${k.isComplete?"text-green-700 dark:text-green-400 line-through":"text-gray-900 dark:text-gray-100"}`,children:e(k.titleKey)}),r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e(k.descriptionKey)})]}),!k.isComplete&&r.jsx(Xi,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]},k.id))})]})}function Fi({icon:e,title:t,description:a,action:s,className:i,compact:l=!1}){return r.jsxs("div",{className:te("flex flex-col items-center justify-center px-4",l?"py-6":"py-12",i),children:[e&&r.jsx("div",{className:te("flex items-center justify-center rounded-full bg-gray-100 dark:bg-gray-800",l?"w-12 h-12 mb-3":"w-16 h-16 mb-4"),children:r.jsx("div",{className:te("text-gray-400 dark:text-gray-500",l?"[&>svg]:w-6 [&>svg]:h-6":"[&>svg]:w-8 [&>svg]:h-8"),children:e})}),r.jsx("h3",{className:te("font-medium text-gray-700 dark:text-gray-300 text-center",l?"text-sm mb-1":"text-lg mb-2"),children:t}),a&&r.jsx("p",{className:te("text-gray-500 dark:text-gray-400 text-center max-w-sm",l?"text-xs mb-3":"text-sm mb-4"),children:a}),s&&r.jsx("div",{className:l?"mt-1":"mt-2",children:s})]})}function j0(){return r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx(pe,{className:"w-40 h-8 mb-2"}),r.jsx(pe,{className:"w-56 h-5"})]}),r.jsx(Hg,{className:"mb-6"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[r.jsx(xs,{}),r.jsx(xs,{}),r.jsx(xs,{})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[r.jsxs(Me,{className:"lg:col-span-2 h-80",children:[r.jsx(pe,{className:"w-32 h-5 mb-4"}),r.jsx(pe,{className:"w-full h-56"})]}),r.jsxs(Me,{children:[r.jsx(pe,{className:"w-28 h-5 mb-4"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx(pe,{className:"w-full h-12 rounded-lg"}),r.jsx(pe,{className:"w-full h-12 rounded-lg"}),r.jsx(pe,{className:"w-full h-12 rounded-lg"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Me,{children:[r.jsx(pe,{className:"w-40 h-5 mb-6"}),r.jsx(Vg,{})]}),r.jsxs(Me,{children:[r.jsx(pe,{className:"w-36 h-5 mb-6"}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(Ii,{}),r.jsx(Ii,{})]})]})]})]})}const k0={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},N0=(e,t,a)=>{a=a||{};let s;const i=k0[e];return typeof i=="string"?s=i:t===1?a.addSuffix&&i.oneWithSuffix?s=i.oneWithSuffix:s=i.one:a.addSuffix&&i.otherWithSuffix?s=i.otherWithSuffix.replace("{{count}}",String(t)):s=i.other.replace("{{count}}",String(t)),a.addSuffix?a.comparison&&a.comparison>0?s+"":s+"":s},S0={full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},_0={full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},E0={full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},C0={date:Xa({formats:S0,defaultWidth:"full"}),time:Xa({formats:_0,defaultWidth:"full"}),dateTime:Xa({formats:E0,defaultWidth:"full"})},P0={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},A0=(e,t,a,s)=>P0[e],R0={narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},O0={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},T0={narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},$0={narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},D0={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},M0={narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},I0=(e,t)=>{const a=Number(e);switch(String(t==null?void 0:t.unit)){case"year":return`${a}`;case"quarter":return`${a}`;case"month":return`${a}`;case"week":return`${a}`;case"date":return`${a}`;case"hour":return`${a}`;case"minute":return`${a}`;case"second":return`${a}`;default:return`${a}`}},L0={ordinalNumber:I0,era:Xn({values:R0,defaultWidth:"wide"}),quarter:Xn({values:O0,defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:Xn({values:T0,defaultWidth:"wide"}),day:Xn({values:$0,defaultWidth:"wide"}),dayPeriod:Xn({values:D0,defaultWidth:"wide",formattingValues:M0,defaultFormattingWidth:"wide"})},F0=/^?\d+(|||||||)?/i,B0=/\d+/i,K0={narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},q0={narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},z0={narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},U0={any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},W0={narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},V0={any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},H0={narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},G0={any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},Y0={any:/^(AM|PM|||||||)/i},J0={any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},Q0={ordinalNumber:Bu({matchPattern:F0,parsePattern:B0,valueCallback:function(e){return parseInt(e,10)}}),era:Zn({matchPatterns:K0,defaultMatchWidth:"wide",parsePatterns:q0,defaultParseWidth:"any"}),quarter:Zn({matchPatterns:z0,defaultMatchWidth:"wide",parsePatterns:U0,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Zn({matchPatterns:W0,defaultMatchWidth:"wide",parsePatterns:V0,defaultParseWidth:"any"}),day:Zn({matchPatterns:H0,defaultMatchWidth:"wide",parsePatterns:G0,defaultParseWidth:"any"}),dayPeriod:Zn({matchPatterns:Y0,defaultMatchWidth:"any",parsePatterns:J0,defaultParseWidth:"any"})},X0={code:"ja",formatDistance:N0,formatLong:C0,formatRelative:A0,localize:L0,match:Q0,options:{weekStartsOn:0,firstWeekContainsDate:1}};function no(e,t="yyyy/MM/dd"){try{const a=typeof e=="string"?Ku(e):e;return qu(a)?Zi(a,t,{locale:X0}):"---"}catch{return"---"}}function eb(e){return no(e,"yyyyMd HH:mm")}function Z0(e){return no(e,"yyyyM")}function tb(){const e=new Date,t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0");return{start:`${t}-${a}-01`,end:Zi(new Date(t,e.getMonth()+1,0),"yyyy-MM-dd")}}function nb(e){return no(e,"MMM d (EEE)")}async function ey(e){return(await re.post("/api/proxy/purchase",e)).data}async function ty(){return(await re.get("/api/proxy/outstanding")).data}async function ny(e){return(await re.post("/api/proxy/settle",e)).data}function bs(e){const t=e.replace(/[^\d]/g,"");return t?parseInt(t).toLocaleString("en-US"):""}function _n(e){return parseInt(e.replace(/[,.\s]/g,""),10)||0}function ry({isOpen:e,onClose:t}){const{t:a}=we("common"),s=or(),{data:i=[]}=to(),{data:l}=In(),[d,u]=g.useState(1),[p,y]=g.useState(null),[x,b]=g.useState(""),[A,D]=g.useState(""),[k,E]=g.useState(null),[$,B]=g.useState(new Date().toISOString().split("T")[0]),[z,W]=g.useState(""),[V,ae]=g.useState(""),[J,X]=g.useState(""),[ce,_e]=g.useState({}),Te=g.useMemo(()=>i.filter(G=>G.type==="receivable"&&G.is_active),[i]),ie=g.useMemo(()=>i.filter(G=>G.type!=="receivable"&&G.is_active),[i]),fe=g.useMemo(()=>{var G;return(G=l==null?void 0:l.rates)!=null&&G.VND?l.rates.VND:170},[l]),Ne=_n(A),$e=_n(z),Ue=parseFloat(V)||fe,Pe=$e*Ue,Qe=$e-Ne,Ae=Ne>0?(Qe/Ne*100).toFixed(1):"0";g.useEffect(()=>{e&&(u(1),y(null),b(""),D(""),E(null),B(new Date().toISOString().split("T")[0]),W(""),ae(fe.toFixed(1)),X(""),_e({}))},[e,fe]),g.useEffect(()=>{!V&&fe&&ae(fe.toFixed(1))},[fe]);const Be=()=>{const G={};return p||(G.client=a("proxy.errors.clientRequired")),x.trim()||(G.item=a("proxy.errors.itemRequired")),(!A||_n(A)<=0)&&(G.cost=a("proxy.errors.costRequired")),k||(G.payment=a("proxy.errors.paymentRequired")),_e(G),Object.keys(G).length===0},Ke=()=>{const G={};return(!z||_n(z)<=0)&&(G.markup=a("proxy.errors.markupRequired")),(!V||parseFloat(V)<=0)&&(G.rate=a("proxy.errors.rateRequired")),_e(G),Object.keys(G).length===0},Ee=()=>{Be()&&(z||W(A),u(2))},q=oa({mutationFn:ey,onSuccess:()=>{s.invalidateQueries({queryKey:["transactions"]}),s.invalidateQueries({queryKey:["accounts"]}),s.invalidateQueries({queryKey:["proxy-outstanding"]}),t()}}),de=()=>{Ke()&&q.mutate({client_account_id:p,item:x.trim(),cost:_n(A),payment_account_id:k,markup_price:_n(z),exchange_rate:parseFloat(V),purchase_date:$,notes:J.trim()||void 0})},he=Te.find(G=>G.id===p);if(!e)return null;const le=r.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Pu,{className:"w-5 h-5 text-blue-500"}),r.jsx("h2",{className:"text-lg font-semibold",children:a("proxy.title")})]}),r.jsx("button",{onClick:t,className:"p-2.5 -mr-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Bt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"px-4 pt-4",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mb-2",children:[r.jsx("span",{children:a("proxy.step",{current:d,total:2})}),r.jsx("span",{children:""}),r.jsx("span",{children:a(d===1?"proxy.step1Title":"proxy.step2Title")})]}),r.jsxs("div",{className:"flex gap-1",children:[r.jsx("div",{className:te("h-1 flex-1 rounded",d>=1?"bg-blue-500":"bg-gray-200 dark:bg-gray-700")}),r.jsx("div",{className:te("h-1 flex-1 rounded",d>=2?"bg-blue-500":"bg-gray-200 dark:bg-gray-700")})]})]}),r.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:d===1?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a("proxy.client")," *"]}),r.jsxs("select",{value:p||"",onChange:G=>y(Number(G.target.value)||null),className:te("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",ce.client?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[r.jsx("option",{value:"",children:a("proxy.selectClient")}),Te.map(G=>r.jsx("option",{value:G.id,children:G.name.replace("Receivable: ","")},G.id))]}),ce.client&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.client}),Te.length===0&&r.jsx("p",{className:"text-amber-600 text-xs mt-1",children:a("proxy.noClients")})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a("proxy.item")," *"]}),r.jsx(ot,{value:x,onChange:G=>b(G.target.value),placeholder:a("proxy.itemPlaceholder"),className:ce.item?"border-red-500":""}),ce.item&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.item})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a("proxy.cost")," *"]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),r.jsx(ot,{value:A,onChange:G=>D(bs(G.target.value)),placeholder:"1,000",className:te("pl-8",ce.cost?"border-red-500":""),inputMode:"numeric"})]}),ce.cost&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.cost})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a("proxy.paymentMethod")," *"]}),r.jsxs("select",{value:k||"",onChange:G=>E(Number(G.target.value)||null),className:te("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",ce.payment?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[r.jsx("option",{value:"",children:a("proxy.selectPayment")}),ie.map(G=>r.jsx("option",{value:G.id,children:G.name},G.id))]}),ce.payment&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.payment})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:a("proxy.purchaseDate")}),r.jsx(ot,{type:"date",value:$,onChange:G=>B(G.target.value)})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{children:""}),r.jsx("span",{className:"font-medium",children:x})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400 mt-1",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:[a("proxy.yourCost"),": ",A]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsx("span",{children:""}),r.jsxs("span",{children:[a("proxy.client"),": ",he==null?void 0:he.name.replace("Receivable: ","")]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[a("proxy.markupPrice")," *"]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),r.jsx(ot,{value:z,onChange:G=>W(bs(G.target.value)),placeholder:"1,200",className:te("pl-8",ce.markup?"border-red-500":""),inputMode:"numeric"})]}),ce.markup&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.markup}),r.jsx("div",{className:"flex gap-2 mt-2",children:[10,15,20].map(G=>r.jsxs("button",{type:"button",onClick:()=>W(bs(String(Math.round(Ne*(1+G/100))))),className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 rounded hover:bg-gray-200 dark:hover:bg-gray-600",children:["+",G,"%"]},G))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:a("proxy.exchangeRate")}),r.jsxs("div",{className:"relative",children:[r.jsx(ot,{value:V,onChange:G=>ae(G.target.value),placeholder:"170",className:ce.rate?"border-red-500":"",inputMode:"decimal"}),r.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 text-sm",children:"VND/JPY"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a("proxy.currentRate"),": ",fe.toFixed(1)," VND/JPY"]}),ce.rate&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:ce.rate})]}),r.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[r.jsxs("span",{children:[a("proxy.clientPays"),":"]}),r.jsxs("span",{className:"font-bold",children:["",Pe.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[r.jsxs("span",{children:[a("proxy.yourProfit"),":"]}),r.jsxs("span",{className:te("font-bold",Qe>=0?"text-green-600":"text-red-600"),children:["",Qe.toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{children:[a("proxy.profitMargin"),":"]}),r.jsxs("span",{className:"font-medium",children:[Ae,"%"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:a("proxy.notes")}),r.jsx("textarea",{value:J,onChange:G=>X(G.target.value),placeholder:a("proxy.notesPlaceholder"),className:"w-full px-3 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 resize-none",rows:2})]})]})}),r.jsx("div",{className:"flex justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:d===1?r.jsxs(r.Fragment,{children:[r.jsx(Ze,{variant:"secondary",onClick:t,children:a("button.cancel")}),r.jsxs(Ze,{onClick:Ee,disabled:Te.length===0,children:[a("button.next")," ",r.jsx(Au,{className:"w-4 h-4 ml-1"})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs(Ze,{variant:"secondary",onClick:()=>u(1),children:[r.jsx(Ru,{className:"w-4 h-4 mr-1"})," ",a("button.back")]}),r.jsx(Ze,{onClick:de,disabled:q.isPending,children:q.isPending?a("button.creating"):a("proxy.createPurchase")})]})})]})]});return typeof document>"u"?null:Pt.createPortal(le,document.body)}function Bi(e){const t=e.replace(/[^\d]/g,"");return t?parseInt(t).toLocaleString("en-US"):""}function Ki(e){return parseInt(e.replace(/[,.\s]/g,""),10)||0}function ay({isOpen:e,onClose:t,client:a}){const{t:s}=we("common"),i=or(),{data:l=[]}=to(),[d,u]=g.useState(new Set),[p,y]=g.useState(null),[x,b]=g.useState(""),[A,D]=g.useState(new Date().toISOString().split("T")[0]),[k,E]=g.useState({}),$=g.useMemo(()=>l.filter(ie=>ie.type!=="receivable"&&ie.is_active),[l]),B=g.useMemo(()=>a?a.items.filter(ie=>d.has(ie.transaction_id)):[],[a,d]),z=B.reduce((ie,fe)=>ie+fe.amount_jpy,0),W=B.reduce((ie,fe)=>ie+fe.charge_vnd,0);g.useEffect(()=>{e&&a&&(u(new Set(a.items.map(ie=>ie.transaction_id))),y(null),b(""),D(new Date().toISOString().split("T")[0]),E({}))},[e,a]),g.useEffect(()=>{W>0&&b(Bi(String(W)))},[W]);const V=ie=>{u(fe=>{const Ne=new Set(fe);return Ne.has(ie)?Ne.delete(ie):Ne.add(ie),Ne})},ae=()=>{a&&u(new Set(a.items.map(ie=>ie.transaction_id)))},J=()=>u(new Set),X=()=>{const ie={};return d.size===0&&(ie.items=s("proxy.errors.selectItems")),p||(ie.receive=s("proxy.errors.receiveRequired")),(!x||Ki(x)<=0)&&(ie.amount=s("proxy.errors.amountRequired")),E(ie),Object.keys(ie).length===0},ce=oa({mutationFn:ny,onSuccess:()=>{i.invalidateQueries({queryKey:["transactions"]}),i.invalidateQueries({queryKey:["accounts"]}),i.invalidateQueries({queryKey:["proxy-outstanding"]}),t()}}),_e=()=>{!X()||!a||ce.mutate({client_account_id:a.client_id,transaction_ids:Array.from(d),receive_account_id:p,vnd_amount:Ki(x),payment_date:A})};if(!e||!a)return null;const Te=r.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50",onClick:t}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-md max-h-[90vh] overflow-hidden",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ou,{className:"w-5 h-5 text-green-500"}),r.jsx("h2",{className:"text-lg font-semibold",children:s("proxy.settleTitle")})]}),r.jsx("button",{onClick:t,className:"p-2.5 -mr-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg",children:r.jsx(Bt,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:s("proxy.client")}),r.jsx("p",{className:"font-semibold text-lg",children:a.client_name}),r.jsxs("p",{className:"text-sm text-gray-500",children:[s("proxy.outstanding"),": ",a.total_jpy.toLocaleString()]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{className:"block text-sm font-medium",children:s("proxy.selectItemsToSettle")}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:ae,className:"text-xs text-blue-500 hover:underline",children:s("proxy.selectAll")}),r.jsx("button",{onClick:J,className:"text-xs text-blue-500 hover:underline",children:s("proxy.selectNone")})]})]}),r.jsx("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg max-h-40 overflow-y-auto",children:a.items.map(ie=>r.jsxs("label",{className:te("flex items-center gap-3 p-3 cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700/50","border-b border-gray-100 dark:border-gray-700 last:border-0"),children:[r.jsx("input",{type:"checkbox",checked:d.has(ie.transaction_id),onChange:()=>V(ie.transaction_id),className:"rounded border-gray-300 text-blue-600"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium truncate",children:ie.item}),r.jsx("p",{className:"text-xs text-gray-500",children:ie.date})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-mono text-sm",children:["",ie.amount_jpy.toLocaleString()]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["",ie.charge_vnd.toLocaleString()]})]})]},ie.transaction_id))}),k.items&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:k.items})]}),r.jsx("div",{className:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg mb-4",children:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{children:[s("proxy.settlementAmount")," (JPY):"]}),r.jsxs("span",{className:"font-bold",children:["",z.toLocaleString()]})]})}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[s("proxy.receiveTo")," *"]}),r.jsxs("select",{value:p||"",onChange:ie=>y(Number(ie.target.value)||null),className:te("w-full px-3 py-2 rounded-lg border bg-white dark:bg-gray-700",k.receive?"border-red-500":"border-gray-300 dark:border-gray-600"),children:[r.jsx("option",{value:"",children:s("proxy.selectAccount")}),$.map(ie=>r.jsxs("option",{value:ie.id,children:[ie.name," (",ie.currency,")"]},ie.id))]}),k.receive&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:k.receive})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("label",{className:"block text-sm font-medium mb-1",children:[s("proxy.amountReceived")," *"]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500",children:""}),r.jsx(ot,{value:x,onChange:ie=>b(Bi(ie.target.value)),placeholder:"544,000",className:te("pl-8",k.amount?"border-red-500":""),inputMode:"numeric"})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[s("proxy.expected"),": ",W.toLocaleString()]}),k.amount&&r.jsx("p",{className:"text-red-500 text-xs mt-1",children:k.amount})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium mb-1",children:s("proxy.paymentDate")}),r.jsx(ot,{type:"date",value:A,onChange:ie=>D(ie.target.value)})]})]}),r.jsxs("div",{className:"flex justify-between p-4 border-t border-gray-200 dark:border-gray-700",children:[r.jsx(Ze,{variant:"secondary",onClick:t,children:s("button.cancel")}),r.jsx(Ze,{onClick:_e,disabled:ce.isPending||d.size===0,children:ce.isPending?s("button.processing"):s("proxy.confirmPayment")})]})]})]});return typeof document>"u"?null:Pt.createPortal(Te,document.body)}function sy(){const{t:e}=we("common"),[t,a]=g.useState(!1),[s,i]=g.useState(null),{data:l=[],isLoading:d}=We({queryKey:["proxy-outstanding"],queryFn:ty}),u=l.reduce((y,x)=>y+x.total_jpy,0),p=y=>{if(!y)return 0;const x=new Date(y);return Math.floor((new Date().getTime()-x.getTime())/(1e3*60*60*24))};return d?r.jsx(Me,{className:"animate-pulse",children:r.jsx("div",{className:"h-32 bg-gray-200 dark:bg-gray-700 rounded"})}):l.length===0?null:r.jsxs(r.Fragment,{children:[r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Tu,{className:"w-5 h-5 text-blue-500"}),r.jsx("h3",{className:"font-semibold",children:e("proxy.outstandingReceivables")})]}),r.jsxs("button",{onClick:()=>a(!0),className:"flex items-center gap-1 text-sm text-blue-500 hover:text-blue-600",children:[r.jsx(Ks,{className:"w-4 h-4"}),e("proxy.newPurchase")]})]}),r.jsx("div",{className:"space-y-2",children:l.map(y=>{const x=p(y.oldest_date);return r.jsxs("button",{onClick:()=>i(y),className:"w-full flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors text-left",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-medium",children:y.client_name}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[y.item_count," ",e("proxy.items"),x>0&&`  ${e("proxy.oldestDays",{days:x})}`]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("div",{className:"text-right",children:[r.jsxs("p",{className:"font-mono font-semibold",children:["",y.total_jpy.toLocaleString()]}),r.jsxs("p",{className:"text-xs text-gray-500",children:["",y.total_vnd.toLocaleString()]})]}),r.jsx(Xi,{className:"w-4 h-4 text-gray-400"})]})]},y.client_id)})}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-gray-500",children:[e("proxy.total"),":"]}),r.jsxs("span",{className:"font-bold",children:["",u.toLocaleString()]})]})})]}),r.jsx(ry,{isOpen:t,onClose:()=>a(!1)}),r.jsx(ay,{isOpen:!!s,onClose:()=>i(null),client:s})]})}function oy(){var A,D,k,E,$,B,z,W,V,ae,J;const{t:e}=we("common"),{data:t,isLoading:a}=We({queryKey:["dashboard-summary"],queryFn:()=>x0()}),{data:s,isLoading:i}=We({queryKey:["monthly-trends",12],queryFn:()=>g0(12)}),{data:l,isLoading:d}=We({queryKey:["category-breakdown"],queryFn:()=>y0()}),{data:u,isLoading:p}=We({queryKey:["goals"],queryFn:Bc}),{data:y,isLoading:x}=We({queryKey:["goals-progress",u==null?void 0:u.map(X=>X.id)],queryFn:async()=>!u||u.length===0?[]:Promise.all(u.map(X=>am(X.id,!0))),enabled:!!u&&u.length>0});return a||i||d||p?r.jsx(j0,{}):r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:e("dashboard.title")}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("dashboard.subtitle",{month:Z0(new Date)})})]}),r.jsx(w0,{}),r.jsx(l0,{monthlyNet:t==null?void 0:t.net,monthlyNetChange:t==null?void 0:t.net_change}),r.jsx("div",{className:"lg:hidden mb-6",children:r.jsx(p0,{})}),s&&s.length>0&&r.jsx("div",{className:"mb-6",children:r.jsx(m0,{income:((A=s[s.length-1])==null?void 0:A.income)||0,expense:((D=s[s.length-1])==null?void 0:D.expenses)||0,savingsRate:((k=s[s.length-1])==null?void 0:k.income)>0?(((E=s[s.length-1])==null?void 0:E.income)-(($=s[s.length-1])==null?void 0:$.expenses))/((B=s[s.length-1])==null?void 0:B.income)*100:0})}),r.jsx("div",{className:"mb-6",children:r.jsx(v0,{})}),r.jsx(Wg,{summary:t}),s&&s.length>0&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.jsx(d0,{income:((z=s[s.length-1])==null?void 0:z.income)||0,expense:((W=s[s.length-1])==null?void 0:W.expenses)||0,goals:(y==null?void 0:y.map(X=>({progress:X.total_saved/X.target_amount*100})))||[]}),r.jsx(f0,{categories:l||[],income:((V=s[s.length-1])==null?void 0:V.income)||0,expense:((ae=s[s.length-1])==null?void 0:ae.expenses)||0,previousExpense:s.length>1?(J=s[s.length-2])==null?void 0:J.expenses:void 0})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[r.jsx(t0,{data:s}),r.jsxs("div",{className:"space-y-6",children:[r.jsx(n0,{}),s&&s.length>1&&r.jsx(h0,{currentMonth:s[s.length-1],previousMonth:s[s.length-2]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs(Me,{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-6",children:e("dashboard.categoryBreakdown")}),l&&l.length>0?r.jsxs(r.Fragment,{children:[r.jsx(Ug,{categories:l,maxItems:4}),r.jsx(Ve,{to:"/analytics",className:"mt-6 block text-center text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.viewAllCategories")})]}):r.jsx(Fi,{icon:r.jsx(Vi,{}),title:e("dashboard.noCategories","No spending data yet"),description:e("dashboard.noCategoriesDescription","Add transactions to see your spending breakdown"),compact:!0,action:r.jsx(Ve,{to:"/transactions",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.addTransaction","Add transaction")})})]}),r.jsxs(Me,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.goalAchievability")}),r.jsx(Ve,{to:"/goals",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.viewDetails")})]}),y&&y.length>0&&!x?r.jsx("div",{className:"space-y-6",children:y.slice(0,3).map(X=>X.achievability&&r.jsx(qg,{goalId:X.goal_id,goalName:e("dashboard.yearGoal",{years:X.years}),achievability:X.achievability,targetAmount:X.target_amount,currentAmount:X.total_saved},X.goal_id))}):u&&u.length>0?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsx(pl,{size:"md"})}):r.jsx(Fi,{icon:r.jsx(Tn,{}),title:e("dashboard.noGoals","No goals yet"),description:e("dashboard.noGoalsDescription","Set financial goals to track your progress"),compact:!0,action:r.jsx(Ve,{to:"/goals",className:"text-sm font-medium text-primary-600 hover:text-primary-700",children:e("dashboard.createGoal","Create a goal")})})]})]}),r.jsx("div",{className:"mt-6",children:r.jsx(sy,{})})]})}const iy=ft("/")({component:oy}),cy=xg.update({id:"/upload",path:"/upload",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./upload.lazy-qhbkwUpj.js"),__vite__mapDeps([13,1,2,3,4,5,6])).then(e=>e.Route)),ly=bg.update({id:"/transactions",path:"/transactions",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./transactions.lazy-DYPAn6rF.js"),__vite__mapDeps([14,1,2,15,16,3,17,5,18,4,6])).then(e=>e.Route)),uy=vg.update({id:"/settings",path:"/settings",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./settings.lazy-qeQ4CMDe.js"),__vite__mapDeps([19,1,2,20,5,15,21,17,3,4,6])).then(e=>e.Route)),dy=jg.update({id:"/register",path:"/register",getParentRoute:()=>ct}),fy=kg.update({id:"/recurring",path:"/recurring",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./recurring.lazy-Cvz6NF60.js"),__vite__mapDeps([22,1,2,21,17,3,5,15,18,4,6])).then(e=>e.Route)),hy=Sg.update({id:"/login",path:"/login",getParentRoute:()=>ct}),my=Dg.update({id:"/landing",path:"/landing",getParentRoute:()=>ct}),py=Mg.update({id:"/goals",path:"/goals",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./goals.lazy-B8MiVW1r.js"),__vite__mapDeps([23,1,2,16,3,4,5,6])).then(e=>e.Route)),gy=Ig.update({id:"/budget",path:"/budget",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./budget.lazy-CkZdGL0a.js"),__vite__mapDeps([24,1,2,3,5,17,4,6])).then(e=>e.Route)),yy=Lg.update({id:"/analytics",path:"/analytics",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./analytics.lazy-CAmL8o3I.js"),__vite__mapDeps([25,1,2,8,3,4,5,6,9,0,11,7])).then(e=>e.Route)),xy=Fg.update({id:"/accounts",path:"/accounts",getParentRoute:()=>ct}).lazy(()=>et(()=>import("./accounts.lazy-DN8p8WiY.js"),__vite__mapDeps([26,1,2,3,20,5,4,6])).then(e=>e.Route)),by=iy.update({id:"/",path:"/",getParentRoute:()=>ct}),vy={IndexRoute:by,AccountsRoute:xy,AnalyticsRoute:yy,BudgetRoute:gy,GoalsRoute:py,LandingRoute:my,LoginRoute:hy,RecurringRoute:fy,RegisterRoute:dy,SettingsRoute:uy,TransactionsRoute:ly,UploadRoute:cy},wy=ct._addFileChildren(vy)._addFileTypes();function jy(){const{isOnline:e,isSyncing:t,pendingCount:a,lastError:s}=Sh(),{t:i}=we(),[l,d]=g.useState(!1);if(g.useEffect(()=>{if(e&&!t&&a===0&&!s){d(!0);const p=setTimeout(()=>d(!1),3e3);return()=>clearTimeout(p)}},[e,t,a,s]),e&&!t&&a===0&&!l&&!s)return null;const u=()=>e?s?"bg-red-500 dark:bg-red-600":t?"bg-blue-500 dark:bg-blue-600":"bg-green-500 dark:bg-green-600":"bg-gray-600 dark:bg-gray-700";return r.jsx("div",{className:"fixed top-4 right-4 z-[9999]",role:"status","aria-live":"polite",children:r.jsxs("div",{className:`
        flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg
        ${u()}
        text-white text-sm font-medium
        transition-all duration-300 ease-in-out
      `,children:[!e&&r.jsxs(r.Fragment,{children:[r.jsx($u,{size:16,"aria-hidden":"true"}),r.jsx("span",{children:i("sync.offline","Offline")}),a>0&&r.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:a})]}),e&&s&&r.jsxs(r.Fragment,{children:[r.jsx(qi,{size:16,"aria-hidden":"true"}),r.jsx("span",{children:i("sync.error","Sync error")})]}),e&&t&&r.jsxs(r.Fragment,{children:[r.jsx(Du,{size:16,className:"animate-spin","aria-hidden":"true"}),r.jsxs("span",{children:[i("sync.syncing","Syncing"),a>0&&` (${a})`]})]}),e&&!t&&!s&&l&&r.jsxs(r.Fragment,{children:[r.jsx(zi,{size:16,"aria-hidden":"true"}),r.jsx("span",{children:i("sync.synced","All synced")})]})]})})}const ky=nu({routeTree:wy});function Ny(){return r.jsxs(r.Fragment,{children:[r.jsx(jy,{}),r.jsx(ru,{router:ky})]})}Mu.use(Iu).use(Lu).use(Fu).init({fallbackLng:"ja",supportedLngs:["ja","en","vi"],defaultNS:"common",ns:["common","landing"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},debug:!1});gh().then(e=>{e||console.warn("IndexedDB initialization failed - offline features may not work")});js.createRoot(document.getElementById("root")).render(r.jsx(iu.StrictMode,{children:r.jsx(Cf,{children:r.jsx(Vu,{client:Eh,persistOptions:{persister:Th,maxAge:1e3*60*60*24,dehydrateOptions:{shouldDehydrateQuery:e=>e.state.status==="success"&&Ch([...e.queryKey])}},children:r.jsx(Nh,{children:r.jsx(Nf,{children:r.jsx(_f,{children:r.jsx(Ef,{children:r.jsx(dh,{children:r.jsx(Ny,{})})})})})})})})}));export{sm as $,Tx as A,Ze as B,Me as C,$x as D,Fi as E,Dx as F,Lx as G,Fx as H,ot as I,o0 as J,Ix as K,pl as L,Jy as M,Sf as N,dx as O,rm as P,hx as Q,ux as R,Cx as S,fx as T,qg as U,Bc as V,am as W,y0 as X,mt as Y,xx as Z,bx as _,re as a,px as a0,mx as a1,gx as a2,yx as a3,In as a4,Zx as a5,Xx as a6,Rx as a7,Ox as a8,Ax as a9,i0 as aa,Mx as ab,Pc as ac,Jx as ad,Wx as ae,Vx as af,Hx as ag,Gx as ah,Yx as ai,Qx as aj,Bx as ak,Kx as al,qx as am,Ux as an,zx as ao,c0 as ap,yl as b,te as c,wx as d,jx as e,eb as f,lx as g,Sx as h,Qy as i,_x as j,vx as k,Kg as l,hr as m,no as n,Ex as o,fr as p,tb as q,kx as r,Nx as s,ea as t,to as u,Et as v,Px as w,nb as x,Xs as y,fl as z};
