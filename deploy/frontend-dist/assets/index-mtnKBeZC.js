const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gamification.lazy-C7YXZ_BS.js","assets/vendor-tanstack-CcawFp1G.js","assets/vendor-react-Bx4JnVfy.js","assets/vendor-recharts-BRZRzmi8.js","assets/vendor-icons-DfKjTcwJ.js","assets/vendor-i18n-BrrOrGm_.js","assets/vendor-date-BkGg5e1q.js","assets/upload.lazy-BfNfyil7.js","assets/transactions.lazy-BjGmQi06.js","assets/Select-DcUiSYb5.js","assets/TransactionFormModal-BZ8uxqXa.js","assets/recurring-service-BGm_lgIw.js","assets/useAccounts-tceKLsOO.js","assets/useCategories-Dh484vPQ.js","assets/RecurringOptions-BBjMaSxz.js","assets/useXPGain-Ci0JSmV1.js","assets/settings.lazy-X1WPZj3F.js","assets/crypto-DmF1Dx7K.js","assets/RecurringTransactionsList-D01h6j1-.js","assets/recurring.lazy-NoOhmY6s.js","assets/goals.lazy-BPFUOowp.js","assets/budget.lazy-D4uefqiM.js","assets/analytics.lazy-Be5DL9ne.js","assets/accounts.lazy-C41S1xps.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,r)=>((t,n,r)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r)(t,"symbol"!=typeof n?n+"":n,r);import{h as n,d as r,j as a,Q as o,I as s,u as i,a as c,t as l,L as u,b as d,c as f,e as h,O as m,f as p,g,R as y}from"./vendor-tanstack-CcawFp1G.js";import{a as b,r as v,c as x,g as w,$ as k,b as j,R as N}from"./vendor-react-Bx4JnVfy.js";import{c as E,_}from"./vendor-recharts-BRZRzmi8.js";import{I as S,C,a as P,b as O,X as R,S as A,M as T,c as D,T as I,E as M,d as L,e as K,f as F,g as q,h as B,U as z,L as U,H as $,W,R as V,P as G,i as H,j as Y,k as J,l as X,m as Q,n as Z,o as ee,p as te,B as ne,G as re,q as ae,r as oe,s as se,t as ie,u as ce,v as le,w as ue,x as de,A as fe,y as he,z as me,D as pe}from"./vendor-icons-DfKjTcwJ.js";import{u as ge,i as ye,B as be,a as ve,b as xe}from"./vendor-i18n-BrrOrGm_.js";import{b as we,a as ke,c as je,d as Ne,p as Ee,i as _e,f as Se}from"./vendor-date-BkGg5e1q.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ce={},Pe=b;Ce.createRoot=Pe.createRoot,Ce.hydrateRoot=Pe.hydrateRoot;var Oe=["added","removed","updated"];function Re(e){return Oe.includes(e)}async function Ae({queryClient:e,persister:t,buster:n="",dehydrateOptions:a}){const o={buster:n,timestamp:Date.now(),clientState:r(e,a)};await t.persistClient(o)}var Te=({children:e,persistOptions:t,onSuccess:r,onError:i,...c})=>{const[l,u]=v.useState(!0),d=v.useRef({persistOptions:t,onSuccess:r,onError:i}),f=v.useRef(!1);return v.useEffect(()=>{d.current={persistOptions:t,onSuccess:r,onError:i}}),v.useEffect(()=>{const e={...d.current.persistOptions,queryClient:c.client};return f.current||(f.current=!0,async function({queryClient:e,persister:t,maxAge:r=864e5,buster:a="",hydrateOptions:o}){try{const s=await t.restoreClient();if(s){if(!s.timestamp)return t.removeClient();{const i=Date.now()-s.timestamp>r,c=s.buster!==a;if(i||c)return t.removeClient();n(e,s.clientState,o)}}}catch(s){throw await t.removeClient(),s}}(e).then(()=>{var e,t;return null==(t=(e=d.current).onSuccess)?void 0:t.call(e)}).catch(()=>{var e,t;return null==(t=(e=d.current).onError)?void 0:t.call(e)}).finally(()=>{u(!1)})),l?void 0:function(e){const t=e.queryClient.getQueryCache().subscribe(t=>{Re(t.type)&&Ae(e)}),n=e.queryClient.getMutationCache().subscribe(t=>{Re(t.type)&&Ae(e)});return()=>{t(),n()}}(e)},[c.client,l]),a.jsx(o,{...c,children:a.jsx(s,{value:l,children:e})})};function De(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ie}=Object.prototype,{getPrototypeOf:Me}=Object,{iterator:Le,toStringTag:Ke}=Symbol,Fe=(e=>t=>{const n=Ie.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),qe=e=>(e=e.toLowerCase(),t=>Fe(t)===e),Be=e=>t=>typeof t===e,{isArray:ze}=Array,Ue=Be("undefined");function $e(e){return null!==e&&!Ue(e)&&null!==e.constructor&&!Ue(e.constructor)&&Ge(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const We=qe("ArrayBuffer");const Ve=Be("string"),Ge=Be("function"),He=Be("number"),Ye=e=>null!==e&&"object"==typeof e,Je=e=>{if("object"!==Fe(e))return!1;const t=Me(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Ke in e||Le in e)},Xe=qe("Date"),Qe=qe("File"),Ze=qe("Blob"),et=qe("FileList"),tt=qe("URLSearchParams"),[nt,rt,at,ot]=["ReadableStream","Request","Response","Headers"].map(qe);function st(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let r,a;if("object"!=typeof e&&(e=[e]),ze(e))for(r=0,a=e.length;r<a;r++)t.call(null,e[r],r,e);else{if($e(e))return;const a=n?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(r=0;r<o;r++)s=a[r],t.call(null,e[s],s,e)}}function it(e,t){if($e(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,a=n.length;for(;a-- >0;)if(r=n[a],t===r.toLowerCase())return r;return null}const ct="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,lt=e=>!Ue(e)&&e!==ct;const ut=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Me(Uint8Array)),dt=qe("HTMLFormElement"),ft=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ht=qe("RegExp"),mt=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};st(n,(n,a)=>{let o;!1!==(o=t(n,a,e))&&(r[a]=o||n)}),Object.defineProperties(e,r)};const pt=qe("AsyncFunction"),gt=(yt="function"==typeof setImmediate,bt=Ge(ct.postMessage),yt?setImmediate:bt?(vt=`axios@${Math.random()}`,xt=[],ct.addEventListener("message",({source:e,data:t})=>{e===ct&&t===vt&&xt.length&&xt.shift()()},!1),e=>{xt.push(e),ct.postMessage(vt,"*")}):e=>setTimeout(e));var yt,bt,vt,xt;const wt="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ct):"undefined"!=typeof process&&process.nextTick||gt,kt={isArray:ze,isArrayBuffer:We,isBuffer:$e,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Ge(e.append)&&("formdata"===(t=Fe(e))||"object"===t&&Ge(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&We(e.buffer),t},isString:Ve,isNumber:He,isBoolean:e=>!0===e||!1===e,isObject:Ye,isPlainObject:Je,isEmptyObject:e=>{if(!Ye(e)||$e(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:nt,isRequest:rt,isResponse:at,isHeaders:ot,isUndefined:Ue,isDate:Xe,isFile:Qe,isBlob:Ze,isRegExp:ht,isFunction:Ge,isStream:e=>Ye(e)&&Ge(e.pipe),isURLSearchParams:tt,isTypedArray:ut,isFileList:et,forEach:st,merge:function e(){const{caseless:t,skipUndefined:n}=lt(this)&&this||{},r={},a=(a,o)=>{const s=t&&it(r,o)||o;Je(r[s])&&Je(a)?r[s]=e(r[s],a):Je(a)?r[s]=e({},a):ze(a)?r[s]=a.slice():n&&Ue(a)||(r[s]=a)};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&st(arguments[o],a);return r},extend:(e,t,n,{allOwnKeys:r}={})=>(st(t,(t,r)=>{n&&Ge(t)?e[r]=De(t,n):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let a,o,s;const i={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)s=a[o],r&&!r(s,e,t)||i[s]||(t[s]=e[s],i[s]=!0);e=!1!==n&&Me(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Fe,kindOfTest:qe,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(ze(e))return e;let t=e.length;if(!He(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Le]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:dt,hasOwnProperty:ft,hasOwnProp:ft,reduceDescriptors:mt,freezeMethods:e=>{mt(e,(t,n)=>{if(Ge(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];Ge(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return ze(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:it,global:ct,isContextDefined:lt,isSpecCompliantForm:function(e){return!!(e&&Ge(e.append)&&"FormData"===e[Ke]&&e[Le])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(Ye(e)){if(t.indexOf(e)>=0)return;if($e(e))return e;if(!("toJSON"in e)){t[r]=e;const a=ze(e)?[]:{};return st(e,(e,t)=>{const o=n(e,r+1);!Ue(o)&&(a[t]=o)}),t[r]=void 0,a}}return e};return n(e,0)},isAsyncFn:pt,isThenable:e=>e&&(Ye(e)||Ge(e))&&Ge(e.then)&&Ge(e.catch),setImmediate:gt,asap:wt,isIterable:e=>null!=e&&Ge(e[Le])};function jt(e,t,n,r,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),a&&(this.response=a,this.status=a.status?a.status:null)}kt.inherits(jt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:kt.toJSONObject(this.config),code:this.code,status:this.status}}});const Nt=jt.prototype,Et={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Et[e]={value:e}}),Object.defineProperties(jt,Et),Object.defineProperty(Nt,"isAxiosError",{value:!0}),jt.from=(e,t,n,r,a,o)=>{const s=Object.create(Nt);kt.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",c=null==t&&e?e.code:t;return jt.call(s,i,c,n,r,a),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",o&&Object.assign(s,o),s};function _t(e){return kt.isPlainObject(e)||kt.isArray(e)}function St(e){return kt.endsWith(e,"[]")?e.slice(0,-2):e}function Ct(e,t,n){return e?e.concat(t).map(function(e,t){return e=St(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Pt=kt.toFlatObject(kt,{},null,function(e){return/^is[A-Z]/.test(e)});function Ot(e,t,n){if(!kt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=kt.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!kt.isUndefined(t[e])})).metaTokens,a=n.visitor||l,o=n.dots,s=n.indexes,i=(n.Blob||"undefined"!=typeof Blob&&Blob)&&kt.isSpecCompliantForm(t);if(!kt.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(kt.isDate(e))return e.toISOString();if(kt.isBoolean(e))return e.toString();if(!i&&kt.isBlob(e))throw new jt("Blob is not supported. Use a Buffer instead.");return kt.isArrayBuffer(e)||kt.isTypedArray(e)?i&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,a){let i=e;if(e&&!a&&"object"==typeof e)if(kt.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(kt.isArray(e)&&function(e){return kt.isArray(e)&&!e.some(_t)}(e)||(kt.isFileList(e)||kt.endsWith(n,"[]"))&&(i=kt.toArray(e)))return n=St(n),i.forEach(function(e,r){!kt.isUndefined(e)&&null!==e&&t.append(!0===s?Ct([n],r,o):null===s?n:n+"[]",c(e))}),!1;return!!_t(e)||(t.append(Ct(a,n,o),c(e)),!1)}const u=[],d=Object.assign(Pt,{defaultVisitor:l,convertValue:c,isVisitable:_t});if(!kt.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!kt.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),kt.forEach(n,function(n,o){!0===(!(kt.isUndefined(n)||null===n)&&a.call(t,n,kt.isString(o)?o.trim():o,r,d))&&e(n,r?r.concat(o):[o])}),u.pop()}}(e),t}function Rt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function At(e,t){this._pairs=[],e&&Ot(e,this,t)}const Tt=At.prototype;function Dt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function It(e,t,n){if(!t)return e;const r=n&&n.encode||Dt;kt.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let o;if(o=a?a(t,n):kt.isURLSearchParams(t)?t.toString():new At(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}Tt.append=function(e,t){this._pairs.push([e,t])},Tt.toString=function(e){const t=e?function(t){return e.call(this,t,Rt)}:Rt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Mt{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){kt.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Lt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Kt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:At,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ft="undefined"!=typeof window&&"undefined"!=typeof document,qt="object"==typeof navigator&&navigator||void 0,Bt=Ft&&(!qt||["ReactNative","NativeScript","NS"].indexOf(qt.product)<0),zt="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ut=Ft&&window.location.href||"http://localhost",$t={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ft,hasStandardBrowserEnv:Bt,hasStandardBrowserWebWorkerEnv:zt,navigator:qt,origin:Ut},Symbol.toStringTag,{value:"Module"})),...Kt};function Wt(e){function t(e,n,r,a){let o=e[a++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),i=a>=e.length;if(o=!o&&kt.isArray(r)?r.length:o,i)return kt.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!s;r[o]&&kt.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],a)&&kt.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const a=n.length;let o;for(r=0;r<a;r++)o=n[r],t[o]=e[o];return t}(r[o])),!s}if(kt.isFormData(e)&&kt.isFunction(e.entries)){const n={};return kt.forEachEntry(e,(e,r)=>{t(function(e){return kt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null}const Vt={transitional:Lt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,a=kt.isObject(e);a&&kt.isHTMLForm(e)&&(e=new FormData(e));if(kt.isFormData(e))return r?JSON.stringify(Wt(e)):e;if(kt.isArrayBuffer(e)||kt.isBuffer(e)||kt.isStream(e)||kt.isFile(e)||kt.isBlob(e)||kt.isReadableStream(e))return e;if(kt.isArrayBufferView(e))return e.buffer;if(kt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ot(e,new $t.classes.URLSearchParams,{visitor:function(e,t,n,r){return $t.isNode&&kt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=kt.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ot(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||r?(t.setContentType("application/json",!1),function(e,t,n){if(kt.isString(e))try{return(t||JSON.parse)(e),kt.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Vt.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(kt.isResponse(e)||kt.isReadableStream(e))return e;if(e&&kt.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(a){if(n){if("SyntaxError"===a.name)throw jt.from(a,jt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:$t.classes.FormData,Blob:$t.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};kt.forEach(["delete","get","head","post","put","patch"],e=>{Vt.headers[e]={}});const Gt=kt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ht=Symbol("internals");function Yt(e){return e&&String(e).trim().toLowerCase()}function Jt(e){return!1===e||null==e?e:kt.isArray(e)?e.map(Jt):String(e)}function Xt(e,t,n,r,a){return kt.isFunction(r)?r.call(this,t,n):(a&&(t=n),kt.isString(t)?kt.isString(r)?-1!==t.indexOf(r):kt.isRegExp(r)?r.test(t):void 0:void 0)}let Qt=class{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function a(e,t,n){const a=Yt(t);if(!a)throw new Error("header name must be a non-empty string");const o=kt.findKey(r,a);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=Jt(e))}const o=(e,t)=>kt.forEach(e,(e,n)=>a(e,n,t));if(kt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(kt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),r=e.substring(a+1).trim(),!n||t[n]&&Gt[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(kt.isObject(e)&&kt.isIterable(e)){let n,r,a={};for(const t of e){if(!kt.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[r=t[0]]=(n=a[r])?kt.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}o(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=Yt(e)){const n=kt.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(kt.isFunction(t))return t.call(this,e,n);if(kt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Yt(e)){const n=kt.findKey(this,e);return!(!n||void 0===this[n]||t&&!Xt(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function a(e){if(e=Yt(e)){const a=kt.findKey(n,e);!a||t&&!Xt(0,n[a],a,t)||(delete n[a],r=!0)}}return kt.isArray(e)?e.forEach(a):a(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const a=t[n];e&&!Xt(0,this[a],a,e,!0)||(delete this[a],r=!0)}return r}normalize(e){const t=this,n={};return kt.forEach(this,(r,a)=>{const o=kt.findKey(n,a);if(o)return t[o]=Jt(r),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();s!==a&&delete t[a],t[s]=Jt(r),n[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return kt.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&kt.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[Ht]=this[Ht]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=Yt(e);t[r]||(!function(e,t){const n=kt.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,a){return this[r].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[r]=!0)}return kt.isArray(e)?e.forEach(r):r(e),this}};function Zt(e,t){const n=this||Vt,r=t||n,a=Qt.from(r.headers);let o=r.data;return kt.forEach(e,function(e){o=e.call(n,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function en(e){return!(!e||!e.__CANCEL__)}function tn(e,t,n){jt.call(this,null==e?"canceled":e,jt.ERR_CANCELED,t,n),this.name="CanceledError"}function nn(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new jt("Request failed with status code "+n.status,[jt.ERR_BAD_REQUEST,jt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),kt.reduceDescriptors(Qt.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),kt.freezeMethods(Qt),kt.inherits(tn,jt,{__CANCEL__:!0});const rn=(e,t,n=3)=>{let r=0;const a=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let a,o=0,s=0;return t=void 0!==t?t:1e3,function(i){const c=Date.now(),l=r[s];a||(a=c),n[o]=i,r[o]=c;let u=s,d=0;for(;u!==o;)d+=n[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-a<t)return;const f=l&&c-l;return f?Math.round(1e3*d/f):void 0}}(50,250);return function(e,t){let n,r,a=0,o=1e3/t;const s=(t,o=Date.now())=>{a=o,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{const t=Date.now(),i=t-a;i>=o?s(e,t):(n=e,r||(r=setTimeout(()=>{r=null,s(n)},o-i)))},()=>n&&s(n)]}(n=>{const o=n.loaded,s=n.lengthComputable?n.total:void 0,i=o-r,c=a(i);r=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:i,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:n,lengthComputable:null!=s,[t?"download":"upload"]:!0})},n)},an=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},on=e=>(...t)=>kt.asap(()=>e(...t)),sn=$t.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,$t.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL($t.origin),$t.navigator&&/(msie|trident)/i.test($t.navigator.userAgent)):()=>!0,cn=$t.hasStandardBrowserEnv?{write(e,t,n,r,a,o,s){if("undefined"==typeof document)return;const i=[`${e}=${encodeURIComponent(t)}`];kt.isNumber(n)&&i.push(`expires=${new Date(n).toUTCString()}`),kt.isString(r)&&i.push(`path=${r}`),kt.isString(a)&&i.push(`domain=${a}`),!0===o&&i.push("secure"),kt.isString(s)&&i.push(`SameSite=${s}`),document.cookie=i.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function ln(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const un=e=>e instanceof Qt?{...e}:e;function dn(e,t){t=t||{};const n={};function r(e,t,n,r){return kt.isPlainObject(e)&&kt.isPlainObject(t)?kt.merge.call({caseless:r},e,t):kt.isPlainObject(t)?kt.merge({},t):kt.isArray(t)?t.slice():t}function a(e,t,n,a){return kt.isUndefined(t)?kt.isUndefined(e)?void 0:r(void 0,e,0,a):r(e,t,0,a)}function o(e,t){if(!kt.isUndefined(t))return r(void 0,t)}function s(e,t){return kt.isUndefined(t)?kt.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function i(n,a,o){return o in t?r(n,a):o in e?r(void 0,n):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(e,t,n)=>a(un(e),un(t),0,!0)};return kt.forEach(Object.keys({...e,...t}),function(r){const o=c[r]||a,s=o(e[r],t[r],r);kt.isUndefined(s)&&o!==i||(n[r]=s)}),n}const fn=e=>{const t=dn({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:i}=t;if(t.headers=s=Qt.from(s),t.url=It(ln(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),kt.isFormData(n))if($t.hasStandardBrowserEnv||$t.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(kt.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,n])=>{t.includes(e.toLowerCase())&&s.set(e,n)})}if($t.hasStandardBrowserEnv&&(r&&kt.isFunction(r)&&(r=r(t)),r||!1!==r&&sn(t.url))){const e=a&&o&&cn.read(o);e&&s.set(a,e)}return t},hn="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=fn(e);let a=r.data;const o=Qt.from(r.headers).normalize();let s,i,c,l,u,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=r;function m(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(s),r.signal&&r.signal.removeEventListener("abort",s)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=Qt.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());nn(function(e){t(e),m()},function(e){n(e),m()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new jt("Request aborted",jt.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const r=new jt(t&&t.message?t.message:"Network Error",jt.ERR_NETWORK,e,p);r.event=t||null,n(r),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const a=r.transitional||Lt;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new jt(t,a.clarifyTimeoutError?jt.ETIMEDOUT:jt.ECONNABORTED,e,p)),p=null},void 0===a&&o.setContentType(null),"setRequestHeader"in p&&kt.forEach(o.toJSON(),function(e,t){p.setRequestHeader(t,e)}),kt.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),d&&"json"!==d&&(p.responseType=r.responseType),h&&([c,u]=rn(h,!0),p.addEventListener("progress",c)),f&&p.upload&&([i,l]=rn(f),p.upload.addEventListener("progress",i),p.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(s=t=>{p&&(n(!t||t.type?new tn(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(s),r.signal&&(r.signal.aborted?s():r.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===$t.protocols.indexOf(y)?n(new jt("Unsupported protocol "+y+":",jt.ERR_BAD_REQUEST,e)):p.send(a||null)})},mn=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const a=function(e){if(!n){n=!0,s();const t=e instanceof Error?e:this.reason;r.abort(t instanceof jt?t:new tn(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,a(new jt(`timeout ${t} of ms exceeded`,jt.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:i}=r;return i.unsubscribe=()=>kt.asap(s),i}},pn=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let r,a=0;for(;a<n;)r=a+t,yield e.slice(a,r),a=r},gn=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},yn=(e,t,n,r)=>{const a=async function*(e,t){for await(const n of gn(e))yield*pn(n,t)}(e,t);let o,s=0,i=e=>{o||(o=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await a.next();if(t)return i(),void e.close();let o=r.byteLength;if(n){let e=s+=o;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw i(t),t}},cancel:e=>(i(e),a.return())},{highWaterMark:2})},{isFunction:bn}=kt,vn=(({Request:e,Response:t})=>({Request:e,Response:t}))(kt.global),{ReadableStream:xn,TextEncoder:wn}=kt.global,kn=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},jn=e=>{e=kt.merge.call({skipUndefined:!0},vn,e);const{fetch:t,Request:n,Response:r}=e,a=t?bn(t):"function"==typeof fetch,o=bn(n),s=bn(r);if(!a)return!1;const i=a&&bn(xn),c=a&&("function"==typeof wn?(e=>t=>e.encode(t))(new wn):async e=>new Uint8Array(await new n(e).arrayBuffer())),l=o&&i&&kn(()=>{let e=!1;const t=new n($t.origin,{body:new xn,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=s&&i&&kn(()=>kt.isReadableStream(new r("").body)),d={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new jt(`Response type '${e}' is not supported`,jt.ERR_NOT_SUPPORT,n)})});const f=async(e,t)=>{const r=kt.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(kt.isBlob(e))return e.size;if(kt.isSpecCompliantForm(e)){const t=new n($t.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return kt.isArrayBufferView(e)||kt.isArrayBuffer(e)?e.byteLength:(kt.isURLSearchParams(e)&&(e+=""),kt.isString(e)?(await c(e)).byteLength:void 0)})(t):r};return async e=>{let{url:a,method:s,data:i,signal:c,cancelToken:h,timeout:m,onDownloadProgress:p,onUploadProgress:g,responseType:y,headers:b,withCredentials:v="same-origin",fetchOptions:x}=fn(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let k=mn([c,h&&h.toAbortSignal()],m),j=null;const N=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let E;try{if(g&&l&&"get"!==s&&"head"!==s&&0!==(E=await f(b,i))){let e,t=new n(a,{method:"POST",body:i,duplex:"half"});if(kt.isFormData(i)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,n]=an(E,rn(on(g)));i=yn(t.body,65536,e,n)}}kt.isString(v)||(v=v?"include":"omit");const t=o&&"credentials"in n.prototype,c={...x,signal:k,method:s.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:t?v:void 0};j=o&&new n(a,c);let h=await(o?w(j,x):w(a,c));const m=u&&("stream"===y||"response"===y);if(u&&(p||m&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});const t=kt.toFiniteNumber(h.headers.get("content-length")),[n,a]=p&&an(t,rn(on(p),!0))||[];h=new r(yn(h.body,65536,n,()=>{a&&a(),N&&N()}),e)}y=y||"text";let _=await d[kt.findKey(d,y)||"text"](h,e);return!m&&N&&N(),await new Promise((t,n)=>{nn(t,n,{data:_,headers:Qt.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:j})})}catch(_){if(N&&N(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new jt("Network Error",jt.ERR_NETWORK,e,j),{cause:_.cause||_});throw jt.from(_,_&&_.code,e,j)}}},Nn=new Map,En=e=>{let t=e&&e.env||{};const{fetch:n,Request:r,Response:a}=t,o=[r,a,n];let s,i,c=o.length,l=Nn;for(;c--;)s=o[c],i=l.get(s),void 0===i&&l.set(s,i=c?new Map:jn(t)),l=i;return i};En();const _n={http:null,xhr:hn,fetch:{get:En}};kt.forEach(_n,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const Sn=e=>`- ${e}`,Cn=e=>kt.isFunction(e)||null===e||!1===e;const Pn={getAdapter:function(e,t){e=kt.isArray(e)?e:[e];const{length:n}=e;let r,a;const o={};for(let s=0;s<n;s++){let n;if(r=e[s],a=r,!Cn(r)&&(a=_n[(n=String(r)).toLowerCase()],void 0===a))throw new jt(`Unknown adapter '${n}'`);if(a&&(kt.isFunction(a)||(a=a.get(t))))break;o[n||"#"+s]=a}if(!a){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new jt("There is no suitable adapter to dispatch the request "+(n?e.length>1?"since :\n"+e.map(Sn).join("\n"):" "+Sn(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:_n};function On(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tn(null,e)}function Rn(e){On(e),e.headers=Qt.from(e.headers),e.data=Zt.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Pn.getAdapter(e.adapter||Vt.adapter,e)(e).then(function(t){return On(e),t.data=Zt.call(e,e.transformResponse,t),t.headers=Qt.from(t.headers),t},function(t){return en(t)||(On(e),t&&t.response&&(t.response.data=Zt.call(e,e.transformResponse,t.response),t.response.headers=Qt.from(t.response.headers))),Promise.reject(t)})}const An="1.13.2",Tn={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tn[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Dn={};Tn.transitional=function(e,t,n){return(r,a,o)=>{if(!1===e)throw new jt(function(e,t){return"[Axios v"+An+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(a," has been removed"+(t?" in "+t:"")),jt.ERR_DEPRECATED);return t&&!Dn[a]&&(Dn[a]=!0),!e||e(r,a,o)}},Tn.spelling=function(e){return(e,t)=>!0};const In={assertOptions:function(e,t,n){if("object"!=typeof e)throw new jt("options must be an object",jt.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let a=r.length;for(;a-- >0;){const o=r[a],s=t[o];if(s){const t=e[o],n=void 0===t||s(t,o,e);if(!0!==n)throw new jt("option "+o+" must be "+n,jt.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new jt("Unknown option "+o,jt.ERR_BAD_OPTION)}},validators:Tn},Mn=In.validators;let Ln=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Mt,response:new Mt}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=dn(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:a}=t;void 0!==n&&In.assertOptions(n,{silentJSONParsing:Mn.transitional(Mn.boolean),forcedJSONParsing:Mn.transitional(Mn.boolean),clarifyTimeoutError:Mn.transitional(Mn.boolean)},!1),null!=r&&(kt.isFunction(r)?t.paramsSerializer={serialize:r}:In.assertOptions(r,{encode:Mn.function,serialize:Mn.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),In.assertOptions(t,{baseUrl:Mn.spelling("baseURL"),withXsrfToken:Mn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&kt.merge(a.common,a[t.method]);a&&kt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Qt.concat(o,a);const s=[];let i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const c=[];let l;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u,d=0;if(!i){const e=[Rn.bind(this),void 0];for(e.unshift(...s),e.push(...c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let f=t;for(;d<u;){const e=s[d++],t=s[d++];try{f=e(f)}catch(h){t.call(this,h);break}}try{l=Rn.call(this,f)}catch(h){return Promise.reject(h)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return It(ln((e=dn(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};kt.forEach(["delete","get","head","options"],function(e){Ln.prototype[e]=function(t,n){return this.request(dn(n||{},{method:e,url:t,data:(n||{}).data}))}}),kt.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,a){return this.request(dn(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Ln.prototype[e]=t(),Ln.prototype[e+"Form"]=t(!0)});const Kn={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Kn).forEach(([e,t])=>{Kn[t]=e});const Fn=function e(t){const n=new Ln(t),r=De(Ln.prototype.request,n);return kt.extend(r,Ln.prototype,n,{allOwnKeys:!0}),kt.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(dn(t,n))},r}(Vt);Fn.Axios=Ln,Fn.CanceledError=tn,Fn.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,a){n.reason||(n.reason=new tn(e,r,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},Fn.isCancel=en,Fn.VERSION=An,Fn.toFormData=Ot,Fn.AxiosError=jt,Fn.Cancel=Fn.CanceledError,Fn.all=function(e){return Promise.all(e)},Fn.spread=function(e){return function(t){return e.apply(null,t)}},Fn.isAxiosError=function(e){return kt.isObject(e)&&!0===e.isAxiosError},Fn.mergeConfig=dn,Fn.AxiosHeaders=Qt,Fn.formToJSON=e=>Wt(kt.isHTMLForm(e)?new FormData(e):e),Fn.getAdapter=Pn.getAdapter,Fn.HttpStatusCode=Kn,Fn.default=Fn;const{Axios:qn,AxiosError:Bn,CanceledError:zn,isCancel:Un,CancelToken:$n,VERSION:Wn,all:Vn,Cancel:Gn,isAxiosError:Hn,spread:Yn,toFormData:Jn,AxiosHeaders:Xn,HttpStatusCode:Qn,formToJSON:Zn,getAdapter:er,mergeConfig:tr}=Fn,nr=Fn.create({baseURL:"",timeout:6e4,headers:{"Content-Type":"application/json"}});nr.interceptors.response.use(e=>e,e=>Promise.reject(e));const rr=v.createContext(void 0),ar="smartmoney_access_token",or="smartmoney_refresh_token";function sr({children:e}){const[t,n]=v.useState(null),[r,o]=v.useState(!0),s=v.useCallback(()=>{localStorage.removeItem(ar),localStorage.removeItem(or),n(null),o(!1)},[]),i=v.useCallback(async()=>{const e=localStorage.getItem(or);if(!e)return!1;try{const t="",r=await Fn.post(`${t}/api/auth/refresh`,{refresh_token:e}),{access_token:a,refresh_token:o}=r.data;localStorage.setItem(ar,a),localStorage.setItem(or,o);const s=await nr.get("/api/auth/me",{headers:{Authorization:`Bearer ${a}`}});return n(s.data),!0}catch{return localStorage.removeItem(ar),localStorage.removeItem(or),!1}},[]);v.useEffect(()=>{const e=nr.interceptors.request.use(e=>{const t=localStorage.getItem(ar);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),t=nr.interceptors.response.use(e=>e,async e=>{var t,n;const r=e.config,a=null==(t=null==r?void 0:r.url)?void 0:t.includes("/api/auth/");if(401===(null==(n=e.response)?void 0:n.status)&&!r._retry&&!a){r._retry=!0;if(await i()){const e=localStorage.getItem(ar);return r.headers.Authorization=`Bearer ${e}`,nr(r)}s()}return Promise.reject(e)});return()=>{nr.interceptors.request.eject(e),nr.interceptors.response.eject(t)}},[i,s]),v.useEffect(()=>{(async()=>{if(localStorage.getItem(ar))try{const e=await nr.get("/api/auth/me");n(e.data)}catch{await i()||n(null)}o(!1)})()},[i]);return a.jsx(rr.Provider,{value:{user:t,isLoading:r,isAuthenticated:!!t,login:async(e,t)=>{const r=new URLSearchParams;r.append("username",e),r.append("password",t);const a=await nr.post("/api/auth/login",r,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{access_token:o,refresh_token:s}=a.data;localStorage.setItem(ar,o),localStorage.setItem(or,s);const i=await nr.get("/api/auth/me",{headers:{Authorization:`Bearer ${o}`}});n(i.data)},logout:s,refreshToken:i},children:e})}function ir(){const e=v.useContext(rr);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}async function cr(){return(await nr.get("/api/settings")).data}async function lr(e){return(await nr.put("/api/settings",e)).data}const ur=v.createContext(void 0);function dr({children:e}){const{data:t,isLoading:n}=i({queryKey:["settings"],queryFn:cr}),r={settings:t,isLoading:n,currency:(null==t?void 0:t.currency)||"JPY",baseDate:(null==t?void 0:t.base_date)||25};return a.jsx(ur.Provider,{value:r,children:e})}function fr(){const e=v.useContext(ur);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e}const hr=v.createContext(void 0),mr="smartmoney_privacy_mode";function pr({children:e}){const[t,n]=v.useState(()=>"true"===localStorage.getItem(mr));v.useEffect(()=>{localStorage.setItem(mr,String(t))},[t]);return a.jsx(hr.Provider,{value:{isPrivacyMode:t,togglePrivacyMode:()=>{n(e=>!e)}},children:e})}function gr(){const e=v.useContext(hr);if(void 0===e)throw new Error("usePrivacy must be used within a PrivacyProvider");return e}const yr=v.createContext(void 0),br="smartmoney-theme";function vr(){return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function xr(){if("undefined"!=typeof window){const e=localStorage.getItem(br);if("light"===e||"dark"===e||"system"===e)return e}return"system"}function wr({children:e}){const[t,n]=v.useState(()=>xr()),[r,o]=v.useState(()=>{const e=xr();return"system"===e?vr():e});v.useEffect(()=>{const e=()=>{const e="system"===t?vr():t;o(e);const n=document.documentElement;n.classList.remove("light","dark"),n.classList.add(e)};if(e(),"system"===t){const t=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>e();return t.addEventListener("change",n),()=>t.removeEventListener("change",n)}},[t]);const s=e=>{n(e),localStorage.setItem(br,e)};return a.jsx(yr.Provider,{value:{theme:t,resolvedTheme:r,setTheme:s,toggleTheme:()=>{s("dark"===r?"light":"dark")}},children:e})}function kr(){const e=v.useContext(yr);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const jr=e=>{const t=Sr(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:e=>{const n=e.split("-");return""===n[0]&&1!==n.length&&n.shift(),Nr(n,t)||_r(e)},getConflictingClassGroupIds:(e,t)=>{const a=n[e]||[];return t&&r[e]?[...a,...r[e]]:a}}},Nr=(e,t)=>{var n;if(0===e.length)return t.classGroupId;const r=e[0],a=t.nextPart.get(r),o=a?Nr(e.slice(1),a):void 0;if(o)return o;if(0===t.validators.length)return;const s=e.join("-");return null==(n=t.validators.find(({validator:e})=>e(s)))?void 0:n.classGroupId},Er=/^\[(.+)\]$/,_r=e=>{if(Er.test(e)){const t=Er.exec(e)[1],n=null==t?void 0:t.substring(0,t.indexOf(":"));if(n)return"arbitrary.."+n}},Sr=e=>{const{theme:t,prefix:n}=e,r={nextPart:new Map,validators:[]};return Rr(Object.entries(e.classGroups),n).forEach(([e,n])=>{Cr(n,r,e,t)}),r},Cr=(e,t,n,r)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:Pr(t,e)).classGroupId=n)}if("function"==typeof e)return Or(e)?void Cr(e(r),t,n,r):void t.validators.push({validator:e,classGroupId:n});Object.entries(e).forEach(([e,a])=>{Cr(a,Pr(t,e),n,r)})})},Pr=(e,t)=>{let n=e;return t.split("-").forEach(e=>{n.nextPart.has(e)||n.nextPart.set(e,{nextPart:new Map,validators:[]}),n=n.nextPart.get(e)}),n},Or=e=>e.isThemeGetter,Rr=(e,t)=>t?e.map(([e,n])=>[e,n.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,n])=>[t+e,n])):e)]):e,Ar=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=new Map,r=new Map;const a=(a,o)=>{n.set(a,o),t++,t>e&&(t=0,r=n,n=new Map)};return{get(e){let t=n.get(e);return void 0!==t?t:void 0!==(t=r.get(e))?(a(e,t),t):void 0},set(e,t){n.has(e)?n.set(e,t):a(e,t)}}},Tr=e=>{const{separator:t,experimentalParseClassName:n}=e,r=1===t.length,a=t[0],o=t.length,s=e=>{const n=[];let s,i=0,c=0;for(let d=0;d<e.length;d++){let l=e[d];if(0===i){if(l===a&&(r||e.slice(d,d+o)===t)){n.push(e.slice(c,d)),c=d+o;continue}if("/"===l){s=d;continue}}"["===l?i++:"]"===l&&i--}const l=0===n.length?e:e.substring(c),u=l.startsWith("!");return{modifiers:n,hasImportantModifier:u,baseClassName:u?l.substring(1):l,maybePostfixModifierPosition:s&&s>c?s-c:void 0}};return n?e=>n({className:e,parseClassName:s}):s},Dr=e=>{if(e.length<=1)return e;const t=[];let n=[];return e.forEach(e=>{"["===e[0]?(t.push(...n.sort(),e),n=[]):n.push(e)}),t.push(...n.sort()),t},Ir=/\s+/;function Mr(){let e,t,n=0,r="";for(;n<arguments.length;)(e=arguments[n++])&&(t=Lr(e))&&(r&&(r+=" "),r+=t);return r}const Lr=e=>{if("string"==typeof e)return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=Lr(e[r]))&&(n&&(n+=" "),n+=t);return n};function Kr(e,...t){let n,r,a,o=function(i){const c=t.reduce((e,t)=>t(e),e());return n=(e=>({cache:Ar(e.cacheSize),parseClassName:Tr(e),...jr(e)}))(c),r=n.cache.get,a=n.cache.set,o=s,s(i)};function s(e){const t=r(e);if(t)return t;const o=((e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:a}=t,o=[],s=e.trim().split(Ir);let i="";for(let c=s.length-1;c>=0;c-=1){const e=s[c],{modifiers:t,hasImportantModifier:l,baseClassName:u,maybePostfixModifierPosition:d}=n(e);let f=Boolean(d),h=r(f?u.substring(0,d):u);if(!h){if(!f){i=e+(i.length>0?" "+i:i);continue}if(h=r(u),!h){i=e+(i.length>0?" "+i:i);continue}f=!1}const m=Dr(t).join(":"),p=l?m+"!":m,g=p+h;if(o.includes(g))continue;o.push(g);const y=a(h,f);for(let n=0;n<y.length;++n){const e=y[n];o.push(p+e)}i=e+(i.length>0?" "+i:i)}return i})(e,n);return a(e,o),o}return function(){return o(Mr.apply(null,arguments))}}const Fr=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},qr=/^\[(?:([a-z-]+):)?(.+)\]$/i,Br=/^\d+\/\d+$/,zr=new Set(["px","full","screen"]),Ur=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,$r=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Wr=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,Vr=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Gr=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Hr=e=>Jr(e)||zr.has(e)||Br.test(e),Yr=e=>la(e,"length",ua),Jr=e=>Boolean(e)&&!Number.isNaN(Number(e)),Xr=e=>la(e,"number",Jr),Qr=e=>Boolean(e)&&Number.isInteger(Number(e)),Zr=e=>e.endsWith("%")&&Jr(e.slice(0,-1)),ea=e=>qr.test(e),ta=e=>Ur.test(e),na=new Set(["length","size","percentage"]),ra=e=>la(e,na,da),aa=e=>la(e,"position",da),oa=new Set(["image","url"]),sa=e=>la(e,oa,ha),ia=e=>la(e,"",fa),ca=()=>!0,la=(e,t,n)=>{const r=qr.exec(e);return!!r&&(r[1]?"string"==typeof t?r[1]===t:t.has(r[1]):n(r[2]))},ua=e=>$r.test(e)&&!Wr.test(e),da=()=>!1,fa=e=>Vr.test(e),ha=e=>Gr.test(e),ma=Kr(()=>{const e=Fr("colors"),t=Fr("spacing"),n=Fr("blur"),r=Fr("brightness"),a=Fr("borderColor"),o=Fr("borderRadius"),s=Fr("borderSpacing"),i=Fr("borderWidth"),c=Fr("contrast"),l=Fr("grayscale"),u=Fr("hueRotate"),d=Fr("invert"),f=Fr("gap"),h=Fr("gradientColorStops"),m=Fr("gradientColorStopPositions"),p=Fr("inset"),g=Fr("margin"),y=Fr("opacity"),b=Fr("padding"),v=Fr("saturate"),x=Fr("scale"),w=Fr("sepia"),k=Fr("skew"),j=Fr("space"),N=Fr("translate"),E=()=>["auto",ea,t],_=()=>[ea,t],S=()=>["",Hr,Yr],C=()=>["auto",Jr,ea],P=()=>["","0",ea],O=()=>[Jr,ea];return{cacheSize:500,separator:":",theme:{colors:[ca],spacing:[Hr,Yr],blur:["none","",ta,ea],brightness:O(),borderColor:[e],borderRadius:["none","","full",ta,ea],borderSpacing:_(),borderWidth:S(),contrast:O(),grayscale:P(),hueRotate:O(),invert:P(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[Zr,Yr],inset:E(),margin:E(),opacity:O(),padding:_(),saturate:O(),scale:O(),sepia:P(),skew:O(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",ea]}],container:["container"],columns:[{columns:[ta]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",ea]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Qr,ea]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",ea]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",Qr,ea]}],"grid-cols":[{"grid-cols":[ca]}],"col-start-end":[{col:["auto",{span:["full",Qr,ea]},ea]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[ca]}],"row-start-end":[{row:["auto",{span:[Qr,ea]},ea]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",ea]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",ea]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",ea,t]}],"min-w":[{"min-w":[ea,t,"min","max","fit"]}],"max-w":[{"max-w":[ea,t,"none","full","min","max","fit","prose",{screen:[ta]},ta]}],h:[{h:[ea,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[ea,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[ea,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[ea,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ta,Yr]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Xr]}],"font-family":[{font:[ca]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",ea]}],"line-clamp":[{"line-clamp":["none",Jr,Xr]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Hr,ea]}],"list-image":[{"list-image":["none",ea]}],"list-style-type":[{list:["none","disc","decimal",ea]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Hr,Yr]}],"underline-offset":[{"underline-offset":["auto",Hr,ea]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ea]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ea]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",aa]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ra]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},sa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[Hr,ea]}],"outline-w":[{outline:[Hr,Yr]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Hr,Yr]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ta,ia]}],"shadow-color":[{shadow:[ca]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ta,ea]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",ea]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",ea]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",ea]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[Qr,ea]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",ea]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ea]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ea]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[Hr,Yr,Xr]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function pa(...e){return ma(E(e))}const ga=v.createContext(null);let ya=0;const ba={success:O,error:P,warning:C,info:S},va={success:"bg-green-50 dark:bg-green-900/90 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/90 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50 dark:bg-yellow-900/90 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50 dark:bg-blue-900/90 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"},xa={success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-yellow-500 dark:text-yellow-400",info:"text-blue-500 dark:text-blue-400"};function wa({children:e}){const[t,n]=v.useState([]),r=v.useCallback(e=>{n(t=>t.map(t=>t.id===e?{...t,exiting:!0}:t)),setTimeout(()=>{n(t=>t.filter(t=>t.id!==e))},200)},[]),o=v.useCallback((e,t="info",a=4e3)=>{const o=++ya;n(n=>[...n,{id:o,message:e,type:t,duration:a}]),a>0&&setTimeout(()=>r(o),a)},[r]),s=v.useCallback((e,t)=>o(e,"success",t),[o]),i=v.useCallback((e,t)=>o(e,"error",t),[o]),c=v.useCallback((e,t)=>o(e,"warning",t),[o]),l=v.useCallback((e,t)=>o(e,"info",t),[o]);return a.jsxs(ga.Provider,{value:{showToast:o,success:s,error:i,warning:c,info:l},children:[e,b.createPortal(a.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:t.map(e=>{const t=ba[e.type];return a.jsxs("div",{className:pa("flex items-start gap-3 p-4 rounded-lg border shadow-lg pointer-events-auto",va[e.type],e.exiting?"animate-toast-out":"animate-toast-in"),children:[a.jsx(t,{className:pa("w-5 h-5 flex-shrink-0 mt-0.5",xa[e.type])}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e.message}),a.jsx("button",{onClick:()=>r(e.id),className:"flex-shrink-0 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded",children:a.jsx(R,{className:"w-4 h-4"})})]},e.id)})}),document.body)]})}function ka(){const e=v.useContext(ga);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}var ja={exports:{}};const Na=w(ja.exports=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function n(e,t,n){for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||((r=r||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:x,a=Object.keys,o=Array.isArray;function s(e,t){return"object"!=typeof t||a(t).forEach(function(n){e[n]=t[n]}),e}"undefined"==typeof Promise||r.Promise||(r.Promise=Promise);var i=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(i(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach(function(n){f(e,n,t[n])})}var d=Object.defineProperty;function f(e,t,n,r){d(e,t,s(n&&l(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function h(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,p=[].slice;function g(e,t,n){return p.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function v(e){r.setImmediate?setImmediate(e):setTimeout(e,0)}function w(e,t){if("string"==typeof t&&l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,a=t.length;r<a;++r){var o=w(e,t[r]);n.push(o)}return n}var s=t.indexOf(".");if(-1!==s){var i=e[t.substr(0,s)];return null==i?void 0:w(i,t.substr(s+1))}}function k(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,a=t.length;r<a;++r)k(e,t[r],n[r])}else{var s,i,c=t.indexOf(".");-1!==c?(s=t.substr(0,c),""===(i=t.substr(c+1))?void 0===n?o(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=n:k(c=(c=e[s])&&l(e,s)?c:e[s]={},i,n)):void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function j(e){var t,n={};for(t in e)l(e,t)&&(n[t]=e[t]);return n}var N=[].concat;function E(e){return N.apply([],e)}var _="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return r[e]}),S=new Set(_.map(function(e){return r[e]})),C=null;function P(e){return C=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=C.get(t);if(n)return n;if(o(t)){n=[],C.set(t,n);for(var r=0,a=t.length;r<a;++r)n.push(e(t[r]))}else if(S.has(t.constructor))n=t;else{var s,c=i(t);for(s in n=c===Object.prototype?{}:Object.create(c),C.set(t,n),t)l(t,s)&&(n[s]=e(t[s]))}return n}(e),C=null,e}var O={}.toString;function R(e){return O.call(e).slice(8,-1)}var A="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",T="symbol"==typeof A?function(e){var t;return null!=e&&(t=e[A])&&t.apply(e)}:function(){return null};function D(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var I={};function M(e){var t,n,r,a;if(1===arguments.length){if(o(e))return e.slice();if(this===I&&"string"==typeof e)return[e];if(a=T(e)){for(n=[];!(r=a.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var L="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),F={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function q(e,t){this.name=e,this.message=t}function B(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function z(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=B(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=B(e,this.failures)}h(q).from(Error).extend({toString:function(){return this.name+": "+this.message}}),h(z).from(q),h(U).from(q);var $=K.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=q,V=K.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=F[t]||n,this.inner=null)}return h(r).from(W),e[t]=r,e},{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var G=ce.reduce(function(e,t){return e[t+"Error"]=V[t],e},{}),H=K.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=V[t]),e},{});function Y(){}function J(e){return e}function X(e,t){return null==e||e===J?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Y?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),a&&(this.onerror=this.onerror?Q(a,this.onerror):a),void 0!==o?o:n}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===Y?t:function(n){var r=e.apply(this,arguments);s(n,r);var a=this.onsuccess,o=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?Q(a,this.onsuccess):a),o&&(this.onerror=this.onerror?Q(o,this.onerror):o),void 0===r?void 0===n?void 0:n:s(r,n)}}function ne(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===Y?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return n.then(function(){return t.apply(r,o)})}return t.apply(this,arguments)}}H.ModifyError=z,H.DexieError=q,H.BulkError=U;var ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(e){ae=e}var se={},ie=100,ce=(_="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,i(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,i(t),e]}())[0],le=(K=_[1],_=_[2],K=K&&K.then,ce&&ce.constructor),ue=!!_,de=function(e,t){ve.push([e,t]),he&&(queueMicrotask(Pe),he=!1)},fe=!0,he=!0,me=[],pe=[],ge=J,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},be=ye,ve=[],xe=0,we=[];function ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=be;if("function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ee(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n(function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Oe();n&&"function"==typeof n.then?e(t,function(e,t){n instanceof ke?n._then(e,t):n.then(e,t)}):(t._state=!0,t._value=n,_e(t)),r&&Re()}},Ee.bind(null,t))}catch(r){Ee(t,r)}}(this,e)}var je={get:function(){var e=be,t=Fe;function n(n,r){var a=this,o=!e.global&&(e!==be||t!==Fe),s=o&&!Ue(),i=new ke(function(t,i){Se(a,new Ne(Ye(n,e,o,s),Ye(r,e,o,s),t,i,e))});return this._consoleTask&&(i._consoleTask=this._consoleTask),i}return n.prototype=se,n},set:function(e){f(this,"then",e&&e.prototype===se?je:{get:function(){return e},set:je.set})}};function Ne(e,t,n,r,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=a}function Ee(e,t){var n,r;pe.push(t),null===e._state&&(n=e._lib&&Oe(),t=ge(t),e._state=!1,e._value=t,r=e,me.some(function(e){return e._value===r._value})||me.push(r),_e(e),n&&Re())}function _e(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Se(e,t[n]);var a=e._PSD;--a.ref||a.finalize(),0===xe&&(++xe,de(function(){0==--xe&&Ae()},[]))}function Se(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,de(Ce,[n,e,t])}else e._listeners.push(t)}function Ce(e,t,n){try{var r,a=t._value;!t._state&&pe.length&&(pe=[]),r=ae&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||-1!==pe.indexOf(a)||function(e){for(var t=me.length;t;)if(me[--t]._value===e._value)return me.splice(t,1)}(t),n.resolve(r)}catch(o){n.reject(o)}finally{0==--xe&&Ae(),--n.psd.ref||n.psd.finalize()}}function Pe(){He(ye,function(){Oe()&&Re()})}function Oe(){var e=fe;return he=fe=!1,e}function Re(){var e,t,n;do{for(;0<ve.length;)for(e=ve,ve=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<ve.length);he=fe=!0}function Ae(){var e=me;me=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=we.slice(0),n=t.length;n;)t[--n]()}function Te(e){return new ke(se,!1,e)}function De(e,t){var n=be;return function(){var r=Oe(),a=be;try{return Ve(n,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ve(a,!1),r&&Re()}}}u(ke.prototype,{then:je,_then:function(e,t){Se(this,new Ne(null,null,e,t,be))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?n:Te)(e)}):this.then(null,function(e){return(e&&e.name===t?n:Te)(e)})},finally:function(e){return this.then(function(t){return ke.resolve(e()).then(function(){return t})},function(t){return ke.resolve(e()).then(function(){return Te(t)})})},timeout:function(e,t){var n=this;return e<1/0?new ke(function(r,a){var o=setTimeout(function(){return a(new V.Timeout(t))},e);n.then(r,a).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Ge(),u(ke,{all:function(){var e=M.apply(null,arguments).map($e);return new ke(function(t,n){0===e.length&&t([]);var r=e.length;e.forEach(function(a,o){return ke.resolve(a).then(function(n){e[o]=n,--r||t(e)},n)})})},resolve:function(e){return e instanceof ke?e:e&&"function"==typeof e.then?new ke(function(t,n){e.then(t,n)}):new ke(se,!0,e)},reject:Te,race:function(){var e=M.apply(null,arguments).map($e);return new ke(function(t,n){e.map(function(e){return ke.resolve(e).then(t,n)})})},PSD:{get:function(){return be},set:function(e){return be=e}},totalEchoes:{get:function(){return Fe}},newPSD:Be,usePSD:He,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new ke(function(n,r){return Be(function(t,n){var r=be;r.unhandleds=[],r.onunhandled=n,r.finalize=Q(function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},we.push(function t(){e(),we.splice(we.indexOf(t),1)}),++xe,de(function(){0==--xe&&Ae()},[])},r.finalize),e()},t,n,r)})}}),le&&(le.allSettled&&f(ke,"allSettled",function(){var e=M.apply(null,arguments).map($e);return new ke(function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,a){return ke.resolve(e).then(function(e){return r[a]={status:"fulfilled",value:e}},function(e){return r[a]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),le.any&&"undefined"!=typeof AggregateError&&f(ke,"any",function(){var e=M.apply(null,arguments).map($e);return new ke(function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,a=new Array(r);e.forEach(function(e,o){return ke.resolve(e).then(function(e){return t(e)},function(e){a[o]=e,--r||n(new AggregateError(a))})})})}),le.withResolvers&&(ke.withResolvers=le.withResolvers));var Ie={awaits:0,echoes:0,id:0},Me=0,Le=[],Ke=0,Fe=0,qe=0;function Be(e,t,n,r){var a=be,o=Object.create(a);return o.parent=a,o.ref=0,o.global=!1,o.id=++qe,ye.env,o.env=ue?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},t&&s(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},r=He(o,e,n,r),0===o.ref&&o.finalize(),r}function ze(){return Ie.id||(Ie.id=++Me),++Ie.awaits,Ie.echoes+=ie,Ie.id}function Ue(){return!!Ie.awaits&&(0==--Ie.awaits&&(Ie.id=0),Ie.echoes=Ie.awaits*ie,!0)}function $e(e){return Ie.echoes&&e&&e.constructor===le?(ze(),e.then(function(e){return Ue(),e},function(e){return Ue(),Xe(e)})):e}function We(){var e=Le[Le.length-1];Le.pop(),Ve(e,!1)}function Ve(e,t){var n,a=be;(t?!Ie.echoes||Ke++&&e===be:!Ke||--Ke&&e===be)||queueMicrotask(t?function(e){++Fe,Ie.echoes&&0!=--Ie.echoes||(Ie.echoes=Ie.awaits=Ie.id=0),Le.push(be),Ve(e,!0)}.bind(null,e):We),e!==be&&(be=e,a===ye&&(ye.env=Ge()),ue&&(n=ye.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(r,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ge(){var e=r.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(r,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function He(e,t,n,r,a){var o=be;try{return Ve(e,!0),t(n,r,a)}finally{Ve(o,!1)}}function Ye(e,t,n,r){return"function"!=typeof e?e:function(){var a=be;n&&ze(),Ve(t,!0);try{return e.apply(this,arguments)}finally{Ve(a,!1),r&&queueMicrotask(Ue)}}}function Je(e){Promise===le&&0===Ie.echoes?0===Ke?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+K).indexOf("[native code]")&&(ze=Ue=Y);var Xe=ke.reject,Qe=String.fromCharCode(65535),Ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",at="readwrite";function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var st={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function it(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function ct(){throw V.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function lt(e,t){try{var n=ut(e),r=ut(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,o=0;o<a;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,a=n<r?n:r,o=0;o<a;++o){var s=lt(e[o],t[o]);if(0!==s)return s}return n===r?0:n<r?-1:1}(e,t)}}catch(a){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=R(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ft(e,t,n){var r=e.schema.yProps;return r?(t&&0<n.numFailures&&(t=t.filter(function(e,t){return!n.failures[t]})),Promise.all(r.map(function(n){return n=n.updatesTable,t?e.db.table(n).where("k").anyOf(t).delete():e.db.table(n).clear()})).then(function(){return n})):n}var ht=(mt.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var r=t.add;if(o(r))return n(n([],o(e)?e:[],!0),r).sort();if("number"==typeof r)return(Number(e)||0)+r;if("bigint"==typeof r)try{return BigInt(e)+r}catch(s){return BigInt(0)+r}throw new TypeError("Invalid term ".concat(r))}if(void 0!==t.remove){var a=t.remove;if(o(a))return o(e)?e.filter(function(e){return!a.includes(e)}).sort():[];if("number"==typeof a)return Number(e)-a;if("bigint"==typeof a)try{return BigInt(e)-a}catch(s){return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return(r=null===(r=t.replacePrefix)||void 0===r?void 0:r[0])&&"string"==typeof e&&e.startsWith(r)?t.replacePrefix[1]+e.substring(r.length):e},mt);function mt(e){this["@@propmod"]=e}function pt(e,t){for(var n=a(t),r=n.length,o=!1,s=0;s<r;++s){var i=n[s],c=t[i],l=w(e,i);c instanceof ht?(k(e,i,c.execute(l)),o=!0):l!==c&&(k(e,i,c),o=!0)}return o}var gt=(yt.prototype._trans=function(e,t,n){var r=this._tx||be.trans,a=this.name,o=ae&&"undefined"!=typeof console&&console.createTask&&void 0;function s(e,n,r){if(!r.schema[a])throw new V.NotFound("Table "+a+" not part of transaction");return t(r.idbtrans,r)}var i=Oe();try{var c=r&&r.db._novip===this.db._novip?r===be.trans?r._promise(e,s,n):Be(function(){return r._promise(e,s,n)},{trans:r,transless:be.transless||be}):function e(t,n,r,a){if(t.idbdb&&(t._state.openComplete||be.letThrough||t._vip)){var o=t._createTransaction(n,r,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,a)})):Xe(s)}return o._promise(n,function(e,t){return Be(function(){return be.trans=o,a(e,t,o)})}).then(function(e){if("readwrite"===n)try{o.idbtrans.commit()}catch(t){}return"readonly"===n?e:o._completion.then(function(){return e})})}if(t._state.openComplete)return Xe(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Xe(new V.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,n,r,a)})}(this.db,e,[this.name],s);return o&&(c._consoleTask=o,c=c.catch(function(e){return Xe(e)})),c}finally{i&&Re()}},yt.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Xe(new V.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},yt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==Qe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}var s=this.schema.idxByName;function i(e,t){return 0===lt(e,t)}r=(c=t.reduce(function(t,n){var r=t[0],a=t[1],c=(t=s[n],e[n]);return[r||t,r||!t?ot(a,t&&t.multi?function(e){return e=w(e,n),o(e)&&e.some(function(e){return i(c,e)})}:function(e){return i(c,w(e,n))}):a]},[null,null]))[0];var c=c[1];return r?this.where(r.name).equals(e[r.keyPath]).filter(c):n?this.filter(c):this.where(t).equals("")},yt.prototype.filter=function(e){return this.toCollection().and(e)},yt.prototype.count=function(e){return this.toCollection().count(e)},yt.prototype.offset=function(e){return this.toCollection().offset(e)},yt.prototype.limit=function(e){return this.toCollection().limit(e)},yt.prototype.each=function(e){return this.toCollection().each(e)},yt.prototype.toArray=function(e){return this.toCollection().toArray(e)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"[".concat(e.join("+"),"]"):e))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(t){var n,r=this.db,a=this.name;function o(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof ct&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(o,n=t),Object.defineProperty(o.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),o.prototype.table=function(){return a},t=o);for(var s=new Set,c=t.prototype;c;c=i(c))Object.getOwnPropertyNames(c).forEach(function(e){return s.add(e)});function l(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!s.has(n))try{r[n]=e[n]}catch(a){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},yt.prototype.defineClass=function(){return this.mapToClass(function(e){s(this,e)})},yt.prototype.add=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,s=e;return o&&a&&(s=it(o)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{k(e,o,t)}catch(n){}return t})},yt.prototype.upsert=function(e,t){var n=this,r=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return n.core.get({trans:a,key:e}).then(function(o){var s=null!=o?o:{};return pt(s,t),r&&k(s,r,e),n.core.mutate({trans:a,type:"put",values:[s],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):!!o})})})},yt.prototype.update=function(e,t){return"object"!=typeof e||o(e)?this.where(":id").equals(e).modify(t):void 0===(e=w(e,this.schema.primKey.keyPath))?Xe(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},yt.prototype.put=function(e,t){var n=this,r=this.schema.primKey,a=r.auto,o=r.keyPath,s=e;return o&&a&&(s=it(o)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{k(e,o,t)}catch(n){}return t})},yt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]}).then(function(n){return ft(t,[e],n)}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})})},yt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:st}).then(function(t){return ft(e,null,t)})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})},yt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},yt.prototype.bulkAdd=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(i=r.schema.primKey).auto;if((i=i.keyPath)&&a)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,i=i&&n?e.map(it(i)):e;return r.core.mutate({trans:t,type:"add",keys:a,values:i,wantResults:o}).then(function(e){var t=e.numFailures,n=e.results,a=e.lastResult;if(e=e.failures,0===t)return o?n:a;throw new U("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},yt.prototype.bulkPut=function(e,t,n){var r=this,a=Array.isArray(t)?t:void 0,o=(n=n||(a?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=(i=r.schema.primKey).auto;if((i=i.keyPath)&&a)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,i=i&&n?e.map(it(i)):e;return r.core.mutate({trans:t,type:"put",keys:a,values:i,wantResults:o}).then(function(e){var t=e.numFailures,n=e.results,a=e.lastResult;if(e=e.failures,0===t)return o?n:a;throw new U("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},yt.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),a=e.map(function(e){return e.changes}),o=[];return this._trans("readwrite",function(s){return n.getMany({trans:s,keys:r,cache:"clone"}).then(function(i){var c=[],l=[];e.forEach(function(e,n){var r=e.key,a=e.changes,s=i[n];if(s){for(var u=0,d=Object.keys(a);u<d.length;u++){var f=d[u],h=a[f];if(f===t.schema.primKey.keyPath){if(0!==lt(h,r))throw new V.Constraint("Cannot update primary key in bulkUpdate()")}else k(s,f,h)}o.push(n),c.push(r),l.push(s)}});var u=c.length;return n.mutate({trans:s,type:"put",keys:c,values:l,updates:{keys:r,changeSpecs:a}}).then(function(e){var n=e.numFailures,r=e.failures;if(0===n)return u;for(var a=0,s=Object.keys(r);a<s.length;a++){var i,c=s[a],l=o[Number(c)];null!=l&&(i=r[c],delete r[c],r[l]=i)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(u," operations failed"),r)})})})},yt.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e}).then(function(n){return ft(t,e,n)})}).then(function(e){var r=e.numFailures,a=e.lastResult;if(e=e.failures,0===r)return a;throw new U("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)})},yt);function yt(){}function bt(e){function t(t,r){if(r){for(var a=arguments.length,o=new Array(a-1);--a;)o[a-1]=arguments[a];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=i;for(var r=1,s=arguments.length;r<s;++r)i(arguments[r]);return t;function i(e,r,s){if("object"!=typeof e){var c;r=r||ne;var l={subscribers:[],fire:s=s||Y,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=r(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(r,s)}};return n[e]=t[e]=l}a(c=e).forEach(function(e){var t=c[e];if(o(t))i(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new V.InvalidArgument("Invalid event config");var n=i(e,J,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach(function(e){v(function(){e.apply(null,t)})})})}})}}function vt(e,t){return h(t).from({prototype:e}),t}function xt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wt(e,t){e.filter=ot(e.filter,t)}function kt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return ot(r(),t())}:t,e.justLimit=n&&!r}function jt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new V.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function Nt(e,t,n){var r=jt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function Et(e,t,n,r){var a=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},s=function(e,n,r){var s,i;a&&!a(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})||("[object ArrayBuffer]"==(i=""+(s=n.primaryKey))&&(i=""+new Uint8Array(s)),l(o,i)||(o[i]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(s,n),_t(Nt(e,r,n),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return _t(Nt(e,r,n),ot(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function _t(e,t,n,r){var a=De(r?function(e,t,a){return n(r(e),t,a)}:n);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};t&&!t(e,function(e){return n=e},function(t){e.stop(t),n=Y},function(t){e.fail(t),n=Y})||a(e.value,e,function(e){return n=e}),n()})})}var St=(Ct.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Xe.bind(null,n.error)):n.table._trans("readonly",e).then(t)},Ct.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ct.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ot(t.algorithm,e)},Ct.prototype._iterate=function(e,t){return Et(this._ctx,e,t,this._ctx.table.core)},Ct.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},Ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ct.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return Et(t,e,n,t.table.core)})},Ct.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(xt(n,!0))return r.count({trans:e,query:{index:jt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var a=0;return Et(n,function(){return++a,!1},e,r).then(function(){return a})}).then(e)},Ct.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],a=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var s="next"===this._ctx.dir?1:-1;function i(e,t){return lt(o(e,a),o(t,a))*s}return this.toArray(function(e){return e.sort(i)}).then(t)},Ct.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if("next"===n.dir&&xt(n,!0)&&0<n.limit){var r=n.valueMapper,a=jt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:a,range:n.range}}).then(function(e){return e=e.result,r?e.map(r):e})}var o=[];return Et(n,function(e){return o.push(e)},e,n.table.core).then(function(){return o})},e)},Ct.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,xt(t)?kt(t,function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n(function(){e.advance(t),t=0}),!1)}}):kt(t,function(){var t=e;return function(){return--t<0}})),this},Ct.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}},!0),this},Ct.prototype.until=function(e,t){return wt(this._ctx,function(n,r,a){return!e(n.value)||(r(a),t)}),this},Ct.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Ct.prototype.last=function(e){return this.reverse().first(e)},Ct.prototype.filter=function(e){var t;return wt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=ot(t.isMatch,e),this},Ct.prototype.and=function(e){return this.filter(e)},Ct.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ct.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ct.prototype.desc=function(){return this.reverse()},Ct.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},Ct.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ct.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},Ct.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},Ct.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&xt(t,!0)&&0<t.limit)return this._read(function(e){var n=jt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},Ct.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ct.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Ct.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ct.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return wt(this._ctx,function(e){var n=e.primaryKey.toString();return e=l(t,n),t[n]=!0,!e}),this},Ct.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o,s="function"==typeof e?e:function(t){return pt(t,e)},i=n.table.core,c=(o=i.schema.primaryKey).outbound,l=o.extractKey,u=200;function d(e,t){var n=t.failures;t=t.numFailures,h+=e-t;for(var r=0,o=a(n);r<o.length;r++){var s=o[r];f.push(n[s])}}(o=t.db._options.modifyChunkSize)&&(u="object"==typeof o?o[i.name]||o["*"]||200:o);var f=[],h=0,m=[],p=e===Pt;return t.clone().primaryKeys().then(function(t){function a(f){var h=Math.min(u,t.length-f),m=t.slice(f,f+h);return(p?Promise.resolve([]):i.getMany({trans:r,keys:m,cache:"immutable"})).then(function(g){var y=[],b=[],v=c?[]:null,x=p?m:[];if(!p)for(var w=0;w<h;++w){var k=g[w],j={value:P(k),primKey:t[f+w]};!1!==s.call(j,j.value,j)&&(null==j.value?x.push(t[f+w]):c||0===lt(l(k),l(j.value))?(b.push(j.value),c&&v.push(t[f+w])):(x.push(t[f+w]),y.push(j.value)))}return Promise.resolve(0<y.length&&i.mutate({trans:r,type:"add",values:y}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);d(y.length,e)})).then(function(){return(0<b.length||o&&"object"==typeof e)&&i.mutate({trans:r,type:"put",keys:v,values:b,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<f}).then(function(e){return d(b.length,e)})}).then(function(){return(0<x.length||o&&p)&&i.mutate({trans:r,type:"delete",keys:x,criteria:o,isAdditionalChunk:0<f}).then(function(e){return ft(n.table,x,e)}).then(function(e){return d(x.length,e)})}).then(function(){return t.length>f+h&&a(f+u)})})}var o=xt(n)&&n.limit===1/0&&("function"!=typeof e||p)&&{index:n.index,range:n.range};return a(0).then(function(){if(0<f.length)throw new z("Error modifying one or more objects",f,h,m);return t.length})})})},Ct.prototype.delete=function(){var e=this._ctx,t=e.range;return!xt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Pt):this._write(function(n){var r=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:n,query:{index:r,range:a}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:a}).then(function(e){var n=e.failures;if(e=e.numFailures)throw new z("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-e);return t-e})})})},Ct);function Ct(){}var Pt=function(e,t){return t.value=null};function Ot(e,t){return e<t?-1:e===t?0:1}function Rt(e,t){return t<e?-1:e===t?0:1}function At(e,t,n){return(e=e instanceof Lt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Tt(e){return new e.Collection(e,function(){return Mt("")}).limit(0)}function Dt(e,t,n,r){var a,o,s,i,c,l,u,d=n.length;if(!n.every(function(e){return"string"==typeof e}))return At(e,et);function f(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},o="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},s="next"===e?Ot:Rt;var t=n.map(function(e){return{lower:o(e),upper:a(e)}}).sort(function(e,t){return s(e.lower,t.lower)});i=t.map(function(e){return e.upper}),c=t.map(function(e){return e.lower}),u="next"===(l=e)?"":r}f("next"),(e=new e.Collection(e,function(){return It(i[0],c[d-1]+r)}))._ondirectionchange=function(e){f(e)};var h=0;return e._addAlgorithm(function(e,n,r){var a=e.key;if("string"!=typeof a)return!1;var f=o(a);if(t(f,c,h))return!0;for(var m=null,p=h;p<d;++p){var g=function(e,t,n,r,a,o){for(var s=Math.min(e.length,r.length),i=-1,c=0;c<s;++c){var l=t[c];if(l!==r[c])return a(e[c],n[c])<0?e.substr(0,c)+n[c]+n.substr(c+1):a(e[c],r[c])<0?e.substr(0,c)+r[c]+n.substr(c+1):0<=i?e.substr(0,i)+t[i]+n.substr(i+1):null;a(e[c],l)<0&&(i=c)}return s<r.length&&"next"===o?e+n.substr(e.length):s<e.length&&"prev"===o?e.substr(0,n.length):i<0?null:e.substr(0,i)+r[i]+n.substr(i+1)}(a,f,i[p],c[p],s,l);null===g&&null===m?h=p+1:(null===m||0<s(m,g))&&(m=g)}return n(null!==m?function(){e.continue(m+u)}:r),!1}),e}function It(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Mt(e){return{type:1,lower:e,upper:e}}var Lt=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Tt(this):new this.Collection(this,function(){return It(e,t,!n,!r)})}catch(a){return At(this,Ze)}},Kt.prototype.equals=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Mt(e)})},Kt.prototype.above=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return It(e,void 0,!0)})},Kt.prototype.aboveOrEqual=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return It(e,void 0,!1)})},Kt.prototype.below=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return It(void 0,e,!1,!0)})},Kt.prototype.belowOrEqual=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return It(void 0,e)})},Kt.prototype.startsWith=function(e){return"string"!=typeof e?At(this,et):this.between(e,e+Qe,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Dt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Qe)},Kt.prototype.equalsIgnoreCase=function(e){return Dt(this,function(e,t){return e===t[0]},[e],"")},Kt.prototype.anyOfIgnoreCase=function(){var e=M.apply(I,arguments);return 0===e.length?Tt(this):Dt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var e=M.apply(I,arguments);return 0===e.length?Tt(this):Dt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Qe)},Kt.prototype.anyOf=function(){var e=this,t=M.apply(I,arguments),n=this._cmp;try{t.sort(n)}catch(o){return At(this,Ze)}if(0===t.length)return Tt(this);var r=new this.Collection(this,function(){return It(t[0],t[t.length-1])});r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var a=0;return r._addAlgorithm(function(e,r,o){for(var s=e.key;0<n(s,t[a]);)if(++a===t.length)return r(o),!1;return 0===n(s,t[a])||(r(function(){e.continue(t[a])}),!1)}),r},Kt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var e=M.apply(I,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(n){return At(this,Ze)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,a=this._ascending,o=this._descending,s=this._min,i=this._max;if(0===e.length)return Tt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0}))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var c,l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=a;function f(e,t){return d(e[0],t[0])}try{(c=e.reduce(function(e,t){for(var n=0,a=e.length;n<a;++n){var o=e[n];if(r(t[0],o[1])<0&&0<r(t[1],o[0])){o[0]=s(o[0],t[0]),o[1]=i(o[1],t[1]);break}}return n===a&&e.push(t),e},[])).sort(f)}catch(y){return At(this,Ze)}var h=0,m=u?function(e){return 0<a(e,c[h][1])}:function(e){return 0<=a(e,c[h][1])},p=l?function(e){return 0<o(e,c[h][0])}:function(e){return 0<=o(e,c[h][0])},g=m;return(e=new this.Collection(this,function(){return It(c[0][0],c[c.length-1][1],!l,!u)}))._ondirectionchange=function(e){d="next"===e?(g=m,a):(g=p,o),c.sort(f)},e._addAlgorithm(function(e,t,r){for(var o,s=e.key;g(s);)if(++h===c.length)return t(r),!1;return!m(o=s)&&!p(o)||(0===n._cmp(s,c[h][1])||0===n._cmp(s,c[h][0])||t(function(){d===a?e.continue(c[h][0]):e.continue(c[h][1])}),!1)}),e},Kt.prototype.startsWithAnyOf=function(){var e=M.apply(I,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Tt(this):this.inAnyRange(e.map(function(e){return[e,e+Qe]})):At(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function Ft(e){return De(function(t){return qt(t),e(t.target.error),!1})}function qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bt="storagemutated",zt="x-storagemutated-1",Ut=bt(null,Bt),$t=(Wt.prototype._lock=function(){return b(!be.global),++this._reculock,1!==this._reculock||be.global||(be.lockOwnerFor=this),this},Wt.prototype._unlock=function(){if(b(!be.global),0==--this._reculock)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch(t){}}return this},Wt.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},Wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new V.DatabaseClosed(r);case"MissingAPIError":throw new V.MissingAPI(r.message,r);default:throw new V.OpenFailed(r)}if(!this.active)throw new V.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=De(function(n){qt(n),t._reject(e.error)}),e.onabort=De(function(n){qt(n),t.active&&t._reject(new V.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=De(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ut.storagemutated.fire(e.mutatedParts)}),this},Wt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xe(new V.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new V.TransactionInactive);if(this._locked())return new ke(function(a,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(a,o)},be])});if(n)return Be(function(){var e=new ke(function(e,n){r._lock();var a=t(e,n,r);a&&a.then&&a.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var a=new ke(function(e,n){var a=t(e,n,r);a&&a.then&&a.then(e,n)});return a._lib=!0,a},Wt.prototype._root=function(){return this.parent?this.parent._root():this},Wt.prototype.waitFor=function(e){var t,n=this._root(),r=ke.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then(function(){return r}):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var a=n._waitingFor;return new ke(function(e,t){r.then(function(t){return n._waitingQueue.push(De(e.bind(null,t)))},function(e){return n._waitingQueue.push(De(t.bind(null,e)))}).finally(function(){n._waitingFor===a&&(n._waitingFor=null)})})},Wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new V.Abort))},Wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];var n=this.schema[e];if(!n)throw new V.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Wt);function Wt(){}function Vt(e,t,n,r,a,o,s,i){return{name:e,keyPath:t,unique:n,multi:r,auto:a,compound:o,src:(n&&!s?"&":"")+(r?"*":"")+(a?"++":"")+Gt(t),type:i}}function Gt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Ht(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce(function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e},{}))};var r}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(t){return Yt=function(){return Qe},Qe}};function Jt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return w(e,t)}:function(t){return w(t,e)};var t}function Xt(e){return[].slice.call(e)}var Qt=0;function Zt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function en(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,a=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!a):t.bound(n,r,!!a,!!e)}function a(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,a=e.type,o=e.keys,s=e.values,i=e.range;return new Promise(function(e,c){e=De(e);var l=t.objectStore(n),u=null==l.keyPath,d="put"===a||"add"===a;if(!d&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var f,h=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function m(e){++y,qt(e)}var p=[],g=[],y=0;if("deleteRange"===a){if(4===i.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===i.type?p.push(f=l.clear()):p.push(f=l.delete(r(i)))}else{var b=(u=d?u?[s,o]:[s,null]:[o,null])[0],v=u[1];if(d)for(var x=0;x<h;++x)p.push(f=v&&void 0!==v[x]?l[a](b[x],v[x]):l[a](b[x])),f.onerror=m;else for(x=0;x<h;++x)p.push(f=l[a](b[x])),f.onerror=m}function w(t){t=t.target.result,p.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:y,failures:g,results:"delete"===a?o:p.map(function(e){return e.result}),lastResult:t})}f.onerror=function(e){m(e),w(e)},f.onsuccess=w})},getMany:function(e){var t=e.trans,r=e.keys;return new Promise(function(e,a){e=De(e);for(var o,s=t.objectStore(n),i=r.length,c=new Array(i),l=0,u=0,d=function(t){t=t.target,c[t._pos]=t.result,++u===l&&e(c)},f=Ft(a),h=0;h<i;++h)null!=r[h]&&((o=s.get(r[h]))._pos=h,o.onsuccess=d,o.onerror=f,++l);0===l&&e(c)})},get:function(e){var t=e.trans,r=e.key;return new Promise(function(e,a){e=De(e);var o=t.objectStore(n).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Ft(a)})},query:(t=l,function(e){return new Promise(function(a,o){a=De(a);var s,i,c,l=e.trans,u=e.values,d=e.limit,f=e.query,h=d===1/0?void 0:d,m=f.index;if(f=f.range,l=l.objectStore(n),m=m.isPrimaryKey?l:l.index(m.name),f=r(f),0===d)return a({result:[]});t?((h=u?m.getAll(f,h):m.getAllKeys(f,h)).onsuccess=function(e){return a({result:e.target.result})},h.onerror=Ft(o)):(s=0,i=!u&&"openKeyCursor"in m?m.openKeyCursor(f):m.openCursor(f),c=[],i.onsuccess=function(e){var t=i.result;return t?(c.push(u?t.value:t.primaryKey),++s===d?a({result:c}):void t.continue()):a({result:c})},i.onerror=Ft(o))})}),openCursor:function(e){var t=e.trans,a=e.values,o=e.query,s=e.reverse,i=e.unique;return new Promise(function(e,c){e=De(e);var l=o.index,u=o.range,d=t.objectStore(n),f=(d=l.isPrimaryKey?d:d.index(l.name),l=s?i?"prevunique":"prev":i?"nextunique":"next",!a&&"openKeyCursor"in d?d.openKeyCursor(r(u),l):d.openCursor(r(u),l));f.onerror=Ft(c),f.onsuccess=De(function(n){var r,a,o,s,i=f.result;i?(i.___id=++Qt,i.done=!1,r=i.continue.bind(i),a=(a=i.continuePrimaryKey)&&a.bind(i),o=i.advance.bind(i),s=function(){throw new Error("Cursor not stopped")},i.trans=t,i.stop=i.continue=i.continuePrimaryKey=i.advance=function(){throw new Error("Cursor not started")},i.fail=De(c),i.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},i.start=function(e){function t(){if(f.result)try{e()}catch(t){i.fail(t)}else i.done=!0,i.start=function(){throw new Error("Cursor behind last entry")},i.stop()}var n=new Promise(function(e,t){e=De(e),f.onerror=Ft(t),i.fail=t,i.stop=function(t){i.stop=i.continue=i.continuePrimaryKey=i.advance=s,e(t)}});return f.onsuccess=De(function(e){f.onsuccess=t,t()}),i.continue=r,i.continuePrimaryKey=a,i.advance=o,t(),n},e(i)):e(null)},c)})},count:function(e){var t=e.query,a=e.trans,o=t.index,s=t.range;return new Promise(function(e,t){var i=a.objectStore(n),c=o.isPrimaryKey?i:i.index(o.name);(c=(i=r(s))?c.count(i):c.count()).onsuccess=De(function(t){return e(t.target.result)}),c.onerror=Ft(t)})}}}n=(i=n,c=Xt((s=e).objectStoreNames),u={schema:{name:s.name,tables:c.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),a={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Jt(t)},indexes:Xt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:o(e),keyPath:e,unique:n,multiEntry:r,extractKey:Jt(e)},a[Zt(e)]=r}),getIndexByKeyPath:function(e){return a[Zt(e)]}},a[":id"]=n.primaryKey,null!=t&&(a[Zt(t)]=n.primaryKey),n})},hasGetAll:0<c.length&&"getAll"in i.objectStore(c[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var s,i,c,l=u.hasGetAll,u=n.tables.map(a),d={};return u.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:n}}function tn(e,n,r,a){var o=r.IDBKeyRange;return r.indexedDB,{dbcore:(a=en(n,o,a),e.dbcore.reduce(function(e,n){return n=n.create,t(t({},e),n(e))},a))}}function nn(e,t){var n=t.db;t=tn(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function rn(e,t,n,r){n.forEach(function(n){var a=r[n];t.forEach(function(t){var r=function e(t,n){return m(t,n)||(t=i(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,a))})})}function an(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function on(e,t){return e._cfg.version-t._cfg.version}function sn(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Ht("$meta",pn("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,o);s.create(n),s._completion.catch(r);var i=s._reject.bind(s),c=be.transless||be;Be(function(){return be.trans=s,be.transless=c,0!==t?(nn(e,n),l=t,((r=s).storeNames.includes("$meta")?r.table("$meta").get("version").then(function(e){return null!=e?e:l}):ke.resolve(l)).then(function(t){return o=t,i=s,c=n,l=[],t=(r=e)._versions,u=r._dbSchema=hn(0,r.idbdb,c),0!==(t=t.filter(function(e){return e._cfg.version>=o})).length?(t.forEach(function(e){l.push(function(){var t=u,n=e._cfg.dbschema;mn(r,t,c),mn(r,n,c),u=r._dbSchema=n;var s=ln(t,n);s.add.forEach(function(e){un(c,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new V.Upgrade("Not yet support for changing primary key");var t=c.objectStore(e.name);e.add.forEach(function(e){return fn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),fn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>o){nn(r,c),i._memoizedTables={};var d=j(n);s.del.forEach(function(e){d[e]=t[e]}),an(r,[r.Transaction.prototype]),rn(r,[r.Transaction.prototype],a(d),d),i.schema=d;var f,h=L(l);return h&&ze(),s=ke.follow(function(){var e;(f=l(i))&&h&&(e=Ue.bind(null,null),f.then(e,e))}),f&&"function"==typeof f.then?ke.resolve(f):s.then(function(){return f})}}),l.push(function(t){var n,a,o=e._cfg.dbschema;n=o,a=t,[].slice.call(a.db.objectStoreNames).forEach(function(e){return null==n[e]&&a.db.deleteObjectStore(e)}),an(r,[r.Transaction.prototype]),rn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),i.schema=r._dbSchema}),l.push(function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return l.length?ke.resolve(l.shift()(i.idbtrans)).then(e):ke.resolve()}().then(function(){dn(u,c)})):ke.resolve();var r,o,i,c,l,u}).catch(i)):(a(o).forEach(function(e){un(n,e,o[e].primKey,o[e].indexes)}),nn(e,n),void ke.follow(function(){return e.on.populate.fire(s)}).catch(i));var r,l})}function cn(e,t){dn(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=hn(0,e.idbdb,t);mn(e,e._dbSchema,t);for(var r=0,a=ln(n,e._dbSchema).change;r<a.length;r++){var o=function(e){if(e.change.length||e.recreate)return{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(e){fn(n,e)})}(a[r]);if("object"==typeof o)return o.value}}function ln(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var a=e[n],o=t[n];if(a){var s={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)s.recreate=!0,r.change.push(s);else{var i=a.idxByName,c=o.idxByName,l=void 0;for(l in i)c[l]||s.del.push(l);for(l in c){var u=i[l],d=c[l];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(0<s.del.length||0<s.add.length||0<s.change.length)&&r.change.push(s)}}else r.add.push([n,o])}return r}function un(e,t,n,r){var a=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return fn(a,e)}),a}function dn(e,t){a(e).forEach(function(n){t.db.objectStoreNames.contains(n)||un(t,n,e[n].primKey,e[n].indexes)})}function fn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hn(e,t,n){var r={};return g(t.objectStoreNames,0).forEach(function(e){for(var t=n.objectStore(e),a=Vt(Gt(i=t.keyPath),i||"",!0,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),o=[],s=0;s<t.indexNames.length;++s){var i=(c=t.index(t.indexNames[s])).keyPath,c=Vt(c.name,i,!!c.unique,!!c.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(c)}r[e]=Ht(e,a,o)}),r}function mn(e,t,n){for(var a=n.db.objectStoreNames,o=0;o<a.length;++o){var s=a[o],i=n.objectStore(s);e._hasGetAll="getAll"in i;for(var c=0;c<i.indexNames.length;++c){var l=i.indexNames[c],u=i.index(l).keyPath,d="string"==typeof u?u:"["+g(u).join("+")+"]";!t[s]||(u=t[s].idxByName[d])&&(u.name=l,delete t[s].idxByName[d],t[s].idxByName[l]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&r.WorkerGlobalScope&&r instanceof r.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function pn(e){return e.split(",").map(function(e,t){var n=null===(r=(a=e.split(":"))[1])||void 0===r?void 0:r.trim(),r=(e=a[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(r)?r.match(/^\[(.*)\]$/)[1].split("+"):r;return Vt(r,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(a),0===t,n)})}var gn=(yn.prototype._createTableSchema=Ht,yn.prototype._parseIndexSyntax=pn,yn.prototype._parseStoresSpec=function(e,t){var n=this;a(e).forEach(function(r){if(null!==e[r]){var a=n._parseIndexSyntax(e[r]),o=a.shift();if(!o)throw new V.Schema("Invalid schema for table "+r+": "+e[r]);if(o.unique=!0,o.multi)throw new V.Schema("Primary key cannot be multiEntry*");a.forEach(function(e){if(e.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string")}),a=n._createTableSchema(r,o,a),t[r]=a}})},yn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach(function(e){s(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)}),t._dbSchema=r,an(t,[t._allTables,t,t.Transaction.prototype]),rn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(r),r),t._storeNames=a(r),this},yn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||Y,e),this},yn);function yn(){}function bn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new rr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function vn(e){return e&&"function"==typeof e.databases}function xn(e){return Be(function(){return be.letThrough=!0,e()})}function wn(e){return!("from"in e)}var kn=function(e,t){if(!this){var n=new kn;return e&&"d"in e&&s(n,e),n}s(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function jn(e,t,n){var r=lt(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(wn(e))return s(e,{from:t,to:n,d:1});var a=e.l;if(r=e.r,lt(n,e.from)<0)return a?jn(a,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Sn(e);if(0<lt(t,e.to))return r?jn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Sn(e);lt(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<lt(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,a&&!e.l&&Nn(e,a),r&&n&&Nn(e,r)}}function Nn(e,t){wn(t)||function e(t,n){var r=n.from,a=n.to,o=n.l;n=n.r,jn(t,r,a),o&&e(t,o),n&&e(t,n)}(e,t)}function En(e,t){var n=_n(t),r=n.next();if(r.done)return!1;for(var a=r.value,o=_n(e),s=o.next(a.from),i=s.value;!r.done&&!s.done;){if(lt(i.from,a.to)<=0&&0<=lt(i.to,a.from))return!0;lt(a.from,i.from)<0?a=(r=n.next(i.from)).value:i=(s=o.next(a.from)).value}return!1}function _n(e){var t=wn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&lt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||lt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sn(e){var n,r,a=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),o=1<a?"r":a<-1?"l":"";o&&(n="r"==o?"l":"r",r=t({},e),a=e[o],e.from=a.from,e.to=a.to,e[o]=a[o],r[o]=a[n],(e[n]=r).d=Cn(r)),e.d=Cn(e)}function Cn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Pn(e,t){return a(t).forEach(function(n){e[n]?Nn(e[n],t[n]):e[n]=function e(t){var n,r,a={};for(n in t)l(t,n)&&(r=t[n],a[n]=!r||"object"!=typeof r||S.has(r.constructor)?r:e(r));return a}(t[n])}),e}function On(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&En(t[n],e[n])})}u(kn.prototype,((K={add:function(e){return Nn(this,e),this},addKey:function(e){return jn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return jn(t,e,e)}),this},hasKey:function(e){var t=_n(this).next(e).value;return t&&lt(t.from,e)<=0&&0<=lt(t.to,e)}})[A]=function(){return _n(this)},K));var Rn={},An={},Tn=!1;function Dn(e){Pn(An,e),Tn||(Tn=!0,setTimeout(function(){Tn=!1,In(An,!(An={}))},0))}function In(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,a=Object.values(Rn);r<a.length;r++)Mn(s=a[r],e,n,t);else for(var o in e){var s,i=/^idb\:\/\/(.*)\/(.*)\//.exec(o);i&&(o=i[1],i=i[2],(s=Rn["idb://".concat(o,"/").concat(i)])&&Mn(s,e,n,t))}n.forEach(function(e){return e()})}function Mn(e,t,n,r){for(var a=[],o=0,s=Object.entries(e.queries.query);o<s.length;o++){for(var i=s[o],c=i[0],l=[],u=0,d=i[1];u<d.length;u++){var f=d[u];On(t,f.obsSet)?f.subscribers.forEach(function(e){return n.add(e)}):r&&l.push(f)}r&&a.push([c,l])}if(r)for(var h=0,m=a;h<m.length;h++){var p=m[h];c=p[0],l=p[1],e.queries.query[c]=l}}function Ln(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(10*e.verno),s=!1;function i(){if(t.openCanceller!==r)throw new V.DatabaseClosed("db.open() was cancelled")}function c(){return new ke(function(r,l){if(i(),!n)throw new V.MissingAPI;var u=e.name,h=t.autoSchema||!o?n.open(u):n.open(u,o);if(!h)throw new V.MissingAPI;h.onerror=Ft(l),h.onblocked=De(e._fireOnBlocked),h.onupgradeneeded=De(function(r){var a;d=h.transaction,t.autoSchema&&!e._options.allowEmptyDB?(h.onerror=qt,d.abort(),h.result.close(),(a=n.deleteDatabase(u)).onsuccess=a.onerror=De(function(){l(new V.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=Ft(l),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,f=r<1,e.idbdb=h.result,s&&cn(e,d),sn(e,r/10,d,l))},l),h.onsuccess=De(function(){d=null;var n,i,l,m,p,y=e.idbdb=h.result,b=g(y.objectStoreNames);if(0<b.length)try{var v=y.transaction(1===(m=b).length?m[0]:m,"readonly");if(t.autoSchema)i=y,l=v,(n=e).verno=i.version/10,l=n._dbSchema=hn(0,i,l),n._storeNames=g(i.objectStoreNames,0),rn(n,[n._allTables],a(l),l);else if(mn(e,e._dbSchema,v),((p=ln(hn(0,(p=e).idbdb,v),p._dbSchema)).add.length||p.change.some(function(e){return e.add.length||e.change.length}))&&!s)return y.close(),o=y.version+1,s=!0,r(c());nn(e,v)}catch(x){}tt.push(e),y.onversionchange=De(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),y.onclose=De(function(){e.close({disableAutoOpen:!1})}),f&&(p=e._deps,v=u,y=p.indexedDB,p=p.IDBKeyRange,vn(y)||v===nt||bn(y,p).put({name:v}).catch(Y)),r()},l)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,c();break;case"VersionError":if(0<o)return o=0,c()}return ke.reject(e)})}var l,u=t.dbReadyResolve,d=null,f=!1;return ke.race([r,("undefined"==typeof navigator?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}l=setInterval(t,100),t()}).finally(function(){return clearInterval(l)}):Promise.resolve()).then(c)]).then(function(){return i(),t.onReadyBeingFired=[],ke.resolve(xn(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,Y);return t.onReadyBeingFired=[],ke.resolve(xn(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{d&&d.abort()}catch(a){}return r===t.openCanceller&&e._close(),Xe(n)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return f&&(t={},e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new kn(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new kn(-1/0,[[[]]])}),Ut(Bt).fire(t),In(t,!0)),e})}function Kn(e){function t(t){return e.next(t)}var n=a(t),r=a(function(t){return e.throw(t)});function a(e){return function(t){var a=e(t);return t=a.value,a.done?t:t&&"function"==typeof t.then?t.then(n,r):o(t)?Promise.all(t).then(n,r):n(t)}}return a(t)()}function Fn(e,t,n){for(var r=o(e)?e.slice():[e],a=0;a<n;++a)r.push(t);return r}var qn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),a=r.schema,o={},s=[];function i(e,n,r){var a=Zt(e),c=o[a]=o[a]||[],l=null==e?0:"string"==typeof e?1:e.length,u=0<n;return u=t(t({},r),{name:u?"".concat(a,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:u,keyTail:n,keyLength:l,extractKey:Jt(e),unique:!u&&r.unique}),c.push(u),u.isPrimaryKey||s.push(u),1<l&&i(2===l?e[0]:e.slice(0,l-1),n+1,r),c.sort(function(e,t){return e.keyTail-t.keyTail}),u}n=i(a.primaryKey.keyPath,0,a.primaryKey),o[":id"]=[n];for(var c=0,l=a.indexes;c<l.length;c++){var u=l[c];i(u.keyPath,0,u)}function d(n){var r,a=n.query.index;return a.isVirtual?t(t({},n),{query:{index:a.lowLevelIndex,range:(r=n.query.range,a=a.keyTail,{type:1===r.type?2:r.type,lower:Fn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:Fn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},a),{primaryKey:n,indexes:s,getIndexByKeyPath:function(e){return(e=o[Zt(e)])&&e[0]}}),count:function(e){return r.count(d(e))},query:function(e){return r.query(d(e))},openCursor:function(t){var n=t.query.index,a=n.keyTail,o=n.isVirtual,s=n.keyLength;return o?r.openCursor(d(t)).then(function(e){return e&&i(e)}):r.openCursor(t);function i(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Fn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?n.continue(n.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Fn(t,e.MAX_KEY,a),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return n.value}}})}}})}})}};function Bn(e,t,n,r){return n=n||{},r=r||"",a(e).forEach(function(a){var o,s,i;l(t,a)?(o=e[a],s=t[a],"object"==typeof o&&"object"==typeof s&&o&&s?(i=R(o))!==R(s)?n[r+a]=t[a]:"Object"===i?Bn(o,s,n,r+a+"."):o!==s&&(n[r+a]=t[a]):o!==s&&(n[r+a]=t[a])):n[r+a]=void 0}),a(t).forEach(function(a){l(e,a)||(n[r+a]=t[a])}),n}function zn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var Un={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(r){var a=e.table(r),o=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var s=be.trans,i=s.table(r).hook,c=i.deleting,u=i.creating,d=i.updating;switch(e.type){case"add":if(u.fire===Y)break;return s._promise("readwrite",function(){return f(e)},!0);case"put":if(u.fire===Y&&d.fire===Y)break;return s._promise("readwrite",function(){return f(e)},!0);case"delete":if(c.fire===Y)break;return s._promise("readwrite",function(){return f(e)},!0);case"deleteRange":if(c.fire===Y)break;return s._promise("readwrite",function(){return function e(n,r,s){return a.query({trans:n,values:!1,query:{index:o,range:r},limit:s}).then(function(a){var o=a.result;return f({type:"delete",keys:o,trans:n}).then(function(a){return 0<a.numFailures?Promise.reject(a.failures[0]):o.length<s?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:o[o.length-1],lowerOpen:!0}),s)})})}(e.trans,e.range,1e4)},!0)}return a.mutate(e);function f(e){var r,s,i,f=be.trans,h=e.keys||zn(o,e);if(!h)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:h}):t({},e)).type&&(e.values=n([],e.values)),e.keys&&(e.keys=n([],e.keys)),r=a,i=h,("add"===(s=e).type?Promise.resolve([]):r.getMany({trans:s.trans,keys:i,cache:"immutable"})).then(function(t){var n=h.map(function(n,r){var a,s,i,h=t[r],m={onerror:null,onsuccess:null};return"delete"===e.type?c.fire.call(m,n,h,f):"add"===e.type||void 0===h?(a=u.fire.call(m,n,e.values[r],f),null==n&&null!=a&&(e.keys[r]=n=a,o.outbound||k(e.values[r],o.keyPath,n))):(a=Bn(h,e.values[r]),(s=d.fire.call(m,a,n,h,f))&&(i=e.values[r],Object.keys(s).forEach(function(e){l(i,e)?i[e]=s[e]:k(i,e,s[e])}))),m});return a.mutate(e).then(function(r){for(var a=r.failures,o=r.results,s=r.numFailures,i=(r=r.lastResult,0);i<h.length;++i){var c=(o||h)[i],l=n[i];null==c?l.onerror&&l.onerror(a[i]):l.onsuccess&&l.onsuccess("put"===e.type&&t[i]?e.values[i]:c)}return{failures:a,results:o,numFailures:s,lastResult:r}}).catch(function(e){return n.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function $n(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)0===lt(t.keys[a],e[o])&&(r.push(n?P(t.values[a]):t.values[a]),++o);return r.length===e.length?r:null}catch(s){return null}}var Wn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=$n(e.keys,e.trans._cache,"clone"===e.cache);return t?ke.resolve(t):r.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Vn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Gn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Hn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new kn(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(be.subscr&&"readonly"!==n)throw new V.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return e.transaction(t,n,r)},table:function(s){var i=e.table(s),c=i.schema,l=c.primaryKey,u=c.indexes,d=l.extractKey,f=l.outbound,h=l.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(l.keyPath)}),m=t(t({},i),{mutate:function(t){function a(e){return e="idb://".concat(n,"/").concat(s,"/").concat(e),p[e]||(p[e]=new kn)}var u,d,f,m=t.trans,p=t.mutatedParts||(t.mutatedParts={}),g=a(""),y=a(":dels"),b=t.type,v=(w="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[zn(l,t).filter(function(e){return e}),t.values]:[])[0],x=w[1],w=t.trans._cache;return o(v)?(g.addKeys(v),(w="delete"===b||v.length===x.length?$n(v,w):null)||y.addKeys(v),(w||x)&&(u=a,d=w,f=x,c.indexes.forEach(function(e){var t=u(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&o(n)?n.forEach(function(e){return t.addKey(e)}):t.addKey(n)}(d||f).forEach(function(e,t){var a=d&&n(d[t]);0!==lt(a,t=f&&n(f[t]))&&(null!=a&&r(a),null!=t&&r(t))})}))):v?(x={from:null!==(x=v.lower)&&void 0!==x?x:e.MIN_KEY,to:null!==(x=v.upper)&&void 0!==x?x:e.MAX_KEY},y.add(x),g.add(x)):(g.add(r),y.add(r),c.indexes.forEach(function(e){return a(e.name).add(r)})),i.mutate(t).then(function(e){return!v||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),h&&h.forEach(function(n){for(var r=t.values.map(function(e){return n.extractKey(e)}),o=n.keyPath.findIndex(function(e){return e===l.keyPath}),s=0,i=e.results.length;s<i;++s)r[s][o]=e.results[s];a(n.name).addKeys(r)})),m.mutatedParts=Pn(m.mutatedParts||{},p),e})}}),p={get:function(e){return[l,new kn(e.key)]},getMany:function(e){return[l,(new kn).addKeys(e.keys)]},count:u=function(t){t=(n=t.query).index;var n=n.range;return[t,new kn(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},query:u,openCursor:u};return a(p).forEach(function(e){m[e]=function(a){var o=!!(m=be.subscr),c=Vn(be,i)&&Gn(e,a)?a.obsSet={}:m;if(o){var l=function(e){return e="idb://".concat(n,"/").concat(s,"/").concat(e),c[e]||(c[e]=new kn)},u=l(""),h=l(":dels"),m=(o=(m=p[e](a))[0],m[1]);if(("query"===e&&o.isPrimaryKey&&!a.values?h:l(o.name||"")).add(m),!o.isPrimaryKey){if("count"!==e){var g="query"===e&&f&&a.values&&i.query(t(t({},a),{values:!1}));return i[e].apply(this,arguments).then(function(t){if("query"===e){if(f&&a.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var n=a.values?t.result.map(d):t.result;(a.values?u:h).addKeys(n)}else if("openCursor"===e){var r=t,o=a.values;return r&&Object.create(r,{key:{get:function(){return h.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return h.addKey(e),e}},value:{get:function(){return o&&u.addKey(r.primaryKey),r.value}}})}return t})}h.add(r)}}return i[e].apply(this,arguments)}}),m}})}};function Yn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var a=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===a?null:(n=t({},n),o(n.keys)&&(n.keys=n.keys.filter(function(e,t){return!(t in r.failures)})),"values"in n&&o(n.values)&&(n.values=n.values.filter(function(e,t){return!(t in r.failures)})),n)}function Jn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<lt(n,r.lower):0<=lt(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?lt(e,t.upper)<0:lt(e,t.upper)<=0));var n,r}function Xn(e,t,n,r,a,s){if(!n||0===n.length)return e;var i=t.query.index,c=i.multiEntry,l=t.query.range,u=r.schema.primaryKey.extractKey,d=i.extractKey,f=(i.lowLevelIndex||i).extractKey;return(n=n.reduce(function(e,n){var r=e,a=[];if("add"===n.type||"put"===n.type)for(var s=new kn,i=n.values.length-1;0<=i;--i){var f,h=n.values[i],m=u(h);s.hasKey(m)||(f=d(h),(c&&o(f)?f.some(function(e){return Jn(e,l)}):Jn(f,l))&&(s.addKey(m),a.push(h)))}switch(n.type){case"add":var p=(new kn).addKeys(t.values?e.map(function(e){return u(e)}):e);r=e.concat(t.values?a.filter(function(e){return e=u(e),!p.hasKey(e)&&(p.addKey(e),!0)}):a.map(function(e){return u(e)}).filter(function(e){return!p.hasKey(e)&&(p.addKey(e),!0)}));break;case"put":var g=(new kn).addKeys(n.values.map(function(e){return u(e)}));r=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?a:a.map(function(e){return u(e)}));break;case"delete":var y=(new kn).addKeys(n.keys);r=e.filter(function(e){return!y.hasKey(t.values?u(e):e)});break;case"deleteRange":var b=n.range;r=e.filter(function(e){return!Jn(u(e),b)})}return r},e))===e?e:(n.sort(function(e,t){return lt(f(e),f(t))||lt(u(e),u(t))}),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(a.dirty=!0)),s?Object.freeze(n):n)}function Qn(e,t){return 0===lt(e.lower,t.lower)&&0===lt(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Zn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=lt(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=lt(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function er(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){var r,a;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,a=t,setTimeout(function(){0===r.subscribers.size&&D(a,r)},3e3))})}var tr={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,a){var o,s,i=e.transaction(t,r,a);return"readwrite"===r&&(s=(o=new AbortController).signal,a=function(a){return function(){if(o.abort(),"readwrite"===r){for(var s=new Set,c=0,l=t;c<l.length;c++){var u=l[c],d=Rn["idb://".concat(n,"/").concat(u)];if(d){var f=e.table(u),h=d.optimisticOps.filter(function(e){return e.trans===i});if(i._explicit&&a&&i.mutatedParts)for(var m=0,p=Object.values(d.queries.query);m<p.length;m++)for(var g=0,y=(x=p[m]).slice();g<y.length;g++)On((w=y[g]).obsSet,i.mutatedParts)&&(D(x,w),w.subscribers.forEach(function(e){return s.add(e)}));else if(0<h.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==i});for(var b=0,v=Object.values(d.queries.query);b<v.length;b++)for(var x,w,k,j=0,N=(x=v[b]).slice();j<N.length;j++)null!=(w=N[j]).res&&i.mutatedParts&&(a&&!w.dirty?(k=Object.isFrozen(w.res),k=Xn(w.res,w.req,h,f,w,k),w.dirty?(D(x,w),w.subscribers.forEach(function(e){return s.add(e)})):k!==w.res&&(w.res=k,w.promise=ke.resolve({result:k}))):(w.dirty&&D(x,w),w.subscribers.forEach(function(e){return s.add(e)})))}}}s.forEach(function(e){return e()})}}},i.addEventListener("abort",a(!1),{signal:s}),i.addEventListener("error",a(!1),{signal:s}),i.addEventListener("complete",a(!0),{signal:s})),i},table:function(r){var a=e.table(r),o=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var s=be.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return a.mutate(e);var i=Rn["idb://".concat(n,"/").concat(r)];return i?(s=a.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||zn(o,e).some(function(e){return null==e}))?(i.optimisticOps.push(e),e.mutatedParts&&Dn(e.mutatedParts),s.then(function(t){0<t.numFailures&&(D(i.optimisticOps,e),(t=Yn(0,e,t))&&i.optimisticOps.push(t),e.mutatedParts&&Dn(e.mutatedParts))}),s.catch(function(){D(i.optimisticOps,e),e.mutatedParts&&Dn(e.mutatedParts)})):s.then(function(n){var r=Yn(0,t(t({},e),{values:e.values.map(function(e,r){var a;return n.failures[r]||k(e=null!==(a=o.keyPath)&&void 0!==a&&a.includes(".")?P(e):t({},e),o.keyPath,n.results[r]),e})}),n);i.optimisticOps.push(r),queueMicrotask(function(){return e.mutatedParts&&Dn(e.mutatedParts)})}),s):a.mutate(e)},query:function(e){if(!Vn(be,a)||!Gn("query",e))return a.query(e);var t="immutable"===(null===(i=be.trans)||void 0===i?void 0:i.db._options.cache),o=(l=be).requery,s=l.signal,i=function(e,t,n,r){var a=Rn["idb://".concat(e,"/").concat(t)];if(!a)return[];if(!(t=a.queries[n]))return[null,!1,a,null];var o=t[(r.query?r.query.index.name:null)||""];if(!o)return[null,!1,a,null];switch(n){case"query":var s=o.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Qn(e.req.query.range,r.query.range)});return s?[s,!0,a,o]:[o.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Zn(e.req.query.range,r.query.range)}),!1,a,o];case"count":return[s=o.find(function(e){return Qn(e.req.query.range,r.query.range)}),!!s,a,o]}}(n,r,"query",e),c=i[0],l=i[1],u=i[2],d=i[3];return c&&l?c.obsSet=e.obsSet:(l=a.query(e).then(function(e){var n=e.result;if(c&&(c.res=n),t){for(var r=0,a=n.length;r<a;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=P(n);return e}).catch(function(e){return d&&c&&D(d,c),Promise.reject(e)}),c={obsSet:e.obsSet,promise:l,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(c):(d=[c],(u=u||(Rn["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),er(c,d,o,s),c.promise.then(function(n){return{result:Xn(n.result,e,null==u?void 0:u.optimisticOps,a,c,t)}})}})}})}};function nr(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var rr=(ar.prototype.version=function(e){if(isNaN(e)||e<.1)throw new V.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(on),n.stores({}),this._state.autoSchema=!1,n)},ar.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?e():new ke(function(e,n){if(t._state.openComplete)return n(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new V.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,n)}).then(e)},ar.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:a}),e.sort(function(e,t){return e.level-t.level}),this},ar.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:!!n&&e.name!==n})),this},ar.prototype.open=function(){var e=this;return He(ye,function(){return Ln(e)})},ar.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(n){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ke(function(t){e.dbReadyResolve=t}),e.openCanceller=new ke(function(t,n){e.cancelOpen=n}))},ar.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new V.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new V.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},ar.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new ke(function(a,o){function s(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=De(function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,vn(r)||n===nt||bn(r,e).delete(n).catch(Y),a()}),n.onerror=Ft(o),n.onblocked=t._fireOnBlocked}if(n)throw new V.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(s):s()})},ar.prototype.backendDB=function(){return this.idbdb},ar.prototype.isOpen=function(){return null!==this.idbdb},ar.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},ar.prototype.hasFailed=function(){return null!==this._state.dbOpenError},ar.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(ar.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),ar.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new V.InvalidArgument("Too few arguments");for(var a=new Array(r-1);--r;)a[r-1]=arguments[r];return n=a.pop(),[e,E(a),n]}.apply(this,arguments);return this._transaction.apply(this,e)},ar.prototype._transaction=function(e,t,n){var r=this,a=be.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var o,s,i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===rt)o=rt;else{if("rw"!=e&&e!=at)throw new V.InvalidArgument("Invalid transaction mode: "+e);o=at}if(a){if(a.mode===rt&&o===at){if(!i)throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&s.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!i)throw new V.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),i&&a&&!a.active&&(a=null)}}catch(l){return a?a._promise(null,function(e,t){t(l)}):Xe(l)}var c=function e(t,n,r,a,o){return ke.resolve().then(function(){var s=be.transless||be,i=t._createTransaction(n,r,t._dbSchema,a);if(i.explicit=!0,s={trans:i,transless:s},a)i.idbtrans=a.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(u){return u.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,n,r,null,o)})):Xe(u)}var c,l=L(o);return l&&ze(),s=ke.follow(function(){var e;(c=o.call(i,i))&&(l?(e=Ue.bind(null,null),c.then(e,e)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=Kn(c)))},s),(c&&"function"==typeof c.then?ke.resolve(c).then(function(e){return i.active?e:Xe(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return c})).then(function(e){return a&&i._resolve(),i._completion.then(function(){return e})}).catch(function(e){return i._reject(e),Xe(e)})})}.bind(null,this,o,s,a,n);return a?a._promise(o,c,"lock"):be.trans?He(be.transless,function(){return r._whenReady(c)}):this._whenReady(c)},ar.prototype.table=function(e){if(!l(this._allTables,e))throw new V.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},ar);function ar(e,n){var r=this;this._middlewares={},this.verno=0;var a=ar.dependencies;this._options=n=t({addons:ar.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},a=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,s,i,c,l,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};u.dbReadyPromise=new ke(function(e){u.dbReadyResolve=e}),u.openCanceller=new ke(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=bt(this,"populate","blocked","versionchange","close",{ready:[re,Y]}),this.once=function(e,t){var n=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];r.on(e).unsubscribe(n),t.apply(r,a)};return r.on(e,n)},this.on.ready.subscribe=y(this.on.ready.subscribe,function(e){return function(t,n){ar.vip(function(){var a,o=r._state;o.openComplete?(o.dbOpenError||ke.resolve().then(t),n&&e(t)):o.onReadyBeingFired?(o.onReadyBeingFired.push(t),n&&e(t)):(e(t),a=r,n||e(function e(){a.on.ready.unsubscribe(t),a.on.ready.unsubscribe(e)}))})}}),this.Collection=(o=this,vt(St.prototype,function(e,t){this.db=o;var n=st,r=null;if(t)try{n=t()}catch(s){r=s}var a=e._ctx;e=(t=a.table).hook.reading.fire,this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:a.or,valueMapper:e!==J?e:null}})),this.Table=(s=this,vt(gt.prototype,function(e,t,n){this.db=s,this._tx=n,this.name=e,this.schema=t,this.hook=s._allTables[e]?s._allTables[e].hook:bt(null,{creating:[Z,Y],reading:[X,J],updating:[te,Y],deleting:[ee,Y]})})),this.Transaction=(i=this,vt($t.prototype,function(e,t,n,r,a){var o=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=n[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=i,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=bt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Xe(e)})})),this.Version=(c=this,vt(gn.prototype,function(e){this.db=c,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(l=this,vt(Lt.prototype,function(e,t,n){if(this.db=l,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=lt,this._descending=function(e,t){return lt(t,e)},this._max=function(e,t){return 0<lt(e,t)?e:t},this._min=function(e,t){return lt(e,t)<0?e:t},this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new V.MissingAPI})),this.on("versionchange",function(e){e.newVersion,r.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||(e.newVersion,e.oldVersion)}),this._maxKey=Yt(n.IDBKeyRange),this._createTransaction=function(e,t,n,a){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter(function(e){return e.name===r.name&&e!==r&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(Wn),this.use(tr),this.use(Hn),this.use(qn),this.use(Un);var d=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return nr(r.table(e),d)};var a=Reflect.get(e,t,n);return a instanceof gt?nr(a,d):"tables"===t?a.map(function(e){return nr(e,d)}):"_createTransaction"===t?function(){return nr(a.apply(this,arguments),d)}:a}});this.vip=d,a.forEach(function(e){return e(r)})}K="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var or,sr=(ir.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},ir.prototype[K]=function(){return this},ir);function ir(e){this._subscribe=e}try{or={indexedDB:r.indexedDB||r.mozIndexedDB||r.webkitIndexedDB||r.msIndexedDB,IDBKeyRange:r.IDBKeyRange||r.webkitIDBKeyRange}}catch(mr){or={indexedDB:null,IDBKeyRange:null}}function cr(e){var t,n=!1,r=new sr(function(r){var a,o=L(e),s=!1,i={},c={},u={get closed(){return s},unsubscribe:function(){s||(s=!0,a&&a.abort(),d&&Ut.storagemutated.unsubscribe(h))}};r.start&&r.start(u);var d=!1,f=function(){return Je(m)},h=function(e){Pn(i,e),On(c,i)&&f()},m=function(){var u,m,p;!s&&or.indexedDB&&(i={},u={},a&&a.abort(),a=new AbortController,p=function(t){var n=Oe();try{o&&ze();var r=Be(e,t);return r=o?r.finally(Ue):r}finally{n&&Re()}}(m={subscr:u,signal:a.signal,requery:f,querier:e,trans:null}),Promise.resolve(p).then(function(e){n=!0,t=e,s||m.signal.aborted||(i={},function(e){for(var t in e)if(l(e,t))return;return 1}(c=u)||d||(Ut(Bt,h),d=!0),Je(function(){return!s&&r.next&&r.next(e)}))},function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||Je(function(){s||r.error&&r.error(e)})}))};return setTimeout(f,0),u});return r.hasValue=function(){return n},r.getValue=function(){return t},r}var lr=rr;function ur(e){var t=fr;try{fr=!0,Ut.storagemutated.fire(e),In(e,!0)}finally{fr=t}}u(lr,t(t({},H),{delete:function(e){return new lr(e,{addons:[]}).delete()},exists:function(e){return new lr(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return n=(t=lr.dependencies).indexedDB,t=t.IDBKeyRange,(vn(n)?Promise.resolve(n.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==nt})}):bn(n,t).toCollection().primaryKeys()).then(e)}catch(r){return Xe(new V.MissingAPI)}var t,n},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return be.trans?He(be.transless,e):e()},vip:xn,async:function(e){return function(){try{var t=Kn(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ke.resolve(t)}catch(n){return Xe(n)}}},spawn:function(e,t,n){try{var r=Kn(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:ke.resolve(r)}catch(a){return Xe(a)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(e,t){return t=ke.resolve("function"==typeof e?lr.ignoreTransaction(e):e).timeout(t||6e4),be.trans?be.trans.waitFor(t):t},Promise:ke,debug:{get:function(){return ae},set:function(e){oe(e)}},derive:h,extend:s,props:u,override:y,Events:bt,on:Ut,liveQuery:cr,extendObservabilitySet:Pn,getByKeyPath:w,setByKeyPath:k,delByKeyPath:function(e,t){"string"==typeof t?k(e,t,void 0):"length"in t&&[].map.call(t,function(t){k(e,t,void 0)})},shallowClone:j,deepClone:P,getObjectDiff:Bn,cmp:lt,asap:v,minKey:-1/0,addons:[],connections:tt,errnames:$,dependencies:or,cache:Rn,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,2*n)})})),lr.maxKey=Yt(lr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ut(Bt,function(e){fr||(e=new CustomEvent(zt,{detail:e}),fr=!0,dispatchEvent(e),fr=!1)}),addEventListener(zt,function(e){e=e.detail,fr||ur(e)}));var dr,fr=!1,hr=function(){};return"undefined"!=typeof BroadcastChannel&&((hr=function(){(dr=new BroadcastChannel(zt)).onmessage=function(e){return e.data&&ur(e.data)}})(),"function"==typeof dr.unref&&dr.unref(),Ut(Bt,function(e){fr||dr.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rr.disableBfCache&&e.persisted){null!=dr&&dr.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rr.disableBfCache&&e.persisted&&(hr(),ur({all:new kn(-1/0,[[]])}))})),ke.rejectionMapper=function(e,t){return!e||e instanceof q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!G[e.name]?e:(t=new G[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},oe(ae),t(rr,Object.freeze({__proto__:null,Dexie:rr,liveQuery:cr,Entity:ct,cmp:lt,PropModification:ht,replacePrefix:function(e,t){return new ht({replacePrefix:[e,t]})},add:function(e){return new ht({add:e})},remove:function(e){return new ht({remove:e})},default:rr,RangeSet:kn,mergeRanges:Nn,rangesOverlap:En}),{default:rr}),rr}()),Ea=Symbol.for("Dexie"),_a=globalThis[Ea]||(globalThis[Ea]=Na);if(Na.semVer!==_a.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Na.semVer} and ${_a.semVer}`);const{liveQuery:Sa,mergeRanges:Ca,rangesOverlap:Pa,RangeSet:Oa,cmp:Ra,Entity:Aa,PropModification:Ta,replacePrefix:Da,add:Ia,remove:Ma,DexieYProvider:La}=_a;const Ka=new class extends _a{constructor(){super("smartmoney-db"),t(this,"transactions"),t(this,"accounts"),t(this,"budgets"),t(this,"goals"),t(this,"sync_queue"),t(this,"app_meta"),this.version(1).stores({transactions:"++id, date, category, source, type, account_id, [date+category], [date+account_id]",accounts:"++id, name, type, is_active, currency",budgets:"++id, month",goals:"++id, status, end_date",sync_queue:"++id, timestamp, retry_count, status, entity_type",app_meta:"id"})}};const Fa=[1e3,2e3,4e3,8e3,16e3];async function qa(e,t,n,r){const a={operation_type:e,entity_type:t,entity_id:n,payload:r,timestamp:Date.now(),retry_count:0,status:"pending"};return await Ka.sync_queue.add(a)}async function Ba(e){const t=function(e,t){const n=`/api/${e}s`;return"number"==typeof t&&t>0?`${n}/${t}`:n}(e.entity_type,e.entity_id),n=function(e){switch(e){case"CREATE":return"POST";case"UPDATE":return"PUT";case"DELETE":return"DELETE"}}(e.operation_type),r=await nr.request({method:n,url:t,data:"DELETE"!==e.operation_type?e.payload:void 0});if(r.status>=400)throw new Error(`Sync failed: ${r.status}`)}async function za(){return await Ka.sync_queue.where("status").equals("pending").count()}let Ua=null,$a=!1;const Wa=new Set;let Va={isOnline:navigator.onLine,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null};function Ga(e){Va={...Va,...e},Wa.forEach(e=>e(Va))}async function Ha(){if(!$a&&navigator.onLine){$a=!0,Ga({isSyncing:!0});try{const e=await async function(){const e=await Ka.sync_queue.where("status").equals("pending").and(e=>e.retry_count<5).sortBy("timestamp");let t=0,n=0;for(const a of e)try{if(await Ka.sync_queue.update(a.id,{status:"processing"}),a.retry_count>0){const e=Fa[Math.min(a.retry_count-1,Fa.length-1)];await new Promise(t=>setTimeout(t,e))}await Ba(a),await Ka.sync_queue.delete(a.id),t++}catch(r){const e=r instanceof Error?r.message:"Unknown error",t=a.retry_count+1;await Ka.sync_queue.update(a.id,{status:t>=5?"failed":"pending",retry_count:t,last_error:e}),n++}return{processed:t,failed:n}}();Ga({isSyncing:!1,pendingCount:await za(),lastSyncAt:new Date,lastError:e.failed>0?`${e.failed} operations failed`:null})}catch(e){Ga({isSyncing:!1,lastError:e instanceof Error?e.message:"Sync failed"})}finally{$a=!1}}}const Ya={isOnline:!0,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null},Ja=v.createContext({...Ya,triggerSync:async()=>{}});function Xa({children:e}){const[t,n]=v.useState(Ya);v.useEffect(()=>{window.addEventListener("online",async()=>{Ga({isOnline:!0}),await Ha()}),window.addEventListener("offline",()=>{Ga({isOnline:!1})}),document.addEventListener("visibilitychange",async()=>{!document.hidden&&navigator.onLine&&await Ha()}),Ua=setInterval(async()=>{if(navigator.onLine){const e=await za();Ga({pendingCount:e}),e>0&&await Ha()}},3e4),za().then(e=>Ga({pendingCount:e}));const e=(t=n,Wa.add(t),t(Va),()=>Wa.delete(t));var t;return()=>{e(),Ua&&(clearInterval(Ua),Ua=null)}},[]);const r=v.useCallback(async()=>{await Ha()},[]);return a.jsx(Ja.Provider,{value:{...t,triggerSync:r},children:e})}const Qa=["auth","user","session","credit"],Za=new c({defaultOptions:{queries:{gcTime:864e5,staleTime:3e5,retry:2,refetchOnWindowFocus:!1,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}});function eo(){}function to(e,{interval:t=1e3,onError:n=eo}={}){if("function"!=typeof e)throw new Error("argument is not function.");let r=0,a=null,o=!1,s=!1;return async(...i)=>{if(a=i,!s){for(s=!0;o;)await new Promise(e=>l.setTimeout(e,t));for(;Date.now()<r;)await new Promise(e=>l.setTimeout(e,r-Date.now()));s=!1,o=!0;try{await e(...a)}catch(c){try{n(c)}catch{}}r=Date.now()+t,o=!1}}}const no=(({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:n=1e3,serialize:r=JSON.stringify,deserialize:a=JSON.parse,retry:o})=>{if(e){const s=async n=>{try{const a=await r(n);return void(await e.setItem(t,a))}catch(a){return a}};return{persistClient:to(async e=>{let t=e,n=await s(t),r=0;for(;n&&t;)r++,t=await(null==o?void 0:o({persistedClient:t,error:n,errorCount:r})),t&&(n=await s(t))},{interval:n}),restoreClient:async()=>{const n=await e.getItem(t);if(n)return await a(n)},removeClient:()=>e.removeItem(t)}}return{persistClient:eo,restoreClient:()=>Promise.resolve(void 0),removeClient:eo}})({storage:{getItem:async e=>{try{const t=await Ka.app_meta.get(e);return t?JSON.stringify(t):null}catch(t){return null}},setItem:async(e,t)=>{try{const n=JSON.parse(t);await Ka.app_meta.put({id:e,...n})}catch(n){}},removeItem:async e=>{try{await Ka.app_meta.delete(e)}catch(t){}}},throttleTime:1e4,key:"tanstack-query-cache"}),ro={},ao=function(e,t,n){let r=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),n=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));r=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in ro)return;ro[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},oo=[{code:"ja",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function so(){const{i18n:e,t:t}=ge("common"),[n,r]=v.useState(!1),o=v.useRef(null),s=oo.find(t=>t.code===e.language)||oo[0];return v.useEffect(()=>{function e(e){o.current&&!o.current.contains(e.target)&&r(!1)}return n&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[n]),a.jsxs("div",{className:"relative",ref:o,children:[a.jsxs("button",{onClick:()=>r(!n),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":t("language.selectLanguage"),"aria-expanded":n,"aria-haspopup":"true",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:s.flag}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline text-gray-700 dark:text-gray-200",children:s.name}),a.jsx("svg",{className:pa("w-4 h-4 transition-transform",n&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),n&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:oo.map(t=>a.jsxs("button",{onClick:()=>{return n=t.code,e.changeLanguage(n),void r(!1);var n},className:pa("w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","first:rounded-t-lg last:rounded-b-lg","text-gray-700 dark:text-gray-200",e.language===t.code&&"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400"),role:"menuitem",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:t.flag}),a.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:t.name}),e.language===t.code&&a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-label":"Selected",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},t.code))})]})}function io(){const{t:e}=ge("common"),{resolvedTheme:t,setTheme:n}=kr();return a.jsx("button",{onClick:()=>{n("dark"===t?"light":"dark")},className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus-ring","aria-label":e("dark"===t?"aria.lightMode":"aria.darkMode"),title:e("dark"===t?"aria.lightMode":"aria.darkMode"),children:"dark"===t?a.jsx(A,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(T,{className:"w-5 h-5","aria-hidden":"true"})})}const co=new class{async trackAction(e,t){return(await nr.post("/api/gamification/action",{action:e,metadata:t||{}})).data}async trackLogin(){return(await nr.post("/api/gamification/login")).data}async getStats(){return(await nr.get("/api/gamification/stats")).data}async getAchievements(){return(await nr.get("/api/gamification/achievements")).data}async initializeAchievements(){return(await nr.post("/api/gamification/initialize-achievements")).data}calculateLevelProgress(e,t,n){const r=[0,100,250,500,1e3,1750,2750,4e3,5500,7500,1e4,13e3,16500,20500,25e3,3e4,36e3,43e3,51e3,6e4,7e4,81e3,93e3,106e3,12e4,135e3,151e3,168e3,186e3,205e3];if(t>=r.length){return(e-(205e3+25e3*(t-30)))/25e3*100}const a=r[t-1];return(e-a)/(r[t]-a)*100}};function lo(){const{data:e,isLoading:t}=i({queryKey:["gamification","stats"],queryFn:async()=>(await nr.get("/api/gamification/stats")).data,staleTime:6e4});if(t||!e)return a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200/50 dark:border-amber-700/50",children:[a.jsx(D,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"}),a.jsx("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:"Lv. -"})]});const n=e.current_level||1,r=e.total_xp||0,o=n>=20,s=n>=10;return a.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200/50 dark:border-amber-700/50 shadow-sm hover:shadow-md transition-shadow cursor-pointer",title:`Level ${n}  ${r.toLocaleString()} XP total`,children:[a.jsx(I,{className:"w-3.5 h-3.5 "+(o?"text-yellow-500":s?"text-amber-500":"text-amber-600")}),a.jsxs("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:["Lv.",n]})]})}function uo(){const{t:e}=ge("common"),{logout:t}=ir(),{isPrivacyMode:n,togglePrivacyMode:r}=gr(),[o,s]=v.useState(!1);return a.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[a.jsxs(u,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[a.jsx("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[a.jsx(fo,{to:"/",children:e("header.dashboard")}),a.jsx(fo,{to:"/transactions",children:e("header.transactions")}),a.jsx(fo,{to:"/accounts",children:e("header.accounts")}),a.jsx(fo,{to:"/goals",children:e("header.goals")}),a.jsx(fo,{to:"/analytics",children:e("header.analytics")}),a.jsx(fo,{to:"/budget",children:e("header.budget")}),a.jsx(fo,{to:"/gamification",children:e("header.gamification")}),a.jsx(fo,{to:"/upload",children:e("header.upload")}),a.jsx(fo,{to:"/settings",children:e("header.settings")}),a.jsx(lo,{})]}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx("button",{onClick:r,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(n?"aria.showAmounts":"aria.hideAmounts"),title:e(n?"aria.showAmounts":"aria.hideAmounts"),children:n?a.jsx(M,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"}):a.jsx(L,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx(io,{})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx(so,{})}),a.jsx("button",{onClick:t,className:"hidden md:block text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring",title:e("auth.logout"),children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),a.jsx("button",{onClick:()=>s(!o),className:"md:hidden text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Menu",children:a.jsx(K,{className:"w-5 h-5"})})]})]}),o&&a.jsx("div",{className:"md:hidden py-3 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"flex flex-col space-y-1",children:[a.jsx(ho,{to:"/",onClick:()=>s(!1),children:e("header.dashboard")}),a.jsx(ho,{to:"/transactions",onClick:()=>s(!1),children:e("header.transactions")}),a.jsx(ho,{to:"/accounts",onClick:()=>s(!1),children:e("header.accounts")}),a.jsx(ho,{to:"/goals",onClick:()=>s(!1),children:e("header.goals")}),a.jsx(ho,{to:"/analytics",onClick:()=>s(!1),children:e("header.analytics")}),a.jsx(ho,{to:"/budget",onClick:()=>s(!1),children:e("header.budget")}),a.jsx(ho,{to:"/gamification",onClick:()=>s(!1),children:e("header.gamification")}),a.jsx(ho,{to:"/upload",onClick:()=>s(!1),children:e("header.upload")}),a.jsx(ho,{to:"/settings",onClick:()=>s(!1),children:e("header.settings")}),a.jsxs("div",{className:"flex items-center gap-3 pt-3 mt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(io,{}),a.jsx(so,{}),a.jsxs("button",{onClick:()=>{s(!1),t()},className:"flex items-center gap-2 text-red-600 dark:text-red-400 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})]})})]})})}function fo({to:e,children:t}){return a.jsx(u,{to:e,className:pa("text-sm xl:text-base text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors pb-1","focus-ring rounded"),activeProps:{className:"text-primary-600 dark:text-primary-400 font-medium border-b-2 border-primary-600 dark:border-primary-400"},children:t})}function ho({to:e,onClick:t,children:n}){return a.jsx(u,{to:e,onClick:t,className:"flex items-center px-3 py-2.5 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-medium",activeProps:{className:"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400"},children:n})}function mo(){const e=(new Date).getFullYear();return a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center text-sm text-gray-500",children:a.jsxs("p",{children:[" ",e," SmartMoney. All rights reserved."]})})})})}const po=[{path:"/",icon:$,labelKey:"nav.home"},{path:"/budget",icon:F,labelKey:"nav.budget"},{path:"/accounts",icon:W,labelKey:"nav.accounts"},{path:"/transactions",icon:V,labelKey:"nav.transactions"}],go=[{path:"/analytics",icon:F,labelKey:"nav.analytics"},{path:"/goals",icon:q,labelKey:"nav.goals"},{path:"/settings",icon:B,labelKey:"nav.settings"},{path:"/upload",icon:z,labelKey:"header.upload"}];function yo(){const{t:e}=ge("common"),t=d(),{logout:n}=ir(),[r,o]=v.useState(!1),s=e=>"/"===e?"/"===t.pathname:t.pathname.startsWith(e),i=go.some(e=>s(e.path));return a.jsxs(a.Fragment,{children:[r&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>o(!1)}),r&&a.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 md:hidden rounded-t-2xl shadow-lg animate-slide-up",children:a.jsxs("div",{className:"p-4 space-y-2",children:[go.map(t=>a.jsxs(u,{to:t.path,onClick:()=>o(!1),className:pa("flex items-center gap-3 px-4 py-3.5 rounded-xl transition-colors",s(t.path)?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[a.jsx(t.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e(t.labelKey)})]},t.path)),a.jsxs("button",{onClick:()=>{o(!1),n()},className:"w-full flex items-center gap-3 px-4 py-3.5 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[a.jsx(U,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})}),a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 md:hidden safe-area-bottom",children:a.jsxs("div",{className:"flex items-stretch justify-around h-16",children:[po.map(t=>{const n=s(t.path);return a.jsxs(u,{to:t.path,onClick:()=>o(!1),className:pa("flex flex-col items-center justify-center flex-1 px-1 transition-all relative",n?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:[n&&a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-500 dark:bg-primary-400 rounded-full"}),a.jsx("div",{className:pa("p-2 rounded-xl transition-colors",n&&"bg-primary-50 dark:bg-primary-900/20"),children:a.jsx(t.icon,{className:"w-6 h-6",strokeWidth:n?2.5:2})}),a.jsx("span",{className:"text-[10px] font-medium mt-1 truncate max-w-full px-0.5",children:e(t.labelKey)})]},t.path)}),a.jsxs("button",{onClick:()=>o(!r),className:pa("flex flex-col items-center justify-center flex-1 px-1 transition-all relative",i||r?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:[r&&a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-500 dark:bg-primary-400 rounded-full"}),a.jsx("div",{className:pa("p-2 rounded-xl transition-colors",r&&"bg-primary-50 dark:bg-primary-900/20"),children:a.jsx(G,{className:"w-6 h-6",strokeWidth:r?2.5:2})}),a.jsx("span",{className:"text-[10px] font-medium mt-1",children:e("nav.more")})]})]})})]})}const bo=["/transactions"];function vo({onAddTransaction:e}){const{t:t}=ge("common"),n=f(),r=d(),[o,s]=v.useState(!1);if(bo.includes(r.pathname))return null;const i=[{icon:a.jsx(H,{size:20}),label:t("transaction.addTransaction","Add Transaction"),onClick:()=>{s(!1),e?e():n({to:"/transactions",search:{action:"add-transaction"}})},color:"bg-green-500 hover:bg-green-600"},{icon:a.jsx(V,{size:20}),label:t("receipt.scanReceipt","Scan Receipt"),onClick:()=>{s(!1),n({to:"/transactions",search:{action:"scan-receipt"}})},color:"bg-purple-500 hover:bg-purple-600"},{icon:a.jsx(z,{size:20}),label:t("header.upload","Upload CSV"),onClick:()=>{s(!1),n({to:"/upload"})},color:"bg-blue-500 hover:bg-blue-600"}];return a.jsxs(a.Fragment,{children:[o&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-[101] md:hidden",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed bottom-20 right-4 z-[102] md:hidden flex flex-col-reverse items-end gap-3",children:[o&&a.jsx("div",{className:"flex flex-col-reverse gap-3 mb-2",children:i.map((e,t)=>a.jsxs("button",{onClick:e.onClick,className:pa("flex items-center gap-3 pl-4 pr-5 py-3 rounded-full text-white shadow-lg","transform transition-all duration-200","animate-in fade-in slide-in-from-bottom-2",e.color),style:{animationDelay:50*t+"ms",animationFillMode:"both"},children:[e.icon,a.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:e.label})]},t))}),a.jsx("button",{onClick:()=>s(!o),className:pa("w-14 h-14 rounded-full shadow-lg flex items-center justify-center","transform transition-all duration-300","active:scale-95",o?"bg-gray-700 dark:bg-gray-600 rotate-45":"bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600"),"aria-label":o?t("common.close","Close"):t("fab.quickActions","Quick Actions"),children:o?a.jsx(R,{size:24,className:"text-white"}):a.jsx(G,{size:24,className:"text-white"})})]})]})}function xo({children:e,className:t}){const n=d(),[r,o]=v.useState(!1),[s,i]=v.useState(e);return v.useEffect(()=>{o(!1);const t=setTimeout(()=>{i(e),o(!0)},100);return()=>clearTimeout(t)},[n.pathname]),v.useEffect(()=>{i(e)},[e]),a.jsx("div",{className:pa("transition-all duration-300 ease-out",r?"opacity-100 translate-y-0":"opacity-0 translate-y-2",t),children:s})}var wo=.999,ko=/[\\\/_+.#"@\[\(\{&]/,jo=/[\\\/_+.#"@\[\(\{&]/g,No=/[\s-]/,Eo=/[\s-]/g;function _o(e,t,n,r,a,o,s){if(o===t.length)return a===e.length?1:.99;var i=`${a},${o}`;if(void 0!==s[i])return s[i];for(var c,l,u,d,f=r.charAt(o),h=n.indexOf(f,a),m=0;h>=0;)(c=_o(e,t,n,r,h+1,o+1,s))>m&&(h===a?c*=1:ko.test(e.charAt(h-1))?(c*=.8,(u=e.slice(a,h-1).match(jo))&&a>0&&(c*=Math.pow(wo,u.length))):No.test(e.charAt(h-1))?(c*=.9,(d=e.slice(a,h-1).match(Eo))&&a>0&&(c*=Math.pow(wo,d.length))):(c*=.17,a>0&&(c*=Math.pow(wo,h-a))),e.charAt(h)!==t.charAt(o)&&(c*=.9999)),(c<.1&&n.charAt(h-1)===r.charAt(o+1)||r.charAt(o+1)===r.charAt(o)&&n.charAt(h-1)!==r.charAt(o))&&(.1*(l=_o(e,t,n,r,h+1,o+2,s))>c&&(c=.1*l)),c>m&&(m=c),h=n.indexOf(f,h+1);return s[i]=m,m}function So(e){return e.toLowerCase().replace(Eo," ")}function Co(e,t,n){return _o(e=n&&n.length>0?""+(e+" "+n.join(" ")):e,t,So(e),So(t),0,0,{})}function Po(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==e||e(r),!1===n||!r.defaultPrevented)return null==t?void 0:t(r)}}function Oo(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function Ro(...e){return v.useCallback(Oo(...e),e)}function Ao(...e){const t=e[0];if(1===e.length)return t;const n=()=>{const n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const r=n.reduce((t,{useScope:n,scopeName:r})=>({...t,...n(e)[`__scope${r}`]}),{});return v.useMemo(()=>({[`__scope${t.scopeName}`]:r}),[r])}};return n.scopeName=t.scopeName,n}const To=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?v.useLayoutEffect:()=>{},Do=k["useId".toString()]||(()=>{});let Io=0;function Mo(e){const[t,n]=v.useState(Do());return To(()=>{n(e=>null!=e?e:String(Io++))},[e]),e||(t?`radix-${t}`:"")}function Lo(e){const t=v.useRef(e);return v.useEffect(()=>{t.current=e}),v.useMemo(()=>(...e)=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,...e)},[])}function Ko({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,a]=function({defaultProp:e,onChange:t}){const n=v.useState(e),[r]=n,a=v.useRef(r),o=Lo(t);return v.useEffect(()=>{a.current!==r&&(o(r),a.current=r)},[r,a,o]),n}({defaultProp:t,onChange:n}),o=void 0!==e,s=o?e:r,i=Lo(n);return[s,v.useCallback(t=>{if(o){const n="function"==typeof t?t(e):t;n!==e&&i(n)}else a(t)},[o,e,a,i])]}const Fo=v.forwardRef((e,t)=>{const{children:n,...r}=e,a=v.Children.toArray(n),o=a.find(zo);if(o){const e=o.props.children,n=a.map(t=>t===o?v.Children.count(e)>1?v.Children.only(null):v.isValidElement(e)?e.props.children:null:t);return v.createElement(qo,_({},r,{ref:t}),v.isValidElement(e)?v.cloneElement(e,void 0,n):null)}return v.createElement(qo,_({},r,{ref:t}),n)});Fo.displayName="Slot";const qo=v.forwardRef((e,t)=>{const{children:n,...r}=e;return v.isValidElement(n)?v.cloneElement(n,{...Uo(r,n.props),ref:t?Oo(t,n.ref):n.ref}):v.Children.count(n)>1?v.Children.only(null):null});qo.displayName="SlotClone";const Bo=({children:e})=>v.createElement(v.Fragment,null,e);function zo(e){return v.isValidElement(e)&&e.type===Bo}function Uo(e,t){const n={...t};for(const r in t){const a=e[r],o=t[r];/^on[A-Z]/.test(r)?a&&o?n[r]=(...e)=>{o(...e),a(...e)}:a&&(n[r]=a):"style"===r?n[r]={...a,...o}:"className"===r&&(n[r]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}const $o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const n=v.forwardRef((e,n)=>{const{asChild:r,...a}=e,o=r?Fo:t;return v.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),v.createElement(o,_({},a,{ref:n}))});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});const Wo="dismissableLayer.update",Vo="dismissableLayer.pointerDownOutside",Go="dismissableLayer.focusOutside";let Ho;const Yo=v.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jo=v.forwardRef((e,t)=>{var n;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:c,...l}=e,u=v.useContext(Yo),[d,f]=v.useState(null),h=null!==(n=null==d?void 0:d.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,m]=v.useState({}),p=Ro(t,e=>f(e)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),x=d?g.indexOf(d):-1,w=u.layersWithOutsidePointerEventsDisabled.size>0,k=x>=b,j=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Lo(e),r=v.useRef(!1),a=v.useRef(()=>{});return v.useEffect(()=>{const e=e=>{if(e.target&&!r.current){let r=function(){Qo(Vo,n,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=r,t.addEventListener("click",a.current,{once:!0})):r()}else t.removeEventListener("click",a.current);r.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}(e=>{const t=e.target,n=[...u.branches].some(e=>e.contains(t));k&&!n&&(null==o||o(e),null==i||i(e),e.defaultPrevented||null==c||c())},h),N=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Lo(e),r=v.useRef(!1);return v.useEffect(()=>{const e=e=>{if(e.target&&!r.current){Qo(Go,n,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==s||s(e),null==i||i(e),e.defaultPrevented||null==c||c())},h);return function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Lo(e);v.useEffect(()=>{const e=e=>{"Escape"===e.key&&n(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[n,t])}(e=>{x===u.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},h),v.useEffect(()=>{if(d)return r&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(Ho=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),Xo(),()=>{r&&1===u.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=Ho)}},[d,h,r,u]),v.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),Xo())},[d,u]),v.useEffect(()=>{const e=()=>m({});return document.addEventListener(Wo,e),()=>document.removeEventListener(Wo,e)},[]),v.createElement($o.div,_({},l,{ref:p,style:{pointerEvents:w?k?"auto":"none":void 0,...e.style},onFocusCapture:Po(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Po(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Po(e.onPointerDownCapture,j.onPointerDownCapture)}))});function Xo(){const e=new CustomEvent(Wo);document.dispatchEvent(e)}function Qo(e,t,n,{discrete:r}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&a.addEventListener(e,t,{once:!0}),r?function(e,t){e&&b.flushSync(()=>e.dispatchEvent(t))}(a,o):a.dispatchEvent(o)}const Zo="focusScope.autoFocusOnMount",es="focusScope.autoFocusOnUnmount",ts={bubbles:!1,cancelable:!0},ns=v.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...s}=e,[i,c]=v.useState(null),l=Lo(a),u=Lo(o),d=v.useRef(null),f=Ro(t,e=>c(e)),h=v.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;v.useEffect(()=>{if(r){let e=function(e){if(h.paused||!i)return;const t=e.target;i.contains(t)?d.current=t:ss(d.current,{select:!0})},t=function(e){if(h.paused||!i)return;const t=e.relatedTarget;null!==t&&(i.contains(t)||ss(d.current,{select:!0}))},n=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&ss(i)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const r=new MutationObserver(n);return i&&r.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[r,i,h.paused]),v.useEffect(()=>{if(i){is.add(h);const t=document.activeElement;if(!i.contains(t)){const n=new CustomEvent(Zo,ts);i.addEventListener(Zo,l),i.dispatchEvent(n),n.defaultPrevented||(!function(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ss(r,{select:t}),document.activeElement!==n)return}((e=rs(i),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&ss(i))}return()=>{i.removeEventListener(Zo,l),setTimeout(()=>{const e=new CustomEvent(es,ts);i.addEventListener(es,u),i.dispatchEvent(e),e.defaultPrevented||ss(null!=t?t:document.body,{select:!0}),i.removeEventListener(es,u),is.remove(h)},0)}}var e},[i,l,u,h]);const m=v.useCallback(e=>{if(!n&&!r)return;if(h.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){const t=e.currentTarget,[r,o]=function(e){const t=rs(e),n=as(t,e),r=as(t.reverse(),e);return[n,r]}(t);r&&o?e.shiftKey||a!==o?e.shiftKey&&a===r&&(e.preventDefault(),n&&ss(o,{select:!0})):(e.preventDefault(),n&&ss(r,{select:!0})):a===t&&e.preventDefault()}},[n,r,h.paused]);return v.createElement($o.div,_({tabIndex:-1},s,{ref:f,onKeyDown:m}))});function rs(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function as(e,t){for(const n of e)if(!os(n,{upTo:t}))return n}function os(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function ss(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const is=function(){let e=[];return{add(t){const n=e[0];t!==n&&(null==n||n.pause()),e=cs(e,t),e.unshift(t)},remove(t){var n;e=cs(e,t),null===(n=e[0])||void 0===n||n.resume()}}}();function cs(e,t){const n=[...e],r=n.indexOf(t);return-1!==r&&n.splice(r,1),n}const ls=v.forwardRef((e,t)=>{var n;const{container:r=(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body),...a}=e;return r?j.createPortal(v.createElement($o.div,_({},a,{ref:t})),r):null});const us=e=>{const{present:t,children:n}=e,r=function(e){const[t,n]=v.useState(),r=v.useRef({}),a=v.useRef(e),o=v.useRef("none"),s=e?"mounted":"unmounted",[i,c]=function(e,t){return v.useReducer((e,n)=>{const r=t[e][n];return null!=r?r:e},e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return v.useEffect(()=>{const e=ds(r.current);o.current="mounted"===i?e:"none"},[i]),To(()=>{const t=r.current,n=a.current;if(n!==e){const r=o.current,s=ds(t);if(e)c("MOUNT");else if("none"===s||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{c(n&&r!==s?"ANIMATION_OUT":"UNMOUNT")}a.current=e}},[e,c]),To(()=>{if(t){const e=e=>{const n=ds(r.current).includes(e.animationName);e.target===t&&n&&b.flushSync(()=>c("ANIMATION_END"))},n=e=>{e.target===t&&(o.current=ds(r.current))};return t.addEventListener("animationstart",n),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",n),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:v.useCallback(e=>{e&&(r.current=getComputedStyle(e)),n(e)},[])}}(t),a="function"==typeof n?n({present:r.isPresent}):v.Children.only(n),o=Ro(r.ref,a.ref);return"function"==typeof n||r.isPresent?v.cloneElement(a,{ref:o}):null};function ds(e){return(null==e?void 0:e.animationName)||"none"}us.displayName="Presence";let fs=0;function hs(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var ms=function(){return ms=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},ms.apply(this,arguments)};function ps(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]])}return n}"function"==typeof SuppressedError&&SuppressedError;var gs="right-scroll-bar-position",ys="width-before-scroll-bar";function bs(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var vs="undefined"!=typeof window?v.useLayoutEffect:v.useEffect,xs=new WeakMap;function ws(e,t){var n,r,a,o=(n=null,r=function(t){return e.forEach(function(e){return bs(e,t)})},(a=v.useState(function(){return{value:n,callback:r,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}})[0]).callback=r,a.facade);return vs(function(){var t=xs.get(o);if(t){var n=new Set(t),r=new Set(e),a=o.current;n.forEach(function(e){r.has(e)||bs(e,null)}),r.forEach(function(e){n.has(e)||bs(e,a)})}xs.set(o,e)},[e]),o}function ks(e){return e}var js=function(e){var t=e.sideCar,n=ps(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return v.createElement(r,ms({},n))};js.isSideCarExport=!0;var Ns=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=ks);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(e){var a=t(e,r);return n.push(a),function(){n=n.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(r=!0;n.length;){var t=n;n=[],t.forEach(e)}n={push:function(t){return e(t)},filter:function(){return n}}},assignMedium:function(e){r=!0;var t=[];if(n.length){var a=n;n=[],a.forEach(e),t=n}var o=function(){var n=t;t=[],n.forEach(e)},s=function(){return Promise.resolve().then(o)};s(),n={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),n}}}}}(null);return t.options=ms({async:!0,ssr:!1},e),t}(),Es=function(){},_s=v.forwardRef(function(e,t){var n=v.useRef(null),r=v.useState({onScrollCapture:Es,onWheelCapture:Es,onTouchMoveCapture:Es}),a=r[0],o=r[1],s=e.forwardProps,i=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,b=ps(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=f,w=ws([n,t]),k=ms(ms({},b),a);return v.createElement(v.Fragment,null,u&&v.createElement(x,{sideCar:Ns,removeScrollBar:l,shards:d,noIsolation:h,inert:m,setCallbacks:o,allowPinchZoom:!!p,lockRef:n}),s?v.cloneElement(v.Children.only(i),ms(ms({},k),{ref:w})):v.createElement(y,ms({},k,{className:c,ref:w}),i))});_s.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},_s.classNames={fullWidth:ys,zeroRight:gs};function Ss(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Cs=function(){var e=0,t=null;return{add:function(n){var r,a;0==e&&(t=Ss())&&(a=n,(r=t).styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Ps=function(){var e,t=(e=Cs(),function(t,n){v.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])});return function(e){var n=e.styles,r=e.dynamic;return t(n,r),null}},Os={left:0,top:0,right:0,gap:0},Rs=function(e){return parseInt(e||"",10)||0},As=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Os;var t=function(e){var t=window.getComputedStyle(document.body),n=t["padding"===e?"paddingLeft":"marginLeft"],r=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[Rs(n),Rs(r),Rs(a)]}(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Ts=Ps(),Ds="data-scroll-locked",Is=function(e,t,n,r){var a=e.left,o=e.top,s=e.right,i=e.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(i,"px ").concat(r,";\n  }\n  body[").concat(Ds,"] {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(gs," {\n    right: ").concat(i,"px ").concat(r,";\n  }\n  \n  .").concat(ys," {\n    margin-right: ").concat(i,"px ").concat(r,";\n  }\n  \n  .").concat(gs," .").concat(gs," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(ys," .").concat(ys," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body[").concat(Ds,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},Ms=function(){var e=parseInt(document.body.getAttribute(Ds)||"0",10);return isFinite(e)?e:0},Ls=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,a=void 0===r?"margin":r;v.useEffect(function(){return document.body.setAttribute(Ds,(Ms()+1).toString()),function(){var e=Ms()-1;e<=0?document.body.removeAttribute(Ds):document.body.setAttribute(Ds,e.toString())}},[]);var o=v.useMemo(function(){return As(a)},[a]);return v.createElement(Ts,{styles:Is(o,!t,a,n?"":"!important")})},Ks=!1;if("undefined"!=typeof window)try{var Fs=Object.defineProperty({},"passive",{get:function(){return Ks=!0,!0}});window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch(wu){Ks=!1}var qs=!!Ks&&{passive:!1},Bs=function(e,t){var n=window.getComputedStyle(e);return"hidden"!==n[t]&&!(n.overflowY===n.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===n[t])},zs=function(e,t){var n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),Us(e,n)){var r=$s(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},Us=function(e,t){return"v"===e?function(e){return Bs(e,"overflowY")}(t):function(e){return Bs(e,"overflowX")}(t)},$s=function(e,t){return"v"===e?[(n=t).scrollTop,n.scrollHeight,n.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var n},Ws=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Vs=function(e){return[e.deltaX,e.deltaY]},Gs=function(e){return e&&"current"in e?e.current:e},Hs=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},Ys=0,Js=[];const Xs=(Qs=function(e){var t=v.useRef([]),n=v.useRef([0,0]),r=v.useRef(),a=v.useState(Ys++)[0],o=v.useState(function(){return Ps()})[0],s=v.useRef(e);v.useEffect(function(){s.current=e},[e]),v.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=function(e,t,n){if(n||2===arguments.length)for(var r,a=0,o=t.length;a<o;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(Gs),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=v.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var a,o=Ws(e),i=n.current,c="deltaX"in e?e.deltaX:i[0]-o[0],l="deltaY"in e?e.deltaY:i[1]-o[1],u=e.target,d=Math.abs(c)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var f=zs(d,u);if(!f)return!0;if(f?a=d:(a="v"===d?"h":"v",f=zs(d,u)),!f)return!1;if(!r.current&&"changedTouches"in e&&(c||l)&&(r.current=a),!a)return!0;var h=r.current||a;return function(e,t,n,r){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=a*r,s=n.target,i=t.contains(s),c=!1,l=o>0,u=0,d=0;do{var f=$s(e,s),h=f[0],m=f[1]-f[2]-a*h;(h||m)&&Us(e,s)&&(u+=m,d+=h),s=s.parentNode}while(!i&&s!==document.body||i&&(t.contains(s)||t===s));return l&&0===u?c=!0:l||0!==d||(c=!0),c}(h,t,e,"h"===h?c:l)},[]),c=v.useCallback(function(e){var n=e;if(Js.length&&Js[Js.length-1]===o){var r="deltaY"in n?Vs(n):Ws(n),a=t.current.filter(function(e){return e.name===n.type&&e.target===n.target&&(t=e.delta,a=r,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)n.cancelable&&n.preventDefault();else if(!a){var c=(s.current.shards||[]).map(Gs).filter(Boolean).filter(function(e){return e.contains(n.target)});(c.length>0?i(n,c[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}},[]),l=v.useCallback(function(e,n,r,a){var o={name:e,delta:n,target:r,should:a};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),u=v.useCallback(function(e){n.current=Ws(e),r.current=void 0},[]),d=v.useCallback(function(t){l(t.type,Vs(t),t.target,i(t,e.lockRef.current))},[]),f=v.useCallback(function(t){l(t.type,Ws(t),t.target,i(t,e.lockRef.current))},[]);v.useEffect(function(){return Js.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,qs),document.addEventListener("touchmove",c,qs),document.addEventListener("touchstart",u,qs),function(){Js=Js.filter(function(e){return e!==o}),document.removeEventListener("wheel",c,qs),document.removeEventListener("touchmove",c,qs),document.removeEventListener("touchstart",u,qs)}},[]);var h=e.removeScrollBar,m=e.inert;return v.createElement(v.Fragment,null,m?v.createElement(o,{styles:Hs(a)}):null,h?v.createElement(Ls,{gapMode:"margin"}):null)},Ns.useMedium(Qs),js);var Qs,Zs=v.forwardRef(function(e,t){return v.createElement(_s,ms({},e,{ref:t,sideCar:Xs}))});Zs.classNames=_s.classNames;var ei=new WeakMap,ti=new WeakMap,ni={},ri=0,ai=function(e){return e&&(e.host||ai(e.parentNode))},oi=function(e,t,n,r){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var n=ai(t);return n&&e.contains(n)?n:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);ni[n]||(ni[n]=new WeakMap);var o=ni[n],s=[],i=new Set,c=new Set(a),l=function(e){e&&!i.has(e)&&(i.add(e),l(e.parentNode))};a.forEach(l);var u=function(e){e&&!c.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))u(e);else try{var t=e.getAttribute(r),a=null!==t&&"false"!==t,c=(ei.get(e)||0)+1,l=(o.get(e)||0)+1;ei.set(e,c),o.set(e,l),s.push(e),1===c&&a&&ti.set(e,!0),1===l&&e.setAttribute(n,"true"),a||e.setAttribute(r,"true")}catch(d){}})};return u(t),i.clear(),ri++,function(){s.forEach(function(e){var t=ei.get(e)-1,a=o.get(e)-1;ei.set(e,t),o.set(e,a),t||(ti.has(e)||e.removeAttribute(r),ti.delete(e)),a||e.removeAttribute(n)}),--ri||(ei=new WeakMap,ei=new WeakMap,ti=new WeakMap,ni={})}},si=function(e,t,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),a=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(r.push.apply(r,Array.from(a.querySelectorAll("[aria-live], script"))),oi(r,a,n,"aria-hidden")):function(){return null}};const ii="Dialog",[ci]=function(e,t=[]){let n=[];const r=()=>{const t=n.map(e=>v.createContext(e));return function(n){const r=(null==n?void 0:n[e])||t;return v.useMemo(()=>({[`__scope${e}`]:{...n,[e]:r}}),[n,r])}};return r.scopeName=e,[function(t,r){const a=v.createContext(r),o=n.length;function s(t){const{scope:n,children:r,...s}=t,i=(null==n?void 0:n[e][o])||a,c=v.useMemo(()=>s,Object.values(s));return v.createElement(i.Provider,{value:c},r)}return n=[...n,r],s.displayName=t+"Provider",[s,function(n,s){const i=(null==s?void 0:s[e][o])||a,c=v.useContext(i);if(c)return c;if(void 0!==r)return r;throw new Error(`\`${n}\` must be used within \`${t}\``)}]},Ao(r,...t)]}(ii),[li,ui]=ci(ii),di="DialogPortal",[fi,hi]=ci(di,{forceMount:void 0}),mi="DialogOverlay",pi=v.forwardRef((e,t)=>{const n=hi(mi,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=ui(mi,e.__scopeDialog);return o.modal?v.createElement(us,{present:r||o.open},v.createElement(gi,_({},a,{ref:t}))):null}),gi=v.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,a=ui(mi,n);return v.createElement(Zs,{as:Fo,allowPinchZoom:!0,shards:[a.contentRef]},v.createElement($o.div,_({"data-state":ji(a.open)},r,{ref:t,style:{pointerEvents:"auto",...r.style}})))}),yi="DialogContent",bi=v.forwardRef((e,t)=>{const n=hi(yi,e.__scopeDialog),{forceMount:r=n.forceMount,...a}=e,o=ui(yi,e.__scopeDialog);return v.createElement(us,{present:r||o.open},o.modal?v.createElement(vi,_({},a,{ref:t})):v.createElement(xi,_({},a,{ref:t})))}),vi=v.forwardRef((e,t)=>{const n=ui(yi,e.__scopeDialog),r=v.useRef(null),a=Ro(t,n.contentRef,r);return v.useEffect(()=>{const e=r.current;if(e)return si(e)},[]),v.createElement(wi,_({},e,{ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Po(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=n.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Po(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,n=0===t.button&&!0===t.ctrlKey;(2===t.button||n)&&e.preventDefault()}),onFocusOutside:Po(e.onFocusOutside,e=>e.preventDefault())}))}),xi=v.forwardRef((e,t)=>{const n=ui(yi,e.__scopeDialog),r=v.useRef(!1),a=v.useRef(!1);return v.createElement(wi,_({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,s;(null===(o=e.onCloseAutoFocus)||void 0===o||o.call(e,t),t.defaultPrevented)||(r.current||null===(s=n.triggerRef.current)||void 0===s||s.focus(),t.preventDefault());r.current=!1,a.current=!1},onInteractOutside:t=>{var o,s;null===(o=e.onInteractOutside)||void 0===o||o.call(e,t),t.defaultPrevented||(r.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const i=t.target;(null===(s=n.triggerRef.current)||void 0===s?void 0:s.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}}))}),wi=v.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:a,onCloseAutoFocus:o,...s}=e,i=ui(yi,n),c=Ro(t,v.useRef(null));return v.useEffect(()=>{var e,t;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=n[0])&&void 0!==e?e:hs()),document.body.insertAdjacentElement("beforeend",null!==(t=n[1])&&void 0!==t?t:hs()),fs++,()=>{1===fs&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),fs--}},[]),v.createElement(v.Fragment,null,v.createElement(ns,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:a,onUnmountAutoFocus:o},v.createElement(Jo,_({role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":ji(i.open)},s,{ref:c,onDismiss:()=>i.onOpenChange(!1)}))),!1)}),ki="DialogTitle";function ji(e){return e?"open":"closed"}!function(e,t){const n=v.createContext(t);function r(e){const{children:t,...r}=e,a=v.useMemo(()=>r,Object.values(r));return v.createElement(n.Provider,{value:a},t)}r.displayName=e+"Provider"}("DialogTitleWarning",{contentName:yi,titleName:ki,docsSlug:"dialog"});const Ni=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:a,onOpenChange:o,modal:s=!0}=e,i=v.useRef(null),c=v.useRef(null),[l=!1,u]=Ko({prop:r,defaultProp:a,onChange:o});return v.createElement(li,{scope:t,triggerRef:i,contentRef:c,contentId:Mo(),titleId:Mo(),descriptionId:Mo(),open:l,onOpenChange:u,onOpenToggle:v.useCallback(()=>u(e=>!e),[u]),modal:s},n)},Ei=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:a}=e,o=ui(di,t);return v.createElement(fi,{scope:t,forceMount:n},v.Children.map(r,e=>v.createElement(us,{present:n||o.open},v.createElement(ls,{asChild:!0,container:a},e))))},_i=pi,Si=bi;var Ci='[cmdk-group=""]',Pi='[cmdk-group-items=""]',Oi='[cmdk-item=""]',Ri=`${Oi}:not([aria-disabled="true"])`,Ai="cmdk-item-select",Ti="data-value",Di=(e,t,n)=>Co(e,t,n),Ii=v.createContext(void 0),Mi=()=>v.useContext(Ii),Li=v.createContext(void 0),Ki=()=>v.useContext(Li),Fi=v.createContext(void 0),qi=v.forwardRef((e,t)=>{let n=ec(()=>{var t,n;return{search:"",value:null!=(n=null!=(t=e.value)?t:e.defaultValue)?n:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=ec(()=>new Set),a=ec(()=>new Map),o=ec(()=>new Map),s=ec(()=>new Set),i=Qi(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:h,loop:m,disablePointerSelection:p=!1,vimBindings:g=!0,...y}=e,b=v.useId(),x=v.useId(),w=v.useId(),k=v.useRef(null),j=ac();Zi(()=>{if(void 0!==u){let e=u.trim();n.current.value=e,N.emit()}},[u]),Zi(()=>{j(6,O)},[]);let N=v.useMemo(()=>({subscribe:e=>(s.current.add(e),()=>s.current.delete(e)),snapshot:()=>n.current,setState:(e,t,r)=>{var a,o,s;if(!Object.is(n.current[e],t)){if(n.current[e]=t,"search"===e)P(),S(),j(1,C);else if("value"===e&&(r||j(5,O),void 0!==(null==(a=i.current)?void 0:a.value))){let e=null!=t?t:"";return void(null==(s=(o=i.current).onValueChange)||s.call(o,e))}N.emit()}},emit:()=>{s.current.forEach(e=>e())}}),[]),E=v.useMemo(()=>({value:(e,t,r)=>{var a;t!==(null==(a=o.current.get(e))?void 0:a.value)&&(o.current.set(e,{value:t,keywords:r}),n.current.filtered.items.set(e,_(t,r)),j(2,()=>{S(),N.emit()}))},item:(e,t)=>(r.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),j(3,()=>{P(),S(),n.current.value||C(),N.emit()}),()=>{o.current.delete(e),r.current.delete(e),n.current.filtered.items.delete(e);let t=R();j(4,()=>{P(),(null==t?void 0:t.getAttribute("id"))===e&&C(),N.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{o.current.delete(e),a.current.delete(e)}),filter:()=>i.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:p,listId:b,inputId:w,labelId:x,listInnerRef:k}),[]);function _(e,t){var r,a;let o=null!=(a=null==(r=i.current)?void 0:r.filter)?a:Di;return e?o(e,n.current.search,t):0}function S(){if(!n.current.search||!1===i.current.shouldFilter)return;let e=n.current.filtered.items,t=[];n.current.filtered.groups.forEach(n=>{let r=a.current.get(n),o=0;r.forEach(t=>{let n=e.get(t);o=Math.max(n,o)}),t.push([n,o])});let r=k.current;A().sort((t,n)=>{var r,a;let o=t.getAttribute("id"),s=n.getAttribute("id");return(null!=(r=e.get(s))?r:0)-(null!=(a=e.get(o))?a:0)}).forEach(e=>{let t=e.closest(Pi);t?t.appendChild(e.parentElement===t?e:e.closest(`${Pi} > *`)):r.appendChild(e.parentElement===r?e:e.closest(`${Pi} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=k.current.querySelector(`${Ci}[${Ti}="${encodeURIComponent(e[0])}"]`);null==t||t.parentElement.appendChild(t)})}function C(){let e=A().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(Ti);N.setState("value",t||void 0)}function P(){var e,t,s,c;if(!n.current.search||!1===i.current.shouldFilter)return void(n.current.filtered.count=r.current.size);n.current.filtered.groups=new Set;let l=0;for(let a of r.current){let r=_(null!=(t=null==(e=o.current.get(a))?void 0:e.value)?t:"",null!=(c=null==(s=o.current.get(a))?void 0:s.keywords)?c:[]);n.current.filtered.items.set(a,r),r>0&&l++}for(let[r,o]of a.current)for(let e of o)if(n.current.filtered.items.get(e)>0){n.current.filtered.groups.add(r);break}n.current.filtered.count=l}function O(){var e,t,n;let r=R();r&&((null==(e=r.parentElement)?void 0:e.firstChild)===r&&(null==(n=null==(t=r.closest(Ci))?void 0:t.querySelector('[cmdk-group-heading=""]'))||n.scrollIntoView({block:"nearest"})),r.scrollIntoView({block:"nearest"}))}function R(){var e;return null==(e=k.current)?void 0:e.querySelector(`${Oi}[aria-selected="true"]`)}function A(){var e;return Array.from(null==(e=k.current)?void 0:e.querySelectorAll(Ri))}function T(e){let t=A()[e];t&&N.setState("value",t.getAttribute(Ti))}function D(e){var t;let n=R(),r=A(),a=r.findIndex(e=>e===n),o=r[a+e];null!=(t=i.current)&&t.loop&&(o=a+e<0?r[r.length-1]:a+e===r.length?r[0]:r[a+e]),o&&N.setState("value",o.getAttribute(Ti))}function I(e){let t,n=R(),r=null==n?void 0:n.closest(Ci);for(;r&&!t;)r=e>0?Ji(r,Ci):Xi(r,Ci),t=null==r?void 0:r.querySelector(Ri);t?N.setState("value",t.getAttribute(Ti)):D(e)}let M=()=>T(A().length-1),L=e=>{e.preventDefault(),e.metaKey?M():e.altKey?I(1):D(1)},K=e=>{e.preventDefault(),e.metaKey?T(0):e.altKey?I(-1):D(-1)};return v.createElement($o.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=y.onKeyDown)||t.call(y,e),!e.defaultPrevented)switch(e.key){case"n":case"j":g&&e.ctrlKey&&L(e);break;case"ArrowDown":L(e);break;case"p":case"k":g&&e.ctrlKey&&K(e);break;case"ArrowUp":K(e);break;case"Home":e.preventDefault(),T(0);break;case"End":e.preventDefault(),M();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=R();if(t){let e=new Event(Ai);t.dispatchEvent(e)}}}}},v.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:sc},c),oc(e,e=>v.createElement(Li.Provider,{value:N},v.createElement(Ii.Provider,{value:E},e))))}),Bi=v.forwardRef((e,t)=>{var n,r;let a=v.useId(),o=v.useRef(null),s=v.useContext(Fi),i=Mi(),c=Qi(e),l=null!=(r=null==(n=c.current)?void 0:n.forceMount)?r:null==s?void 0:s.forceMount;Zi(()=>{if(!l)return i.item(a,null==s?void 0:s.id)},[l]);let u=rc(a,o,[e.value,e.children,o],e.keywords),d=Ki(),f=nc(e=>e.value&&e.value===u.current),h=nc(e=>!(!l&&!1!==i.filter())||(!e.search||e.filtered.items.get(a)>0));function m(){var e,t;p(),null==(t=(e=c.current).onSelect)||t.call(e,u.current)}function p(){d.setState("value",u.current,!0)}if(v.useEffect(()=>{let t=o.current;if(t&&!e.disabled)return t.addEventListener(Ai,m),()=>t.removeEventListener(Ai,m)},[h,e.onSelect,e.disabled]),!h)return null;let{disabled:g,value:y,onSelect:b,forceMount:x,keywords:w,...k}=e;return v.createElement($o.div,{ref:tc([o,t]),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||i.disablePointerSelection?void 0:p,onClick:g?void 0:m},e.children)}),zi=v.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:a,...o}=e,s=v.useId(),i=v.useRef(null),c=v.useRef(null),l=v.useId(),u=Mi(),d=nc(e=>!(!a&&!1!==u.filter())||(!e.search||e.filtered.groups.has(s)));Zi(()=>u.group(s),[]),rc(s,i,[e.value,e.heading,c]);let f=v.useMemo(()=>({id:s,forceMount:a}),[a]);return v.createElement($o.div,{ref:tc([i,t]),...o,"cmdk-group":"",role:"presentation",hidden:!d||void 0},n&&v.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},n),oc(e,e=>v.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?l:void 0},v.createElement(Fi.Provider,{value:f},e))))}),Ui=v.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,a=v.useRef(null),o=nc(e=>!e.search);return n||o?v.createElement($o.div,{ref:tc([a,t]),...r,"cmdk-separator":"",role:"separator"}):null}),$i=v.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,a=null!=e.value,o=Ki(),s=nc(e=>e.search),i=nc(e=>e.value),c=Mi(),l=v.useMemo(()=>{var e;let t=null==(e=c.listInnerRef.current)?void 0:e.querySelector(`${Oi}[${Ti}="${encodeURIComponent(i)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return v.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),v.createElement($o.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:s,onChange:e=>{a||o.setState("search",e.target.value),null==n||n(e.target.value)}})}),Wi=v.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...a}=e,o=v.useRef(null),s=v.useRef(null),i=Mi();return v.useEffect(()=>{if(s.current&&o.current){let e,t=s.current,n=o.current,r=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;n.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return r.observe(t),()=>{cancelAnimationFrame(e),r.unobserve(t)}}},[]),v.createElement($o.div,{ref:tc([o,t]),...a,"cmdk-list":"",role:"listbox","aria-label":r,id:i.listId},oc(e,e=>v.createElement("div",{ref:tc([s,i.listInnerRef]),"cmdk-list-sizer":""},e)))}),Vi=v.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:a,contentClassName:o,container:s,...i}=e;return v.createElement(Ni,{open:n,onOpenChange:r},v.createElement(Ei,{container:s},v.createElement(_i,{"cmdk-overlay":"",className:a}),v.createElement(Si,{"aria-label":e.label,"cmdk-dialog":"",className:o},v.createElement(qi,{ref:t,...i}))))}),Gi=v.forwardRef((e,t)=>nc(e=>0===e.filtered.count)?v.createElement($o.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Hi=v.forwardRef((e,t)=>{let{progress:n,children:r,label:a="Loading...",...o}=e;return v.createElement($o.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},oc(e,e=>v.createElement("div",{"aria-hidden":!0},e)))}),Yi=Object.assign(qi,{List:Wi,Item:Bi,Input:$i,Group:zi,Separator:Ui,Dialog:Vi,Empty:Gi,Loading:Hi});function Ji(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function Xi(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function Qi(e){let t=v.useRef(e);return Zi(()=>{t.current=e}),t}var Zi="undefined"==typeof window?v.useEffect:v.useLayoutEffect;function ec(e){let t=v.useRef();return void 0===t.current&&(t.current=e()),t}function tc(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function nc(e){let t=Ki(),n=()=>e(t.snapshot());return v.useSyncExternalStore(t.subscribe,n,n)}function rc(e,t,n,r=[]){let a=v.useRef(),o=Mi();return Zi(()=>{var s;let i=(()=>{var e;for(let t of n){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),c=r.map(e=>e.trim());o.value(e,i,c),null==(s=t.current)||s.setAttribute(Ti,i),a.current=i}),a}var ac=()=>{let[e,t]=v.useState(),n=ec(()=>new Map);return Zi(()=>{n.current.forEach(e=>e()),n.current=new Map},[e]),(e,r)=>{n.current.set(e,r),t({})}};function oc({asChild:e,children:t},n){return e&&v.isValidElement(t)?v.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},n(t.props.children)):n(t)}var sc={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};async function ic(){return(await nr.get("/api/exchange-rates")).data}function cc(){return i({queryKey:["exchange-rates"],queryFn:ic,staleTime:864e5,gcTime:1728e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}function lc(){const{data:e}=cc();return(null==e?void 0:e.rates)||{}}function uc(e){return{id:e.id,date:e.date,description:e.description,amount:e.amount,currency:e.currency||"JPY",category:e.category,source:e.source,type:e.is_income?"income":"expense",created_at:e.date,account_id:e.account_id,is_transfer:e.is_transfer,receipt_url:e.receipt_url}}async function dc(e){var t;const n=new URLSearchParams;(null==e?void 0:e.start_date)&&n.append("start_date",e.start_date),(null==e?void 0:e.end_date)&&n.append("end_date",e.end_date),(null==(t=null==e?void 0:e.categories)?void 0:t.length)&&n.append("categories",e.categories.join(",")),(null==e?void 0:e.source)&&n.append("source",e.source),(null==e?void 0:e.type)&&"all"!==e.type&&n.append("is_income","income"===e.type?"true":"false"),(null==e?void 0:e.search)&&n.append("search",e.search),void 0!==(null==e?void 0:e.min_amount)&&n.append("min_amount",e.min_amount.toString()),void 0!==(null==e?void 0:e.max_amount)&&n.append("max_amount",e.max_amount.toString()),n.append("limit","5000");return(await nr.get(`/api/transactions/?${n.toString()}`)).data.transactions.map(uc)}function fc(e){const{type:t,...n}=e;return{...n,is_income:"income"===t}}async function hc(e){const t=fc(e);return uc((await nr.post("/api/transactions/",t)).data)}async function mc(e,t){const n=fc(t);return uc((await nr.put(`/api/transactions/${e}`,n)).data)}async function pc(e){await nr.delete(`/api/transactions/${e}`)}async function gc(e){const t=new URLSearchParams;e.forEach(e=>t.append("transaction_ids",e.toString()));return(await nr.delete(`/api/transactions/bulk/delete?${t.toString()}`)).data}async function yc(e,t){const n=new URLSearchParams;e.forEach(e=>n.append("transaction_ids",e.toString())),n.append("category",t);return(await nr.patch(`/api/transactions/bulk/category?${n.toString()}`)).data}async function bc(e,t=5){if(!e||e.length<2)return[];return(await nr.get(`/api/transactions/suggestions?q=${encodeURIComponent(e)}&limit=${t}`)).data}const vc={JPY:1,USD:.00667,VND:160},xc={JPY:0,VND:0,KRW:0,USD:2,EUR:2};function wc(e,t){const n=xc[t]??0;return Math.round(e*Math.pow(10,n))}function kc(e,t,n){return e*(n[t]??vc[t]??1)}function jc(e,t="JPY",n=vc,r=!1){const a=r?e:kc(e,t,n),o=xc[t]??0,s=Math.pow(10,o),i={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP";return new Intl.NumberFormat(i,{style:"currency",currency:t,minimumFractionDigits:o,maximumFractionDigits:o}).format(a/s)}function Nc(e,t,n="JPY",r=vc,a=!1){const o=jc(Math.abs(e),n,r,a);return"income"===t||e>0?`+${o}`:"expense"===t||e<0?`-${o}`:o}function Ec(e="JPY"){return{JPY:"***",USD:"$***",VND:"***"}[e]||"***"}function _c(e,t="JPY",n=vc,r=!1,a=!1){return a?Ec(t):jc(e,t,n,r)}function Sc(e,t,n="JPY",r=vc,a=!1,o=!1){if(o){const r=Ec(n);return"income"===t||e>0?`+${r}`:"expense"===t||e<0?`-${r}`:r}return Nc(e,t,n,r,a)}function Cc(e,t="JPY",n=vc,r=!1,a=!1){return a?Ec(t):function(e,t="JPY",n=vc,r=!1){const a=r?e:kc(e,t,n),o=xc[t]??0,s=Math.pow(10,o),i={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP",c=o>0?1:0;return new Intl.NumberFormat(i,{style:"currency",currency:t,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:c}).format(a/s)}(e,t,n,r)}function Pc(e,t="JPY",n=vc,r=!1,a=!1){if(a)return"****";const o=xc[t]??0,s=e/Math.pow(10,o),i=jc(s,t,n,!0),c=jc(r?s*n[t]:s,"JPY",n,!0);return"JPY"===t?i:`${i} (${c})`}function Oc({open:e,onOpenChange:t,onNewTransaction:n,onUpload:r,onShowShortcuts:o}){const{t:s}=ge(),i=f(),{resolvedTheme:c,toggleTheme:l}=kr(),{isPrivacyMode:u}=gr(),{data:d}=cc(),[h,m]=v.useState(""),[p,g]=v.useState([]),[y,x]=v.useState(!1);v.useEffect(()=>{if(!e||h.length<2)return void g([]);const t=setTimeout(async()=>{x(!0);try{const e=await dc({search:h});g(e.slice(0,5))}catch(e){g([])}finally{x(!1)}},300);return()=>clearTimeout(t)},[h,e]),v.useEffect(()=>{e||(m(""),g([]))},[e]);const w=v.useCallback(e=>{if(t(!1),e.startsWith("/"))i({to:e});else switch(e){case"new-transaction":null==n||n();break;case"upload":null==r||r(),i({to:"/upload"});break;case"toggle-theme":l();break;case"shortcuts":null==o||o();break;case"transaction":i({to:"/transactions"})}},[i,t,n,r,l,o]),k=a.jsxs(Yi.Dialog,{open:e,onOpenChange:t,label:s("commandPalette.label","Command Palette"),className:"fixed inset-0 z-[100001] overflow-hidden",style:{touchAction:"pan-y"},children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),a.jsx("div",{className:"fixed left-1/2 top-1/4 -translate-x-1/2 w-full max-w-lg",children:a.jsxs(Yi,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center border-b border-gray-200 dark:border-gray-700 px-4",children:[a.jsx(Y,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-3"}),a.jsx(Yi.Input,{value:h,onValueChange:m,placeholder:s("commandPalette.placeholder","Search pages, transactions, actions..."),className:"w-full py-4 bg-transparent outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"}),a.jsx("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"})]}),a.jsxs(Yi.List,{className:"max-h-80 overflow-y-auto p-2",children:[a.jsx(Yi.Empty,{className:"py-6 text-center text-gray-500 dark:text-gray-400",children:y?s("commandPalette.searching","Searching..."):s("commandPalette.noResults","No results found.")}),p.length>0&&a.jsx(Yi.Group,{heading:s("commandPalette.transactions","Transactions"),children:p.map(e=>{return a.jsxs(Yi.Item,{value:`transaction-${e.id}`,onSelect:()=>w("transaction"),className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx(V,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"truncate text-sm",children:e.description}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.date,"  ",e.category]})]}),a.jsx("span",{className:"text-sm font-medium "+("income"===e.type?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:u?"income"===e.type?"+***":"-***":(t=e.amount,n=e.currency||"JPY",Nc(t,void 0,n,(null==d?void 0:d.rates)||{},!0))})]},e.id);var t,n})}),a.jsxs(Yi.Group,{heading:s("commandPalette.pages","Pages"),children:[a.jsx(Rc,{icon:a.jsx($,{className:"w-4 h-4"}),label:s("nav.dashboard"),shortcut:"G D",value:"/dashboard",onSelect:w}),a.jsx(Rc,{icon:a.jsx(V,{className:"w-4 h-4"}),label:s("nav.transactions"),shortcut:"G T",value:"/transactions",onSelect:w}),a.jsx(Rc,{icon:a.jsx(W,{className:"w-4 h-4"}),label:s("nav.accounts"),shortcut:"G A",value:"/accounts",onSelect:w}),a.jsx(Rc,{icon:a.jsx(H,{className:"w-4 h-4"}),label:s("nav.budget"),shortcut:"G B",value:"/budget",onSelect:w}),a.jsx(Rc,{icon:a.jsx(J,{className:"w-4 h-4"}),label:s("nav.analytics"),shortcut:"G N",value:"/analytics",onSelect:w}),a.jsx(Rc,{icon:a.jsx(q,{className:"w-4 h-4"}),label:s("nav.goals"),shortcut:"G G",value:"/goals",onSelect:w}),a.jsx(Rc,{icon:a.jsx(X,{className:"w-4 h-4"}),label:s("nav.recurring"),value:"/recurring",onSelect:w}),a.jsx(Rc,{icon:a.jsx(B,{className:"w-4 h-4"}),label:s("nav.settings"),shortcut:"G S",value:"/settings",onSelect:w})]}),a.jsxs(Yi.Group,{heading:s("commandPalette.actions","Actions"),children:[a.jsx(Rc,{icon:a.jsx(Q,{className:"w-4 h-4"}),label:s("commandPalette.newTransaction","New Transaction"),shortcut:"Ctrl+N",value:"new-transaction",onSelect:w}),a.jsx(Rc,{icon:a.jsx(z,{className:"w-4 h-4"}),label:s("commandPalette.uploadCsv","Upload CSV"),shortcut:"Ctrl+U",value:"upload",onSelect:w}),a.jsx(Rc,{icon:"dark"===c?a.jsx(A,{className:"w-4 h-4"}):a.jsx(T,{className:"w-4 h-4"}),label:"dark"===c?s("commandPalette.lightMode","Switch to Light Mode"):s("commandPalette.darkMode","Switch to Dark Mode"),value:"toggle-theme",onSelect:w}),a.jsx(Rc,{icon:a.jsx(Z,{className:"w-4 h-4"}),label:s("commandPalette.shortcuts","Keyboard Shortcuts"),shortcut:"?",value:"shortcuts",onSelect:w})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between text-xs text-gray-400 dark:text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),s("commandPalette.navigate","Navigate")]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),s("commandPalette.select","Select")]})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"}),s("commandPalette.close","Close")]})]})]})})]});return"undefined"==typeof document?null:b.createPortal(k,document.body)}function Rc({icon:e,label:t,shortcut:n,value:r,onSelect:o}){return a.jsxs(Yi.Item,{value:r,onSelect:o,className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:e}),a.jsx("span",{className:"flex-1",children:t}),n&&a.jsx("kbd",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:n})]})}function Ac({open:e,onClose:t}){const{t:n}=ge(),r="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent),o=[{title:n("shortcuts.general","General"),shortcuts:[{keys:[r?"":"Ctrl","K"],description:n("shortcuts.commandPalette","Open command palette")},{keys:["Esc"],description:n("shortcuts.closeModal","Close modal/dialog")},{keys:["?"],description:n("shortcuts.showHelp","Show keyboard shortcuts")}]},{title:n("shortcuts.actions","Actions"),shortcuts:[{keys:[r?"":"Ctrl","N"],description:n("shortcuts.newTransaction","New transaction")},{keys:[r?"":"Ctrl","U"],description:n("shortcuts.uploadCsv","Upload CSV")},{keys:[r?"":"Ctrl","F"],description:n("shortcuts.focusSearch","Focus search")}]},{title:n("shortcuts.navigation","Navigation"),shortcuts:[{keys:["G","D"],description:n("shortcuts.gotoDashboard","Go to Dashboard")},{keys:["G","T"],description:n("shortcuts.gotoTransactions","Go to Transactions")},{keys:["G","A"],description:n("shortcuts.gotoAccounts","Go to Accounts")},{keys:["G","B"],description:n("shortcuts.gotoBudget","Go to Budget")},{keys:["G","N"],description:n("shortcuts.gotoAnalytics","Go to Analytics")},{keys:["G","G"],description:n("shortcuts.gotoGoals","Go to Goals")},{keys:["G","S"],description:n("shortcuts.gotoSettings","Go to Settings")}]}];if(!e)return null;const s=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-lg mx-4 max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:n("shortcuts.title","Keyboard Shortcuts")}),a.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:a.jsx(R,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh] space-y-6",children:o.map(e=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:e.title}),a.jsx("div",{className:"space-y-2",children:e.shortcuts.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:e.description}),a.jsx("div",{className:"flex items-center gap-1",children:e.keys.map((t,n)=>a.jsxs("span",{children:[a.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:t}),n<e.keys.length-1&&a.jsx("span",{className:"text-gray-400 mx-0.5",children:"+"})]},n))})]},t))})]},e.title))}),a.jsx("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:n("shortcuts.hint","Press Esc to close")})})]})]});return"undefined"==typeof document?null:b.createPortal(s,document.body)}const Tc="Escape",Dc="k",Ic="f",Mc="n",Lc="u",Kc="?";function Fc({children:e}){const t=f(),[n,r]=v.useState(!1),[o,s]=v.useState(!1),[i,c]=v.useState(null),l=v.useCallback(e=>{const n={d:"/dashboard",t:"/transactions",a:"/accounts",b:"/budget",n:"/analytics",g:"/goals",s:"/settings"}[e.toLowerCase()];n&&t({to:n}),c(null)},[t]);return function(e,t={}){const{enabled:n=!0}=t,r=v.useCallback(t=>{if(!n)return;const r=t.target;if("INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName&&!r.isContentEditable||"Escape"===t.key)for(const n of e){const e=t.key.toLowerCase()===n.key.toLowerCase(),r=n.ctrlKey||n.metaKey?t.ctrlKey||t.metaKey:!t.ctrlKey&&!t.metaKey,a=n.shiftKey?t.shiftKey:!t.shiftKey;if(e&&r&&a)return t.preventDefault(),void n.callback()}},[e,n]);v.useEffect(()=>(window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)),[r])}([{key:Dc,ctrlKey:!0,callback:()=>r(!0),description:"Open command palette"},{key:Tc,callback:()=>{n?r(!1):o&&s(!1),c(null)},description:"Close modal"},{key:Kc,shiftKey:!0,callback:()=>s(!0),description:"Show shortcuts help"},{key:Mc,ctrlKey:!0,callback:()=>t({to:"/transactions"}),description:"New transaction"},{key:Lc,ctrlKey:!0,callback:()=>t({to:"/upload"}),description:"Upload CSV"},{key:Ic,ctrlKey:!0,callback:()=>r(!0),description:"Focus search"},{key:"g",callback:()=>c("g"),description:"Navigation prefix"},...["d","t","a","b","n","g","s"].map(e=>({key:e,callback:()=>{"g"===i&&l(e)},description:`Navigate to ${e}`}))]),v.useEffect(()=>{if(i){const e=setTimeout(()=>c(null),1500);return()=>clearTimeout(e)}},[i]),a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(uo,{}),a.jsx("main",{className:"flex-1 pb-20 md:pb-0",children:a.jsx(xo,{children:e})}),a.jsx(mo,{}),a.jsx(yo,{}),a.jsx(vo,{}),a.jsx(Oc,{open:n,onOpenChange:r,onShowShortcuts:()=>s(!0)}),a.jsx(Ac,{open:o,onClose:()=>s(!1)})]})}function qc({size:e="md",className:t}){return a.jsxs("div",{className:pa("inline-flex items-center justify-center",{"h-4 w-4":"sm"===e,"h-8 w-8":"md"===e,"h-12 w-12":"lg"===e},t),role:"status","aria-label":"",children:[a.jsxs("svg",{className:"animate-spin text-primary-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"sm"===e?16:"md"===e?24:48,height:"sm"===e?16:"md"===e?24:48,children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{className:"sr-only",children:"..."})]})}const Bc=h({component:function(){const{isAuthenticated:e,isLoading:t}=ir(),n=d(),r=f();return v.useEffect(()=>{t||e||["/login","/register","/landing"].includes(n.pathname)||r({to:"/login"})},[e,t,n.pathname,r]),t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(qc,{size:"lg"})}):"/login"===n.pathname||"/register"===n.pathname||"/landing"===n.pathname?a.jsx(m,{}):e?a.jsx(Fc,{children:a.jsx(m,{})}):null}}),zc=p("/upload")({}),Uc=p("/transactions")({validateSearch:e=>({categories:"string"==typeof e.categories?e.categories:void 0,month:"string"==typeof e.month?e.month:void 0,accountId:"number"==typeof e.accountId?e.accountId:"string"!=typeof e.accountId||isNaN(Number(e.accountId))?void 0:Number(e.accountId),fromAccounts:!0===e.fromAccounts||"true"===e.fromAccounts,type:"income"===e.type||"expense"===e.type?e.type:void 0,action:"add-transaction"===e.action||"scan-receipt"===e.action?e.action:void 0})}),$c=p("/settings")({}),Wc=v.forwardRef(({variant:e="primary",size:t="md",loading:n=!1,className:r,children:o,disabled:s,...i},c)=>{const l=s||n;return a.jsxs("button",{ref:c,disabled:l,className:pa("inline-flex items-center justify-center gap-2 font-medium rounded-lg","transition-all duration-200 ease-out focus-ring","active:scale-[0.97] active:transition-none","disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",{"bg-primary-500 text-white hover:bg-primary-600 shadow-sm hover:shadow-md hover:-translate-y-0.5":"primary"===e,"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600 hover:-translate-y-0.5":"secondary"===e,"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800":"outline"===e,"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 hover:-translate-y-0.5":"ghost"===e,"bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow-md":"danger"===e},{"px-3 py-1.5 text-sm":"sm"===t,"px-5 py-2.5":"md"===t,"px-8 py-4 text-lg":"lg"===t},r),...i,children:[n&&a.jsx(ee,{className:pa("animate-spin","sm"===t?"w-3 h-3":"lg"===t?"w-5 h-5":"w-4 h-4")}),o]})});Wc.displayName="Button";const Vc=v.forwardRef(({label:e,error:t,className:n,...r},o)=>a.jsxs("div",{className:"w-full",children:[e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:r.id,children:e}),a.jsx("input",{ref:o,className:pa("w-full px-4 py-2.5 rounded-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-100 dark:disabled:bg-gray-800","placeholder:text-gray-400 dark:placeholder:text-gray-500",t?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",n),...r}),t&&a.jsx("p",{className:"mt-1.5 text-sm text-red-600 dark:text-red-400",children:t})]}));function Gc({children:e,className:t,hover:n=!1,variant:r="default",onClick:o,...s}){return a.jsx("div",{className:pa("rounded-xl border transition-all duration-200 p-4 sm:p-5","default"===r&&"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm","glass"===r&&"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl border-white/20 dark:border-gray-700/50 shadow-sm","gradient"===r&&"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 border-gray-200/50 dark:border-gray-700/50 shadow-sm","elevated"===r&&"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 shadow-md hover:shadow-lg",n&&"hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600 cursor-pointer",o&&"cursor-pointer",t),onClick:o,...s,children:e})}Vc.displayName="Input";const Hc=p("/register")({component:function(){const{t:e}=ge("common"),t=f(),[n,r]=v.useState(""),[o,s]=v.useState(""),[i,c]=v.useState(""),[l,d]=v.useState(""),[h,m]=v.useState(!1);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(Gc,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.registerDescription")})]}),a.jsxs("form",{onSubmit:async r=>{var a,s;if(r.preventDefault(),d(""),o===i)if(o.length<6)d(e("auth.passwordTooShort"));else{m(!0);try{await nr.post("/api/auth/register",{email:n,password:o}),t({to:"/login"})}catch(wu){const n=(null==(s=null==(a=null==wu?void 0:wu.response)?void 0:a.data)?void 0:s.detail)||e("auth.registerFailed");d(n)}finally{m(!1)}}else d(e("auth.passwordMismatch"))},className:"space-y-6",children:[l&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:l}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(Vc,{id:"email",type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(Vc,{id:"password",type:"password",value:o,onChange:e=>s(e.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.confirmPassword")}),a.jsx(Vc,{id:"confirmPassword",type:"password",value:i,onChange:e=>c(e.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsx(Wc,{type:"submit",className:"w-full",disabled:h,children:e(h?"auth.registering":"auth.register")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.hasAccount")," ",a.jsx(u,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.login")})]})]})]})})}}),Yc=p("/recurring")({});const Jc=p("/login")({component:function(){const{t:e}=ge("common"),t=f(),{login:n}=ir(),[r,o]=v.useState(""),[s,i]=v.useState(""),[c,l]=v.useState(""),[d,h]=v.useState(!1);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(Gc,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.loginDescription")})]}),a.jsxs("form",{onSubmit:async a=>{var o,i;a.preventDefault(),l(""),h(!0);try{await n(r,s),t({to:"/"})}catch(wu){const n=wu instanceof Error?wu.message:(null==(i=null==(o=null==wu?void 0:wu.response)?void 0:o.data)?void 0:i.detail)||e("auth.loginFailed");l(n)}finally{h(!1)}},className:"space-y-6",children:[c&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:c}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(Vc,{id:"email",type:"email",value:r,onChange:e=>o(e.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(Vc,{id:"password",type:"password",value:s,onChange:e=>i(e.target.value),placeholder:"********",required:!0,autoComplete:"current-password"})]}),a.jsx(Wc,{type:"submit",className:"w-full",disabled:d,children:e(d?"auth.loggingIn":"auth.login")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.noAccount")," ",a.jsx(u,{to:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.register")})]})]})]})})}});function Xc(){const e=f(),{t:t}=ge("landing");return a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-6 py-16 lg:py-24",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:t("hero.headline")}),a.jsx("p",{className:"text-lg text-green-100 mb-6 leading-relaxed",children:t("hero.subheadline")}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(te,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp1")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(ne,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp2")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(re,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp3")})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(Wc,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("hero.cta")}),a.jsx(Wc,{onClick:()=>e({to:"/login"}),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:t("hero.seeLiveDemo")})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20 shadow-2xl",children:a.jsx("img",{src:"/screenshots/dashboard-light.webp",alt:"SmartMoney Dashboard",className:"rounded-lg shadow-lg w-full",loading:"eager"})}),a.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 lg:w-40 hidden md:block",children:a.jsx("img",{src:"/screenshots/dashboard-mobile.webp",alt:"SmartMoney Mobile",className:"rounded-xl shadow-2xl border-4 border-white",loading:"eager"})})]})]})})]})}const Qc=[{id:"dashboard",screenshot:"/screenshots/dashboard-light.webp",screenshotAlt:"Dashboard Screenshot"},{id:"transactions",screenshot:"/screenshots/transactions.webp",screenshotAlt:"Transactions Screenshot"},{id:"budget",screenshot:"/screenshots/budget.webp",screenshotAlt:"Budget Screenshot"},{id:"analytics",screenshot:"/screenshots/analytics.webp",screenshotAlt:"Analytics Screenshot"}];function Zc(){const{t:e}=ge("landing");return a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("features.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:Qc.map(t=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"aspect-video bg-gray-100 overflow-hidden",children:a.jsx("img",{src:t.screenshot,alt:t.screenshotAlt,className:"w-full h-full object-cover object-top",loading:"lazy"})}),a.jsxs("div",{className:"p-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`features.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`features.${t.id}.description`)})]})]},t.id))})]})})}const el=[{id:"step1",icon:z,color:"bg-blue-100 text-blue-700"},{id:"step2",icon:J,color:"bg-green-100 text-green-700"},{id:"step3",icon:ne,color:"bg-purple-100 text-purple-700"}];function tl(){const{t:e}=ge("landing");return a.jsx("section",{id:"how-it-works",className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("howItWorks.title")}),a.jsx("p",{className:"text-lg text-gray-600",children:e("howItWorks.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:el.map((t,n)=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[a.jsx("div",{className:`h-16 w-16 rounded-full ${t.color} flex items-center justify-center`,children:a.jsx(t.icon,{className:"h-8 w-8"})}),a.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gray-900 text-white text-sm font-bold flex items-center justify-center",children:n+1})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`howItWorks.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`howItWorks.${t.id}.description`)})]},t.id))}),a.jsx("div",{className:"hidden md:flex items-center justify-center mt-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-300 to-green-300 rounded"}),a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-green-300 to-purple-300 rounded"})]})})]})})}function nl(){const e=f(),{t:t}=ge("landing");return a.jsx("section",{className:"py-16 bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:t("cta.title")}),a.jsx("p",{className:"text-lg text-green-100 mb-8",children:t("cta.subtitle")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-6",children:[a.jsx(Wc,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("cta.button")}),a.jsxs(Wc,{onClick:()=>window.open("https://github.com/GodStorm91/smartmoney","_blank"),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[a.jsx(ae,{className:"h-5 w-5 mr-2"}),t("cta.openSource")]})]}),a.jsx("p",{className:"text-sm text-green-200",children:t("cta.noAccount")})]})})}const rl=[{code:"en",name:"English",flag:""},{code:"ja",name:"",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function al(){const e=f(),{t:t,i18n:n}=ge("landing"),[r,o]=v.useState(!1),s=rl.find(e=>e.code===n.language)||rl[0];return a.jsx("header",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(F,{className:"h-8 w-8 text-green-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(re,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm",children:s.flag})]}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:rl.map(e=>a.jsxs("button",{onClick:()=>{return t=e.code,n.changeLanguage(t),void o(!1);var t},className:"w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 "+(n.language===e.code?"bg-green-50 text-green-700":"text-gray-700"),children:[a.jsx("span",{children:e.flag}),a.jsx("span",{children:e.name})]},e.code))})]}),a.jsx(Wc,{onClick:()=>e({to:"/login"}),variant:"outline",size:"sm",children:"Login"}),a.jsx(Wc,{onClick:()=>e({to:"/register"}),size:"sm",children:t("hero.cta")})]})]})})})}function ol(){const{t:e}=ge("landing");return a.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(F,{className:"h-6 w-6 text-green-500"}),a.jsx("span",{className:"text-lg font-bold text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[a.jsxs("a",{href:"https://github.com/GodStorm91/smartmoney",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-white transition-colors",children:[a.jsx(ae,{className:"h-4 w-4"}),"GitHub"]}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.privacy")}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.terms")})]}),a.jsx("p",{className:"text-sm",children:e("footer.copyright")})]})})})}const sl=p("/landing")({component:function(){return a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx(al,{}),a.jsx(Xc,{}),a.jsx(Zc,{}),a.jsx(tl,{}),a.jsx(nl,{}),a.jsx(ol,{})]})}}),il=p("/goals")({}),cl=p("/budget")({}),ll=p("/analytics")({}),ul=p("/accounts")({});function dl({className:e}){return a.jsx("div",{className:pa("animate-pulse bg-gray-200 dark:bg-gray-700 rounded-lg",e)})}function fl(){return a.jsxs("tr",{className:"animate-pulse",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx(dl,{className:"w-20 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(dl,{className:"w-32 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(dl,{className:"w-16 h-6 rounded-full"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(dl,{className:"w-24 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(dl,{className:"w-20 h-4 ml-auto"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(dl,{className:"w-16 h-6 mx-auto"})})]})}function hl(){return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(dl,{className:"w-32 h-5 mb-2"}),a.jsx(dl,{className:"w-20 h-4"})]}),a.jsx(dl,{className:"w-24 h-6"})]})})}function ml({className:e}){return a.jsxs("div",{className:pa("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",e),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(dl,{className:"w-10 h-10 rounded-xl"}),a.jsx(dl,{className:"w-20 h-4"})]}),a.jsx(dl,{className:"w-32 h-8 mb-2"}),a.jsx(dl,{className:"w-16 h-4"})]})}function pl({className:e}){return a.jsx("div",{className:pa("space-y-4",e),children:[...Array(4)].map((e,t)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(dl,{className:"w-8 h-8 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(dl,{className:"w-24 h-4 mb-1"}),a.jsx(dl,{className:"w-full h-2 rounded-full"})]}),a.jsx(dl,{className:"w-16 h-4"})]},t))})}function gl({className:e}){return a.jsxs("div",{className:pa("space-y-3",e),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(dl,{className:"w-28 h-4"}),a.jsx(dl,{className:"w-16 h-4"})]}),a.jsx(dl,{className:"w-full h-3 rounded-full"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(dl,{className:"w-20 h-3"}),a.jsx(dl,{className:"w-20 h-3"})]})]})}function yl({className:e}){return a.jsxs("div",{className:pa("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 text-center",e),children:[a.jsx(dl,{className:"w-24 h-4 mx-auto mb-2"}),a.jsx(dl,{className:"w-48 h-10 mx-auto mb-3"}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(dl,{className:"w-16 h-4"}),a.jsx(dl,{className:"w-24 h-5"}),a.jsx(dl,{className:"w-12 h-5 rounded-full"})]})]})}function bl(){return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(dl,{className:"w-40 h-8 mb-2"}),a.jsx(dl,{className:"w-56 h-5"})]}),a.jsx(yl,{className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[a.jsx(ml,{}),a.jsx(ml,{}),a.jsx(ml,{})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[a.jsxs(Gc,{className:"lg:col-span-2 h-80",children:[a.jsx(dl,{className:"w-32 h-5 mb-4"}),a.jsx(dl,{className:"w-full h-56"})]}),a.jsxs(Gc,{children:[a.jsx(dl,{className:"w-28 h-5 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(dl,{className:"w-full h-12 rounded-lg"}),a.jsx(dl,{className:"w-full h-12 rounded-lg"}),a.jsx(dl,{className:"w-full h-12 rounded-lg"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(Gc,{children:[a.jsx(dl,{className:"w-40 h-5 mb-6"}),a.jsx(pl,{})]}),a.jsxs(Gc,{children:[a.jsx(dl,{className:"w-36 h-5 mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(gl,{}),a.jsx(gl,{})]})]})]})]})}async function vl(e){const t=new URLSearchParams;(null==e?void 0:e.includeInactive)&&t.append("include_inactive","true");const n="/api/accounts/"+(t.toString()?`?${t.toString()}`:"");return(await nr.get(n)).data}async function xl(e){return(await nr.get(`/api/accounts/${e}`)).data}async function wl(e){return(await nr.post("/api/accounts/",e)).data}async function kl(e,t){return(await nr.patch(`/api/accounts/${e}`,t)).data}async function jl(){return(await nr.get("/api/goals/")).data}async function Nl(e){return(await nr.get(`/api/goals/${e}`)).data}async function El(e){return(await nr.post("/api/goals/",e)).data}async function _l(e,t){return(await nr.put(`/api/goals/${e}`,t)).data}async function Sl(e){await nr.delete(`/api/goals/${e}`)}async function Cl(e,t=!0,n=3){const r=new URLSearchParams;t&&(r.append("include_achievability","true"),r.append("trend_months",n.toString()));return(await nr.get(`/api/goals/${e}/progress?${r.toString()}`)).data}async function Pl(){return(await nr.get("/api/goals/status/has-emergency-fund")).data.has_emergency_fund}function Ol(){const{t:e}=ge("common"),[t,n]=v.useState(!1);v.useEffect(()=>{"true"===localStorage.getItem("onboarding_dismissed")&&n(!0)},[]);const{data:r=[]}=i({queryKey:["accounts"],queryFn:()=>vl()}),{data:o=[]}=i({queryKey:["transactions-check"],queryFn:()=>dc()}),{data:s=[]}=i({queryKey:["goals"],queryFn:jl}),c=r.length>0,l=o.length>0,d=s.length>0,f=[{id:"account",titleKey:"onboarding.steps.account.title",descriptionKey:"onboarding.steps.account.description",icon:a.jsx(W,{className:"h-5 w-5"}),link:"/accounts",isComplete:c},{id:"upload",titleKey:"onboarding.steps.upload.title",descriptionKey:"onboarding.steps.upload.description",icon:a.jsx(z,{className:"h-5 w-5"}),link:"/upload",isComplete:l},{id:"goals",titleKey:"onboarding.steps.goals.title",descriptionKey:"onboarding.steps.goals.description",icon:a.jsx(q,{className:"h-5 w-5"}),link:"/goals",isComplete:d}],h=f.filter(e=>e.isComplete).length,m=h===f.length,p=Math.round(h/f.length*100);if(t||m)return null;return a.jsxs(Gc,{className:"mb-6 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-950 dark:to-blue-950 border-primary-200 dark:border-primary-800",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:a.jsx(oe,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("onboarding.title")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("onboarding.subtitle",{completed:h,total:f.length})})]})]}),a.jsx("button",{onClick:()=>{localStorage.setItem("onboarding_dismissed","true"),n(!0)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":e("button.close"),children:a.jsx(R,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${p}%`}})})}),a.jsx("div",{className:"space-y-2",children:f.map(t=>a.jsxs(u,{to:t.link,className:"flex items-center gap-3 p-3 rounded-lg transition-colors "+(t.isComplete?"bg-green-50 dark:bg-green-950/50":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-750"),children:[a.jsx("div",{className:"p-2 rounded-full "+(t.isComplete?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"),children:t.isComplete?a.jsx(se,{className:"h-5 w-5"}):t.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium "+(t.isComplete?"text-green-700 dark:text-green-400 line-through":"text-gray-900 dark:text-gray-100"),children:e(t.titleKey)}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e(t.descriptionKey)})]}),!t.isComplete&&a.jsx(ie,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]},t.id))})]})}const Rl={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},Al={date:we({formats:{full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:we({formats:{full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:we({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},Tl={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},Dl={ordinalNumber:(e,t)=>{const n=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${n}`;case"quarter":return`${n}`;case"month":return`${n}`;case"week":return`${n}`;case"date":return`${n}`;case"hour":return`${n}`;case"minute":return`${n}`;case"second":return`${n}`;default:return`${n}`}},era:ke({values:{narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},defaultWidth:"wide"}),quarter:ke({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:ke({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},defaultWidth:"wide"}),day:ke({values:{narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},defaultWidth:"wide"}),dayPeriod:ke({values:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultWidth:"wide",formattingValues:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultFormattingWidth:"wide"})},Il={code:"ja",formatDistance:(e,t,n)=>{let r;n=n||{};const a=Rl[e];return r="string"==typeof a?a:1===t?n.addSuffix&&a.oneWithSuffix?a.oneWithSuffix:a.one:n.addSuffix&&a.otherWithSuffix?a.otherWithSuffix.replace("{{count}}",String(t)):a.other.replace("{{count}}",String(t)),n.addSuffix?n.comparison&&n.comparison>0?r+"":r+"":r},formatLong:Al,formatRelative:(e,t,n,r)=>Tl[e],localize:Dl,match:{ordinalNumber:Ne({matchPattern:/^?\d+(|||||||)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:je({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},defaultParseWidth:"any"}),quarter:je({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:je({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:je({matchPatterns:{narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},defaultMatchWidth:"wide",parsePatterns:{any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},defaultParseWidth:"any"}),dayPeriod:je({matchPatterns:{any:/^(AM|PM|||||||)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Ml(e,t="yyyy/MM/dd"){try{const n="string"==typeof e?Ee(e):e;return _e(n)?Se(n,t,{locale:Il}):"---"}catch{return"---"}}function Ll(e){return Ml(e,"yyyyMd HH:mm")}function Kl(e){return Ml(e,"yyyyM")}function Fl(){const e=new Date,t=e.getFullYear();return{start:`${t}-${String(e.getMonth()+1).padStart(2,"0")}-01`,end:Se(new Date(t,e.getMonth()+1,0),"yyyy-MM-dd")}}function ql(e){return Ml(e,"MMM d (EEE)")}async function Bl(e){const t=new URLSearchParams;(null==e?void 0:e.start)&&t.append("start_date",e.start),(null==e?void 0:e.end)&&t.append("end_date",e.end);return(await nr.get(`/api/analytics?${t.toString()}`)).data}async function zl(e){const t=new URLSearchParams;(null==e?void 0:e.start)&&t.append("start_date",e.start),(null==e?void 0:e.end)&&t.append("end_date",e.end);return(await nr.get(`/api/analytics/categories?${t.toString()}`)).data}async function Ul(){return(await nr.get("/api/analytics/insights")).data}function $l({summary:e}){const{t:t}=ge("common"),{currency:n}=fr(),{data:r}=cc(),{isPrivacyMode:o}=gr(),[s,i]=v.useState(!1),c=(null==e?void 0:e.net)||0,l=(null==e?void 0:e.net_change)||0,u=e=>_c(e,n,(null==r?void 0:r.rates)||{},!1,o);return a.jsxs(Gc,{variant:"gradient",className:pa("cursor-pointer transition-all duration-300",s&&"shadow-lg"),onClick:()=>i(!s),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-1.5 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:a.jsx(W,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),a.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("dashboard.netWorth","Net Worth")})]}),a.jsx("p",{className:pa("text-3xl sm:text-4xl font-bold font-numbers tracking-tight",c>=0?"text-gray-900 dark:text-gray-100":"text-red-600 dark:text-red-400"),children:u(c)}),0!==l&&a.jsxs("div",{className:pa("inline-flex items-center gap-1 mt-2 px-2 py-0.5 rounded-full text-xs font-medium",l>=0?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400"),children:[l>=0?a.jsx(F,{className:"w-3 h-3"}):a.jsx(he,{className:"w-3 h-3"}),l>=0?"+":"",u(l)]}),s&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:t("dashboard.assets","Assets")}),a.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400",children:u((null==e?void 0:e.total_income)||0)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:t("dashboard.expenses","Expenses")}),a.jsx("p",{className:"font-semibold text-red-600 dark:text-red-400",children:u((null==e?void 0:e.total_expense)||0)})]})]})})]})}function Wl({label:e,value:t,change:n,isPositive:r,formatCurrency:o}){return a.jsxs(Gc,{className:"p-4",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e}),a.jsx("p",{className:"text-xl font-bold font-numbers text-gray-900 dark:text-gray-100",children:o(t)}),0!==n&&a.jsxs("div",{className:pa("flex items-center gap-1 mt-1 text-xs font-medium",r&&n>0||!r&&n<0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[n>0?a.jsx(F,{className:"w-3 h-3"}):a.jsx(he,{className:"w-3 h-3"}),Math.abs(n),"%"]})]})}function Vl({rate:e}){const{t:t}=ge("common"),n=e>=20?{color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-900/30",label:t("dashboard.savingsGood","Healthy")}:e>=10?{color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-100 dark:bg-amber-900/30",label:t("dashboard.savingsFair","Fair")}:{color:"text-red-600 dark:text-red-400",bg:"bg-red-100 dark:bg-red-900/30",label:t("dashboard.savingsLow","Low")};return a.jsxs(Gc,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("dashboard.savingsRate","Savings Rate")}),a.jsx("span",{className:pa("text-xs font-medium px-2 py-0.5 rounded-full",n.bg,n.color),children:n.label})]}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsxs("span",{className:"text-3xl font-bold font-numbers text-gray-900 dark:text-gray-100",children:[Math.round(e),"%"]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:t("dashboard.ofIncome","of income")})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full mt-3 overflow-hidden",children:a.jsx("div",{className:pa("h-full rounded-full transition-all",e>=20?"bg-green-500":e>=10?"bg-amber-500":"bg-red-500"),style:{width:`${Math.min(100,e)}%`}})})]})}function Gl({years:e,progress:t,formatCurrency:n}){var r,o;const{t:s}=ge("common"),i=t.target_amount>0?Math.min(100,t.total_saved/t.target_amount*100):0,c=(null==(r=t.achievability)?void 0:r.current_monthly_net)>=(null==(o=t.achievability)?void 0:o.required_monthly);return a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:pa("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",c?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400"),children:i>=100?"":`${Math.round(i)}%`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[s("goals.yearGoal",{years:e}),"  ",n(t.total_saved)]}),a.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-gray-600 rounded-full mt-1 overflow-hidden",children:a.jsx("div",{className:pa("h-full rounded-full",c?"bg-green-500":"bg-amber-500"),style:{width:`${i}%`}})})]}),a.jsx(fe,{className:"w-4 h-4 text-gray-400"})]})}function Hl({summary:e,formatCurrency:t}){return a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Assets"}),a.jsx("p",{className:"text-sm font-semibold font-numbers text-green-600 dark:text-green-400",children:t((null==e?void 0:e.total_income)||0)})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Liabilities"}),a.jsx("p",{className:"text-sm font-semibold font-numbers text-red-600 dark:text-red-400",children:t((null==e?void 0:e.total_expense)||0)})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Transactions"}),a.jsx("p",{className:"text-sm font-semibold font-numbers text-gray-900 dark:text-gray-100",children:(null==e?void 0:e.transaction_count)||0})]})]})}const Yl=p("/")({component:function(){const{t:e}=ge("common"),{currency:t}=fr(),{data:n}=cc(),{isPrivacyMode:r}=gr(),[o,s]=v.useState(new Date),{data:c,isLoading:l}=i({queryKey:["dashboard-summary"],queryFn:()=>async function(){return(await nr.get("/api/dashboard/summary")).data}()}),{data:d,isLoading:f}=i({queryKey:["monthly-trends",12],queryFn:()=>async function(e=12){return(await nr.get(`/api/analytics/monthly?months=${e}`)).data}(12)}),{data:h,isLoading:m}=i({queryKey:["category-breakdown"],queryFn:()=>zl()}),{data:p,isLoading:g}=i({queryKey:["goals"],queryFn:jl}),{data:y}=i({queryKey:["goals-progress",null==p?void 0:p.map(e=>e.id)],queryFn:async()=>p&&0!==p.length?Promise.all(p.map(e=>Cl(e.id,!0))):[],enabled:!!p&&p.length>0}),{data:b}=i({queryKey:["recent-transactions"],queryFn:async()=>(await dc()).slice(0,5)}),x=l||f||m||g,w=null==d?void 0:d[d.length-1],k=w&&w.income>0?(w.income-w.expenses)/w.income*100:0,j=[{icon:G,label:e("quickActions.add","Add"),color:"bg-primary-500",to:"/transactions?action=add-transaction"},{icon:ce,label:e("quickActions.scan","Scan"),color:"bg-purple-500",to:"/transactions?action=scan-receipt"},{icon:z,label:e("quickActions.upload","Upload"),color:"bg-blue-500",to:"/upload"},{icon:le,label:e("quickActions.analytics","Analytics"),color:"bg-green-500",to:"/analytics"},{icon:W,label:e("quickActions.accounts","Accounts"),color:"bg-orange-500",to:"/accounts"},{icon:q,label:e("quickActions.goals","Goals"),color:"bg-pink-500",to:"/goals"}],N=[];if(w&&w.expenses>w.income&&w.income>0&&N.push({type:"danger",message:e("alerts.overspending","Overspending")}),k<10&&k>=0&&N.push({type:"warning",message:e("alerts.lowSavings","Low savings")}),x)return a.jsx(bl,{});const E=e=>_c(e,t,(null==n?void 0:n.rates)||{},!1,r),_=(e,t="JPY")=>_c(e,t,(null==n?void 0:n.rates)||{},!0,r);return a.jsxs("div",{className:"min-h-screen pb-32",children:[a.jsx("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("button",{onClick:()=>{const e=new Date(o);e.setMonth(e.getMonth()-1),s(e)},className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:a.jsx(ue,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Kl(o)}),a.jsx("button",{onClick:()=>{const e=new Date(o);e.setMonth(e.getMonth()+1),s(e)},className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:a.jsx(ie,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:e("dashboard.title")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("dashboard.subtitle",{month:Kl(new Date)})})]})]})}),a.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4",children:[a.jsx(Ol,{}),a.jsx($l,{summary:c}),N.length>0&&a.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:N.map((e,t)=>a.jsxs("div",{className:pa("flex-shrink-0 px-3 py-2 rounded-lg text-xs font-medium flex items-center gap-1.5","danger"===e.type?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"),children:[a.jsx(de,{className:"w-3.5 h-3.5"}),e.message]},t))}),a.jsx("div",{className:"overflow-x-auto scrollbar-hide -mx-4 px-4",children:a.jsx("div",{className:"flex gap-3 pb-2 min-w-max",children:j.map((e,t)=>{const n=e.icon;return a.jsxs(u,{to:e.to,className:"flex flex-col items-center gap-1.5 p-1",children:[a.jsx("div",{className:pa("w-12 h-12 rounded-xl flex items-center justify-center","transition-transform active:scale-95",e.color),children:a.jsx(n,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:e.label})]},t)})})}),a.jsx(Hl,{summary:c,formatCurrency:E}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(Wl,{label:e("dashboard.income","Income"),value:(null==w?void 0:w.income)||0,change:5.2,isPositive:!0,formatCurrency:E}),a.jsx(Wl,{label:e("dashboard.expenses","Expenses"),value:(null==w?void 0:w.expenses)||0,change:-2.1,isPositive:!1,formatCurrency:E})]}),a.jsx(Vl,{rate:k}),a.jsxs(Gc,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.recentTransactions","Recent")}),a.jsxs(u,{to:"/transactions",className:"text-xs font-medium text-primary-600 dark:text-primary-400 flex items-center gap-0.5",children:[e("common.viewAll")," ",a.jsx(fe,{className:"w-3 h-3"})]})]}),b&&b.length>0?a.jsx("div",{className:"space-y-2",children:b.slice(0,4).map(e=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:pa("w-8 h-8 rounded-full flex items-center justify-center text-sm","income"===e.type?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"),children:"income"===e.type?"+":"-"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.description||e.category}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Ml(e.date,"MM/dd")})]})]}),a.jsxs("span",{className:pa("text-sm font-semibold font-numbers","income"===e.type?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-gray-100"),children:["income"===e.type?"+":"-",_(Math.abs(e.amount),e.currency||"JPY")]})]},e.id))}):a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:e("dashboard.noTransactions","No transactions yet")})]}),h&&h.length>0&&a.jsxs(Gc,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("dashboard.spendingByCategory","Spending")}),a.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1 -mx-1 px-1",children:h.slice(0,8).map((e,t)=>a.jsxs("span",{className:"flex-shrink-0 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300",children:[e.category,"  ",E(e.amount)]},t))})]}),y&&y.length>0&&a.jsxs(Gc,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.goals","Goals")}),a.jsxs(u,{to:"/goals",className:"text-xs font-medium text-primary-600 dark:text-primary-400 flex items-center gap-0.5",children:[e("common.viewAll")," ",a.jsx(fe,{className:"w-3 h-3"})]})]}),a.jsx("div",{className:"space-y-3",children:y.slice(0,2).map(e=>e.achievability&&a.jsx(Gl,{years:e.years,progress:e,formatCurrency:_},e.goal_id))})]}),(!y||0===y.length)&&p&&0===p.length&&a.jsx(u,{to:"/goals",children:a.jsx(Gc,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-lg",children:a.jsx(q,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e("dashboard.createFirstGoal","Create your first goal")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("dashboard.goalMotivation","Track your savings progress")})]})]})})})]})]})}}),Jl=p("/gamification")().update({id:"/gamification",path:"/gamification",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./gamification.lazy-C7YXZ_BS.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>e.Route)),Xl=zc.update({id:"/upload",path:"/upload",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./upload.lazy-BfNfyil7.js"),__vite__mapDeps([7,1,2,5,3,4,6])).then(e=>e.Route)),Ql=Uc.update({id:"/transactions",path:"/transactions",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./transactions.lazy-BjGmQi06.js"),__vite__mapDeps([8,1,2,9,4,10,11,12,13,5,14,15,3,6])).then(e=>e.Route)),Zl=$c.update({id:"/settings",path:"/settings",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./settings.lazy-X1WPZj3F.js"),__vite__mapDeps([16,1,2,17,4,9,18,11,5,13,3,6])).then(e=>e.Route)),eu=Hc.update({id:"/register",path:"/register",getParentRoute:()=>Bc}),tu=Yc.update({id:"/recurring",path:"/recurring",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./recurring.lazy-NoOhmY6s.js"),__vite__mapDeps([19,1,2,18,11,5,4,9,14,12,13,3,6])).then(e=>e.Route)),nu=Jc.update({id:"/login",path:"/login",getParentRoute:()=>Bc}),ru=sl.update({id:"/landing",path:"/landing",getParentRoute:()=>Bc}),au=il.update({id:"/goals",path:"/goals",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./goals.lazy-BPFUOowp.js"),__vite__mapDeps([20,1,2,5,4,12,15,3,6])).then(e=>e.Route)),ou=cl.update({id:"/budget",path:"/budget",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./budget.lazy-D4uefqiM.js"),__vite__mapDeps([21,1,2,5,13,4,15,3,6])).then(e=>e.Route)),su=ll.update({id:"/analytics",path:"/analytics",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./analytics.lazy-Be5DL9ne.js"),__vite__mapDeps([22,1,2,5,3,4,6])).then(e=>e.Route)),iu=ul.update({id:"/accounts",path:"/accounts",getParentRoute:()=>Bc}).lazy(()=>ao(()=>import("./accounts.lazy-C41S1xps.js"),__vite__mapDeps([23,1,2,12,5,17,4,3,10,11,13,14,15,6])).then(e=>e.Route)),cu={IndexRoute:Yl.update({id:"/",path:"/",getParentRoute:()=>Bc}),AccountsRoute:iu,AnalyticsRoute:su,BudgetRoute:ou,GoalsRoute:au,LandingRoute:ru,LoginRoute:nu,RecurringRoute:tu,RegisterRoute:eu,SettingsRoute:Zl,TransactionsRoute:Ql,UploadRoute:Xl,GamificationLazyRoute:Jl},lu=Bc._addFileChildren(cu)._addFileTypes();function uu(){const{isOnline:e,isSyncing:t,pendingCount:n,lastError:r}=v.useContext(Ja),{t:o}=ge(),[s,i]=v.useState(!1);if(v.useEffect(()=>{if(e&&!t&&0===n&&!r){i(!0);const e=setTimeout(()=>i(!1),3e3);return()=>clearTimeout(e)}},[e,t,n,r]),e&&!t&&0===n&&!s&&!r)return null;return a.jsx("div",{className:"fixed top-4 right-4 z-[9999]",role:"status","aria-live":"polite",children:a.jsxs("div",{className:`\n        flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg\n        ${e?r?"bg-red-500 dark:bg-red-600":t?"bg-blue-500 dark:bg-blue-600":"bg-green-500 dark:bg-green-600":"bg-gray-600 dark:bg-gray-700"}\n        text-white text-sm font-medium\n        transition-all duration-300 ease-in-out\n      `,children:[!e&&a.jsxs(a.Fragment,{children:[a.jsx(me,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:o("sync.offline","Offline")}),n>0&&a.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:n})]}),e&&r&&a.jsxs(a.Fragment,{children:[a.jsx(C,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:o("sync.error","Sync error")})]}),e&&t&&a.jsxs(a.Fragment,{children:[a.jsx(pe,{size:16,className:"animate-spin","aria-hidden":"true"}),a.jsxs("span",{children:[o("sync.syncing","Syncing"),n>0&&` (${n})`]})]}),e&&!t&&!r&&s&&a.jsxs(a.Fragment,{children:[a.jsx(O,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:o("sync.synced","All synced")})]})]})})}const du=v.createContext(void 0);function fu(){const e=v.useContext(du);if(!e)throw new Error("useXPToast must be used within an XPToastProvider");return e}function hu({children:e}){const[t,n]=v.useState([]),r=v.useCallback((e,t)=>{const r={amount:e,source:t,timestamp:Date.now()};n(e=>[...e.slice(-2),r]),setTimeout(()=>{n(e=>e.filter(e=>e.timestamp!==r.timestamp))},3e3)},[]),o=v.useCallback(e=>{n(t=>t.filter(t=>t.timestamp!==e))},[]);return a.jsxs(du.Provider,{value:{addXPGain:r,toasts:t,dismissToast:o},children:[e,a.jsx(mu,{toasts:t,onDismiss:o})]})}function mu({toasts:e,onDismiss:t}){return 0===e.length?null:a.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:e.map(e=>a.jsx(pu,{toast:e,onDismiss:t},e.timestamp))})}function pu({toast:e,onDismiss:t}){return a.jsxs("div",{className:pa("pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg","bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/90 dark:to-orange-950/90","border border-amber-200/50 dark:border-amber-800/50","animate-in slide-in-from-bottom-5 fade-in duration-300"),children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center",children:a.jsx(oe,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:["+",e.amount," XP"]}),a.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 truncate",children:e.source})]}),a.jsx("button",{onClick:()=>t(e.timestamp),className:"flex-shrink-0 p-1 rounded-lg hover:bg-amber-200/50 dark:hover:bg-amber-800/50 transition-colors",children:a.jsx(R,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})})]})}const gu="default",yu="smartmoney-theme";function bu(e){return{default:"default",dark:"default",emerald:"emerald",sunset:"sunset",purple:"purple",rainbow:"rainbow","gold-premium":"gold-premium",gold_premium:"gold-premium","neon-night":"neon-night",neon_night:"neon-night",rose:"rose"}[e.toLowerCase()]||"default"}const vu=g({routeTree:lu});function xu(){return function(){const[e,t]=v.useState(gu),[n,r]=v.useState(!0),[a,o]=v.useState([]),[s,i]=v.useState([]);v.useEffect(()=>{const e=localStorage.getItem(yu);e&&(t(e),l(e))},[]);const c=v.useCallback(async()=>{try{r(!0);const[e,n]=await Promise.all([nr.get("/api/rewards/themes/my"),nr.get("/api/rewards/themes?level=1")]);o(e.data),i(n.data);const a=e.data.find(e=>e.is_active);if(a){const e=bu(a.code);t(e),l(e),localStorage.setItem(yu,e)}}catch(e){l(gu)}finally{r(!1)}},[]),l=v.useCallback(e=>{const t=bu(e);document.documentElement.setAttribute("data-theme",t)},[]),u=v.useCallback(async e=>{try{await nr.post(`/api/rewards/themes/${e}/activate`,{});const n=s.find(t=>t.id===e);if(n){const r=bu(n.code);t(r),l(r),localStorage.setItem(yu,r),o(t=>t.map(t=>({...t,is_active:t.id===e})))}}catch(n){}},[s,l]);v.useEffect(()=>{c()},[c])}(),a.jsxs(hu,{children:[a.jsx(uu,{}),a.jsx(y,{router:vu})]})}ye.use(be).use(ve).use(xe).init({fallbackLng:"ja",supportedLngs:["ja","en","vi"],defaultNS:"common",ns:["common","landing"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},debug:!1}),async function(){if(!function(){try{return"undefined"!=typeof indexedDB&&null!==indexedDB}catch{return!1}}())return!1;try{await Ka.open();return await Ka.app_meta.get("app-state")||await Ka.app_meta.put({id:"app-state",schema_version:1}),!0}catch(e){return!1}}().then(e=>{}),Ce.createRoot(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(wr,{children:a.jsx(Te,{client:Za,persistOptions:{persister:no,maxAge:864e5,dehydrateOptions:{shouldDehydrateQuery:e=>"success"===e.state.status&&function(e){const t=e[0];return"string"!=typeof t||!Qa.includes(t)}([...e.queryKey])}},children:a.jsx(Xa,{children:a.jsx(sr,{children:a.jsx(dr,{children:a.jsx(pr,{children:a.jsx(wa,{children:a.jsx(xu,{})})})})})})})})}));export{cr as A,Wc as B,Gc as C,Cc as D,_l as E,El as F,Pl as G,Nl as H,Vc as I,Sl as J,jl as K,qc as L,Cl as M,zl as N,jc as O,kr as P,Ul as Q,Bl as R,fl as S,Ha as T,qa as U,bc as V,ka as W,wl as X,kl as Y,xl as Z,nr as a,vl as b,pa as c,mc as d,pc as e,Ll as f,co as g,gr as h,cc as i,Pc as j,Ml as k,lc as l,Sc as m,fr as n,Fl as o,_c as p,hl as q,ql as r,xc as s,yc as t,fu as u,gc as v,wc as w,hc as x,dc as y,lr as z};
