import{k as G,u as D,j as r,l as x,m as ze,S as $,n as qe,C as Ve,o as Ke,P as Je,r as g,X as J,p as Qe,q as et,_ as tt,s as C,v as ae,a as De,b as rt,c as at,d as ot,e as nt,w as it,B as te,L as ve,g as re,I as st,U as lt,t as _,x as ct,y as dt,z as ye,i as ut}from"./index-Djd-GB5R.js";import{gamificationService as X}from"./gamification-service-Y8TA0gl3.js";import{S as he,P as ht,i as pt,c as mt}from"./heic-converter-DyyG4RQi.js";import{C as pe}from"./crown-C9aD2zAR.js";import{C as gt}from"./chevron-down-R98KTkWr.js";import{Z as ft,a as xt}from"./zoom-out-DR4loD9A.js";import{F as vt}from"./funnel-DiapZx5u.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yt=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bt=G("circle",yt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wt=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],jt=G("flame",wt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=[["path",{d:"M10.5 3 8 9l4 13 4-13-2.5-6",key:"b3dvk1"}],["path",{d:"M17 3a2 2 0 0 1 1.6.8l3 4a2 2 0 0 1 .013 2.382l-7.99 10.986a2 2 0 0 1-3.247 0l-7.99-10.986A2 2 0 0 1 2.4 7.8l2.998-3.997A2 2 0 0 1 7 3z",key:"7w4byz"}],["path",{d:"M2 9h20",key:"16fsjt"}]],Nt=G("gem",Ct);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kt=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Me=G("lock",kt);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],_t=G("rotate-cw",St);function Rt({level:o,totalXP:n,xpToNextLevel:e,progressPercent:t,currentStreak:a,badgesUnlocked:i,badgesTotal:l,avatarEmoji:s="ðŸ˜Š",onAvatarClick:d}){const{t:c}=D("common"),u=m=>m>=30?"text-red-400":m>=7?"text-orange-400":m>=3?"text-yellow-400":"text-gray-400";return r.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-blue-600 to-purple-600 p-5 text-white shadow-xl",children:[r.jsx("div",{className:"absolute -right-8 -top-8 h-32 w-32 rounded-full bg-white/10"}),r.jsx("div",{className:"absolute -bottom-4 -left-4 h-24 w-24 rounded-full bg-white/5"}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsxs("button",{onClick:d,className:"group relative flex-shrink-0","aria-label":c("gamification.profile.changeAvatar")||"Change avatar",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-white/20 flex items-center justify-center text-3xl shadow-lg ring-2 ring-white/30 group-hover:ring-white/50 transition-all",children:s}),r.jsx("div",{className:"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-white/90 flex items-center justify-center shadow",children:r.jsx("span",{className:"text-xs",children:"âœï¸"})})]}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"flex items-baseline gap-2",children:r.jsx("span",{className:"text-3xl font-bold",children:c("gamification.level",{level:o})||`Level ${o}`})}),r.jsxs("div",{className:"text-sm text-white/80",children:[n.toLocaleString()," XP ",c("gamification.total")||"total"]})]})]}),r.jsxs("div",{className:"mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[r.jsx("span",{className:"text-white/80",children:c("gamification.progress")||"Progress"}),r.jsxs("span",{className:"font-medium",children:[Math.round(t),"% â†’ ",c("gamification.levelShort",{level:o+1})||`Lv.${o+1}`]})]}),r.jsx("div",{className:"h-3 bg-white/20 rounded-full overflow-hidden",children:r.jsx("div",{className:x("h-full bg-gradient-to-r from-yellow-300 to-yellow-500 rounded-full transition-all duration-500",t>=90&&"animate-pulse"),style:{width:`${Math.min(100,t)}%`}})}),r.jsxs("div",{className:"flex justify-between text-xs text-white/60 mt-1",children:[r.jsxs("span",{children:[(n-n%e).toLocaleString()," XP"]}),r.jsxs("span",{children:[e.toLocaleString()," XP ",c("gamification.xpNeeded")||"needed"]})]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(jt,{className:x("h-6 w-6",u(a))}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xl font-bold",children:a}),r.jsx("span",{className:"text-sm text-white/80 ml-1",children:c("gamification.dayStreak",{days:a})||"day streak"})]}),a>=7&&r.jsxs("span",{className:"px-2 py-0.5 text-xs bg-orange-500/30 rounded-full",children:["ðŸ”¥ ",c("gamification.onFire")||"On Fire!"]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ze,{className:"h-5 w-5 text-yellow-300"}),r.jsxs("span",{className:"text-lg font-semibold",children:[i,"/",l]}),r.jsx("span",{className:"text-sm text-white/80",children:c("gamification.badges")||"badges"})]})]})]})]})}const Et={legendary:"ring-yellow-400/60 shadow-yellow-400/30",epic:"ring-purple-400/60 shadow-purple-400/30",rare:"ring-blue-400/60 shadow-blue-400/30",common:"ring-gray-400/60 shadow-gray-400/30"},Pt={legendary:"bg-gradient-to-br from-yellow-100 to-yellow-200 dark:from-yellow-900/30 dark:to-yellow-800/30",epic:"bg-gradient-to-br from-purple-100 to-purple-200 dark:from-purple-900/30 dark:to-purple-800/30",rare:"bg-gradient-to-br from-blue-100 to-blue-200 dark:from-blue-900/30 dark:to-blue-800/30",common:"bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-800 dark:to-gray-700"};function zt({badges:o,onBadgeClick:n}){const{t:e}=D("common");return o.length===0?r.jsxs("div",{className:"py-6",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3 flex items-center gap-2",children:[r.jsx($,{className:"w-4 h-4"}),e("gamification.recentUnlocks")||"Recent Unlocks"]}),r.jsx("div",{className:"flex items-center justify-center py-8 px-4 bg-gray-50 dark:bg-gray-800/50 rounded-xl border-2 border-dashed border-gray-200 dark:border-gray-700",children:r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center",children:e("gamification.noRecentUnlocks")||"Complete actions to earn badges!"})})]}):r.jsxs("div",{className:"py-2",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3 flex items-center gap-2",children:[r.jsx($,{className:"w-4 h-4"}),e("gamification.recentUnlocks")||"Recent Unlocks"]}),r.jsx("div",{className:"flex gap-3 overflow-x-auto pb-2 -mx-1 px-1 scrollbar-hide",children:o.map(t=>{const a=t.rarity||"common";return r.jsxs("button",{onClick:()=>n(t),className:x("flex-shrink-0 p-4 rounded-xl ring-2 shadow-lg","hover:scale-105 active:scale-95 transition-all duration-200",Et[a],Pt[a]),children:[r.jsx("div",{className:"w-14 h-14 mx-auto mb-2 rounded-full bg-white/80 dark:bg-gray-800/80 flex items-center justify-center text-3xl shadow-inner",children:t.icon}),r.jsx("p",{className:"text-xs font-semibold text-gray-800 dark:text-gray-200 text-center truncate max-w-[80px]",children:t.name}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center capitalize",children:a})]},t.id)})})]})}const Dt={legendary:"text-yellow-600 dark:text-yellow-400",epic:"text-purple-600 dark:text-purple-400",rare:"text-blue-600 dark:text-blue-400",common:"text-gray-600 dark:text-gray-400"},Mt={legendary:"bg-yellow-500",epic:"bg-purple-500",rare:"bg-blue-500",common:"bg-gray-500"};function At({badges:o,onAddTransaction:n,onBadgeClick:e}){const{t}=D("common");return o.length===0?null:r.jsxs("div",{className:"py-2",children:[r.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3 flex items-center gap-2",children:[r.jsx(qe,{className:"w-4 h-4"}),t("gamification.nextToUnlock")||"Next To Unlock"]}),r.jsxs(Ve,{className:"overflow-hidden",children:[r.jsx("div",{className:"divide-y divide-gray-100 dark:divide-gray-800",children:o.map(a=>{const i=a.rarity||"common",l=a.progress>=75;return r.jsxs("button",{onClick:()=>e(a),className:"w-full p-4 flex items-center gap-4 hover:bg-gray-50 dark:hover:bg-gray-800/50 transition-colors text-left",children:[r.jsx("div",{className:"w-12 h-12 rounded-xl bg-gray-100 dark:bg-gray-800 flex items-center justify-center text-2xl flex-shrink-0",children:a.icon}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:a.name}),r.jsx("span",{className:x("text-xs font-medium capitalize",Dt[i]),children:i})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:x("h-full rounded-full transition-all duration-500",Mt[i],l&&"animate-pulse"),style:{width:`${a.progress}%`}})}),r.jsxs("span",{className:x("text-sm font-semibold min-w-[40px] text-right",l?"text-green-600 dark:text-green-400":"text-gray-600 dark:text-gray-400"),children:[a.progress,"%"]})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:a.description})]}),r.jsx(Ke,{className:"w-5 h-5 text-gray-400 flex-shrink-0"})]},a.id)})}),r.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-800/50 border-t border-gray-100 dark:border-gray-800",children:r.jsxs("button",{onClick:n,className:"w-full flex items-center justify-center gap-2 py-3 px-4 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-xl transition-colors",children:[r.jsx(Je,{className:"w-5 h-5"}),t("gamification.addTransaction")||"Add Transaction"]})})]})]})}const Lt={legendary:{icon:pe,label:"Legendary",bgColor:"bg-yellow-50 dark:bg-yellow-900/20",textColor:"text-yellow-800 dark:text-yellow-300",borderColor:"border-yellow-200 dark:border-yellow-800",iconColor:"text-yellow-500"},epic:{icon:Nt,label:"Epic",bgColor:"bg-purple-50 dark:bg-purple-900/20",textColor:"text-purple-800 dark:text-purple-300",borderColor:"border-purple-200 dark:border-purple-800",iconColor:"text-purple-500"},rare:{icon:he,label:"Rare",bgColor:"bg-blue-50 dark:bg-blue-900/20",textColor:"text-blue-800 dark:text-blue-300",borderColor:"border-blue-200 dark:border-blue-800",iconColor:"text-blue-500"},common:{icon:bt,label:"Common",bgColor:"bg-gray-50 dark:bg-gray-800",textColor:"text-gray-800 dark:text-gray-300",borderColor:"border-gray-200 dark:border-gray-700",iconColor:"text-gray-500"}},be=["legendary","epic","rare","common"];function Tt({achievements:o,onBadgeClick:n}){const{t:e}=D("common"),[t,a]=g.useState(new Set),i=s=>{a(d=>{const c=new Set(d);return c.has(s)?c.delete(s):c.add(s),c})},l=be.reduce((s,d)=>{const c=o.filter(u=>(u.rarity||"common")===d);return c.sort((u,m)=>u.unlocked!==m.unlocked?u.unlocked?-1:1:m.xp_reward-u.xp_reward),s[d]=c,s},{});return r.jsxs("div",{className:"py-2",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-3",children:e("gamification.allBadges")||"All Badges"}),r.jsx("div",{className:"space-y-2",children:be.map(s=>{const d=l[s],c=Lt[s],u=c.icon,m=d.filter(h=>h.unlocked).length,v=t.has(s);return r.jsxs("div",{className:x("rounded-xl border overflow-hidden",c.borderColor),children:[r.jsxs("button",{onClick:()=>i(s),className:x("w-full flex items-center justify-between p-4 transition-colors",c.bgColor,"hover:opacity-90"),children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(u,{className:x("w-5 h-5",c.iconColor)}),r.jsx("span",{className:x("font-semibold",c.textColor),children:e(`gamification.rarity.${s}`)||c.label}),r.jsxs("span",{className:x("px-2 py-0.5 text-xs font-medium rounded-full",c.bgColor,c.textColor),children:[m,"/",d.length]})]}),r.jsx(gt,{className:x("w-5 h-5 text-gray-400 transition-transform duration-200",v&&"rotate-180")})]}),r.jsx("div",{className:x("grid transition-all duration-300 ease-out",v?"grid-rows-[1fr]":"grid-rows-[0fr]"),children:r.jsx("div",{className:"overflow-hidden",children:r.jsx("div",{className:"p-4 pt-2 grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:d.map(h=>r.jsxs("button",{onClick:()=>n(h),className:x("relative p-3 rounded-xl transition-all duration-200","hover:scale-105 active:scale-95",h.unlocked?"bg-white dark:bg-gray-800 shadow-sm hover:shadow-md":"bg-gray-100 dark:bg-gray-900 opacity-60"),children:[r.jsx("div",{className:x("w-12 h-12 mx-auto mb-2 rounded-full flex items-center justify-center text-2xl",h.unlocked?"bg-gray-100 dark:bg-gray-700":"bg-gray-200 dark:bg-gray-800 grayscale"),children:h.icon}),r.jsx("p",{className:x("text-xs font-medium text-center truncate",h.unlocked?"text-gray-800 dark:text-gray-200":"text-gray-500 dark:text-gray-500"),children:h.name}),r.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",h.xp_reward," XP"]}),!h.unlocked&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center rounded-xl bg-black/5 dark:bg-black/20",children:r.jsx(Me,{className:"w-4 h-4 text-gray-400"})}),!h.unlocked&&h.progress>0&&r.jsx("div",{className:"absolute bottom-1 left-1 right-1",children:r.jsx("div",{className:"h-1 bg-gray-300 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-green-500 rounded-full",style:{width:`${h.progress}%`}})})})]},h.id))})})})]},s)})})]})}function Ft({isOpen:o,onClose:n,title:e,children:t,className:a}){const i=g.useRef(null);return g.useEffect(()=>{const l=s=>{s.key==="Escape"&&o&&n()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[o,n]),g.useEffect(()=>(o?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[o]),o?r.jsxs("div",{className:"fixed inset-0 z-50 lg:hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in",onClick:n}),r.jsxs("div",{ref:i,className:x("absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-900","rounded-t-2xl shadow-xl max-h-[90vh] overflow-hidden","animate-slide-up",a),children:[r.jsx("div",{className:"flex justify-center pt-3 pb-2",children:r.jsx("div",{className:"w-10 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e&&r.jsxs("div",{className:"flex items-center justify-between px-4 pb-3 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e}),r.jsx("button",{onClick:n,className:"p-2 -mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r.jsx(J,{size:20})})]}),r.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-4",children:t})]})]}):null}const It={legendary:{label:"Legendary",bgColor:"bg-yellow-100 dark:bg-yellow-900/30",textColor:"text-yellow-700 dark:text-yellow-300",borderColor:"border-yellow-400"},epic:{label:"Epic",bgColor:"bg-purple-100 dark:bg-purple-900/30",textColor:"text-purple-700 dark:text-purple-300",borderColor:"border-purple-400"},rare:{label:"Rare",bgColor:"bg-blue-100 dark:bg-blue-900/30",textColor:"text-blue-700 dark:text-blue-300",borderColor:"border-blue-400"},common:{label:"Common",bgColor:"bg-gray-100 dark:bg-gray-800",textColor:"text-gray-700 dark:text-gray-300",borderColor:"border-gray-400"}};function Ut({badge:o,onClose:n}){const{t:e}=D("common");if(!o)return null;const t=o.rarity||"common",a=It[t];return r.jsx(Ft,{isOpen:!!o,onClose:n,title:o.name,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:x("w-24 h-24 rounded-2xl flex items-center justify-center text-5xl shadow-lg border-2",a.bgColor,a.borderColor,!o.unlocked&&"grayscale opacity-60"),children:[o.icon,!o.unlocked&&r.jsx("div",{className:"absolute",children:r.jsx(Me,{className:"w-8 h-8 text-gray-500"})})]}),r.jsx("span",{className:x("mt-3 px-3 py-1 text-sm font-semibold rounded-full",a.bgColor,a.textColor),children:e(`gamification.rarity.${t}`)||a.label})]}),r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:o.description})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:x("p-4 rounded-xl text-center",a.bgColor),children:[r.jsx(he,{className:x("w-5 h-5 mx-auto mb-1",a.textColor)}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["+",o.xp_reward]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("gamification.xpReward")||"XP Reward"})]}),r.jsxs("div",{className:"p-4 rounded-xl bg-gray-100 dark:bg-gray-800 text-center",children:[r.jsx("div",{className:"w-5 h-5 mx-auto mb-1 text-gray-500 flex items-center justify-center",children:"ðŸ“"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 capitalize",children:o.category}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:e("gamification.category")||"Category"})]})]}),o.unlocked?r.jsxs("div",{className:"flex items-center justify-center gap-2 text-green-600 dark:text-green-400",children:[r.jsx(Qe,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm",children:e("gamification.badge.unlockedOn",{date:o.unlocked_at?new Date(o.unlocked_at).toLocaleDateString():"Unknown"})})]}):o.progress>0?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:e("gamification.progress")||"Progress"}),r.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:[o.progress,"%"]})]}),r.jsx("div",{className:"h-3 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:r.jsx("div",{className:x("h-full rounded-full transition-all duration-500",o.progress>=75?"bg-green-500 animate-pulse":"bg-blue-500"),style:{width:`${o.progress}%`}})})]}):r.jsx("div",{className:"text-center text-gray-500 dark:text-gray-400 text-sm",children:e("gamification.notStarted")||"Not started yet"})]})})}var we=!1,I,oe,ne,q,V,Ae,K,ie,se,le,Le,ce,de,Te,Fe;function N(){if(!we){we=!0;var o=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(o),e=/(Mac OS X)|(Windows)|(Linux)/.exec(o);if(ce=/\b(iPhone|iP[ao]d)/.exec(o),de=/\b(iP[ao]d)/.exec(o),le=/Android/i.exec(o),Te=/FBAN\/\w+;/i.exec(o),Fe=/Mobile/i.exec(o),Le=!!/Win64/.exec(o),n){I=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,I&&document&&document.documentMode&&(I=document.documentMode);var t=/(?:Trident\/(\d+.\d+))/.exec(o);Ae=t?parseFloat(t[1])+4:I,oe=n[2]?parseFloat(n[2]):NaN,ne=n[3]?parseFloat(n[3]):NaN,q=n[4]?parseFloat(n[4]):NaN,q?(n=/(?:Chrome\/(\d+\.\d+))/.exec(o),V=n&&n[1]?parseFloat(n[1]):NaN):V=NaN}else I=oe=ne=V=q=NaN;if(e){if(e[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(o);K=a?parseFloat(a[1].replace("_",".")):!0}else K=!1;ie=!!e[2],se=!!e[3]}else K=ie=se=!1}}var ue={ie:function(){return N()||I},ieCompatibilityMode:function(){return N()||Ae>I},ie64:function(){return ue.ie()&&Le},firefox:function(){return N()||oe},opera:function(){return N()||ne},webkit:function(){return N()||q},safari:function(){return ue.webkit()},chrome:function(){return N()||V},windows:function(){return N()||ie},osx:function(){return N()||K},linux:function(){return N()||se},iphone:function(){return N()||ce},mobile:function(){return N()||ce||de||le||Fe},nativeApp:function(){return N()||Te},android:function(){return N()||le},ipad:function(){return N()||de}},Wt=ue,Ot=!!(typeof window<"u"&&window.document&&window.document.createElement),Zt={canUseDOM:Ot},Bt=Zt,Ie=Bt,Ue;Ie.canUseDOM&&(Ue=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */function $t(o,n){if(!Ie.canUseDOM||n&&!("addEventListener"in document))return!1;var e="on"+o,t=e in document;if(!t){var a=document.createElement("div");a.setAttribute(e,"return;"),t=typeof a[e]=="function"}return!t&&Ue&&o==="wheel"&&(t=document.implementation.hasFeature("Events.wheel","3.0")),t}var Gt=$t,Ht=Wt,Xt=Gt,je=10,Ce=40,Ne=800;function We(o){var n=0,e=0,t=0,a=0;return"detail"in o&&(e=o.detail),"wheelDelta"in o&&(e=-o.wheelDelta/120),"wheelDeltaY"in o&&(e=-o.wheelDeltaY/120),"wheelDeltaX"in o&&(n=-o.wheelDeltaX/120),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(n=e,e=0),t=n*je,a=e*je,"deltaY"in o&&(a=o.deltaY),"deltaX"in o&&(t=o.deltaX),(t||a)&&o.deltaMode&&(o.deltaMode==1?(t*=Ce,a*=Ce):(t*=Ne,a*=Ne)),t&&!n&&(n=t<1?-1:1),a&&!e&&(e=a<1?-1:1),{spinX:n,spinY:e,pixelX:t,pixelY:a}}We.getEventType=function(){return Ht.firefox()?"DOMMouseScroll":Xt("wheel")?"wheel":"mousewheel"};var Yt=We,qt=Yt;const Vt=et(qt);function Kt(o,n,e,t,a,i){i===void 0&&(i=0);var l=W(o,n,i),s=l.width,d=l.height,c=Math.min(s,e),u=Math.min(d,t);return c>u*a?{width:u*a,height:u}:{width:c,height:c/a}}function Jt(o){return o.width>o.height?o.width/o.naturalWidth:o.height/o.naturalHeight}function B(o,n,e,t,a){a===void 0&&(a=0);var i=W(n.width,n.height,a),l=i.width,s=i.height;return{x:ke(o.x,l,e.width,t),y:ke(o.y,s,e.height,t)}}function ke(o,n,e,t){var a=n*t/2-e/2;return Q(o,-a,a)}function Se(o,n){return Math.sqrt(Math.pow(o.y-n.y,2)+Math.pow(o.x-n.x,2))}function _e(o,n){return Math.atan2(n.y-o.y,n.x-o.x)*180/Math.PI}function Qt(o,n,e,t,a,i,l){i===void 0&&(i=0),l===void 0&&(l=!0);var s=l?er:tr,d=W(n.width,n.height,i),c=W(n.naturalWidth,n.naturalHeight,i),u={x:s(100,((d.width-e.width/a)/2-o.x/a)/d.width*100),y:s(100,((d.height-e.height/a)/2-o.y/a)/d.height*100),width:s(100,e.width/d.width*100/a),height:s(100,e.height/d.height*100/a)},m=Math.round(s(c.width,u.width*c.width/100)),v=Math.round(s(c.height,u.height*c.height/100)),h=c.width>=c.height*t,w=h?{width:Math.round(v*t),height:v}:{width:m,height:Math.round(m/t)},y=C(C({},w),{x:Math.round(s(c.width-w.width,u.x*c.width/100)),y:Math.round(s(c.height-w.height,u.y*c.height/100))});return{croppedAreaPercentages:u,croppedAreaPixels:y}}function er(o,n){return Math.min(o,Math.max(0,n))}function tr(o,n){return n}function rr(o,n,e,t,a,i){var l=W(n.width,n.height,e),s=Q(t.width/l.width*(100/o.width),a,i),d={x:s*l.width/2-t.width/2-l.width*s*(o.x/100),y:s*l.height/2-t.height/2-l.height*s*(o.y/100)};return{crop:d,zoom:s}}function ar(o,n,e){var t=Jt(n);return e.height>e.width?e.height/(o.height*t):e.width/(o.width*t)}function or(o,n,e,t,a,i){e===void 0&&(e=0);var l=W(n.naturalWidth,n.naturalHeight,e),s=Q(ar(o,n,t),a,i),d=t.height>t.width?t.height/o.height:t.width/o.width,c={x:((l.width-o.width)/2-o.x)*d,y:((l.height-o.height)/2-o.y)*d};return{crop:c,zoom:s}}function Re(o,n){return{x:(n.x+o.x)/2,y:(n.y+o.y)/2}}function nr(o){return o*Math.PI/180}function W(o,n,e){var t=nr(e);return{width:Math.abs(Math.cos(t)*o)+Math.abs(Math.sin(t)*n),height:Math.abs(Math.sin(t)*o)+Math.abs(Math.cos(t)*n)}}function Q(o,n,e){return Math.min(Math.max(o,n),e)}function Y(){for(var o=[],n=0;n<arguments.length;n++)o[n]=arguments[n];return o.filter(function(e){return typeof e=="string"&&e.length>0}).join(" ").trim()}var ir=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,sr=1,lr=3,cr=1,dr=function(o){tt(n,o);function n(){var e=o!==null&&o.apply(this,arguments)||this;return e.cropperRef=g.createRef(),e.imageRef=g.createRef(),e.videoRef=g.createRef(),e.containerPosition={x:0,y:0},e.containerRef=null,e.styleRef=null,e.containerRect=null,e.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},e.dragStartPosition={x:0,y:0},e.dragStartCrop={x:0,y:0},e.gestureZoomStart=0,e.gestureRotationStart=0,e.isTouching=!1,e.lastPinchDistance=0,e.lastPinchRotation=0,e.rafDragTimeout=null,e.rafPinchTimeout=null,e.wheelTimer=null,e.currentDoc=typeof document<"u"?document:null,e.currentWindow=typeof window<"u"?window:null,e.resizeObserver=null,e.previousCropSize=null,e.isInitialized=!1,e.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},e.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!e.containerRef)){var t=!0;e.resizeObserver=new window.ResizeObserver(function(a){if(t){t=!1;return}e.computeSizes()}),e.resizeObserver.observe(e.containerRef)}},e.preventZoomSafari=function(t){return t.preventDefault()},e.cleanEvents=function(){e.currentDoc&&(e.currentDoc.removeEventListener("mousemove",e.onMouseMove),e.currentDoc.removeEventListener("mouseup",e.onDragStopped),e.currentDoc.removeEventListener("touchmove",e.onTouchMove),e.currentDoc.removeEventListener("touchend",e.onDragStopped),e.currentDoc.removeEventListener("gesturechange",e.onGestureChange),e.currentDoc.removeEventListener("gestureend",e.onGestureEnd),e.currentDoc.removeEventListener("scroll",e.onScroll))},e.clearScrollEvent=function(){e.containerRef&&e.containerRef.removeEventListener("wheel",e.onWheel),e.wheelTimer&&clearTimeout(e.wheelTimer)},e.onMediaLoad=function(){var t=e.computeSizes();t&&(e.previousCropSize=t,e.emitCropData(),e.setInitialCrop(t),e.isInitialized=!0),e.props.onMediaLoaded&&e.props.onMediaLoaded(e.mediaSize)},e.setInitialCrop=function(t){if(e.props.initialCroppedAreaPercentages){var a=rr(e.props.initialCroppedAreaPercentages,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),i=a.crop,l=a.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(l)}else if(e.props.initialCroppedAreaPixels){var s=or(e.props.initialCroppedAreaPixels,e.mediaSize,e.props.rotation,t,e.props.minZoom,e.props.maxZoom),i=s.crop,l=s.zoom;e.props.onCropChange(i),e.props.onZoomChange&&e.props.onZoomChange(l)}},e.computeSizes=function(){var t,a,i,l,s,d,c=e.imageRef.current||e.videoRef.current;if(c&&e.containerRef){e.containerRect=e.containerRef.getBoundingClientRect(),e.saveContainerPosition();var u=e.containerRect.width/e.containerRect.height,m=((t=e.imageRef.current)===null||t===void 0?void 0:t.naturalWidth)||((a=e.videoRef.current)===null||a===void 0?void 0:a.videoWidth)||0,v=((i=e.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((l=e.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,h=c.offsetWidth<m||c.offsetHeight<v,w=m/v,y=void 0;if(h)switch(e.state.mediaObjectFit){default:case"contain":y=u>w?{width:e.containerRect.height*w,height:e.containerRect.height}:{width:e.containerRect.width,height:e.containerRect.width/w};break;case"horizontal-cover":y={width:e.containerRect.width,height:e.containerRect.width/w};break;case"vertical-cover":y={width:e.containerRect.height*w,height:e.containerRect.height};break}else y={width:c.offsetWidth,height:c.offsetHeight};e.mediaSize=C(C({},y),{naturalWidth:m,naturalHeight:v}),e.props.setMediaSize&&e.props.setMediaSize(e.mediaSize);var k=e.props.cropSize?e.props.cropSize:Kt(e.mediaSize.width,e.mediaSize.height,e.containerRect.width,e.containerRect.height,e.props.aspect,e.props.rotation);return(((s=e.state.cropSize)===null||s===void 0?void 0:s.height)!==k.height||((d=e.state.cropSize)===null||d===void 0?void 0:d.width)!==k.width)&&e.props.onCropSizeChange&&e.props.onCropSizeChange(k),e.setState({cropSize:k},e.recomputeCropPosition),e.props.setCropSize&&e.props.setCropSize(k),k}},e.saveContainerPosition=function(){if(e.containerRef){var t=e.containerRef.getBoundingClientRect();e.containerPosition={x:t.left,y:t.top}}},e.onMouseDown=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("mousemove",e.onMouseMove),e.currentDoc.addEventListener("mouseup",e.onDragStopped),e.saveContainerPosition(),e.onDragStart(n.getMousePoint(t)))},e.onMouseMove=function(t){return e.onDrag(n.getMousePoint(t))},e.onScroll=function(t){e.currentDoc&&(t.preventDefault(),e.saveContainerPosition())},e.onTouchStart=function(t){e.currentDoc&&(e.isTouching=!0,!(e.props.onTouchRequest&&!e.props.onTouchRequest(t))&&(e.currentDoc.addEventListener("touchmove",e.onTouchMove,{passive:!1}),e.currentDoc.addEventListener("touchend",e.onDragStopped),e.saveContainerPosition(),t.touches.length===2?e.onPinchStart(t):t.touches.length===1&&e.onDragStart(n.getTouchPoint(t.touches[0]))))},e.onTouchMove=function(t){t.preventDefault(),t.touches.length===2?e.onPinchMove(t):t.touches.length===1&&e.onDrag(n.getTouchPoint(t.touches[0]))},e.onGestureStart=function(t){e.currentDoc&&(t.preventDefault(),e.currentDoc.addEventListener("gesturechange",e.onGestureChange),e.currentDoc.addEventListener("gestureend",e.onGestureEnd),e.gestureZoomStart=e.props.zoom,e.gestureRotationStart=e.props.rotation)},e.onGestureChange=function(t){if(t.preventDefault(),!e.isTouching){var a=n.getMousePoint(t),i=e.gestureZoomStart-1+t.scale;if(e.setNewZoom(i,a,{shouldUpdatePosition:!0}),e.props.onRotationChange){var l=e.gestureRotationStart+t.rotation;e.props.onRotationChange(l)}}},e.onGestureEnd=function(t){e.cleanEvents()},e.onDragStart=function(t){var a,i,l=t.x,s=t.y;e.dragStartPosition={x:l,y:s},e.dragStartCrop=C({},e.props.crop),(i=(a=e.props).onInteractionStart)===null||i===void 0||i.call(a)},e.onDrag=function(t){var a=t.x,i=t.y;e.currentWindow&&(e.rafDragTimeout&&e.currentWindow.cancelAnimationFrame(e.rafDragTimeout),e.rafDragTimeout=e.currentWindow.requestAnimationFrame(function(){if(e.state.cropSize&&!(a===void 0||i===void 0)){var l=a-e.dragStartPosition.x,s=i-e.dragStartPosition.y,d={x:e.dragStartCrop.x+l,y:e.dragStartCrop.y+s},c=e.props.restrictPosition?B(d,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):d;e.props.onCropChange(c)}}))},e.onDragStopped=function(){var t,a;e.isTouching=!1,e.cleanEvents(),e.emitCropData(),(a=(t=e.props).onInteractionEnd)===null||a===void 0||a.call(t)},e.onWheel=function(t){if(e.currentWindow&&!(e.props.onWheelRequest&&!e.props.onWheelRequest(t))){t.preventDefault();var a=n.getMousePoint(t),i=Vt(t).pixelY,l=e.props.zoom-i*e.props.zoomSpeed/200;e.setNewZoom(l,a,{shouldUpdatePosition:!0}),e.state.hasWheelJustStarted||e.setState({hasWheelJustStarted:!0},function(){var s,d;return(d=(s=e.props).onInteractionStart)===null||d===void 0?void 0:d.call(s)}),e.wheelTimer&&clearTimeout(e.wheelTimer),e.wheelTimer=e.currentWindow.setTimeout(function(){return e.setState({hasWheelJustStarted:!1},function(){var s,d;return(d=(s=e.props).onInteractionEnd)===null||d===void 0?void 0:d.call(s)})},250)}},e.getPointOnContainer=function(t,a){var i=t.x,l=t.y;if(!e.containerRect)throw new Error("The Cropper is not mounted");return{x:e.containerRect.width/2-(i-a.x),y:e.containerRect.height/2-(l-a.y)}},e.getPointOnMedia=function(t){var a=t.x,i=t.y,l=e.props,s=l.crop,d=l.zoom;return{x:(a+s.x)/d,y:(i+s.y)/d}},e.setNewZoom=function(t,a,i){var l=i===void 0?{}:i,s=l.shouldUpdatePosition,d=s===void 0?!0:s;if(!(!e.state.cropSize||!e.props.onZoomChange)){var c=Q(t,e.props.minZoom,e.props.maxZoom);if(d){var u=e.getPointOnContainer(a,e.containerPosition),m=e.getPointOnMedia(u),v={x:m.x*c-u.x,y:m.y*c-u.y},h=e.props.restrictPosition?B(v,e.mediaSize,e.state.cropSize,c,e.props.rotation):v;e.props.onCropChange(h)}e.props.onZoomChange(c)}},e.getCropData=function(){if(!e.state.cropSize)return null;var t=e.props.restrictPosition?B(e.props.crop,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):e.props.crop;return Qt(t,e.mediaSize,e.state.cropSize,e.getAspect(),e.props.zoom,e.props.rotation,e.props.restrictPosition)},e.emitCropData=function(){var t=e.getCropData();if(t){var a=t.croppedAreaPercentages,i=t.croppedAreaPixels;e.props.onCropComplete&&e.props.onCropComplete(a,i),e.props.onCropAreaChange&&e.props.onCropAreaChange(a,i)}},e.emitCropAreaChange=function(){var t=e.getCropData();if(t){var a=t.croppedAreaPercentages,i=t.croppedAreaPixels;e.props.onCropAreaChange&&e.props.onCropAreaChange(a,i)}},e.recomputeCropPosition=function(){var t,a;if(e.state.cropSize){var i=e.props.crop;if(e.isInitialized&&(!((t=e.previousCropSize)===null||t===void 0)&&t.width)&&(!((a=e.previousCropSize)===null||a===void 0)&&a.height)){var l=Math.abs(e.previousCropSize.width-e.state.cropSize.width)>1e-6||Math.abs(e.previousCropSize.height-e.state.cropSize.height)>1e-6;if(l){var s=e.state.cropSize.width/e.previousCropSize.width,d=e.state.cropSize.height/e.previousCropSize.height;i={x:e.props.crop.x*s,y:e.props.crop.y*d}}}var c=e.props.restrictPosition?B(i,e.mediaSize,e.state.cropSize,e.props.zoom,e.props.rotation):i;e.previousCropSize=e.state.cropSize,e.props.onCropChange(c),e.emitCropData()}},e.onKeyDown=function(t){var a,i,l=e.props,s=l.crop,d=l.onCropChange,c=l.keyboardStep,u=l.zoom,m=l.rotation,v=c;if(e.state.cropSize){t.shiftKey&&(v*=.2);var h=C({},s);switch(t.key){case"ArrowUp":h.y-=v,t.preventDefault();break;case"ArrowDown":h.y+=v,t.preventDefault();break;case"ArrowLeft":h.x-=v,t.preventDefault();break;case"ArrowRight":h.x+=v,t.preventDefault();break;default:return}e.props.restrictPosition&&(h=B(h,e.mediaSize,e.state.cropSize,u,m)),t.repeat||(i=(a=e.props).onInteractionStart)===null||i===void 0||i.call(a),d(h)}},e.onKeyUp=function(t){var a,i;switch(t.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":t.preventDefault();break;default:return}e.emitCropData(),(i=(a=e.props).onInteractionEnd)===null||i===void 0||i.call(a)},e}return n.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=ir,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},n.prototype.componentWillUnmount=function(){var e,t;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((t=this.styleRef.parentNode)===null||t===void 0||t.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},n.prototype.componentDidUpdate=function(e){var t,a,i,l,s,d,c,u,m;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.objectFit!==this.props.objectFit?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():((t=e.cropSize)===null||t===void 0?void 0:t.height)!==((a=this.props.cropSize)===null||a===void 0?void 0:a.height)||((i=e.cropSize)===null||i===void 0?void 0:i.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((s=e.crop)===null||s===void 0?void 0:s.x)!==((d=this.props.crop)===null||d===void 0?void 0:d.x)||((c=e.crop)===null||c===void 0?void 0:c.y)!==((u=this.props.crop)===null||u===void 0?void 0:u.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),e.video!==this.props.video&&((m=this.videoRef.current)===null||m===void 0||m.load());var v=this.getObjectFit();v!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:v},this.computeSizes)},n.prototype.getAspect=function(){var e=this.props,t=e.cropSize,a=e.aspect;return t?t.width/t.height:a},n.prototype.getObjectFit=function(){var e,t,a,i;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var s=this.containerRect.width/this.containerRect.height,d=((e=this.imageRef.current)===null||e===void 0?void 0:e.naturalWidth)||((t=this.videoRef.current)===null||t===void 0?void 0:t.videoWidth)||0,c=((a=this.imageRef.current)===null||a===void 0?void 0:a.naturalHeight)||((i=this.videoRef.current)===null||i===void 0?void 0:i.videoHeight)||0,u=d/c;return u<s?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},n.prototype.onPinchStart=function(e){var t=n.getTouchPoint(e.touches[0]),a=n.getTouchPoint(e.touches[1]);this.lastPinchDistance=Se(t,a),this.lastPinchRotation=_e(t,a),this.onDragStart(Re(t,a))},n.prototype.onPinchMove=function(e){var t=this;if(!(!this.currentDoc||!this.currentWindow)){var a=n.getTouchPoint(e.touches[0]),i=n.getTouchPoint(e.touches[1]),l=Re(a,i);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var s=Se(a,i),d=t.props.zoom*(s/t.lastPinchDistance);t.setNewZoom(d,l,{shouldUpdatePosition:!1}),t.lastPinchDistance=s;var c=_e(a,i),u=t.props.rotation+(c-t.lastPinchRotation);t.props.onRotationChange&&t.props.onRotationChange(u),t.lastPinchRotation=c})}},n.prototype.render=function(){var e=this,t,a=this.props,i=a.image,l=a.video,s=a.mediaProps,d=a.cropperProps,c=a.transform,u=a.crop,m=u.x,v=u.y,h=a.rotation,w=a.zoom,y=a.cropShape,k=a.showGrid,T=a.roundCropAreaPixels,R=a.style,M=R.containerStyle,O=R.cropAreaStyle,E=R.mediaStyle,S=a.classes,P=S.containerClassName,b=S.cropAreaClassName,f=S.mediaClassName,z=(t=this.state.mediaObjectFit)!==null&&t!==void 0?t:this.getObjectFit();return g.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(Z){return e.containerRef=Z},"data-testid":"container",style:M,className:Y("reactEasyCrop_Container",P)},i?g.createElement("img",C({alt:"",className:Y("reactEasyCrop_Image",z==="contain"&&"reactEasyCrop_Contain",z==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",z==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",f)},s,{src:i,ref:this.imageRef,style:C(C({},E),{transform:c||"translate(".concat(m,"px, ").concat(v,"px) rotate(").concat(h,"deg) scale(").concat(w,")")}),onLoad:this.onMediaLoad})):l&&g.createElement("video",C({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Y("reactEasyCrop_Video",z==="contain"&&"reactEasyCrop_Contain",z==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",z==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",f)},s,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:C(C({},E),{transform:c||"translate(".concat(m,"px, ").concat(v,"px) rotate(").concat(h,"deg) scale(").concat(w,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(A){return g.createElement("source",C({key:A.src},A))})),this.state.cropSize&&g.createElement("div",C({ref:this.cropperRef,style:C(C({},O),{width:T?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:T?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Y("reactEasyCrop_CropArea",y==="round"&&"reactEasyCrop_CropAreaRound",k&&"reactEasyCrop_CropAreaGrid",b)},d)))},n.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:lr,minZoom:sr,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:cr},n.getMousePoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n.getTouchPoint=function(e){return{x:Number(e.clientX),y:Number(e.clientY)}},n}(g.Component);function ur(o){const[n,e]=g.useState(()=>typeof window<"u"?window.matchMedia(o).matches:!1);return g.useEffect(()=>{const t=window.matchMedia(o),a=i=>{e(i.matches)};return e(t.matches),t.addEventListener("change",a),()=>{t.removeEventListener("change",a)}},[o]),n}function Ee({isOpen:o,onClose:n,title:e,children:t,className:a,size:i="md"}){const l=ur("(max-width: 1023px)");if(!o)return null;const s={sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"};if(l){const c=r.jsxs("div",{className:"fixed inset-0 z-[100001] overflow-hidden",style:{touchAction:"pan-y"},children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in",onClick:n}),r.jsxs("div",{className:x("absolute bottom-0 left-0 right-0 bg-white dark:bg-gray-900","rounded-t-2xl shadow-xl max-h-[90vh] overflow-hidden","animate-slide-up",a),children:[r.jsx("div",{className:"flex justify-center pt-3 pb-2",children:r.jsx("div",{className:"w-10 h-1 bg-gray-300 dark:bg-gray-600 rounded-full"})}),e&&r.jsxs("div",{className:"flex items-center justify-between px-4 pb-3 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e}),r.jsx("button",{onClick:n,className:"p-2 -mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r.jsx(J,{size:20})})]}),r.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-4",children:t})]})]});return typeof document>"u"?null:ae.createPortal(c,document.body)}const d=r.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",style:{touchAction:"pan-y"},children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 animate-fade-in",onClick:n}),r.jsxs("div",{className:x("relative bg-white dark:bg-gray-900 rounded-xl shadow-xl w-full","animate-modal-in max-h-[90vh] overflow-hidden",s[i],a),children:[e&&r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e}),r.jsx("button",{onClick:n,className:"p-2 -mr-2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors",children:r.jsx(J,{size:20})})]}),r.jsx("div",{className:"overflow-y-auto max-h-[calc(90vh-80px)] p-4",children:t})]})]});return typeof document>"u"?null:ae.createPortal(d,document.body)}const hr={common:"bg-gray-100 border-gray-300 dark:bg-gray-800",rare:"bg-blue-100 border-blue-300 dark:bg-blue-900/30",epic:"bg-purple-100 border-purple-300 dark:bg-purple-900/30",legendary:"bg-yellow-100 border-yellow-400 dark:bg-yellow-900/30"},pr={all:"bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300",common:"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300",rare:"bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300",epic:"bg-purple-100 dark:bg-purple-900/50 text-purple-700 dark:text-purple-300",legendary:"bg-yellow-100 dark:bg-yellow-900/50 text-yellow-700 dark:text-yellow-300"},mr=o=>new Promise((n,e)=>{const t=new Image;t.addEventListener("load",()=>n(t)),t.addEventListener("error",a=>e(a)),t.setAttribute("crossOrigin","anonymous"),t.src=o});async function gr(o,n){const e=await mr(o),t=document.createElement("canvas"),a=t.getContext("2d");if(!a)throw new Error("No 2d context");const i=256;return t.width=i,t.height=i,a.drawImage(e,n.x,n.y,n.width,n.height,0,0,i,i),new Promise((l,s)=>{t.toBlob(d=>{d?l(d):s(new Error("Canvas toBlob failed"))},"image/jpeg",.9)})}function fr({isOpen:o,onClose:n}){const{t:e}=D("common"),{data:t,refetch:a}=De(),{data:i}=rt(),{data:l=[]}=at(1),{mutate:s,isPending:d}=ot(),{mutate:c,isPending:u}=nt(),{mutate:m,isPending:v}=it(),[h,w]=g.useState(!1),[y,k]=g.useState(""),[T,R]=g.useState(!1),[M,O]=g.useState("all"),E=g.useRef(null),[S,P]=g.useState(null),[b,f]=g.useState({x:0,y:0}),[z,A]=g.useState(1),[Z,H]=g.useState(0),[me,Oe]=g.useState(null),ee=(i==null?void 0:i.current_level)||(t==null?void 0:t.level)||1,Ze=(i==null?void 0:i.total_xp)||(t==null?void 0:t.total_xp)||0,F=t==null?void 0:t.active_avatar,ge=l.filter(p=>M==="all"||p.rarity===M),fe=l.reduce((p,j)=>(p[j.rarity]=(p[j.rarity]||0)+1,p),{});g.useEffect(()=>{t!=null&&t.display_name&&k(t.display_name)},[t==null?void 0:t.display_name]),g.useEffect(()=>{o||(P(null),f({x:0,y:0}),A(1),H(0))},[o]);const Be=g.useCallback((p,j)=>{Oe(j)},[]),$e=()=>{y.trim()&&m({displayName:y.trim()},{onSuccess:()=>{_.success(e("gamification.profile.nameSaved")||"Profile updated!"),w(!1),a()},onError:()=>_.error(e("gamification.profile.saveError")||"Failed to update profile")})},Ge=p=>{d||s(p,{onSuccess:()=>{_.success(e("gamification.profile.avatarSelected")||"Avatar selected!"),a()},onError:()=>_.error(e("gamification.profile.avatarError")||"Failed to select avatar")})},He=async p=>{var U;const j=(U=p.target.files)==null?void 0:U[0];if(j){E.current&&(E.current.value="");try{let L=j;if(pt(j)&&(R(!0),_.info("Converting HEIC image..."),L=await mt(j),R(!1)),!L.type.startsWith("image/")){_.error("Please select a valid image file");return}if(L.size>5*1024*1024){_.error("Image must be less than 5MB");return}const Ye=URL.createObjectURL(L);P(Ye)}catch{R(!1),_.error("Failed to process image")}}},Xe=async()=>{if(!(!S||!me))try{const p=await gr(S,me),j=new File([p],"avatar.jpg",{type:"image/jpeg"});c(j,{onSuccess:()=>{_.success("Avatar uploaded!"),P(null),a()},onError:()=>_.error("Failed to upload avatar")})}catch{_.error("Failed to crop image")}},xe=()=>{S&&URL.revokeObjectURL(S),P(null),f({x:0,y:0}),A(1),H(0)};return S?r.jsx(Ee,{isOpen:o,onClose:xe,title:"Crop Avatar",size:"lg",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"relative h-64 sm:h-80 bg-gray-900 rounded-xl overflow-hidden",children:r.jsx(dr,{image:S,crop:b,zoom:z,rotation:Z,aspect:1,cropShape:"round",showGrid:!1,onCropChange:f,onZoomChange:A,onRotationChange:H,onCropComplete:Be})}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(ft,{className:"w-4 h-4 text-gray-500"}),r.jsx("input",{type:"range",min:1,max:3,step:.1,value:z,onChange:p=>A(Number(p.target.value)),className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),r.jsx(xt,{className:"w-4 h-4 text-gray-500"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_t,{className:"w-4 h-4 text-gray-500"}),r.jsx("input",{type:"range",min:0,max:360,step:1,value:Z,onChange:p=>H(Number(p.target.value)),className:"flex-1 h-2 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),r.jsxs("span",{className:"text-xs text-gray-500 w-10",children:[Z,"Â°"]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs(te,{variant:"outline",className:"flex-1",onClick:xe,children:[r.jsx(J,{className:"w-4 h-4 mr-2"}),"Cancel"]}),r.jsxs(te,{className:"flex-1",onClick:Xe,disabled:u,children:[u?r.jsx(ve,{className:"w-4 h-4 mr-2 animate-spin"}):r.jsx(re,{className:"w-4 h-4 mr-2"}),"Save Avatar"]})]})]})}):r.jsx(Ee,{isOpen:o,onClose:n,title:e("gamification.profile.title")||"Profile",size:"lg",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-4xl shadow-lg overflow-hidden",children:F!=null&&F.image_url?r.jsx("img",{src:F.image_url,alt:"Avatar",className:"w-full h-full object-cover"}):(F==null?void 0:F.emoji)||"ðŸ˜Š"}),r.jsxs("div",{className:"flex-1",children:[h?r.jsxs("div",{className:"flex gap-2",children:[r.jsx(st,{value:y,onChange:p=>k(p.target.value),placeholder:e("gamification.profile.displayNamePlaceholder")||"Display Name",className:"flex-1",autoFocus:!0}),r.jsx(te,{onClick:$e,size:"sm",disabled:v,children:r.jsx(re,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:(t==null?void 0:t.display_name)||e("gamification.profile.newUser")||"New User"}),r.jsx("button",{onClick:()=>w(!0),className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800",children:r.jsx(ht,{className:"w-4 h-4 text-gray-500"})})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(pe,{className:"w-4 h-4 text-yellow-500"}),e("gamification.level",{level:ee})||`Level ${ee}`]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(he,{className:"w-4 h-4 text-yellow-500"}),Ze.toLocaleString()," XP"]})]})]})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 uppercase",children:e("gamification.profile.selectAvatar")||"Select Avatar"}),r.jsxs("button",{onClick:()=>{var p;return(p=E.current)==null?void 0:p.click()},disabled:u||T,className:"flex items-center gap-1 text-sm text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50",children:[T||u?r.jsx(ve,{className:"w-4 h-4 animate-spin"}):r.jsx(lt,{className:"w-4 h-4"}),e("gamification.profile.uploadCustom")||"Upload Custom"]}),r.jsx("input",{type:"file",ref:E,onChange:He,accept:"image/*,.heic,.heif",className:"hidden"})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:["all","common","rare","epic","legendary"].map(p=>r.jsxs("button",{onClick:()=>O(p),className:x("px-3 py-1 rounded-full text-xs font-medium transition-all",M===p?x(pr[p],"ring-2 ring-offset-1 ring-blue-500"):"bg-gray-100 dark:bg-gray-800 text-gray-500 hover:bg-gray-200 dark:hover:bg-gray-700"),children:[p==="all"?"All":p.charAt(0).toUpperCase()+p.slice(1),p!=="all"&&fe[p]?` (${fe[p]})`:""]},p))}),r.jsx("div",{className:"grid grid-cols-5 sm:grid-cols-6 gap-2",children:ge.map(p=>{var L;const j=p.unlock_level<=ee,U=p.id===((L=t==null?void 0:t.active_avatar)==null?void 0:L.id);return r.jsxs("button",{onClick:()=>j&&Ge(p.id),disabled:!j||d,className:x("aspect-square rounded-xl flex items-center justify-center text-2xl relative transition-all","border-2",j?hr[p.rarity]:"opacity-40 bg-gray-100 dark:bg-gray-800 border-gray-200 dark:border-gray-700",U&&"ring-2 ring-green-500 ring-offset-2 dark:ring-offset-gray-900",j&&!U&&"hover:scale-105 active:scale-95"),children:[p.image_url?r.jsx("img",{src:p.image_url,alt:p.name,className:"w-full h-full object-cover rounded-lg"}):p.emoji||"ðŸ˜Š",U&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-green-500 rounded-full flex items-center justify-center shadow-sm",children:r.jsx(re,{className:"w-3 h-3 text-white"})}),!j&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-white/70 dark:bg-gray-900/70 rounded-xl backdrop-blur-sm",children:r.jsxs("span",{className:"text-xs font-medium",children:["Lv",p.unlock_level]})})]},p.id)})}),ge.length===0&&r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx(vt,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),r.jsxs("p",{className:"text-sm",children:["No ",M," avatars available"]})]})]})]})})}const Pe=["#22c55e","#3b82f6","#f59e0b","#ec4899","#8b5cf6","#14b8a6"];function xr({active:o,duration:n=3e3,pieces:e=50,onComplete:t}){const[a,i]=g.useState([]),[l,s]=g.useState(!1);return g.useEffect(()=>{if(o){const d=Array.from({length:e},(u,m)=>({id:m,x:Math.random()*100,color:Pe[Math.floor(Math.random()*Pe.length)],delay:Math.random()*.5,duration:2+Math.random()*2,rotation:Math.random()*360}));i(d),s(!0);const c=setTimeout(()=>{s(!1),i([]),t==null||t()},n);return()=>clearTimeout(c)}},[o,n,e,t]),!l||a.length===0?null:ae.createPortal(r.jsx("div",{className:"fixed inset-0 pointer-events-none z-[100] overflow-hidden",children:a.map(d=>r.jsx("div",{className:"absolute top-0 animate-confetti-fall",style:{left:`${d.x}%`,animationDelay:`${d.delay}s`,animationDuration:`${d.duration}s`},children:r.jsx("div",{className:"w-3 h-3 animate-confetti-spin",style:{backgroundColor:d.color,transform:`rotate(${d.rotation}deg)`,borderRadius:Math.random()>.5?"50%":"2px"}})},d.id))}),document.body)}function vr({open:o,newLevel:n,onClose:e}){const{t}=D("common");return g.useEffect(()=>{if(o){const a=setTimeout(e,5e3);return()=>clearTimeout(a)}},[o,e]),g.useEffect(()=>{const a=i=>{i.key==="Escape"&&o&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[o,e]),o?r.jsxs(r.Fragment,{children:[r.jsx(xr,{active:o,duration:3e3,pieces:100}),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/70 backdrop-blur-sm animate-fade-in",onClick:e,role:"dialog","aria-modal":"true","aria-labelledby":"levelup-title",children:r.jsxs("div",{className:x("relative text-center p-8 rounded-3xl bg-gradient-to-br from-yellow-400 via-orange-500 to-pink-500","shadow-2xl transform transition-all duration-300","animate-bounce-in"),onClick:a=>a.stopPropagation(),children:[r.jsx($,{className:"absolute -top-4 -left-4 w-8 h-8 text-yellow-300 animate-pulse"}),r.jsx($,{className:"absolute -top-2 -right-6 w-6 h-6 text-pink-300 animate-pulse delay-100"}),r.jsx($,{className:"absolute -bottom-3 left-8 w-5 h-5 text-orange-300 animate-pulse delay-200"}),r.jsx("div",{className:"w-20 h-20 mx-auto mb-4 rounded-full bg-white/20 flex items-center justify-center",children:r.jsx(pe,{className:"w-12 h-12 text-yellow-100"})}),r.jsx("h2",{id:"levelup-title",className:"text-5xl font-bold text-white mb-2 drop-shadow-lg",children:t("gamification.levelUp",{level:n})||`Level ${n}!`}),r.jsx("p",{className:"text-white/90 text-lg mb-6",children:t("gamification.levelUpMessage")||"Congratulations! Keep up the great work!"}),r.jsx("button",{onClick:e,className:x("px-8 py-3 rounded-full font-bold text-lg","bg-white text-orange-600 hover:bg-orange-50","shadow-lg hover:shadow-xl transition-all","focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-orange-500"),children:t("button.continue")||"Continue"})]})})]}):null}function yr(){var S,P;const{t:o}=D("common"),n=ct(),{addXPGain:e}=dt(),[t,a]=g.useState(!1),[i,l]=g.useState(null),[s,d]=g.useState(new Set),[c,u]=g.useState(null),{data:m,refetch:v}=ye({queryKey:["gamification-stats"],queryFn:()=>X.getStats()}),{data:h,refetch:w}=ye({queryKey:["achievements"],queryFn:()=>X.getAchievements()}),{data:y}=De();if(g.useEffect(()=>{(async()=>{try{const f=await X.trackLogin();f.streak_updated&&(_.success(o("gamification.badge.dayStreak",{days:f.current_streak,xp:f.xp_earned})),e(f.xp_earned,"Daily check-in"),v(),w()),f.level_up&&u({newLevel:f.level_up.new_level})}catch(f){console.error("Failed to track login:",f)}})()},[]),g.useEffect(()=>{if(!(h!=null&&h.achievements))return;const b=new Set(h.achievements.filter(f=>f.unlocked).map(f=>f.id));h.achievements.forEach(f=>{f.unlocked&&!s.has(f.id)&&(_.success(o("gamification.badge.achievementUnlocked",{name:f.name,xp:f.xp_reward})),e(f.xp_reward,`Achievement: ${f.name}`))}),d(b)},[h,s,e,o]),!m||!h)return r.jsx("div",{className:"flex items-center justify-center py-20",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});const k=X.calculateLevelProgress(m.total_xp,m.current_level,m.xp_to_next_level),T=h.achievements.filter(b=>b.unlocked).length,R=h.achievements.length,M=h.achievements.filter(b=>b.unlocked&&b.unlocked_at).sort((b,f)=>new Date(f.unlocked_at).getTime()-new Date(b.unlocked_at).getTime()).slice(0,3),O=h.achievements.filter(b=>!b.unlocked&&b.progress>0&&b.progress<100).sort((b,f)=>f.progress-b.progress).slice(0,2),E=((S=y==null?void 0:y.active_avatar)==null?void 0:S.emoji)||((P=y==null?void 0:y.active_avatar)==null?void 0:P.icon)||"ðŸ˜Š";return r.jsxs("div",{className:"space-y-6 max-w-3xl mx-auto pb-8",children:[r.jsx(Rt,{level:m.current_level,totalXP:m.total_xp,xpToNextLevel:m.xp_to_next_level,progressPercent:k,currentStreak:m.current_streak,badgesUnlocked:T,badgesTotal:R,avatarEmoji:E,onAvatarClick:()=>a(!0)}),r.jsx(zt,{badges:M,onBadgeClick:l}),r.jsx(At,{badges:O,onAddTransaction:()=>n({to:"/transactions"}),onBadgeClick:l}),r.jsx(Tt,{achievements:h.achievements,onBadgeClick:l}),r.jsx(fr,{isOpen:t,onClose:()=>a(!1)}),r.jsx(Ut,{badge:i,onClose:()=>l(null)}),r.jsx(vr,{open:!!c,newLevel:(c==null?void 0:c.newLevel)??0,onClose:()=>u(null)})]})}const br=()=>{const{t:o}=D("common");return r.jsxs("div",{className:"container mx-auto px-4 py-8",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[r.jsx(ze,{className:"h-8 w-8 text-yellow-500"}),o("gamification.title")]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:o("gamification.subtitle")})]}),r.jsx(yr,{})]})},Rr=ut("/gamification")({component:br});export{Rr as Route};
