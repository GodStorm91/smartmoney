import{k,H as C,u as A,r as i,j as e,aN as S,l as u,P as q,I as b,B as f}from"./index-D4jnuRad.js";import{d as E,e as F}from"./useCategories-CVIbi301.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],z=k("external-link",H);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],D=k("rotate-ccw",I);async function U(t){return(await C.post("/api/receipts/scan",t)).data}async function V(t){const s=new FormData;return s.append("file",t),(await C.post("/api/receipts/upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data.receipt_url}function $(t){return t||null}function G({selected:t,onSelect:s,isIncome:d=!1}){const{t:l}=A("common"),{data:g,isLoading:j}=E(),m=F(),[r,x]=i.useState(null),[N,n]=i.useState(!1),[o,p]=i.useState(""),[y,v]=i.useState("ðŸ“");if(j||!g)return e.jsx("div",{className:"animate-pulse h-48 bg-gray-100 dark:bg-gray-700 rounded-lg"});const h=d?g.income:g.expense,w=a=>{for(const c of h)if(c.children.some(_=>_.name===a))return c;return null},P=a=>{x(a),n(!1)},L=a=>{r&&s(a.name,r.name)},M=()=>{x(null),n(!1)},R=async()=>{!r||!o.trim()||(await m.mutateAsync({name:o.trim(),icon:y,parent_id:r.id,type:d?"income":"expense"}),s(o.trim(),r.name),p(""),n(!1))};return r?e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:M,className:"flex items-center gap-2 text-sm text-gray-600 mb-3 hover:text-gray-900 dark:text-gray-400 dark:hover:text-gray-200",children:[e.jsx(S,{className:"w-4 h-4"}),r.icon," ",r.name]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.children.map(a=>e.jsxs("button",{type:"button",onClick:()=>L(a),className:u("flex flex-col items-center justify-center p-3 rounded-lg","min-h-[64px] transition-colors",t===a.name?"bg-blue-100 border-2 border-blue-500 dark:bg-blue-900":"bg-gray-50 border-2 border-transparent hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600"),children:[e.jsx("span",{className:"text-2xl mb-1",children:a.icon}),e.jsx("span",{className:"text-xs text-center truncate w-full dark:text-gray-200",children:a.name})]},a.id)),e.jsxs("button",{type:"button",onClick:()=>n(!0),className:u("flex flex-col items-center justify-center p-3 rounded-lg","min-h-[64px] transition-colors","bg-gray-50 border-2 border-dashed border-gray-300 hover:bg-gray-100","dark:bg-gray-800 dark:border-gray-600 dark:hover:bg-gray-700"),children:[e.jsx(q,{className:"w-6 h-6 mb-1 text-gray-400"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:l("category.addCustom","Add")})]})]}),N&&e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-gray-800 rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{value:y,onChange:a=>v(a.target.value),className:"w-16 text-center text-xl",maxLength:2}),e.jsx(b,{value:o,onChange:a=>p(a.target.value),placeholder:l("category.namePlaceholder","Category name"),className:"flex-1"})]}),e.jsxs("div",{className:"flex gap-2 justify-end",children:[e.jsx(f,{variant:"outline",size:"sm",onClick:()=>n(!1),children:l("cancel","Cancel")}),e.jsx(f,{size:"sm",onClick:R,disabled:!o.trim()||m.isPending,children:l("create","Create")})]})]})]}):e.jsx("div",{className:"grid grid-cols-3 gap-2",children:h.map(a=>{var c;return e.jsxs("button",{type:"button",onClick:()=>P(a),className:u("flex flex-col items-center justify-center p-3 rounded-lg","min-h-[64px] transition-colors",((c=w(t))==null?void 0:c.id)===a.id?"bg-blue-100 border-2 border-blue-500 dark:bg-blue-900":"bg-gray-50 border-2 border-transparent hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-600"),children:[e.jsx("span",{className:"text-2xl mb-1",children:a.icon}),e.jsx("span",{className:"text-xs text-center truncate w-full dark:text-gray-200",children:a.name})]},a.id)})})}export{z as E,G as H,D as R,$ as g,U as s,V as u};
