import{k as Or,ah as O,ai as je,r as T,$ as $t,N as Ft,u as K,aW as we,j as i,aN as D,l as F,ax as Tr,ay as Cr,M as Dr,a8 as un,z as Wt,C as V,E as Jt,aX as Fn,H as ke,J as Ir,a3 as dn,B as rt,x as Mr,aY as fn,aZ as fe,a_ as ht,L as Lr,h as zn,t as Br,a2 as $r,a$ as Fr,a0 as zr,b0 as oe,b1 as Rr,aJ as Kr,i as Vr}from"./index-X-uCg_76.js";import{f as ft,L as it,B as ce,n as Tt,C as he,A as Rn,l as st,h as yt,E as Hr,m as $e,F as Yr,o as Qt,G as Kn,j as Ct,H as pe,i as ge,D as Ur,u as Vn,S as hn,I as Wr,d as Gr,r as Hn,J as qr,K as Xr,s as Zt,x as Yn,M as Dt,N as Un,R as Se,O as Ae,P as Wn,Q as Jr}from"./generateCategoricalChart-CD5aBl8H.js";import{X as zt,Y as Rt,L as We,C as Gn,a as Qr}from"./LineChart-35X9UIw-.js";import{D as Zr}from"./download-DTYKY6CI.js";import{M as ts}from"./mail-BXP9MGU9.js";/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=[["path",{d:"M5 12h14",key:"1ays0h"}]],ns=Or("minus",es);var rs=["layout","type","stroke","connectNulls","isRange","ref"],ss=["key"],qn;function It(e){"@babel/helpers - typeof";return It=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(e)}function Xn(e,t){if(e==null)return{};var n=is(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function is(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jt(){return jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jt.apply(this,arguments)}function mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mn(Object(n),!0).forEach(function(r){at(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function as(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qn(r.key),r)}}function os(e,t,n){return t&&pn(e.prototype,t),n&&pn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cs(e,t,n){return t=ye(t),ls(e,Jn()?Reflect.construct(t,n||[],ye(e).constructor):t.apply(e,n))}function ls(e,t){if(t&&(It(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return us(e)}function us(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Jn=function(){return!!e})()}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ye(e)}function ds(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Fe(e,t)}function at(e,t,n){return t=Qn(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qn(e){var t=fs(e,"string");return It(t)=="symbol"?t:t+""}function fs(e,t){if(It(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(It(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kt=function(e){function t(){var n;as(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=cs(this,t,[].concat(s)),at(n,"state",{isAnimationFinished:!0}),at(n,"id",Vn("recharts-area-")),at(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),ge(o)&&o()}),at(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),ge(o)&&o()}),n}return ds(t,e),os(t,[{key:"renderDots",value:function(r,s,a){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,d=c.points,f=c.dataKey,h=ft(this.props,!1),p=ft(u,!0),m=d.map(function(v,g){var x=gt(gt(gt({key:"dot-".concat(g),r:3},h),p),{},{index:g,cx:v.x,cy:v.y,dataKey:f,value:v.value,payload:v.payload,points:d});return t.renderDotItem(u,x)}),y={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(a,")"):null};return O.createElement(it,jt({className:"recharts-area-dots"},y),m)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,d=r*Math.abs(c-u),f=ce(o.map(function(h){return h.y||0}));return Tt(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(ce(a.map(function(h){return h.y||0})),f)),Tt(f)?O.createElement("rect",{x:c<u?c:c-d,y:0,width:d,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,a=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,d=r*Math.abs(c-u),f=ce(o.map(function(h){return h.x||0}));return Tt(a)&&typeof a=="number"?f=Math.max(a,f):a&&Array.isArray(a)&&a.length&&(f=Math.max(ce(a.map(function(h){return h.x||0})),f)),Tt(f)?O.createElement("rect",{x:0,y:c<u?c:c-d,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(d)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,a,o){var l=this.props,c=l.layout,u=l.type,d=l.stroke,f=l.connectNulls,h=l.isRange;l.ref;var p=Xn(l,rs);return O.createElement(it,{clipPath:a?"url(#clipPath-".concat(o,")"):null},O.createElement(he,jt({},ft(p,!0),{points:r,connectNulls:f,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),d!=="none"&&O.createElement(he,jt({},ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:r})),d!=="none"&&h&&O.createElement(he,jt({},ft(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var a=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,h=o.animationEasing,p=o.animationId,m=this.state,y=m.prevPoints,v=m.prevBaseLine;return O.createElement(Rn,{begin:d,duration:f,isActive:u,easing:h,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var x=g.t;if(y){var b=y.length/l.length,j=l.map(function(S,E){var N=Math.floor(E*b);if(y[N]){var P=y[N],C=st(P.x,S.x),H=st(P.y,S.y);return gt(gt({},S),{},{x:C(x),y:H(x)})}return S}),k;if(Tt(c)&&typeof c=="number"){var w=st(v,c);k=w(x)}else if(yt(c)||Hr(c)){var _=st(v,0);k=_(x)}else k=c.map(function(S,E){var N=Math.floor(E*b);if(v[N]){var P=v[N],C=st(P.x,S.x),H=st(P.y,S.y);return gt(gt({},S),{},{x:C(x),y:H(x)})}return S});return a.renderAreaStatically(j,k,r,s)}return O.createElement(it,null,O.createElement("defs",null,O.createElement("clipPath",{id:"animationClipPath-".concat(s)},a.renderClipRect(x))),O.createElement(it,{clipPath:"url(#animationClipPath-".concat(s,")")},a.renderAreaStatically(l,c,r,s)))})}},{key:"renderArea",value:function(r,s){var a=this.props,o=a.points,l=a.baseLine,c=a.isAnimationActive,u=this.state,d=u.prevPoints,f=u.prevBaseLine,h=u.totalLength;return c&&o&&o.length&&(!d&&h>0||!$e(d,o)||!$e(f,l))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(o,l,r,s)}},{key:"render",value:function(){var r,s=this.props,a=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,d=s.left,f=s.xAxis,h=s.yAxis,p=s.width,m=s.height,y=s.isAnimationActive,v=s.id;if(a||!l||!l.length)return null;var g=this.state.isAnimationFinished,x=l.length===1,b=je("recharts-area",c),j=f&&f.allowDataOverflow,k=h&&h.allowDataOverflow,w=j||k,_=yt(v)?this.id:v,S=(r=ft(o,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},E=S.r,N=E===void 0?3:E,P=S.strokeWidth,C=P===void 0?2:P,H=Yr(o)?o:{},W=H.clipDot,G=W===void 0?!0:W,X=N*2+C;return O.createElement(it,{className:b},j||k?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(_)},O.createElement("rect",{x:j?d:d-p/2,y:k?u:u-m/2,width:j?p:p*2,height:k?m:m*2})),!G&&O.createElement("clipPath",{id:"clipPath-dots-".concat(_)},O.createElement("rect",{x:d-X/2,y:u-X/2,width:p+X,height:m+X}))):null,x?null:this.renderArea(w,_),(o||x)&&this.renderDots(w,G,_),(!y||g)&&Qt.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])}(T.PureComponent);qn=kt;at(kt,"displayName","Area");at(kt,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Kn.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});at(kt,"getBaseValue",function(e,t,n,r){var s=e.layout,a=e.baseValue,o=t.props.baseValue,l=o??a;if(Tt(l)&&typeof l=="number")return l;var c=s==="horizontal"?r:n,u=c.scale.domain();if(c.type==="number"){var d=Math.max(u[0],u[1]),f=Math.min(u[0],u[1]);return l==="dataMin"?f:l==="dataMax"||d<0?d:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});at(kt,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,s=e.yAxis,a=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,h=e.offset,p=t.layout,m=u&&u.length,y=qn.getBaseValue(t,n,r,s),v=p==="horizontal",g=!1,x=f.map(function(j,k){var w;m?w=u[d+k]:(w=Ct(j,c),Array.isArray(w)?g=!0:w=[y,w]);var _=w[1]==null||m&&Ct(j,c)==null;return v?{x:pe({axis:r,ticks:a,bandSize:l,entry:j,index:k}),y:_?null:s.scale(w[1]),value:w,payload:j}:{x:_?null:r.scale(w[1]),y:pe({axis:s,ticks:o,bandSize:l,entry:j,index:k}),value:w,payload:j}}),b;return m||g?b=x.map(function(j){var k=Array.isArray(j.value)?j.value[0]:null;return v?{x:j.x,y:k!=null&&j.y!=null?s.scale(k):null}:{x:k!=null?r.scale(k):null,y:j.y}}):b=v?s.scale(y):r.scale(y),gt({points:x,baseLine:b,layout:p,isRange:g},h)});at(kt,"renderDotItem",function(e,t){var n;if(O.isValidElement(e))n=O.cloneElement(e,t);else if(ge(e))n=e(t);else{var r=je("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,a=Xn(t,ss);n=O.createElement(Ur,jt({},a,{key:s,className:r}))}return n});function Mt(e){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mt(e)}function hs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ms(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,er(r.key),r)}}function ps(e,t,n){return t&&ms(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gs(e,t,n){return t=xe(t),ys(e,Zn()?Reflect.construct(t,n||[],xe(e).constructor):t.apply(e,n))}function ys(e,t){if(t&&(Mt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xs(e)}function xs(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zn(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zn=function(){return!!e})()}function xe(e){return xe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},xe(e)}function vs(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ze(e,t)}function ze(e,t){return ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},ze(e,t)}function tr(e,t,n){return t=er(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function er(e){var t=bs(e,"string");return Mt(t)=="symbol"?t:t+""}function bs(e,t){if(Mt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ee=function(e){function t(){return hs(this,t),gs(this,t,arguments)}return vs(t,e),ps(t,[{key:"render",value:function(){return null}}])}(T.Component);tr(Ee,"displayName","ZAxis");tr(Ee,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var _s=["option","isActive"];function Gt(){return Gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gt.apply(this,arguments)}function js(e,t){if(e==null)return{};var n=ws(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function ws(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ks(e){var t=e.option,n=e.isActive,r=js(e,_s);return typeof t=="string"?T.createElement(hn,Gt({option:T.createElement(Wr,Gt({type:t},r)),isActive:n,shapeType:"symbols"},r)):T.createElement(hn,Gt({option:t,isActive:n,shapeType:"symbols"},r))}function Lt(e){"@babel/helpers - typeof";return Lt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lt(e)}function qt(){return qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qt.apply(this,arguments)}function gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gn(Object(n),!0).forEach(function(r){xt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ss(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,rr(r.key),r)}}function As(e,t,n){return t&&yn(e.prototype,t),n&&yn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Es(e,t,n){return t=ve(t),Ns(e,nr()?Reflect.construct(t,n||[],ve(e).constructor):t.apply(e,n))}function Ns(e,t){if(t&&(Lt(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ps(e)}function Ps(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nr=function(){return!!e})()}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ve(e)}function Os(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Re(e,t)}function Re(e,t){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Re(e,t)}function xt(e,t,n){return t=rr(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rr(e){var t=Ts(e,"string");return Lt(t)=="symbol"?t:t+""}function Ts(e,t){if(Lt(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Lt(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ne=function(e){function t(){var n;Ss(this,t);for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];return n=Es(this,t,[].concat(s)),xt(n,"state",{isAnimationFinished:!1}),xt(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0})}),xt(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1})}),xt(n,"id",Vn("recharts-scatter-")),n}return Os(t,e),As(t,[{key:"renderSymbolsStatically",value:function(r){var s=this,a=this.props,o=a.shape,l=a.activeShape,c=a.activeIndex,u=ft(this.props,!1);return r.map(function(d,f){var h=c===f,p=h?l:o,m=Q(Q({},u),d);return O.createElement(it,qt({className:"recharts-scatter-symbol",key:"symbol-".concat(d==null?void 0:d.cx,"-").concat(d==null?void 0:d.cy,"-").concat(d==null?void 0:d.size,"-").concat(f)},Gr(s.props,d,f),{role:"img"}),O.createElement(ks,qt({option:p,isActive:h,key:"symbol-".concat(f)},m)))})}},{key:"renderSymbolsWithAnimation",value:function(){var r=this,s=this.props,a=s.points,o=s.isAnimationActive,l=s.animationBegin,c=s.animationDuration,u=s.animationEasing,d=s.animationId,f=this.state.prevPoints;return O.createElement(Rn,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var p=h.t,m=a.map(function(y,v){var g=f&&f[v];if(g){var x=st(g.cx,y.cx),b=st(g.cy,y.cy),j=st(g.size,y.size);return Q(Q({},y),{},{cx:x(p),cy:b(p),size:j(p)})}var k=st(0,y.size);return Q(Q({},y),{},{size:k(p)})});return O.createElement(it,null,r.renderSymbolsStatically(m))})}},{key:"renderSymbols",value:function(){var r=this.props,s=r.points,a=r.isAnimationActive,o=this.state.prevPoints;return a&&s&&s.length&&(!o||!$e(o,s))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(s)}},{key:"renderErrorBar",value:function(){var r=this.props.isAnimationActive;if(r&&!this.state.isAnimationFinished)return null;var s=this.props,a=s.points,o=s.xAxis,l=s.yAxis,c=s.children,u=Hn(c,qr);return u?u.map(function(d,f){var h=d.props,p=h.direction,m=h.dataKey;return O.cloneElement(d,{key:"".concat(p,"-").concat(m,"-").concat(a[f]),data:a,xAxis:o,yAxis:l,layout:p==="x"?"vertical":"horizontal",dataPointFormatter:function(v,g){return{x:v.cx,y:v.cy,value:p==="x"?+v.node.x:+v.node.y,errorVal:Ct(v,g)}}})}):null}},{key:"renderLine",value:function(){var r=this.props,s=r.points,a=r.line,o=r.lineType,l=r.lineJointType,c=ft(this.props,!1),u=ft(a,!1),d,f;if(o==="joint")d=s.map(function(b){return{x:b.cx,y:b.cy}});else if(o==="fitting"){var h=Xr(s),p=h.xmin,m=h.xmax,y=h.a,v=h.b,g=function(j){return y*j+v};d=[{x:p,y:g(p)},{x:m,y:g(m)}]}var x=Q(Q(Q({},c),{},{fill:"none",stroke:c&&c.fill},u),{},{points:d});return O.isValidElement(a)?f=O.cloneElement(a,x):ge(a)?f=a(x):f=O.createElement(he,qt({},x,{type:l})),O.createElement(it,{className:"recharts-scatter-line",key:"recharts-scatter-line"},f)}},{key:"render",value:function(){var r=this.props,s=r.hide,a=r.points,o=r.line,l=r.className,c=r.xAxis,u=r.yAxis,d=r.left,f=r.top,h=r.width,p=r.height,m=r.id,y=r.isAnimationActive;if(s||!a||!a.length)return null;var v=this.state.isAnimationFinished,g=je("recharts-scatter",l),x=c&&c.allowDataOverflow,b=u&&u.allowDataOverflow,j=x||b,k=yt(m)?this.id:m;return O.createElement(it,{className:g,clipPath:j?"url(#clipPath-".concat(k,")"):null},x||b?O.createElement("defs",null,O.createElement("clipPath",{id:"clipPath-".concat(k)},O.createElement("rect",{x:x?d:d-h/2,y:b?f:f-p/2,width:x?h:h*2,height:b?p:p*2}))):null,o&&this.renderLine(),this.renderErrorBar(),O.createElement(it,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!y||v)&&Qt.renderCallByParent(this.props,a))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}}])}(T.PureComponent);xt(Ne,"displayName","Scatter");xt(Ne,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!Kn.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"});xt(Ne,"getComposedData",function(e){var t=e.xAxis,n=e.yAxis,r=e.zAxis,s=e.item,a=e.displayedData,o=e.xAxisTicks,l=e.yAxisTicks,c=e.offset,u=s.props.tooltipType,d=Hn(s.props.children,Zt),f=yt(t.dataKey)?s.props.dataKey:t.dataKey,h=yt(n.dataKey)?s.props.dataKey:n.dataKey,p=r&&r.dataKey,m=r?r.range:Ee.defaultProps.range,y=m&&m[0],v=t.scale.bandwidth?t.scale.bandwidth():0,g=n.scale.bandwidth?n.scale.bandwidth():0,x=a.map(function(b,j){var k=Ct(b,f),w=Ct(b,h),_=!yt(p)&&Ct(b,p)||"-",S=[{name:yt(t.dataKey)?s.props.name:t.name||t.dataKey,unit:t.unit||"",value:k,payload:b,dataKey:f,type:u},{name:yt(n.dataKey)?s.props.name:n.name||n.dataKey,unit:n.unit||"",value:w,payload:b,dataKey:h,type:u}];_!=="-"&&S.push({name:r.name||r.dataKey,unit:r.unit||"",value:_,payload:b,dataKey:p,type:u});var E=pe({axis:t,ticks:o,bandSize:v,entry:b,index:j,dataKey:f}),N=pe({axis:n,ticks:l,bandSize:g,entry:b,index:j,dataKey:h}),P=_!=="-"?r.scale(_):y,C=Math.sqrt(Math.max(P,0)/Math.PI);return Q(Q({},b),{},{cx:E,cy:N,x:E-C,y:N-C,xAxis:t,yAxis:n,zAxis:r,width:2*C,height:2*C,size:P,node:{x:k,y:w,z:_},tooltipPayload:S,tooltipPosition:{x:E,y:N},payload:b},d&&d[j]&&d[j].props)});return Q({points:x},c)});var sr=Yn({chartName:"BarChart",GraphicalChild:Dt,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:zt},{axisType:"yAxis",AxisComp:Rt}],formatAxisMap:Un}),Cs=Yn({chartName:"ComposedChart",GraphicalChild:[We,kt,Dt,Ne],axisComponents:[{axisType:"xAxis",AxisComp:zt},{axisType:"yAxis",AxisComp:Rt},{axisType:"zAxis",AxisComp:Ee}],formatAxisMap:Un});function xn(e,t){if(e===0)return"";const n=Math.abs(e);return t==="VND"?n>=1e6?`${(e/1e6).toFixed(1)}M`:n>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString():t==="JPY"?n>=1e4?`${(e/1e4).toFixed(1)}万`:n>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString():n>=1e6?`${(e/1e6).toFixed(1)}M`:n>=1e3?`${(e/1e3).toFixed(0)}K`:e.toString()}function ir({data:e}){const{currency:t}=$t(),{data:n}=Ft(),{t:r}=K("common"),{resolvedTheme:s}=we(),a=s==="dark",o=a?"#45475a":"#E5E7EB",l=a?"#a6adc8":"#6B7280",c=a?"#1e1e2e":"#fff",u=a?"#45475a":"#E5E7EB",d=a?"#cdd6f4":"#374151",f=e.every(p=>p.expenses===0),h=e.map(p=>({...p,net:p.income-p.expenses}));return i.jsx(Se,{width:"100%",height:"100%",children:i.jsxs(Cs,{data:h,margin:{top:20,right:30,left:20,bottom:5},children:[i.jsx(Gn,{strokeDasharray:"3 3",stroke:o}),i.jsx(zt,{dataKey:"month",stroke:l,style:{fontSize:"12px",fontFamily:"Noto Sans JP, sans-serif"}}),i.jsx(Rt,{stroke:l,style:{fontSize:"12px",fontFamily:"Inter, sans-serif"},tickFormatter:p=>D(p,t,(n==null?void 0:n.rates)||{},!1)}),i.jsx(Ae,{contentStyle:{backgroundColor:c,border:`1px solid ${u}`,borderRadius:"8px",fontSize:"14px",color:d},formatter:(p,m)=>[D(p,t,(n==null?void 0:n.rates)||{},!1),m],labelFormatter:p=>p}),i.jsx(Wn,{wrapperStyle:{fontSize:"14px",fontFamily:"Noto Sans JP, sans-serif",color:d}}),i.jsx(Dt,{dataKey:"income",fill:"#4CAF50",name:r("chart.income"),radius:[4,4,0,0],isAnimationActive:!0,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:i.jsx(Qt,{dataKey:"income",position:"top",formatter:p=>xn(p,t),style:{fontSize:"10px",fill:"#4CAF50",fontWeight:500}})}),i.jsxs(Dt,{dataKey:"expenses",fill:"#F44336",name:r("chart.expense"),radius:[4,4,0,0],isAnimationActive:!0,animationBegin:200,animationDuration:800,animationEasing:"ease-out",children:[f?h.map((p,m)=>i.jsx(Zt,{fill:"#F4433633"},`cell-${m}`)):h.map((p,m)=>i.jsx(Zt,{fill:p.expenses===0?"#F4433633":"#F44336"},`cell-${m}`)),i.jsx(Qt,{dataKey:"expenses",position:"top",formatter:p=>xn(p,t),style:{fontSize:"10px",fill:"#F44336",fontWeight:500}})]}),i.jsx(We,{type:"monotone",dataKey:"net",name:r("chart.net"),stroke:"#2196F3",strokeWidth:2,dot:{fill:"#2196F3",strokeWidth:2,r:4},activeDot:{r:6},isAnimationActive:!0,animationBegin:400,animationDuration:1e3,animationEasing:"ease-out"})]})})}const le=7,ue=["#4CAF50","#2196F3","#FF9800","#9C27B0","#F44336","#00BCD4","#FFEB3B","#795548","#607D8B"];function Ds({changePercent:e}){if(e==null)return null;const t=e>0,n=Math.abs(e)>=20;return e===0?i.jsxs("span",{className:"inline-flex items-center gap-0.5 text-xs text-gray-500 dark:text-gray-400",children:[i.jsx(ns,{className:"w-3 h-3"}),i.jsx("span",{children:"0%"})]}):i.jsxs("span",{className:F("inline-flex items-center gap-0.5 text-xs font-medium",t?"text-red-600 dark:text-red-400":"text-green-600 dark:text-green-400",n&&"font-bold"),children:[t?i.jsx(Tr,{className:"w-3 h-3"}):i.jsx(Cr,{className:"w-3 h-3"}),i.jsxs("span",{children:[t?"+":"",e.toFixed(0),"%"]})]})}function ar({data:e}){const{t}=K("common"),{currency:n}=$t(),{data:r}=Ft(),{resolvedTheme:s}=we(),a=s==="dark",[o,l]=T.useState(!1),c=a?"#1e1e2e":"#fff",u=a?"#45475a":"#E5E7EB",d=a?"#cdd6f4":"#374151",f=e.reduce((x,b)=>x+b.amount,0),h=[...e].sort((x,b)=>b.amount-x.amount),m=(()=>{if(h.length<=le||o)return h.map((w,_)=>({...w,percentage:f>0?w.amount/f*100:0,color:ue[_%ue.length]}));const x=h.slice(0,le),b=h.slice(le),j=b.reduce((w,_)=>w+_.amount,0),k=x.map((w,_)=>({...w,percentage:f>0?w.amount/f*100:0,color:ue[_%ue.length]}));return b.length>0&&k.push({category:`${t("analytics.otherCategories")} (${b.length})`,amount:j,percentage:f>0?j/f*100:0,color:"#9E9E9E",isOther:!0,otherCount:b.length}),k})(),y=h.length>le,v=x=>{const{x:b,y:j,width:k,height:w,value:_}=x;return i.jsxs("text",{x:b+k+8,y:j+w/2,fill:d,textAnchor:"start",dominantBaseline:"middle",fontSize:12,children:[_.toFixed(1),"%"]})},g=Math.max(200,m.length*32);return i.jsxs("div",{className:"w-full",children:[i.jsx(Se,{width:"100%",height:g,children:i.jsxs(sr,{data:m,layout:"vertical",margin:{top:5,right:60,left:0,bottom:5},children:[i.jsx(zt,{type:"number",hide:!0,domain:[0,100]}),i.jsx(Rt,{type:"category",dataKey:"category",width:100,tick:{fill:d,fontSize:12},axisLine:!1,tickLine:!1}),i.jsx(Ae,{contentStyle:{backgroundColor:c,border:`1px solid ${u}`,borderRadius:"8px",fontSize:"14px",color:d},content:({active:x,payload:b})=>{if(!x||!(b!=null&&b[0]))return null;const j=b[0].payload,k=j.change_percent!==null&&j.change_percent!==void 0;return i.jsxs("div",{className:"p-3 rounded-lg shadow-lg",style:{backgroundColor:c,border:`1px solid ${u}`},children:[i.jsx("p",{className:"font-medium mb-1",children:j.category}),i.jsx("p",{className:"text-sm",children:D(j.amount,n,(r==null?void 0:r.rates)||{},!1)}),k&&i.jsxs("div",{className:"mt-1 pt-1 border-t border-gray-200 dark:border-gray-600",children:[i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[t("analytics.vsPrevious"),": "]}),i.jsx(Ds,{changePercent:j.change_percent})]})]})}}),i.jsxs(Dt,{dataKey:"percentage",radius:[0,4,4,0],maxBarSize:24,isAnimationActive:!0,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:[m.map((x,b)=>i.jsx(Zt,{fill:x.color},`cell-${b}`)),i.jsx(Qt,{dataKey:"percentage",content:v})]})]})}),y&&i.jsx("button",{onClick:()=>l(!o),className:F("w-full mt-2 py-2 px-4 text-sm font-medium rounded-lg transition-colors","text-primary-600 dark:text-primary-400","hover:bg-primary-50 dark:hover:bg-primary-900/20"),children:o?t("analytics.showLessCategories"):t("analytics.showAllCategories",{count:h.length})})]})}const vn={income:"#4CAF50",expense:"#F44336",net:"#2196F3"};function Is({data:e,dataKey:t}){const{currency:n}=$t(),{data:r}=Ft(),{isPrivacyMode:s}=Dr(),{t:a}=K("common"),{resolvedTheme:o}=we(),l=o==="dark",c=l?"#45475a":"#E5E7EB",u=l?"#a6adc8":"#6B7280",d=l?"#1e1e2e":"#fff",f=l?"#45475a":"#E5E7EB",h=l?"#cdd6f4":"#374151",p={income:a("chart.income"),expense:a("chart.expense"),net:a("chart.net")};return i.jsx(Se,{width:"100%",height:"100%",children:i.jsxs(Qr,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[i.jsx(Gn,{strokeDasharray:"3 3",stroke:c}),i.jsx(zt,{dataKey:"month",stroke:u,style:{fontSize:"12px",fontFamily:"Noto Sans JP, sans-serif"}}),i.jsx(Rt,{stroke:u,style:{fontSize:"12px",fontFamily:"Inter, sans-serif"},tickFormatter:m=>un(m,n,(r==null?void 0:r.rates)||{},!1,s)}),i.jsx(Ae,{contentStyle:{backgroundColor:d,border:`1px solid ${f}`,borderRadius:"8px",fontSize:"14px",color:h},formatter:m=>[un(m,n,(r==null?void 0:r.rates)||{},!1,s),p[t]]}),i.jsx(Wn,{wrapperStyle:{fontSize:"14px",fontFamily:"Noto Sans JP, sans-serif",color:h}}),i.jsx(We,{type:"monotone",dataKey:t,stroke:vn[t],strokeWidth:2,dot:{fill:vn[t],r:4},activeDot:{r:6},name:p[t],isAnimationActive:!0,animationBegin:0,animationDuration:1200,animationEasing:"ease-out"})]})})}function Ms({data:e,savingsGoal:t}){const{t:n}=K("common"),{currency:r}=$t(),{data:s}=Ft(),{resolvedTheme:a}=we(),o=a==="dark",l=o?"#1e1e2e":"#fff",c=o?"#45475a":"#E5E7EB",u=o?"#cdd6f4":"#374151",d=e.length>0?e[e.length-1]:null,f=(d==null?void 0:d.net)||0,h=e.length>1?e.slice(0,-1):e,p=h.length>0?h.reduce((x,b)=>x+b.net,0)/h.length:f,m=[{name:n("analytics.thisMonth"),value:f,color:f>=0?"#4CAF50":"#F44336"},{name:n("analytics.average"),value:p,color:"#9E9E9E"}],y=p!==0?(f-p)/Math.abs(p)*100:0,v=y>=0,g=t&&t>0?Math.min(f/t*100,100):null;return e.length===1?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8",children:[i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:n("analytics.netCashFlow")}),i.jsx("p",{className:F("text-3xl font-bold",f>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:D(f,r,(s==null?void 0:s.rates)||{},!1)}),f>=0&&i.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:n("analytics.positiveCashFlow")}),t&&t>0&&i.jsxs("div",{className:"mt-4 w-full max-w-xs",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[i.jsx("span",{children:n("analytics.savingsGoal")}),i.jsxs("span",{children:[(g??0).toFixed(0),"%"]})]}),i.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:F("h-full rounded-full transition-all duration-700 ease-out",g&&g>=100?"bg-green-500":"bg-primary-500"),style:{width:`${g||0}%`}})}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:[D(t,r,(s==null?void 0:s.rates)||{},!1)," ",n("analytics.target")]})]})]}):i.jsxs("div",{className:"w-full h-full flex flex-col",children:[i.jsx("div",{className:"flex-1 min-h-[150px]",children:i.jsx(Se,{width:"100%",height:"100%",children:i.jsxs(sr,{data:m,layout:"vertical",margin:{top:10,right:60,left:10,bottom:10},children:[i.jsx(zt,{type:"number",hide:!0}),i.jsx(Rt,{type:"category",dataKey:"name",width:80,tick:{fill:u,fontSize:12},axisLine:!1,tickLine:!1}),i.jsx(Ae,{contentStyle:{backgroundColor:l,border:`1px solid ${c}`,borderRadius:"8px",fontSize:"14px",color:u},formatter:x=>[D(x,r,(s==null?void 0:s.rates)||{},!1),n("analytics.netCashFlow")]}),t&&t>0&&i.jsx(Jr,{x:t,stroke:"#9C27B0",strokeDasharray:"3 3",label:{value:n("analytics.goal"),position:"top",fill:"#9C27B0",fontSize:10}}),i.jsx(Dt,{dataKey:"value",radius:[0,4,4,0],maxBarSize:32,isAnimationActive:!0,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:m.map((x,b)=>i.jsx(Zt,{fill:x.color},`cell-${b}`))})]})})}),i.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 border-t border-gray-100 dark:border-gray-800",children:[i.jsxs("span",{className:F("text-sm font-medium",v?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[v?"▲":"▼"," ",Math.abs(y).toFixed(1),"%"]}),i.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:n("analytics.vsAverage")})]}),t&&t>0&&i.jsxs("div",{className:"px-4 pb-2",children:[i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[i.jsx("span",{children:n("analytics.savingsGoal")}),i.jsxs("span",{children:[D(f,r,(s==null?void 0:s.rates)||{},!1)," / ",D(t,r,(s==null?void 0:s.rates)||{},!1)]})]}),i.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:i.jsx("div",{className:F("h-full rounded-full transition-all duration-700 ease-out",g&&g>=100?"bg-green-500":"bg-primary-500"),style:{width:`${g||0}%`}})})]})]})}function Ls(e,t,n){return Math.max(t,Math.min(e,n))}const M={toVector(e,t){return e===void 0&&(e=t),Array.isArray(e)?e:[e,e]},add(e,t){return[e[0]+t[0],e[1]+t[1]]},sub(e,t){return[e[0]-t[0],e[1]-t[1]]},addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function bn(e,t,n){return t===0||Math.abs(t)===1/0?Math.pow(e,n*5):e*t*n/(t+n*e)}function _n(e,t,n,r=.15){return r===0?Ls(e,t,n):e<t?-bn(t-e,n-t,r)+t:e>n?+bn(e-n,n-t,r)+n:e}function Bs(e,[t,n],[r,s]){const[[a,o],[l,c]]=e;return[_n(t,a,o,r),_n(n,l,c,s)]}function $s(e,t){if(typeof e!="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fs(e){var t=$s(e,"string");return typeof t=="symbol"?t:String(t)}function R(e,t,n){return t=Fs(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jn(Object(n),!0).forEach(function(r){R(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}const or={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function wn(e){return e?e[0].toUpperCase()+e.slice(1):""}const zs=["enter","leave"];function Rs(e=!1,t){return e&&!zs.includes(t)}function Ks(e,t="",n=!1){const r=or[e],s=r&&r[t]||t;return"on"+wn(e)+wn(s)+(Rs(n,s)?"Capture":"")}const Vs=["gotpointercapture","lostpointercapture"];function Hs(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=Vs.includes(t)?"capturecapture":"capture",s=!!~t.indexOf(r);return s&&(t=t.replace("capture","")),{device:t,capture:s,passive:n}}function Ys(e,t=""){const n=or[e],r=n&&n[t]||t;return e+r}function Pe(e){return"touches"in e}function cr(e){return Pe(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function Us(e){return Array.from(e.touches).filter(t=>{var n,r;return t.target===e.currentTarget||((n=e.currentTarget)===null||n===void 0||(r=n.contains)===null||r===void 0?void 0:r.call(n,t.target))})}function Ws(e){return e.type==="touchend"||e.type==="touchcancel"?e.changedTouches:e.targetTouches}function lr(e){return Pe(e)?Ws(e)[0]:e}function Ke(e,t){try{const n=t.clientX-e.clientX,r=t.clientY-e.clientY,s=(t.clientX+e.clientX)/2,a=(t.clientY+e.clientY)/2,o=Math.hypot(n,r);return{angle:-(Math.atan2(n,r)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function Gs(e){return Us(e).map(t=>t.identifier)}function kn(e,t){const[n,r]=Array.from(e.touches).filter(s=>t.includes(s.identifier));return Ke(n,r)}function Le(e){const t=lr(e);return Pe(e)?t.identifier:t.pointerId}function Bt(e){const t=lr(e);return[t.clientX,t.clientY]}const Sn=40,An=800;function ur(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return r===1?(t*=Sn,n*=Sn):r===2&&(t*=An,n*=An),[t,n]}function qs(e){var t,n;const{scrollX:r,scrollY:s,scrollLeft:a,scrollTop:o}=e.currentTarget;return[(t=r??a)!==null&&t!==void 0?t:0,(n=s??o)!==null&&n!==void 0?n:0]}function Xs(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:s,ctrlKey:a}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:s,ctrlKey:a})}return t}function be(e,...t){return typeof e=="function"?e(...t):e}function Js(){}function Qs(...e){return e.length===0?Js:e.length===1?e[0]:function(){let t;for(const n of e)t=n.apply(this,arguments)||t;return t}}function En(e,t){return Object.assign({},t,e||{})}const Zs=32;let dr=class{constructor(t,n,r){this.ctrl=t,this.args=n,this.key=r,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:n,ingKey:r,args:s}=this;n[r]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=s,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const n=this.state,r=this.config;n._active||(this.reset(),this.computeInitial(),n._active=!0,n.target=t.target,n.currentTarget=t.currentTarget,n.lastOffset=r.from?be(r.from,n):n.offset,n.offset=n.lastOffset,n.startTime=n.timeStamp=t.timeStamp)}computeValues(t){const n=this.state;n._values=t,n.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:n,config:r,shared:s}=this;n.args=this.args;let a=0;if(t&&(n.event=t,r.preventDefault&&t.cancelable&&n.event.preventDefault(),n.type=t.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,Xs(t)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=t.timeStamp-n.timeStamp,n.timeStamp=t.timeStamp,n.elapsedTime=n.timeStamp-n.startTime),n._active){const w=n._delta.map(Math.abs);M.addTo(n._distance,w)}this.axisIntent&&this.axisIntent(t);const[o,l]=n._movement,[c,u]=r.threshold,{_step:d,values:f}=n;if(r.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=c&&f[0]),d[1]===!1&&(d[1]=Math.abs(l)>=u&&f[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=c&&Math.sign(o)*c),d[1]===!1&&(d[1]=Math.abs(l)>=u&&Math.sign(l)*u)),n.intentional=d[0]!==!1||d[1]!==!1,!n.intentional)return;const h=[0,0];if(r.hasCustomTransform){const[w,_]=f;h[0]=d[0]!==!1?w-d[0]:0,h[1]=d[1]!==!1?_-d[1]:0}else h[0]=d[0]!==!1?o-d[0]:0,h[1]=d[1]!==!1?l-d[1]:0;this.restrictToAxis&&!n._blocked&&this.restrictToAxis(h);const p=n.offset,m=n._active&&!n._blocked||n.active;m&&(n.first=n._active&&!n.active,n.last=!n._active&&n.active,n.active=s[this.ingKey]=n._active,t&&(n.first&&("bounds"in r&&(n._bounds=be(r.bounds,n)),this.setup&&this.setup()),n.movement=h,this.computeOffset()));const[y,v]=n.offset,[[g,x],[b,j]]=n._bounds;n.overflow=[y<g?-1:y>x?1:0,v<b?-1:v>j?1:0],n._movementBound[0]=n.overflow[0]?n._movementBound[0]===!1?n._movement[0]:n._movementBound[0]:!1,n._movementBound[1]=n.overflow[1]?n._movementBound[1]===!1?n._movement[1]:n._movementBound[1]:!1;const k=n._active?r.rubberband||[0,0]:[0,0];if(n.offset=Bs(n._bounds,n.offset,k),n.delta=M.sub(n.offset,p),this.computeMovement(),m&&(!n.last||a>Zs)){n.delta=M.sub(n.offset,p);const w=n.delta.map(Math.abs);M.addTo(n.distance,w),n.direction=n.delta.map(Math.sign),n._direction=n._delta.map(Math.sign),!n.first&&a>0&&(n.velocity=[w[0]/a,w[1]/a],n.timeDelta=a)}}emit(){const t=this.state,n=this.shared,r=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!r.triggerAllEvents)return;const s=this.handler($($($({},n),t),{},{[this.aliasKey]:t.values}));s!==void 0&&(t.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}};function ti([e,t],n){const r=Math.abs(e),s=Math.abs(t);if(r>s&&r>n)return"x";if(s>r&&s>n)return"y"}class re extends dr{constructor(...t){super(...t),R(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=M.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=M.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const n=this.state,r=this.config;if(!n.axis&&t){const s=typeof r.axisThreshold=="object"?r.axisThreshold[cr(t)]:r.axisThreshold;n.axis=ti(n._movement,s)}n._blocked=(r.lockDirection||!!r.axis)&&!n.axis||!!r.axis&&r.axis!==n.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const ei=e=>e,Nn=.15,fr={enabled(e=!0){return e},eventOptions(e,t,n){return $($({},n.shared.eventOptions),e)},preventDefault(e=!1){return e},triggerAllEvents(e=!1){return e},rubberband(e=0){switch(e){case!0:return[Nn,Nn];case!1:return[0,0];default:return M.toVector(e)}},from(e){if(typeof e=="function")return e;if(e!=null)return M.toVector(e)},transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||ei},threshold(e){return M.toVector(e,0)}},ni=0,St=$($({},fr),{},{axis(e,t,{axis:n}){if(this.lockDirection=n==="lock",!this.lockDirection)return n},axisThreshold(e=ni){return e},bounds(e={}){if(typeof e=="function")return a=>St.bounds(e(a));if("current"in e)return()=>e.current;if(typeof HTMLElement=="function"&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:s=1/0}=e;return[[t,n],[r,s]]}}),Pn={ArrowRight:(e,t=1)=>[e*t,0],ArrowLeft:(e,t=1)=>[-1*e*t,0],ArrowUp:(e,t=1)=>[0,-1*e*t],ArrowDown:(e,t=1)=>[0,e*t]};class ri extends re{constructor(...t){super(...t),R(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const n=t._bounds.getBoundingClientRect(),r=t.currentTarget.getBoundingClientRect(),s={left:n.left-r.left+t.offset[0],right:n.right-r.right+t.offset[0],top:n.top-r.top+t.offset[1],bottom:n.bottom-r.bottom+t.offset[1]};t._bounds=St.bounds(s)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const n=this.config,r=this.state;if(t.buttons!=null&&(Array.isArray(n.pointerButtons)?!n.pointerButtons.includes(t.buttons):n.pointerButtons!==-1&&n.pointerButtons!==t.buttons))return;const s=this.ctrl.setEventIds(t);n.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(s&&s.size>1&&r._pointerActive)&&(this.start(t),this.setupPointer(t),r._pointerId=Le(t),r._pointerActive=!0,this.computeValues(Bt(t)),this.computeInitial(),n.preventScrollAxis&&cr(t)!=="mouse"?(r._active=!1,this.setupScrollPrevention(t)):n.delay>0?(this.setupDelayTrigger(t),n.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const n=this.state;n._active=!0,n._preventScroll=!0,n._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const n=this.state,r=this.config;if(!n._pointerActive)return;const s=Le(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;const a=Bt(t);if(document.pointerLockElement===t.target?n._delta=[t.movementX,t.movementY]:(n._delta=M.sub(a,n._values),this.computeValues(a)),M.addTo(n._movement,n._delta),this.compute(t),n._delayed&&n.intentional){this.timeoutStore.remove("dragDelay"),n.active=!1,this.startPointerDrag(t);return}if(r.preventScrollAxis&&!n._preventScroll)if(n.axis)if(n.axis===r.preventScrollAxis||r.preventScrollAxis==="xy"){n._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch{}const n=this.state,r=this.config;if(!n._active||!n._pointerActive)return;const s=Le(t);if(n._pointerId!==void 0&&s!==n._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[a,o]=n._distance;if(n.tap=a<=r.tapsThreshold&&o<=r.tapsThreshold,n.tap&&r.filterTaps)n._force=!0;else{const[l,c]=n._delta,[u,d]=n._movement,[f,h]=r.swipe.velocity,[p,m]=r.swipe.distance,y=r.swipe.duration;if(n.elapsedTime<y){const v=Math.abs(l/n.timeDelta),g=Math.abs(c/n.timeDelta);v>f&&Math.abs(u)>p&&(n.swipe[0]=Math.sign(l)),g>h&&Math.abs(d)>m&&(n.swipe[1]=Math.sign(c))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const n=this.config,r=n.device;n.pointerLock&&t.currentTarget.requestPointerLock(),n.pointerCapture||(this.eventStore.add(this.sharedConfig.window,r,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,r,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,si(t);const n=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",n),this.eventStore.add(this.sharedConfig.window,"touch","cancel",n),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const n=Pn[t.key];if(n){const r=this.state,s=t.shiftKey?10:t.altKey?.1:1;this.start(t),r._delta=n(this.config.keyboardDisplacement,s),r._keyboardActive=!0,M.addTo(r._movement,r._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Pn&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const n=this.config.device;t(n,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(n,"change",this.pointerMove.bind(this)),t(n,"end",this.pointerUp.bind(this)),t(n,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function si(e){"persist"in e&&typeof e.persist=="function"&&e.persist()}const se=typeof window<"u"&&window.document&&window.document.createElement;function hr(){return se&&"ontouchstart"in window}function ii(){return hr()||se&&window.navigator.maxTouchPoints>1}function ai(){return se&&"onpointerdown"in window}function oi(){return se&&"exitPointerLock"in window.document}function ci(){try{return"constructor"in GestureEvent}catch{return!1}}const Z={isBrowser:se,gesture:ci(),touch:hr(),touchscreen:ii(),pointer:ai(),pointerLock:oi()},li=250,ui=180,di=.5,fi=50,hi=250,mi=10,On={mouse:0,touch:0,pen:8},pi=$($({},St),{},{device(e,t,{pointer:{touch:n=!1,lock:r=!1,mouse:s=!1}={}}){return this.pointerLock=r&&Z.pointerLock,Z.touch&&n?"touch":this.pointerLock?"mouse":Z.pointer&&!s?"pointer":Z.touch?"touch":"mouse"},preventScrollAxis(e,t,{preventScroll:n}){if(this.preventScrollDelay=typeof n=="number"?n:n||n===void 0&&e?li:void 0,!(!Z.touchscreen||n===!1))return e||(n!==void 0?"y":void 0)},pointerCapture(e,t,{pointer:{capture:n=!0,buttons:r=1,keys:s=!0}={}}){return this.pointerButtons=r,this.keys=s,!this.pointerLock&&this.device==="pointer"&&n},threshold(e,t,{filterTaps:n=!1,tapsThreshold:r=3,axis:s=void 0}){const a=M.toVector(e,n?r:s?1:0);return this.filterTaps=n,this.tapsThreshold=r,a},swipe({velocity:e=di,distance:t=fi,duration:n=hi}={}){return{velocity:this.transform(M.toVector(e)),distance:this.transform(M.toVector(t)),duration:n}},delay(e=0){switch(e){case!0:return ui;case!1:return 0;default:return e}},axisThreshold(e){return e?$($({},On),e):On},keyboardDisplacement(e=mi){return e}});function mr(e){const[t,n]=e.overflow,[r,s]=e._delta,[a,o]=e._direction;(t<0&&r>0&&a<0||t>0&&r<0&&a>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&s>0&&o<0||n>0&&s<0&&o>0)&&(e._movement[1]=e._movementBound[1])}const gi=30,yi=100;class xi extends dr{constructor(...t){super(...t),R(this,"ingKey","pinching"),R(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:n,lastOffset:r}=this.state;t==="wheel"?this.state.offset=M.add(n,r):this.state.offset=[(1+n[0])*r[0],n[1]+r[1]]}computeMovement(){const{offset:t,lastOffset:n}=this.state;this.state.movement=[t[0]/n[0],t[1]-n[1]]}axisIntent(){const t=this.state,[n,r]=t._movement;if(!t.axis){const s=Math.abs(n)*gi-Math.abs(r);s<0?t.axis="angle":s>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const n=this.state,r=this.ctrl.touchIds;if(n._active&&n._touchIds.every(a=>r.has(a))||r.size<2)return;this.start(t),n._touchIds=Array.from(r).slice(0,2);const s=kn(t,n._touchIds);s&&this.pinchStart(t,s)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const n=this.state,r=n._pointerEvents,s=this.ctrl.pointerIds;if(n._active&&Array.from(r.keys()).every(o=>s.has(o))||(r.size<2&&r.set(t.pointerId,t),n._pointerEvents.size<2))return;this.start(t);const a=Ke(...Array.from(r.values()));a&&this.pinchStart(t,a)}pinchStart(t,n){const r=this.state;r.origin=n.origin,this.computeValues([n.distance,n.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const n=kn(t,this.state._touchIds);n&&this.pinchMove(t,n)}pointerMove(t){const n=this.state._pointerEvents;if(n.has(t.pointerId)&&n.set(t.pointerId,t),!this.state._active)return;const r=Ke(...Array.from(n.values()));r&&this.pinchMove(t,r)}pinchMove(t,n){const r=this.state,s=r._values[1],a=n.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([n.distance,n.angle-360*o]),r.origin=n.origin,r.turns=o,r._movement=[r._values[0]/r._initial[0]-1,r._values[1]-r._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(n=>!this.ctrl.touchIds.has(n))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const n=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch{}n._pointerEvents.has(t.pointerId)&&n._pointerEvents.delete(t.pointerId),n._active&&n._pointerEvents.size<2&&(n._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const n=this.state;n._active||(this.start(t),this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const n=this.state;this.computeValues([t.scale,t.rotation]),n.origin=[t.clientX,t.clientY];const r=n._movement;n._movement=[t.scale-1,t.rotation],n._delta=M.sub(n._movement,r),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const n=this.config.modifierKey;n&&(Array.isArray(n)?!n.find(r=>t[r]):!t[n])||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const r=this.state;r._delta=[-ur(t)[1]/yi*r.offset[0],0],M.addTo(r._movement,r._delta),mr(r),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const n=this.config.device;n&&(t(n,"start",this[n+"Start"].bind(this)),t(n,"change",this[n+"Move"].bind(this)),t(n,"end",this[n+"End"].bind(this)),t(n,"cancel",this[n+"End"].bind(this)),t("lostPointerCapture","",this[n+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const vi=$($({},fr),{},{device(e,t,{shared:n,pointer:{touch:r=!1}={}}){if(n.target&&!Z.touch&&Z.gesture)return"gesture";if(Z.touch&&r)return"touch";if(Z.touchscreen){if(Z.pointer)return"pointer";if(Z.touch)return"touch"}},bounds(e,t,{scaleBounds:n={},angleBounds:r={}}){const s=o=>{const l=En(be(n,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=En(be(r,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof n!="function"&&typeof r!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(e,t,n){return this.lockDirection=n.axis==="lock",M.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey(e){return e===void 0?"ctrlKey":e},pinchOnWheel(e=!0){return e}});class bi extends re{constructor(...t){super(...t),R(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(Bt(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const n=Bt(t),r=this.state;r._delta=M.sub(n,r._values),M.addTo(r._movement,r._delta),this.computeValues(n),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const _i=$($({},St),{},{mouseOnly:(e=!0)=>e});class ji extends re{constructor(...t){super(...t),R(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const n=this.state,r=qs(t);n._delta=M.sub(r,n._values),M.addTo(n._movement,n._delta),this.computeValues(r),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const wi=St;class ki extends re{constructor(...t){super(...t),R(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const n=this.state;n._delta=ur(t),M.addTo(n._movement,n._delta),mr(n),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const Si=St;class Ai extends re{constructor(...t){super(...t),R(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(Bt(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const n=this.state;if(!n._active)return;n._active=!1;const r=Bt(t);n._movement=n._delta=M.sub(r,n._values),this.computeValues(r),this.compute(t),n.delta=n.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const Ei=$($({},St),{},{mouseOnly:(e=!0)=>e}),Ge=new Map,Ve=new Map;function Ni(e){Ge.set(e.key,e.engine),Ve.set(e.key,e.resolver)}const Pi={key:"drag",engine:ri,resolver:pi},Oi={key:"hover",engine:Ai,resolver:Ei},Ti={key:"move",engine:bi,resolver:_i},Ci={key:"pinch",engine:xi,resolver:vi},Di={key:"scroll",engine:ji,resolver:wi},Ii={key:"wheel",engine:ki,resolver:Si};function Mi(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Li(e,t){if(e==null)return{};var n=Mi(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const Bi={target(e){if(e)return()=>"current"in e?e.current:e},enabled(e=!0){return e},window(e=Z.isBrowser?window:void 0){return e},eventOptions({passive:e=!0,capture:t=!1}={}){return{passive:e,capture:t}},transform(e){return e}},$i=["target","eventOptions","window","enabled","transform"];function me(e={},t){const n={};for(const[r,s]of Object.entries(t))switch(typeof s){case"function":n[r]=s.call(n,e[r],r,e);break;case"object":n[r]=me(e[r],s);break;case"boolean":s&&(n[r]=e[r]);break}return n}function Fi(e,t,n={}){const r=e,{target:s,eventOptions:a,window:o,enabled:l,transform:c}=r,u=Li(r,$i);if(n.shared=me({target:s,eventOptions:a,window:o,enabled:l,transform:c},Bi),t){const d=Ve.get(t);n[t]=me($({shared:n.shared},u),d)}else for(const d in u){const f=Ve.get(d);f&&(n[d]=me($({shared:n.shared},u[d]),f))}return n}let pr=class{constructor(t,n){R(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=n}add(t,n,r,s,a){const o=this._listeners,l=Ys(n,r),c=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},u=$($({},c),a);t.addEventListener(l,s,u);const d=()=>{t.removeEventListener(l,s,u),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}};class zi{constructor(){R(this,"_timeouts",new Map)}add(t,n,r=140,...s){this.remove(t),this._timeouts.set(t,window.setTimeout(n,r,...s))}remove(t){const n=this._timeouts.get(t);n&&window.clearTimeout(n)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class Ri{constructor(t){R(this,"gestures",new Set),R(this,"_targetEventStore",new pr(this)),R(this,"gestureEventStores",{}),R(this,"gestureTimeoutStores",{}),R(this,"handlers",{}),R(this,"config",{}),R(this,"pointerIds",new Set),R(this,"touchIds",new Set),R(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Ki(this,t)}setEventIds(t){if(Pe(t))return this.touchIds=new Set(Gs(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,n){this.handlers=t,this.nativeHandlers=n}applyConfig(t,n){this.config=Fi(t,n,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const n=this.config.shared,r={};let s;if(!(n.target&&(s=n.target(),!s))){if(n.enabled){for(const o of this.gestures){const l=this.config[o],c=Tn(r,l.eventOptions,!!s);if(l.enabled){const u=Ge.get(o);new u(this,t,o).bind(c)}}const a=Tn(r,n.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o]($($({},this.state.shared),{},{event:l,args:t})),void 0,!0)}for(const a in r)r[a]=Qs(...r[a]);if(!s)return r;for(const a in r){const{device:o,capture:l,passive:c}=Hs(a);this._targetEventStore.add(s,o,"",r[a],{capture:l,passive:c})}}}}function Pt(e,t){e.gestures.add(t),e.gestureEventStores[t]=new pr(e,t),e.gestureTimeoutStores[t]=new zi}function Ki(e,t){t.drag&&Pt(e,"drag"),t.wheel&&Pt(e,"wheel"),t.scroll&&Pt(e,"scroll"),t.move&&Pt(e,"move"),t.pinch&&Pt(e,"pinch"),t.hover&&Pt(e,"hover")}const Tn=(e,t,n)=>(r,s,a,o={},l=!1)=>{var c,u;const d=(c=o.capture)!==null&&c!==void 0?c:t.capture,f=(u=o.passive)!==null&&u!==void 0?u:t.passive;let h=l?r:Ks(r,s,d);n&&f&&(h+="Passive"),e[h]=e[h]||[],e[h].push(a)},Vi=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Hi(e){const t={},n={},r=new Set;for(let s in e)Vi.test(s)?(r.add(RegExp.lastMatch),n[s]=e[s]):t[s]=e[s];return[n,t,r]}function Ot(e,t,n,r,s,a){if(!e.has(n)||!Ge.has(r))return;const o=n+"Start",l=n+"End",c=u=>{let d;return u.first&&o in t&&t[o](u),n in t&&(d=t[n](u)),u.last&&l in t&&t[l](u),d};s[r]=c,a[r]=a[r]||{}}function Yi(e,t){const[n,r,s]=Hi(e),a={};return Ot(s,n,"onDrag","drag",a,t),Ot(s,n,"onWheel","wheel",a,t),Ot(s,n,"onScroll","scroll",a,t),Ot(s,n,"onPinch","pinch",a,t),Ot(s,n,"onMove","move",a,t),Ot(s,n,"onHover","hover",a,t),{handlers:a,config:t,nativeHandlers:r}}function Ui(e,t={},n,r){const s=O.useMemo(()=>new Ri(e),[]);if(s.applyHandlers(e,r),s.applyConfig(t,n),O.useEffect(s.effect.bind(s)),O.useEffect(()=>s.clean.bind(s),[]),t.target===void 0)return s.bind.bind(s)}function Wi(e){return e.forEach(Ni),function(n,r){const{handlers:s,nativeHandlers:a,config:o}=Yi(n,r||{});return Ui(s,o,void 0,a)}}function Gi(e,t){return Wi([Pi,Ci,Di,Ii,Ti,Oi])(e,t||{})}function Be({children:e,className:t="",minScale:n=1,maxScale:r=3}){const s=T.useRef(null),[a,o]=T.useState(1),[l,c]=T.useState({x:0,y:0}),u=T.useCallback(()=>{o(1),c({x:0,y:0})},[]);return Gi({onPinch:({offset:[d],memo:f})=>{const h=Math.min(r,Math.max(n,d));return o(h),h<=1&&c({x:0,y:0}),f},onDrag:({offset:[d,f],pinching:h})=>{if(a>1&&!h){const p=(a-1)*100/2;c({x:Math.min(p,Math.max(-p,d)),y:Math.min(p,Math.max(-p,f))})}},onWheel:({delta:[,d],event:f})=>{f.preventDefault();const h=Math.min(r,Math.max(n,a-d*.01));o(h),h<=1&&c({x:0,y:0})}},{target:s,pinch:{scaleBounds:{min:n,max:r}},drag:{filterTaps:!0},wheel:{preventDefault:!0}}),i.jsxs("div",{className:`relative overflow-hidden touch-none ${t}`,children:[i.jsx("div",{ref:s,style:{transform:`scale(${a}) translate(${l.x}px, ${l.y}px)`,transformOrigin:"center center",transition:"transform 0.1s ease-out"},className:"w-full h-full",children:e}),a>1&&i.jsxs("button",{onClick:u,className:"absolute bottom-2 right-2 px-2 py-1 text-xs bg-gray-800/70 text-white rounded-md hover:bg-gray-700/70 transition-colors",children:[Math.round(a*100),"% - Tap to reset"]})]})}const qi={spike:"📈",trend:"📊",unusual:"🔍",budget:"💰",saving:"✨"},Xi={info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"},Ji={info:"text-blue-700 dark:text-blue-300",warning:"text-amber-700 dark:text-amber-300",success:"text-green-700 dark:text-green-300"};function Qi({insight:e}){const{currency:t}=$t(),{data:n}=Ft();return i.jsx("div",{className:`p-4 rounded-lg border ${Xi[e.severity]} transition-all hover:shadow-sm`,children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl",children:qi[e.type]}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:`font-medium ${Ji[e.severity]}`,children:e.title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message}),e.amount&&i.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mt-2",children:D(e.amount,t,(n==null?void 0:n.rates)||{},!1)})]}),e.percentage_change!==void 0&&i.jsxs("span",{className:`text-sm font-medium px-2 py-1 rounded ${e.percentage_change>0?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"}`,children:[e.percentage_change>0?"+":"",e.percentage_change.toFixed(0),"%"]})]})})}function Zi(){const{t:e}=K("common"),{data:t,isLoading:n,error:r}=Wt({queryKey:["spending-insights"],queryFn:Fn,staleTime:5*60*1e3});if(n)return i.jsxs(V,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("analytics.spendingInsights","Spending Insights")}),i.jsx("div",{className:"flex justify-center py-8",children:i.jsx(Jt,{size:"md"})})]});if(r)return i.jsxs(V,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("analytics.spendingInsights","Spending Insights")}),i.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:e("error","Failed to load insights")})]});const s=(t==null?void 0:t.insights)||[];return i.jsxs(V,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("analytics.spendingInsights","Spending Insights")}),s.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("span",{className:"text-4xl mb-3 block",children:"🎉"}),i.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:e("analytics.noInsights","No notable spending patterns detected")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:e("analytics.insightsHint","Keep tracking to see personalized insights")})]}):i.jsx("div",{className:"space-y-3",children:s.map((a,o)=>i.jsx(Qi,{insight:a},`${a.type}-${a.category}-${o}`))})]})}async function Cn(e=50,t="ja"){return(await ke.post("/api/ai/categorize/suggestions",{limit:e,language:t})).data}async function Dn(e){return(await ke.post("/api/ai/categorize/apply",e)).data}const de=50,ta=.5;function ea({suggestion:e,isSelected:t,onToggle:n}){const{currency:r}=$t(),{data:s}=Ft(),{t:a}=K("common"),o=e.confidence>=.8?"text-green-600 dark:text-green-400":e.confidence>=.6?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return i.jsxs("div",{className:`p-3 rounded-lg border transition-colors cursor-pointer ${t?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"}`,onClick:()=>n(e.transaction_id,e.suggested_category),children:[i.jsxs("div",{className:"flex items-start justify-between gap-3",children:[i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.description}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:D(e.amount,r,(s==null?void 0:s.rates)||{},!1)})]}),i.jsxs("div",{className:"text-right flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[e.is_new_category&&i.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded",children:a("ai.newCategory")}),i.jsx("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:e.suggested_category})]}),i.jsxs("p",{className:`text-xs mt-1 ${o}`,children:[Math.round(e.confidence*100),"% ",a("ai.confidence")]})]})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic",children:e.reason})]})}function na(){const{t:e,i18n:t}=K("common"),n=Ir(),[r,s]=T.useState(null),[a,o]=T.useState(new Map),[l,c]=T.useState(!0),[u,d]=T.useState(0),[f,h]=T.useState(null),p=T.useRef(!1),m=dn({mutationFn:()=>Cn(de,t.language),onSuccess:_=>{s(_),d(_.total_other_count);const S=new Map;_.suggestions.forEach(E=>{E.confidence>=.7&&S.set(E.transaction_id,E.suggested_category)}),o(S)}}),y=dn({mutationFn:()=>Dn({approved:Array.from(a.entries()).map(([_,S])=>({transaction_id:_,category:S})),create_rules:l}),onSuccess:()=>{n.invalidateQueries({queryKey:["analytics"]}),n.invalidateQueries({queryKey:["transactions"]});const _=u-a.size;_>0?(d(_),s(null),o(new Map),setTimeout(()=>m.mutate(),500)):(s(null),o(new Map),d(0))}}),v=T.useCallback(async()=>{p.current=!1;const _=Math.ceil(u/de);let S=0;h({isRunning:!0,processed:0,total:u,currentBatch:0,totalBatches:_});for(let E=0;E<_&&!p.current;E++){h(N=>N?{...N,currentBatch:E+1}:null);try{const N=await Cn(de,t.language);if(N.suggestions.length===0||p.current)break;const P=N.suggestions.filter(C=>C.confidence>=.7).map(C=>({transaction_id:C.transaction_id,category:C.suggested_category}));P.length>0&&(await Dn({approved:P,create_rules:l}),S+=P.length),h(C=>C?{...C,processed:S}:null),await new Promise(C=>setTimeout(C,300))}catch{break}}h(null),n.invalidateQueries({queryKey:["analytics"]}),n.invalidateQueries({queryKey:["transactions"]}),s(null),d(0)},[u,t.language,l,n]),g=()=>{p.current=!0,h(null)},x=(_,S)=>{o(E=>{const N=new Map(E);return N.has(_)?N.delete(_):N.set(_,S),N})},b=()=>{if(!r)return;const _=new Map;r.suggestions.forEach(S=>{_.set(S.transaction_id,S.suggested_category)}),o(_)},j=()=>{o(new Map)};if(f!=null&&f.isRunning){const _=f.total>0?Math.round(f.processed/f.total*100):0;return i.jsx(V,{children:i.jsxs("div",{className:"py-8",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 text-center mb-4",children:e("ai.processingAll")}),i.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-2",children:i.jsx("div",{className:"bg-primary-500 h-4 rounded-full transition-all duration-300",style:{width:`${_}%`}})}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-4",children:e("ai.processProgress",{processed:f.processed,total:f.total,batch:f.currentBatch,totalBatches:f.totalBatches})}),i.jsx("div",{className:"text-center",children:i.jsx(rt,{variant:"outline",onClick:g,children:e("cancel")})})]})})}if(!r){const _=u,S=_>250,E=Math.ceil(_/de)*ta;return i.jsxs(V,{children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("ai.categoryCleanup")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("ai.categoryCleanupDesc")}),_>0&&i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e("ai.remainingOther",{count:_})})]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx(rt,{onClick:()=>m.mutate(),disabled:m.isPending,children:m.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Jt,{size:"sm",className:"mr-2"}),e("ai.analyzing")]}):e("ai.analyzeOther")}),S&&i.jsx(rt,{variant:"outline",onClick:v,disabled:m.isPending,title:e("ai.analyzeAllCredits",{credits:E.toFixed(1)}),children:e("ai.analyzeAll",{count:_})})]})]}),m.isError&&i.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:e("ai.analyzeError")})]})}if(r.suggestions.length===0)return i.jsx(V,{children:i.jsxs("div",{className:"text-center py-8",children:[i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("ai.noSuggestions")}),i.jsx(rt,{variant:"outline",onClick:()=>s(null),className:"mt-4",children:e("close")})]})});const k=u-r.suggestions.length,w=k>250;return i.jsxs(V,{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("ai.categoryCleanup")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("ai.foundSuggestions",{count:r.suggestions.length,total:u})})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(rt,{variant:"outline",size:"sm",onClick:b,children:e("ai.selectAll")}),i.jsx(rt,{variant:"outline",size:"sm",onClick:j,children:e("ai.deselectAll")})]})]}),r.new_categories_suggested.length>0&&i.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:i.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e("ai.newCategoriesSuggested"),": ",r.new_categories_suggested.join(", ")]})}),i.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:r.suggestions.map(_=>i.jsx(ea,{suggestion:_,isSelected:a.has(_.transaction_id),onToggle:x},_.transaction_id))}),i.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[i.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[i.jsx("input",{type:"checkbox",checked:l,onChange:_=>c(_.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),e("ai.createRulesAuto")]}),i.jsxs("div",{className:"flex gap-2 flex-wrap",children:[i.jsx(rt,{variant:"outline",onClick:()=>s(null),children:e("cancel")}),w&&i.jsx(rt,{variant:"outline",onClick:v,disabled:y.isPending,children:e("ai.analyzeAll",{count:k})}),i.jsx(rt,{onClick:()=>y.mutate(),disabled:a.size===0||y.isPending,children:y.isPending?i.jsxs(i.Fragment,{children:[i.jsx(Jt,{size:"sm",className:"mr-2"}),e("ai.applying")]}):e("ai.applySelected",{count:a.size})})]})]}),y.isError&&i.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:e("ai.applyError")})]})]})}function vt({label:e,value:t,change:n,trend:r="neutral",subtitle:s,className:a}){const{t:o}=K("common"),l=()=>r==="positive"?"text-green-600 dark:text-green-400":r==="negative"?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400",c=()=>n==null?null:n>0?"↑":n<0?"↓":"→";return i.jsxs("div",{className:F("bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm","border border-gray-100 dark:border-gray-700",a),children:[i.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:e}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 truncate",children:t}),n!=null&&i.jsxs("div",{className:F("flex items-center gap-1 mt-1",l()),children:[i.jsxs("span",{className:"text-sm font-medium",children:[c()," ",Math.abs(n).toFixed(1),"%"]}),i.jsx("span",{className:"text-xs text-gray-400",children:o("analytics.vsLastPeriod")})]}),s&&i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:s})]})}function ra({analytics:e,displayCurrency:t="JPY"}){const{t:n}=K("common"),{total_income:r,total_expense:s,net_cashflow:a,comparison:o,top_category:l}=e,c=()=>o!=null&&o.income_change?o.income_change>0?"positive":"negative":"neutral",u=()=>o!=null&&o.expense_change?o.expense_change<0?"positive":"negative":"neutral",d=()=>o!=null&&o.net_change?o.net_change>0?"positive":"negative":"neutral";return i.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[i.jsx(vt,{label:n("analytics.heroIncome"),value:D(r,t),change:o==null?void 0:o.income_change,trend:c()}),i.jsx(vt,{label:n("analytics.heroExpense"),value:D(s,t),change:o==null?void 0:o.expense_change,trend:u()}),i.jsx(vt,{label:n("analytics.heroNet"),value:D(a,t),change:o==null?void 0:o.net_change,trend:d()}),i.jsx(vt,{label:n("analytics.heroTopCategory"),value:(l==null?void 0:l.name)||"-",subtitle:l?`${D(l.amount,t)} (${l.percentage}%)`:void 0})]})}function sa(e){return Object.prototype.toString.call(e)==="[object Object]"}function In(e){return sa(e)||Array.isArray(e)}function ia(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function qe(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(e.breakpoints||{})),a=JSON.stringify(Object.keys(t.breakpoints||{}));return s!==a?!1:n.every(o=>{const l=e[o],c=t[o];return typeof l=="function"?`${l}`==`${c}`:!In(l)||!In(c)?l===c:qe(l,c)})}function Mn(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function aa(e,t){if(e.length!==t.length)return!1;const n=Mn(e),r=Mn(t);return n.every((s,a)=>{const o=r[a];return qe(s,o)})}function Xe(e){return typeof e=="number"}function He(e){return typeof e=="string"}function Oe(e){return typeof e=="boolean"}function Ln(e){return Object.prototype.toString.call(e)==="[object Object]"}function B(e){return Math.abs(e)}function Je(e){return Math.sign(e)}function Xt(e,t){return B(e-t)}function oa(e,t){if(e===0||t===0||B(e)<=B(t))return 0;const n=Xt(B(e),B(t));return B(n/e)}function ca(e){return Math.round(e*100)/100}function te(e){return ee(e).map(Number)}function tt(e){return e[ie(e)]}function ie(e){return Math.max(0,e.length-1)}function Qe(e,t){return t===ie(e)}function Bn(e,t=0){return Array.from(Array(e),(n,r)=>t+r)}function ee(e){return Object.keys(e)}function gr(e,t){return[e,t].reduce((n,r)=>(ee(r).forEach(s=>{const a=n[s],o=r[s],l=Ln(a)&&Ln(o);n[s]=l?gr(a,o):o}),n),{})}function Ye(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function la(e,t){const n={start:r,center:s,end:a};function r(){return 0}function s(c){return a(c)/2}function a(c){return t-c}function o(c,u){return He(e)?n[e](c):e(t,c,u)}return{measure:o}}function ne(){let e=[];function t(s,a,o,l={passive:!0}){let c;if("addEventListener"in s)s.addEventListener(a,o,l),c=()=>s.removeEventListener(a,o,l);else{const u=s;u.addListener(o),c=()=>u.removeListener(o)}return e.push(c),r}function n(){e=e.filter(s=>s())}const r={add:t,clear:n};return r}function ua(e,t,n,r){const s=ne(),a=1e3/60;let o=null,l=0,c=0;function u(){s.add(e,"visibilitychange",()=>{e.hidden&&m()})}function d(){p(),s.clear()}function f(v){if(!c)return;o||(o=v,n(),n());const g=v-o;for(o=v,l+=g;l>=a;)n(),l-=a;const x=l/a;r(x),c&&(c=t.requestAnimationFrame(f))}function h(){c||(c=t.requestAnimationFrame(f))}function p(){t.cancelAnimationFrame(c),o=null,l=0,c=0}function m(){o=null,l=0}return{init:u,destroy:d,start:h,stop:p,update:n,render:r}}function da(e,t){const n=t==="rtl",r=e==="y",s=r?"y":"x",a=r?"x":"y",o=!r&&n?-1:1,l=d(),c=f();function u(m){const{height:y,width:v}=m;return r?y:v}function d(){return r?"top":n?"right":"left"}function f(){return r?"bottom":n?"left":"right"}function h(m){return m*o}return{scroll:s,cross:a,startEdge:l,endEdge:c,measureSize:u,direction:h}}function wt(e=0,t=0){const n=B(e-t);function r(u){return u<e}function s(u){return u>t}function a(u){return r(u)||s(u)}function o(u){return a(u)?r(u)?e:t:u}function l(u){return n?u-n*Math.ceil((u-t)/n):u}return{length:n,max:t,min:e,constrain:o,reachedAny:a,reachedMax:s,reachedMin:r,removeOffset:l}}function yr(e,t,n){const{constrain:r}=wt(0,e),s=e+1;let a=o(t);function o(h){return n?B((s+h)%s):r(h)}function l(){return a}function c(h){return a=o(h),f}function u(h){return d().set(l()+h)}function d(){return yr(e,l(),n)}const f={get:l,set:c,add:u,clone:d};return f}function fa(e,t,n,r,s,a,o,l,c,u,d,f,h,p,m,y,v,g,x){const{cross:b,direction:j}=e,k=["INPUT","SELECT","TEXTAREA"],w={passive:!1},_=ne(),S=ne(),E=wt(50,225).constrain(p.measure(20)),N={mouse:300,touch:400},P={mouse:500,touch:600},C=m?43:25;let H=!1,W=0,G=0,X=!1,mt=!1,ot=!1,ct=!1;function Kt(A){if(!x)return;function I(U){(Oe(x)||x(A,U))&&Ht(U)}const z=t;_.add(z,"dragstart",U=>U.preventDefault(),w).add(z,"touchmove",()=>{},w).add(z,"touchend",()=>{}).add(z,"touchstart",I).add(z,"mousedown",I).add(z,"touchcancel",Y).add(z,"contextmenu",Y).add(z,"click",ut,!0)}function et(){_.clear(),S.clear()}function At(){const A=ct?n:t;S.add(A,"touchmove",q,w).add(A,"touchend",Y).add(A,"mousemove",q,w).add(A,"mouseup",Y)}function Et(A){const I=A.nodeName||"";return k.includes(I)}function lt(){return(m?P:N)[ct?"mouse":"touch"]}function Vt(A,I){const z=f.add(Je(A)*-1),U=d.byDistance(A,!m).distance;return m||B(A)<E?U:v&&I?U*.5:d.byIndex(z.get(),0).distance}function Ht(A){const I=Ye(A,r);ct=I,ot=m&&I&&!A.buttons&&H,H=Xt(s.get(),o.get())>=2,!(I&&A.button!==0)&&(Et(A.target)||(X=!0,a.pointerDown(A),u.useFriction(0).useDuration(0),s.set(o),At(),W=a.readPoint(A),G=a.readPoint(A,b),h.emit("pointerDown")))}function q(A){if(!Ye(A,r)&&A.touches.length>=2)return Y(A);const z=a.readPoint(A),U=a.readPoint(A,b),nt=Xt(z,W),dt=Xt(U,G);if(!mt&&!ct&&(!A.cancelable||(mt=nt>dt,!mt)))return Y(A);const bt=a.pointerMove(A);nt>y&&(ot=!0),u.useFriction(.3).useDuration(.75),l.start(),s.add(j(bt)),A.preventDefault()}function Y(A){const z=d.byDistance(0,!1).index!==f.get(),U=a.pointerUp(A)*lt(),nt=Vt(j(U),z),dt=oa(U,nt),bt=C-10*dt,pt=g+dt/50;mt=!1,X=!1,S.clear(),u.useDuration(bt).useFriction(pt),c.distance(nt,!m),ct=!1,h.emit("pointerUp")}function ut(A){ot&&(A.stopPropagation(),A.preventDefault(),ot=!1)}function J(){return X}return{init:Kt,destroy:et,pointerDown:J}}function ha(e,t){let r,s;function a(f){return f.timeStamp}function o(f,h){const m=`client${(h||e.scroll)==="x"?"X":"Y"}`;return(Ye(f,t)?f:f.touches[0])[m]}function l(f){return r=f,s=f,o(f)}function c(f){const h=o(f)-o(s),p=a(f)-a(r)>170;return s=f,p&&(r=f),h}function u(f){if(!r||!s)return 0;const h=o(s)-o(r),p=a(f)-a(r),m=a(f)-a(s)>170,y=h/p;return p&&!m&&B(y)>.1?y:0}return{pointerDown:l,pointerMove:c,pointerUp:u,readPoint:o}}function ma(){function e(n){const{offsetTop:r,offsetLeft:s,offsetWidth:a,offsetHeight:o}=n;return{top:r,right:s+a,bottom:r+o,left:s,width:a,height:o}}return{measure:e}}function pa(e){function t(r){return e*(r/100)}return{measure:t}}function ga(e,t,n,r,s,a,o){const l=[e].concat(r);let c,u,d=[],f=!1;function h(v){return s.measureSize(o.measure(v))}function p(v){if(!a)return;u=h(e),d=r.map(h);function g(x){for(const b of x){if(f)return;const j=b.target===e,k=r.indexOf(b.target),w=j?u:d[k],_=h(j?e:r[k]);if(B(_-w)>=.5){v.reInit(),t.emit("resize");break}}}c=new ResizeObserver(x=>{(Oe(a)||a(v,x))&&g(x)}),n.requestAnimationFrame(()=>{l.forEach(x=>c.observe(x))})}function m(){f=!0,c&&c.disconnect()}return{init:p,destroy:m}}function ya(e,t,n,r,s,a){let o=0,l=0,c=s,u=a,d=e.get(),f=0;function h(){const w=r.get()-e.get(),_=!c;let S=0;return _?(o=0,n.set(r),e.set(r),S=w):(n.set(e),o+=w/c,o*=u,d+=o,e.add(o),S=d-f),l=Je(S),f=d,k}function p(){const w=r.get()-t.get();return B(w)<.001}function m(){return c}function y(){return l}function v(){return o}function g(){return b(s)}function x(){return j(a)}function b(w){return c=w,k}function j(w){return u=w,k}const k={direction:y,duration:m,velocity:v,seek:h,settled:p,useBaseFriction:x,useBaseDuration:g,useFriction:j,useDuration:b};return k}function xa(e,t,n,r,s){const a=s.measure(10),o=s.measure(50),l=wt(.1,.99);let c=!1;function u(){return!(c||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function d(p){if(!u())return;const m=e.reachedMin(t.get())?"min":"max",y=B(e[m]-t.get()),v=n.get()-t.get(),g=l.constrain(y/o);n.subtract(v*g),!p&&B(v)<a&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function f(p){c=!p}return{shouldConstrain:u,constrain:d,toggleActive:f}}function va(e,t,n,r,s){const a=wt(-t+e,0),o=f(),l=d(),c=h();function u(m,y){return Xt(m,y)<=1}function d(){const m=o[0],y=tt(o),v=o.lastIndexOf(m),g=o.indexOf(y)+1;return wt(v,g)}function f(){return n.map((m,y)=>{const{min:v,max:g}=a,x=a.constrain(m),b=!y,j=Qe(n,y);return b?g:j||u(v,x)?v:u(g,x)?g:x}).map(m=>parseFloat(m.toFixed(3)))}function h(){if(t<=e+s)return[a.max];if(r==="keepSnaps")return o;const{min:m,max:y}=l;return o.slice(m,y)}return{snapsContained:c,scrollContainLimit:l}}function ba(e,t,n){const r=t[0],s=n?r-e:tt(t);return{limit:wt(s,r)}}function _a(e,t,n,r){const a=t.min+.1,o=t.max+.1,{reachedMin:l,reachedMax:c}=wt(a,o);function u(h){return h===1?c(n.get()):h===-1?l(n.get()):!1}function d(h){if(!u(h))return;const p=e*(h*-1);r.forEach(m=>m.add(p))}return{loop:d}}function ja(e){const{max:t,length:n}=e;function r(a){const o=a-t;return n?o/-n:0}return{get:r}}function wa(e,t,n,r,s){const{startEdge:a,endEdge:o}=e,{groupSlides:l}=s,c=f().map(t.measure),u=h(),d=p();function f(){return l(r).map(y=>tt(y)[o]-y[0][a]).map(B)}function h(){return r.map(y=>n[a]-y[a]).map(y=>-B(y))}function p(){return l(u).map(y=>y[0]).map((y,v)=>y+c[v])}return{snaps:u,snapsAligned:d}}function ka(e,t,n,r,s,a){const{groupSlides:o}=s,{min:l,max:c}=r,u=d();function d(){const h=o(a),p=!e||t==="keepSnaps";return n.length===1?[a]:p?h:h.slice(l,c).map((m,y,v)=>{const g=!y,x=Qe(v,y);if(g){const b=tt(v[0])+1;return Bn(b)}if(x){const b=ie(a)-tt(v)[0]+1;return Bn(b,tt(v)[0])}return m})}return{slideRegistry:u}}function Sa(e,t,n,r,s){const{reachedAny:a,removeOffset:o,constrain:l}=r;function c(m){return m.concat().sort((y,v)=>B(y)-B(v))[0]}function u(m){const y=e?o(m):l(m),v=t.map((x,b)=>({diff:d(x-y,0),index:b})).sort((x,b)=>B(x.diff)-B(b.diff)),{index:g}=v[0];return{index:g,distance:y}}function d(m,y){const v=[m,m+n,m-n];if(!e)return m;if(!y)return c(v);const g=v.filter(x=>Je(x)===y);return g.length?c(g):tt(v)-n}function f(m,y){const v=t[m]-s.get(),g=d(v,y);return{index:m,distance:g}}function h(m,y){const v=s.get()+m,{index:g,distance:x}=u(v),b=!e&&a(v);if(!y||b)return{index:g,distance:m};const j=t[g]-x,k=m+d(j,0);return{index:g,distance:k}}return{byDistance:h,byIndex:f,shortcut:d}}function Aa(e,t,n,r,s,a,o){function l(f){const h=f.distance,p=f.index!==t.get();a.add(h),h&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),p&&(n.set(t.get()),t.set(f.index),o.emit("select"))}function c(f,h){const p=s.byDistance(f,h);l(p)}function u(f,h){const p=t.clone().set(f),m=s.byIndex(p.get(),h);l(m)}return{distance:c,index:u}}function Ea(e,t,n,r,s,a,o,l){const c={passive:!0,capture:!0};let u=0;function d(p){if(!l)return;function m(y){if(new Date().getTime()-u>10)return;o.emit("slideFocusStart"),e.scrollLeft=0;const x=n.findIndex(b=>b.includes(y));Xe(x)&&(s.useDuration(0),r.index(x,0),o.emit("slideFocus"))}a.add(document,"keydown",f,!1),t.forEach((y,v)=>{a.add(y,"focus",g=>{(Oe(l)||l(p,g))&&m(v)},c)})}function f(p){p.code==="Tab"&&(u=new Date().getTime())}return{init:d}}function Ut(e){let t=e;function n(){return t}function r(c){t=o(c)}function s(c){t+=o(c)}function a(c){t-=o(c)}function o(c){return Xe(c)?c:c.get()}return{get:n,set:r,add:s,subtract:a}}function xr(e,t){const n=e.scroll==="x"?o:l,r=t.style;let s=null,a=!1;function o(h){return`translate3d(${h}px,0px,0px)`}function l(h){return`translate3d(0px,${h}px,0px)`}function c(h){if(a)return;const p=ca(e.direction(h));p!==s&&(r.transform=n(p),s=p)}function u(h){a=!h}function d(){a||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))}return{clear:d,to:c,toggleActive:u}}function Na(e,t,n,r,s,a,o,l,c){const d=te(s),f=te(s).reverse(),h=g().concat(x());function p(_,S){return _.reduce((E,N)=>E-s[N],S)}function m(_,S){return _.reduce((E,N)=>p(E,S)>0?E.concat([N]):E,[])}function y(_){return a.map((S,E)=>({start:S-r[E]+.5+_,end:S+t-.5+_}))}function v(_,S,E){const N=y(S);return _.map(P=>{const C=E?0:-n,H=E?n:0,W=E?"end":"start",G=N[P][W];return{index:P,loopPoint:G,slideLocation:Ut(-1),translate:xr(e,c[P]),target:()=>l.get()>G?C:H}})}function g(){const _=o[0],S=m(f,_);return v(S,n,!1)}function x(){const _=t-o[0]-1,S=m(d,_);return v(S,-n,!0)}function b(){return h.every(({index:_})=>{const S=d.filter(E=>E!==_);return p(S,t)<=.1})}function j(){h.forEach(_=>{const{target:S,translate:E,slideLocation:N}=_,P=S();P!==N.get()&&(E.to(P),N.set(P))})}function k(){h.forEach(_=>_.translate.clear())}return{canLoop:b,clear:k,loop:j,loopPoints:h}}function Pa(e,t,n){let r,s=!1;function a(c){if(!n)return;function u(d){for(const f of d)if(f.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}r=new MutationObserver(d=>{s||(Oe(n)||n(c,d))&&u(d)}),r.observe(e,{childList:!0})}function o(){r&&r.disconnect(),s=!0}return{init:a,destroy:o}}function Oa(e,t,n,r){const s={};let a=null,o=null,l,c=!1;function u(){l=new IntersectionObserver(m=>{c||(m.forEach(y=>{const v=t.indexOf(y.target);s[v]=y}),a=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(m=>l.observe(m))}function d(){l&&l.disconnect(),c=!0}function f(m){return ee(s).reduce((y,v)=>{const g=parseInt(v),{isIntersecting:x}=s[g];return(m&&x||!m&&!x)&&y.push(g),y},[])}function h(m=!0){if(m&&a)return a;if(!m&&o)return o;const y=f(m);return m&&(a=y),m||(o=y),y}return{init:u,destroy:d,get:h}}function Ta(e,t,n,r,s,a){const{measureSize:o,startEdge:l,endEdge:c}=e,u=n[0]&&s,d=m(),f=y(),h=n.map(o),p=v();function m(){if(!u)return 0;const x=n[0];return B(t[l]-x[l])}function y(){if(!u)return 0;const x=a.getComputedStyle(tt(r));return parseFloat(x.getPropertyValue(`margin-${c}`))}function v(){return n.map((x,b,j)=>{const k=!b,w=Qe(j,b);return k?h[b]+d:w?h[b]+f:j[b+1][l]-x[l]}).map(B)}return{slideSizes:h,slideSizesWithGaps:p,startGap:d,endGap:f}}function Ca(e,t,n,r,s,a,o,l,c){const{startEdge:u,endEdge:d,direction:f}=e,h=Xe(n);function p(g,x){return te(g).filter(b=>b%x===0).map(b=>g.slice(b,b+x))}function m(g){return g.length?te(g).reduce((x,b,j)=>{const k=tt(x)||0,w=k===0,_=b===ie(g),S=s[u]-a[k][u],E=s[u]-a[b][d],N=!r&&w?f(o):0,P=!r&&_?f(l):0,C=B(E-P-(S+N));return j&&C>t+c&&x.push(b),_&&x.push(g.length),x},[]).map((x,b,j)=>{const k=Math.max(j[b-1]||0);return g.slice(k,x)}):[]}function y(g){return h?p(g,n):m(g)}return{groupSlides:y}}function Da(e,t,n,r,s,a,o){const{align:l,axis:c,direction:u,startIndex:d,loop:f,duration:h,dragFree:p,dragThreshold:m,inViewThreshold:y,slidesToScroll:v,skipSnaps:g,containScroll:x,watchResize:b,watchSlides:j,watchDrag:k,watchFocus:w}=a,_=2,S=ma(),E=S.measure(t),N=n.map(S.measure),P=da(c,u),C=P.measureSize(E),H=pa(C),W=la(l,C),G=!f&&!!x,X=f||!!x,{slideSizes:mt,slideSizesWithGaps:ot,startGap:ct,endGap:Kt}=Ta(P,E,N,n,X,s),et=Ca(P,C,v,f,E,N,ct,Kt,_),{snaps:At,snapsAligned:Et}=wa(P,W,E,N,et),lt=-tt(At)+tt(ot),{snapsContained:Vt,scrollContainLimit:Ht}=va(C,lt,Et,x,_),q=G?Vt:Et,{limit:Y}=ba(lt,q,f),ut=yr(ie(q),d,f),J=ut.clone(),L=te(n),A=({dragHandler:Nt,scrollBody:Ie,scrollBounds:Me,options:{loop:ae}})=>{ae||Me.constrain(Nt.pointerDown()),Ie.seek()},I=({scrollBody:Nt,translate:Ie,location:Me,offsetLocation:ae,previousLocation:jr,scrollLooper:wr,slideLooper:kr,dragHandler:Sr,animation:Ar,eventHandler:rn,scrollBounds:Er,options:{loop:sn}},an)=>{const on=Nt.settled(),Nr=!Er.shouldConstrain(),cn=sn?on:on&&Nr,ln=cn&&!Sr.pointerDown();ln&&Ar.stop();const Pr=Me.get()*an+jr.get()*(1-an);ae.set(Pr),sn&&(wr.loop(Nt.direction()),kr.loop()),Ie.to(ae.get()),ln&&rn.emit("settle"),cn||rn.emit("scroll")},z=ua(r,s,()=>A(De),Nt=>I(De,Nt)),U=.68,nt=q[ut.get()],dt=Ut(nt),bt=Ut(nt),pt=Ut(nt),_t=Ut(nt),Yt=ya(dt,pt,bt,_t,h,U),Te=Sa(f,q,lt,Y,_t),Ce=Aa(z,ut,J,Yt,Te,_t,o),tn=ja(Y),en=ne(),br=Oa(t,n,o,y),{slideRegistry:nn}=ka(G,x,q,Ht,et,L),_r=Ea(e,n,nn,Ce,Yt,en,o,w),De={ownerDocument:r,ownerWindow:s,eventHandler:o,containerRect:E,slideRects:N,animation:z,axis:P,dragHandler:fa(P,e,r,s,_t,ha(P,s),dt,z,Ce,Yt,Te,ut,o,H,p,m,g,U,k),eventStore:en,percentOfView:H,index:ut,indexPrevious:J,limit:Y,location:dt,offsetLocation:pt,previousLocation:bt,options:a,resizeHandler:ga(t,o,s,n,P,b,S),scrollBody:Yt,scrollBounds:xa(Y,pt,_t,Yt,H),scrollLooper:_a(lt,Y,pt,[dt,pt,bt,_t]),scrollProgress:tn,scrollSnapList:q.map(tn.get),scrollSnaps:q,scrollTarget:Te,scrollTo:Ce,slideLooper:Na(P,C,lt,mt,ot,At,q,pt,n),slideFocus:_r,slidesHandler:Pa(t,o,j),slidesInView:br,slideIndexes:L,slideRegistry:nn,slidesToScroll:et,target:_t,translate:xr(P,t)};return De}function Ia(){let e={},t;function n(u){t=u}function r(u){return e[u]||[]}function s(u){return r(u).forEach(d=>d(t,u)),c}function a(u,d){return e[u]=r(u).concat([d]),c}function o(u,d){return e[u]=r(u).filter(f=>f!==d),c}function l(){e={}}const c={init:n,emit:s,off:o,on:a,clear:l};return c}const Ma={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function La(e){function t(a,o){return gr(a,o||{})}function n(a){const o=a.breakpoints||{},l=ee(o).filter(c=>e.matchMedia(c).matches).map(c=>o[c]).reduce((c,u)=>t(c,u),{});return t(a,l)}function r(a){return a.map(o=>ee(o.breakpoints||{})).reduce((o,l)=>o.concat(l),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function Ba(e){let t=[];function n(a,o){return t=o.filter(({options:l})=>e.optionsAtMedia(l).active!==!1),t.forEach(l=>l.init(a,e)),o.reduce((l,c)=>Object.assign(l,{[c.name]:c}),{})}function r(){t=t.filter(a=>a.destroy())}return{init:n,destroy:r}}function _e(e,t,n){const r=e.ownerDocument,s=r.defaultView,a=La(s),o=Ba(a),l=ne(),c=Ia(),{mergeOptions:u,optionsAtMedia:d,optionsMediaQueries:f}=a,{on:h,off:p,emit:m}=c,y=P;let v=!1,g,x=u(Ma,_e.globalOptions),b=u(x),j=[],k,w,_;function S(){const{container:L,slides:A}=b;w=(He(L)?e.querySelector(L):L)||e.children[0];const z=He(A)?w.querySelectorAll(A):A;_=[].slice.call(z||w.children)}function E(L){const A=Da(e,w,_,r,s,L,c);if(L.loop&&!A.slideLooper.canLoop()){const I=Object.assign({},L,{loop:!1});return E(I)}return A}function N(L,A){v||(x=u(x,L),b=d(x),j=A||j,S(),g=E(b),f([x,...j.map(({options:I})=>I)]).forEach(I=>l.add(I,"change",P)),b.active&&(g.translate.to(g.location.get()),g.animation.init(),g.slidesInView.init(),g.slideFocus.init(J),g.eventHandler.init(J),g.resizeHandler.init(J),g.slidesHandler.init(J),g.options.loop&&g.slideLooper.loop(),w.offsetParent&&_.length&&g.dragHandler.init(J),k=o.init(J,j)))}function P(L,A){const I=et();C(),N(u({startIndex:I},L),A),c.emit("reInit")}function C(){g.dragHandler.destroy(),g.eventStore.clear(),g.translate.clear(),g.slideLooper.clear(),g.resizeHandler.destroy(),g.slidesHandler.destroy(),g.slidesInView.destroy(),g.animation.destroy(),o.destroy(),l.clear()}function H(){v||(v=!0,l.clear(),C(),c.emit("destroy"),c.clear())}function W(L,A,I){!b.active||v||(g.scrollBody.useBaseFriction().useDuration(A===!0?0:b.duration),g.scrollTo.index(L,I||0))}function G(L){const A=g.index.add(1).get();W(A,L,-1)}function X(L){const A=g.index.add(-1).get();W(A,L,1)}function mt(){return g.index.add(1).get()!==et()}function ot(){return g.index.add(-1).get()!==et()}function ct(){return g.scrollSnapList}function Kt(){return g.scrollProgress.get(g.offsetLocation.get())}function et(){return g.index.get()}function At(){return g.indexPrevious.get()}function Et(){return g.slidesInView.get()}function lt(){return g.slidesInView.get(!1)}function Vt(){return k}function Ht(){return g}function q(){return e}function Y(){return w}function ut(){return _}const J={canScrollNext:mt,canScrollPrev:ot,containerNode:Y,internalEngine:Ht,destroy:H,off:p,on:h,emit:m,plugins:Vt,previousScrollSnap:At,reInit:y,rootNode:q,scrollNext:G,scrollPrev:X,scrollProgress:Kt,scrollSnapList:ct,scrollTo:W,selectedScrollSnap:et,slideNodes:ut,slidesInView:Et,slidesNotInView:lt};return N(t,n),setTimeout(()=>c.emit("init"),0),J}_e.globalOptions=void 0;function Ze(e={},t=[]){const n=T.useRef(e),r=T.useRef(t),[s,a]=T.useState(),[o,l]=T.useState(),c=T.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return T.useEffect(()=>{qe(n.current,e)||(n.current=e,c())},[e,c]),T.useEffect(()=>{aa(r.current,t)||(r.current=t,c())},[t,c]),T.useEffect(()=>{if(ia()&&o){_e.globalOptions=Ze.globalOptions;const u=_e(o,n.current,r.current);return a(u),()=>u.destroy()}else a(void 0)},[o,a]),[l,s]}Ze.globalOptions=void 0;const $a={spike:"⚠️",trend:"📈",unusual:"📊",budget:"💰",saving:"🎉"},$n={warning:"border-l-amber-500 bg-amber-50 dark:bg-amber-900/20",success:"border-l-green-500 bg-green-50 dark:bg-green-900/20",info:"border-l-blue-500 bg-blue-50 dark:bg-blue-900/20"};function Fa({insight:e,displayCurrency:t="JPY",onScrollToChart:n}){const{t:r}=K("common"),s=Mr(),a=()=>{e.category?s({to:"/transactions",search:{categories:e.category}}):(e.type==="trend"||e.type==="unusual")&&(n==null||n())},o=()=>e.category?r("analytics.viewTransactions",{category:e.category}):e.type==="trend"||e.type==="unusual"?r("analytics.viewBreakdown"):r("analytics.learnMore");return i.jsx("div",{className:F("rounded-xl p-4 border-l-4 min-w-0","bg-white dark:bg-gray-800","shadow-sm",$n[e.severity]||$n.info),children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx("span",{className:"text-2xl flex-shrink-0",children:$a[e.type]||"💡"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.title}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message}),e.amount&&i.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mt-1",children:[D(e.amount,t),e.percentage_change&&i.jsxs("span",{className:F("ml-2",e.percentage_change>0?"text-red-600":"text-green-600"),children:[e.percentage_change>0?"+":"",e.percentage_change,"%"]})]}),i.jsxs(rt,{variant:"ghost",className:"mt-2 p-0 h-auto text-sm text-primary-600 hover:text-primary-700",onClick:a,children:[o()," →"]})]})]})})}function za({insights:e,displayCurrency:t="JPY",onScrollToChart:n}){const{t:r}=K("common"),[s,a]=T.useState(0),[o,l]=Ze({loop:!1,align:"start",containScroll:"trimSnaps"}),c=T.useCallback(()=>{l&&a(l.selectedScrollSnap())},[l]);return T.useEffect(()=>{if(l)return c(),l.on("select",c),()=>{l.off("select",c)}},[l,c]),!e||e.length===0?null:i.jsxs("div",{className:"relative",children:[e.length>1&&i.jsx("p",{className:"text-xs text-gray-400 text-center mb-2",children:r("analytics.swipeHint")}),i.jsx("div",{className:"overflow-hidden",ref:o,children:i.jsx("div",{className:"flex gap-3",children:e.map((u,d)=>i.jsx("div",{className:"flex-shrink-0 w-full min-w-0",children:i.jsx(Fa,{insight:u,displayCurrency:t,onScrollToChart:n})},`${u.type}-${u.category||d}`))})}),e.length>1&&i.jsx("div",{className:"flex justify-center gap-1.5 mt-3",children:e.map((u,d)=>i.jsx("button",{"aria-label":`Go to insight ${d+1}`,className:F("w-2 h-2 rounded-full transition-all",d===s?"bg-primary-600 w-4":"bg-gray-300 dark:bg-gray-600"),onClick:()=>l==null?void 0:l.scrollTo(d)},d))})]})}function vr({selectedMonth:e,onChange:t,className:n}){const{i18n:r}=K(),s=c=>{const u=r.language;return u==="ja"?ht(c,"yyyy年M月"):u==="vi"?`Tháng ${ht(c,"M/yyyy")}`:ht(c,"MMMM yyyy")},a=()=>{t(fe(e,1))},o=()=>{const c=fn(e,1);c<=new Date&&t(c)},l=fn(e,1)>new Date;return i.jsxs("div",{className:F("flex items-center gap-2",n),children:[i.jsx("button",{onClick:a,className:F("p-2 rounded-lg text-gray-600 dark:text-gray-400","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors"),"aria-label":"Previous month",children:"←"}),i.jsx("span",{className:"min-w-[140px] text-center font-medium text-gray-900 dark:text-gray-100",children:s(e)}),i.jsx("button",{onClick:o,disabled:l,className:F("p-2 rounded-lg text-gray-600 dark:text-gray-400","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors",l&&"opacity-50 cursor-not-allowed"),"aria-label":"Next month",children:"→"})]})}const Ra=[{value:"current-month",labelKey:"analytics.currentMonth"},{value:"3-months",labelKey:"analytics.3months"},{value:"6-months",labelKey:"analytics.6months"},{value:"1-year",labelKey:"analytics.1year"}];function Ka({selected:e,onChange:t,className:n}){const{t:r}=K("common");return i.jsx("div",{className:F("inline-flex rounded-lg bg-gray-100 dark:bg-gray-800 p-1",n),children:Ra.map(({value:s,labelKey:a})=>i.jsx("button",{onClick:()=>t(s),className:F("px-3 py-1.5 text-sm font-medium rounded-md transition-all",s===e?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:r(a)},s))})}async function Va(e,t){return(await ke.get(`/api/reports/monthly-usage/${e}/${t}`)).data}async function Ha(e,t){return(await ke.get(`/api/reports/monthly-usage/${e}/${t}/pdf`,{responseType:"blob"})).data}function Ya({year:e,month:t,onDownloadPDF:n,isDownloading:r}){const{t:s}=K("common"),a=ht(new Date(e,t-1),"MMMM yyyy");return i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-white",children:s("report.title")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:a})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:n,disabled:r,className:"p-2 rounded-lg text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors","aria-label":s(r?"report.downloading":"report.downloadPDF"),title:s(r?"report.downloading":"report.downloadPDF"),children:r?i.jsx(Lr,{size:18,className:"animate-spin"}):i.jsx(Zr,{size:18})}),i.jsx("button",{disabled:!0,className:"p-2 rounded-lg text-gray-400 dark:text-gray-600 cursor-not-allowed","aria-label":s("report.sendEmail"),title:s("report.comingSoon"),children:i.jsx(ts,{size:18})})]})]})}const Ue=({value:e,max:t=100,className:n})=>{const r=Math.min(100,Math.max(0,e/t*100));return i.jsx("div",{className:je("h-2 w-full overflow-hidden rounded-full bg-gray-200 dark:bg-gray-700",n),children:i.jsx("div",{className:"h-full transition-all duration-300 ease-in-out bg-blue-600",style:{width:`${r}%`}})})};function Ua(e){switch(e){case"over_budget":return"error";case"threshold_80":return"warning";case"threshold_50":return"info";default:return"success"}}function Wa(e,t){switch(e){case"over_budget":return t("report.overBudget");case"threshold_80":return t("report.warning");case"threshold_50":return t("report.caution");default:return t("report.onTrack")}}function Ga({data:e}){const{t}=K("common");return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1.5",children:[i.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[D(Math.abs(e.total_spent))," / ",D(e.total_budget)]}),i.jsxs("span",{className:F("font-medium",e.is_over_budget?"text-red-500":"text-gray-700 dark:text-gray-300"),children:[e.percentage_used.toFixed(1),"%"]})]}),i.jsx(Ue,{value:Math.min(e.percentage_used,100)})]}),i.jsx("div",{className:"space-y-3",children:e.category_status.map(n=>i.jsx("div",{className:"flex items-center justify-between gap-2",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsxs("div",{className:"flex items-center justify-between mb-1",children:[i.jsx("span",{className:"text-sm font-medium truncate text-gray-900 dark:text-gray-100",children:n.category}),i.jsx(zn,{variant:Ua(n.status),className:"ml-2 text-[10px]",children:Wa(n.status,t)})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ue,{value:Math.min(n.percentage,100),className:"flex-1"}),i.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 w-16 text-right",children:[D(Math.abs(n.spent))," / ",D(n.budget_amount)]})]})]})},n.category))})]})}function qa(e){switch(e){case"ahead":return"success";case"on_track":return"info";default:return"warning"}}function Xa({goal:e}){const{t}=K("common"),n={ahead:t("report.ahead"),on_track:t("report.onTrack"),behind:t("report.behind")}[e.status]||e.status;return i.jsxs("div",{className:"p-4 border rounded-lg border-gray-200 dark:border-gray-700",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t("report.goalYears",{years:e.years})}),i.jsx(zn,{variant:qa(e.status),children:n})]}),i.jsx(Ue,{value:Math.min(e.progress_percentage,100),className:"mb-2"}),i.jsxs("div",{className:"flex justify-between text-sm text-gray-600 dark:text-gray-400",children:[i.jsxs("span",{children:[D(e.total_saved)," / ",D(e.target_amount)]}),i.jsxs("span",{children:[e.progress_percentage.toFixed(1),"%"]})]}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-1",children:t("report.neededPerMonth",{amount:D(e.needed_per_month)})})]})}function Ja({accounts:e,totalNetWorth:t}){const{t:n}=K("common");return i.jsxs("div",{children:[i.jsxs("div",{className:"mb-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[i.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:n("report.totalNetWorth")}),i.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:D(t)})]}),i.jsx("div",{className:"space-y-2",children:e.map(r=>i.jsxs("div",{className:"flex justify-between items-center p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:[i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:r.account_name}),i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.account_type})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"font-medium text-sm text-gray-900 dark:text-gray-100",children:D(r.balance,r.currency,void 0,!0)}),r.currency!=="JPY"&&i.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.currency})]})]},r.account_id))})]})}function Qa({embedded:e=!1}){const{t}=K("common"),[n,r]=T.useState(new Date),[s,a]=T.useState(!1),o=n.getFullYear(),l=n.getMonth()+1,{data:c,isLoading:u,error:d}=Wt({queryKey:["monthly-report",o,l],queryFn:()=>Va(o,l),staleTime:1e3*60*5}),f=T.useCallback(async()=>{a(!0);try{const p=await Ha(o,l),m=URL.createObjectURL(p),y=document.createElement("a");y.href=m,y.download=`monthly_report_${o}_${String(l).padStart(2,"0")}.pdf`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(m)}catch{Br.error(t("report.downloadError"))}finally{a(!1)}},[o,l,t]),h=i.jsxs(i.Fragment,{children:[i.jsx(Ya,{year:o,month:l,onDownloadPDF:f,isDownloading:s}),i.jsx(vr,{selectedMonth:n,onChange:r,className:"mb-6"}),u&&i.jsx("div",{className:"flex justify-center py-20",children:i.jsx(Jt,{size:"lg"})}),d&&i.jsx(V,{className:"text-center py-10",children:i.jsx("p",{className:"text-red-500",children:t("report.loadError")})}),c&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[i.jsx(vt,{label:t("analytics.heroIncome"),value:D(c.summary.total_income),change:c.summary.income_change,trend:c.summary.income_change>0?"positive":c.summary.income_change<0?"negative":"neutral"}),i.jsx(vt,{label:t("analytics.heroExpense"),value:D(c.summary.total_expense),change:c.summary.expense_change,trend:c.summary.expense_change<0?"positive":c.summary.expense_change>0?"negative":"neutral"}),i.jsx(vt,{label:t("analytics.heroNet"),value:D(c.summary.net_cashflow),change:c.summary.net_change,trend:c.summary.net_change>0?"positive":c.summary.net_change<0?"negative":"neutral"}),i.jsx(vt,{label:t("report.savingsRate"),value:`${c.summary.savings_rate.toFixed(1)}%`,subtitle:t("report.savingsRateDesc")})]}),c.budget_adherence&&i.jsxs(V,{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:t("report.budgetAdherence")}),i.jsx(Ga,{data:c.budget_adherence})]}),c.category_breakdown.length>0&&i.jsxs(V,{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:t("report.categoryBreakdown")}),i.jsx(ar,{data:c.category_breakdown})]}),c.spending_trends.length>0&&i.jsxs(V,{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:t("report.spendingTrends")}),i.jsx(ir,{data:c.spending_trends})]}),c.goal_progress.length>0&&i.jsxs(V,{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:t("report.goalProgress")}),i.jsx("div",{className:"space-y-4",children:c.goal_progress.map(p=>i.jsx(Xa,{goal:p},p.goal_id))})]}),c.account_summary.length>0&&i.jsxs(V,{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:t("report.accountSummary")}),i.jsx(Ja,{accounts:c.account_summary,totalNetWorth:c.total_net_worth})]}),c.insights.length>0&&i.jsxs(V,{children:[i.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900 dark:text-white",children:t("report.insights")}),i.jsx("div",{className:"space-y-3",children:c.insights.map((p,m)=>i.jsxs("div",{className:"p-3 rounded-lg bg-gray-50 dark:bg-gray-700/50 border border-gray-100 dark:border-gray-600",children:[i.jsx("div",{className:"flex items-center gap-2 mb-1",children:i.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:p.title})}),i.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:p.message})]},m))})]}),c.summary.total_income===0&&c.summary.total_expense===0&&i.jsx(V,{className:"text-center py-10",children:i.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:t("report.noData")})})]})]});return e?h:i.jsx("div",{className:"max-w-3xl mx-auto px-4 py-6 sm:py-8",children:h})}function Za(e,t){const n=Fr(t),r=ht(n>new Date?new Date:n,"yyyy-MM-dd");switch(e){case"current-month":return{start:ht(oe(t),"yyyy-MM-dd"),end:r};case"3-months":return{start:ht(fe(oe(t),2),"yyyy-MM-dd"),end:r};case"6-months":return{start:ht(fe(oe(t),5),"yyyy-MM-dd"),end:r};case"1-year":return{start:ht(fe(oe(t),11),"yyyy-MM-dd"),end:r};default:return zr()}}function to(){const{t:e}=K("common"),t=$r({strict:!1}),[n,r]=T.useState((t==null?void 0:t.tab)==="report"?"report":"overview"),s=T.useRef(null),[a,o]=T.useState(new Date),[l,c]=T.useState("current-month"),[u,d]=T.useState(!1),f=Za(l,a),{data:h,isLoading:p}=Wt({queryKey:["analytics",f],queryFn:()=>Rr(f)}),{data:m}=Wt({queryKey:["insights"],queryFn:Fn}),{data:y}=Wt({queryKey:["goals"],queryFn:Kr}),v=y&&y.length>0?Math.round(y[0].target_amount/(y[0].years*12)):null,g=j=>{c(j)},x=j=>{o(j)},b=T.useCallback(()=>{var j;(j=s.current)==null||j.scrollIntoView({behavior:"smooth"})},[]);return i.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6 sm:py-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:e("analytics.title")}),i.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:e("analytics.subtitle")})]}),i.jsx("div",{className:"flex justify-center mb-6",children:i.jsxs("div",{className:"bg-gray-100 dark:bg-gray-800 rounded-full p-1 inline-flex",role:"tablist",children:[i.jsx("button",{role:"tab","aria-selected":n==="overview",onClick:()=>r("overview"),className:F("px-4 py-2 text-sm font-medium rounded-full transition-colors",n==="overview"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:e("analytics.tabOverview","Overview")}),i.jsx("button",{role:"tab","aria-selected":n==="report",onClick:()=>r("report"),className:F("px-4 py-2 text-sm font-medium rounded-full transition-colors",n==="report"?"bg-primary-500 text-white":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:e("analytics.tabReport","Monthly Report")})]})}),n==="report"?i.jsx(Qa,{embedded:!0}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6 space-y-3",children:[i.jsx(vr,{selectedMonth:a,onChange:x,className:"justify-center"}),i.jsx("div",{className:"flex justify-center",children:i.jsx(Ka,{selected:l,onChange:g})})]}),p?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Jt,{size:"lg"})}):i.jsxs("div",{className:"space-y-6",children:[h&&i.jsx(ra,{analytics:h}),(m==null?void 0:m.insights)&&m.insights.length>0&&i.jsx(za,{insights:m.insights,onScrollToChart:b}),i.jsxs("div",{ref:s,className:"space-y-6",children:[i.jsxs(V,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("analytics.incomeVsExpense")}),i.jsx(Be,{className:"h-64 sm:h-80",children:h!=null&&h.monthly_trends&&h.monthly_trends.length>0?i.jsx(ir,{data:h.monthly_trends}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e("analytics.noData")})})]}),i.jsxs(V,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("analytics.categoryBreakdown")}),i.jsx(Be,{className:"h-64 sm:h-80",children:h!=null&&h.category_breakdown&&h.category_breakdown.length>0?i.jsx(ar,{data:h.category_breakdown}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e("analytics.noData")})})]}),i.jsxs(V,{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:e("analytics.monthlyCashFlow")}),i.jsx("div",{className:"h-64 sm:h-80",children:h!=null&&h.monthly_trends&&h.monthly_trends.length>0?h.monthly_trends.length<3?i.jsx(Ms,{data:h.monthly_trends,savingsGoal:v}):i.jsx(Be,{className:"h-full",children:i.jsx(Is,{data:h.monthly_trends,dataKey:"net"})}):i.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e("analytics.noData")})})]})]}),i.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[i.jsxs("button",{onClick:()=>d(!u),className:F("w-full px-4 py-3 flex items-center justify-between","bg-gray-50 dark:bg-gray-800","text-left font-medium text-gray-900 dark:text-gray-100"),children:[i.jsxs("span",{className:"flex items-center gap-2",children:[i.jsx("span",{children:"🤖"}),e("analytics.aiTools")]}),i.jsx("span",{className:F("transform transition-transform",u?"rotate-180":""),children:"▼"})]}),u&&i.jsxs("div",{className:"p-4 space-y-4 bg-white dark:bg-gray-900",children:[i.jsx(na,{}),i.jsx(Zi,{})]})]})]})]})]})}const co=Vr("/analytics")({component:to});export{co as Route};
