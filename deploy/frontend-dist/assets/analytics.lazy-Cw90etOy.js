import{u as e,j as t,c as n,k as r,e as s,m as a}from"./vendor-tanstack-CNAyyoyW.js";import{r as i}from"./vendor-react-Bx4JnVfy.js";import{C as o,L as c,l,a0 as d,U as u,a1 as g,a as m,B as f,c as x,m as h,a2 as y,Q as p}from"./index-CL4Qiyvp.js";import{IncomeExpenseBarChart as b}from"./IncomeExpenseBarChart-D02pzpJk.js";import{CategoryBarChart as j}from"./CategoryBarChart-BE_KGPUZ.js";import{TrendLineChart as v}from"./TrendLineChart-D-NYtaL9.js";import{CashFlowSummary as k}from"./CashFlowSummary-wl1BAl21.js";import{ZoomableChart as N}from"./ZoomableChart-BWpVUcGt.js";import{u as w}from"./vendor-i18n-BrrOrGm_.js";import{e as S,s as C,f as M,g as _,h as E}from"./vendor-date-BkGg5e1q.js";import"./vendor-recharts-BrNIwK9z.js";import"./vendor-icons-BP-EQ_TG.js";const D={spike:"ðŸ“ˆ",trend:"ðŸ“Š",unusual:"ðŸ”",budget:"ðŸ’°",saving:"âœ¨"},F={info:"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800",warning:"bg-amber-50 dark:bg-amber-900/20 border-amber-200 dark:border-amber-800",success:"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"},I={info:"text-blue-700 dark:text-blue-300",warning:"text-amber-700 dark:text-amber-300",success:"text-green-700 dark:text-green-300"};function L({insight:e}){const{currency:n}=l(),{data:r}=d();return t.jsx("div",{className:`p-4 rounded-lg border ${F[e.severity]} transition-all hover:shadow-sm`,children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl",children:D[e.type]}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:`font-medium ${I[e.severity]}`,children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message}),e.amount&&t.jsx("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mt-2",children:u(e.amount,n,(null==r?void 0:r.rates)||{},!1)})]}),void 0!==e.percentage_change&&t.jsxs("span",{className:"text-sm font-medium px-2 py-1 rounded "+(e.percentage_change>0?"bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400":"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400"),children:[e.percentage_change>0?"+":"",e.percentage_change.toFixed(0),"%"]})]})})}function T(){const{t:n}=w("common"),{data:r,isLoading:s,error:a}=e({queryKey:["spending-insights"],queryFn:g,staleTime:3e5});if(s)return t.jsxs(o,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("analytics.spendingInsights","Spending Insights")}),t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(c,{size:"md"})})]});if(a)return t.jsxs(o,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("analytics.spendingInsights","Spending Insights")}),t.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-8",children:n("common.error","Failed to load insights")})]});const i=(null==r?void 0:r.insights)||[];return t.jsxs(o,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("analytics.spendingInsights","Spending Insights")}),0===i.length?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("span",{className:"text-4xl mb-3 block",children:"ðŸŽ‰"}),t.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:n("analytics.noInsights","No notable spending patterns detected")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-1",children:n("analytics.insightsHint","Keep tracking to see personalized insights")})]}):t.jsx("div",{className:"space-y-3",children:i.map((e,n)=>t.jsx(L,{insight:e},`${e.type}-${e.category}-${n}`))})]})}async function z(e=50,t="ja"){return(await m.post("/api/ai/categorize/suggestions",{limit:e,language:t})).data}async function A(e){return(await m.post("/api/ai/categorize/apply",e)).data}function O({suggestion:e,isSelected:n,onToggle:r}){const{currency:s}=l(),{data:a}=d(),{t:i}=w("common"),o=e.confidence>=.8?"text-green-600 dark:text-green-400":e.confidence>=.6?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return t.jsxs("div",{className:"p-3 rounded-lg border transition-colors cursor-pointer "+(n?"border-primary-500 bg-primary-50 dark:bg-primary-900/20":"border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600"),onClick:()=>r(e.transaction_id,e.suggested_category),children:[t.jsxs("div",{className:"flex items-start justify-between gap-3",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 truncate",children:e.description}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:u(e.amount,s,(null==a?void 0:a.rates)||{},!1)})]}),t.jsxs("div",{className:"text-right flex-shrink-0",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[e.is_new_category&&t.jsx("span",{className:"px-1.5 py-0.5 text-xs bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 rounded",children:i("ai.newCategory")}),t.jsx("span",{className:"text-sm font-medium text-primary-600 dark:text-primary-400",children:e.suggested_category})]}),t.jsxs("p",{className:`text-xs mt-1 ${o}`,children:[Math.round(100*e.confidence),"% ",i("ai.confidence")]})]})]}),t.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2 italic",children:e.reason})]})}function P(){const{t:e,i18n:s}=w("common"),a=n(),[l,d]=i.useState(null),[u,g]=i.useState(new Map),[m,x]=i.useState(!0),[h,y]=i.useState(0),[p,b]=i.useState(null),j=i.useRef(!1),v=r({mutationFn:()=>z(50,s.language),onSuccess:e=>{d(e),y(e.total_other_count);const t=new Map;e.suggestions.forEach(e=>{e.confidence>=.7&&t.set(e.transaction_id,e.suggested_category)}),g(t)}}),k=r({mutationFn:()=>A({approved:Array.from(u.entries()).map(([e,t])=>({transaction_id:e,category:t})),create_rules:m}),onSuccess:()=>{a.invalidateQueries({queryKey:["analytics"]}),a.invalidateQueries({queryKey:["transactions"]});const e=h-u.size;e>0?(y(e),d(null),g(new Map),setTimeout(()=>v.mutate(),500)):(d(null),g(new Map),y(0))}}),N=i.useCallback(async()=>{j.current=!1;const e=Math.ceil(h/50);let t=0;b({isRunning:!0,processed:0,total:h,currentBatch:0,totalBatches:e});for(let n=0;n<e&&!j.current;n++){b(e=>e?{...e,currentBatch:n+1}:null);try{const e=await z(50,s.language);if(0===e.suggestions.length)break;if(j.current)break;const n=e.suggestions.filter(e=>e.confidence>=.7).map(e=>({transaction_id:e.transaction_id,category:e.suggested_category}));n.length>0&&(await A({approved:n,create_rules:m}),t+=n.length),b(e=>e?{...e,processed:t}:null),await new Promise(e=>setTimeout(e,300))}catch{break}}b(null),a.invalidateQueries({queryKey:["analytics"]}),a.invalidateQueries({queryKey:["transactions"]}),d(null),y(0)},[h,s.language,m,a]),S=()=>{j.current=!0,b(null)},C=(e,t)=>{g(n=>{const r=new Map(n);return r.has(e)?r.delete(e):r.set(e,t),r})};if(null==p?void 0:p.isRunning){const n=p.total>0?Math.round(p.processed/p.total*100):0;return t.jsx(o,{children:t.jsxs("div",{className:"py-8",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 text-center mb-4",children:e("ai.processingAll")}),t.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-2",children:t.jsx("div",{className:"bg-primary-500 h-4 rounded-full transition-all duration-300",style:{width:`${n}%`}})}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center mb-4",children:e("ai.processProgress",{processed:p.processed,total:p.total,batch:p.currentBatch,totalBatches:p.totalBatches})}),t.jsx("div",{className:"text-center",children:t.jsx(f,{variant:"outline",onClick:S,children:e("common.cancel")})})]})})}if(!l){const n=h,r=n>250,s=.5*Math.ceil(n/50);return t.jsxs(o,{children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("ai.categoryCleanup")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("ai.categoryCleanupDesc")}),n>0&&t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:e("ai.remainingOther",{count:n})})]}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsx(f,{onClick:()=>v.mutate(),disabled:v.isPending,children:v.isPending?t.jsxs(t.Fragment,{children:[t.jsx(c,{size:"sm",className:"mr-2"}),e("ai.analyzing")]}):e("ai.analyzeOther")}),r&&t.jsx(f,{variant:"outline",onClick:N,disabled:v.isPending,title:e("ai.analyzeAllCredits",{credits:s.toFixed(1)}),children:e("ai.analyzeAll",{count:n})})]})]}),v.isError&&t.jsx("div",{className:"text-sm text-red-600 dark:text-red-400",children:e("ai.analyzeError")})]})}if(0===l.suggestions.length)return t.jsx(o,{children:t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:e("ai.noSuggestions")}),t.jsx(f,{variant:"outline",onClick:()=>d(null),className:"mt-4",children:e("common.close")})]})});const M=h-l.suggestions.length,_=M>250;return t.jsxs(o,{children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("ai.categoryCleanup")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("ai.foundSuggestions",{count:l.suggestions.length,total:h})})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(f,{variant:"outline",size:"sm",onClick:()=>{if(!l)return;const e=new Map;l.suggestions.forEach(t=>{e.set(t.transaction_id,t.suggested_category)}),g(e)},children:e("ai.selectAll")}),t.jsx(f,{variant:"outline",size:"sm",onClick:()=>{g(new Map)},children:e("ai.deselectAll")})]})]}),l.new_categories_suggested.length>0&&t.jsx("div",{className:"mb-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:t.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:[e("ai.newCategoriesSuggested"),": ",l.new_categories_suggested.join(", ")]})}),t.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:l.suggestions.map(e=>t.jsx(O,{suggestion:e,isSelected:u.has(e.transaction_id),onToggle:C},e.transaction_id))}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700",children:[t.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-3",children:[t.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[t.jsx("input",{type:"checkbox",checked:m,onChange:e=>x(e.target.checked),className:"rounded border-gray-300 dark:border-gray-600"}),e("ai.createRulesAuto")]}),t.jsxs("div",{className:"flex gap-2 flex-wrap",children:[t.jsx(f,{variant:"outline",onClick:()=>d(null),children:e("common.cancel")}),_&&t.jsx(f,{variant:"outline",onClick:N,disabled:k.isPending,children:e("ai.analyzeAll",{count:M})}),t.jsx(f,{onClick:()=>k.mutate(),disabled:0===u.size||k.isPending,children:k.isPending?t.jsxs(t.Fragment,{children:[t.jsx(c,{size:"sm",className:"mr-2"}),e("ai.applying")]}):e("ai.applySelected",{count:u.size})})]})]}),k.isError&&t.jsx("div",{className:"mt-2 text-sm text-red-600 dark:text-red-400",children:e("ai.applyError")})]})]})}function B({label:e,value:n,change:r,trend:s="neutral",subtitle:a,className:i}){const{t:o}=w("common");return t.jsxs("div",{className:x("bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm","border border-gray-100 dark:border-gray-700",i),children:[t.jsx("p",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:e}),t.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100 truncate",children:n}),null!=r&&t.jsxs("div",{className:x("flex items-center gap-1 mt-1","positive"===s?"text-green-600 dark:text-green-400":"negative"===s?"text-red-600 dark:text-red-400":"text-gray-500 dark:text-gray-400"),children:[t.jsxs("span",{className:"text-sm font-medium",children:[null==r?null:r>0?"â†‘":r<0?"â†“":"â†’"," ",Math.abs(r).toFixed(1),"%"]}),t.jsx("span",{className:"text-xs text-gray-400",children:o("analytics.vsLastPeriod")})]}),a&&t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:a})]})}function $({analytics:e,displayCurrency:n="JPY"}){const{t:r}=w("common"),{total_income:s,total_expense:a,net_cashflow:i,comparison:o,top_category:c}=e;return t.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[t.jsx(B,{label:r("analytics.heroIncome"),value:u(s,n),change:null==o?void 0:o.income_change,trend:(null==o?void 0:o.income_change)?o.income_change>0?"positive":"negative":"neutral"}),t.jsx(B,{label:r("analytics.heroExpense"),value:u(a,n),change:null==o?void 0:o.expense_change,trend:(null==o?void 0:o.expense_change)?o.expense_change<0?"positive":"negative":"neutral"}),t.jsx(B,{label:r("analytics.heroNet"),value:u(i,n),change:null==o?void 0:o.net_change,trend:(null==o?void 0:o.net_change)?o.net_change>0?"positive":"negative":"neutral"}),t.jsx(B,{label:r("analytics.heroTopCategory"),value:(null==c?void 0:c.name)||"-",subtitle:c?`${u(c.amount,n)} (${c.percentage}%)`:void 0})]})}function q(e){return function(e){return"[object Object]"===Object.prototype.toString.call(e)}(e)||Array.isArray(e)}function H(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;return JSON.stringify(Object.keys(e.breakpoints||{}))===JSON.stringify(Object.keys(t.breakpoints||{}))&&n.every(n=>{const r=e[n],s=t[n];return"function"==typeof r?`${r}`==`${s}`:q(r)&&q(s)?H(r,s):r===s})}function R(e){return e.concat().sort((e,t)=>e.name>t.name?1:-1).map(e=>e.options)}function K(e){return"number"==typeof e}function V(e){return"string"==typeof e}function G(e){return"boolean"==typeof e}function Q(e){return"[object Object]"===Object.prototype.toString.call(e)}function J(e){return Math.abs(e)}function U(e){return Math.sign(e)}function W(e,t){return J(e-t)}function Y(e){return ne(e).map(Number)}function X(e){return e[Z(e)]}function Z(e){return Math.max(0,e.length-1)}function ee(e,t){return t===Z(e)}function te(e,t=0){return Array.from(Array(e),(e,n)=>t+n)}function ne(e){return Object.keys(e)}function re(e,t){return[e,t].reduce((e,t)=>(ne(t).forEach(n=>{const r=e[n],s=t[n],a=Q(r)&&Q(s);e[n]=a?re(r,s):s}),e),{})}function se(e,t){return void 0!==t.MouseEvent&&e instanceof t.MouseEvent}function ae(){let e=[];const t={add:function(n,r,s,a={passive:!0}){let i;if("addEventListener"in n)n.addEventListener(r,s,a),i=()=>n.removeEventListener(r,s,a);else{const e=n;e.addListener(s),i=()=>e.removeListener(s)}return e.push(i),t},clear:function(){e=e.filter(e=>e())}};return t}function ie(e,t,n,r){const s=ae(),a=1e3/60;let i=null,o=0,c=0;function l(e){if(!c)return;i||(i=e,n(),n());const s=e-i;for(i=e,o+=s;o>=a;)n(),o-=a;r(o/a),c&&(c=t.requestAnimationFrame(l))}function d(){t.cancelAnimationFrame(c),i=null,o=0,c=0}return{init:function(){s.add(e,"visibilitychange",()=>{e.hidden&&(i=null,o=0)})},destroy:function(){d(),s.clear()},start:function(){c||(c=t.requestAnimationFrame(l))},stop:d,update:n,render:r}}function oe(e=0,t=0){const n=J(e-t);function r(t){return t<e}function s(e){return e>t}function a(e){return r(e)||s(e)}return{length:n,max:t,min:e,constrain:function(n){return a(n)?r(n)?e:t:n},reachedAny:a,reachedMax:s,reachedMin:r,removeOffset:function(e){return n?e-n*Math.ceil((e-t)/n):e}}}function ce(e,t,n){const{constrain:r}=oe(0,e),s=e+1;let a=i(t);function i(e){return n?J((s+e)%s):r(e)}function o(){return a}function c(){return ce(e,o(),n)}const l={get:o,set:function(e){return a=i(e),l},add:function(e){return c().set(o()+e)},clone:c};return l}function le(e,t,n,r,s,a,i,o,c,l,d,u,g,m,f,x,h,y,p){const{cross:b,direction:j}=e,v=["INPUT","SELECT","TEXTAREA"],k={passive:!1},N=ae(),w=ae(),S=oe(50,225).constrain(m.measure(20)),C={mouse:300,touch:400},M={mouse:500,touch:600},_=f?43:25;let E=!1,D=0,F=0,I=!1,L=!1,T=!1,z=!1;function A(e){if(!se(e,r)&&e.touches.length>=2)return O(e);const t=a.readPoint(e),n=a.readPoint(e,b),i=W(t,D),c=W(n,F);if(!L&&!z){if(!e.cancelable)return O(e);if(L=i>c,!L)return O(e)}const d=a.pointerMove(e);i>x&&(T=!0),l.useFriction(.3).useDuration(.75),o.start(),s.add(j(d)),e.preventDefault()}function O(e){const t=d.byDistance(0,!1).index!==u.get(),n=a.pointerUp(e)*(f?M:C)[z?"mouse":"touch"],r=function(e,t){const n=u.add(-1*U(e)),r=d.byDistance(e,!f).distance;return f||J(e)<S?r:h&&t?.5*r:d.byIndex(n.get(),0).distance}(j(n),t),s=function(e,t){if(0===e||0===t)return 0;if(J(e)<=J(t))return 0;const n=W(J(e),J(t));return J(n/e)}(n,r),i=_-10*s,o=y+s/50;L=!1,I=!1,w.clear(),l.useDuration(i).useFriction(o),c.distance(r,!f),z=!1,g.emit("pointerUp")}function P(e){T&&(e.stopPropagation(),e.preventDefault(),T=!1)}return{init:function(e){if(!p)return;function o(o){(G(p)||p(e,o))&&function(e){const o=se(e,r);if(z=o,T=f&&o&&!e.buttons&&E,E=W(s.get(),i.get())>=2,o&&0!==e.button)return;if(function(e){const t=e.nodeName||"";return v.includes(t)}(e.target))return;I=!0,a.pointerDown(e),l.useFriction(0).useDuration(0),s.set(i),function(){const e=z?n:t;w.add(e,"touchmove",A,k).add(e,"touchend",O).add(e,"mousemove",A,k).add(e,"mouseup",O)}(),D=a.readPoint(e),F=a.readPoint(e,b),g.emit("pointerDown")}(o)}const c=t;N.add(c,"dragstart",e=>e.preventDefault(),k).add(c,"touchmove",()=>{},k).add(c,"touchend",()=>{}).add(c,"touchstart",o).add(c,"mousedown",o).add(c,"touchcancel",O).add(c,"contextmenu",O).add(c,"click",P,!0)},destroy:function(){N.clear(),w.clear()},pointerDown:function(){return I}}}function de(e,t){let n,r;function s(e){return e.timeStamp}function a(n,r){const s="client"+("x"===(r||e.scroll)?"X":"Y");return(se(n,t)?n:n.touches[0])[s]}return{pointerDown:function(e){return n=e,r=e,a(e)},pointerMove:function(e){const t=a(e)-a(r),i=s(e)-s(n)>170;return r=e,i&&(n=e),t},pointerUp:function(e){if(!n||!r)return 0;const t=a(r)-a(n),i=s(e)-s(n),o=s(e)-s(r)>170,c=t/i;return i&&!o&&J(c)>.1?c:0},readPoint:a}}function ue(e,t,n,r,s,a,i){const o=[e].concat(r);let c,l,d=[],u=!1;function g(e){return s.measureSize(i.measure(e))}return{init:function(s){a&&(l=g(e),d=r.map(g),c=new ResizeObserver(n=>{(G(a)||a(s,n))&&function(n){for(const a of n){if(u)return;const n=a.target===e,i=r.indexOf(a.target),o=n?l:d[i];if(J(g(n?e:r[i])-o)>=.5){s.reInit(),t.emit("resize");break}}}(n)}),n.requestAnimationFrame(()=>{o.forEach(e=>c.observe(e))}))},destroy:function(){u=!0,c&&c.disconnect()}}}function ge(e,t,n,r,s){const a=s.measure(10),i=s.measure(50),o=oe(.1,.99);let c=!1;function l(){return!c&&(!!e.reachedAny(n.get())&&!!e.reachedAny(t.get()))}return{shouldConstrain:l,constrain:function(s){if(!l())return;const c=e.reachedMin(t.get())?"min":"max",d=J(e[c]-t.get()),u=n.get()-t.get(),g=o.constrain(d/i);n.subtract(u*g),!s&&J(u)<a&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())},toggleActive:function(e){c=!e}}}function me(e,t,n,r){const s=t.min+.1,a=t.max+.1,{reachedMin:i,reachedMax:o}=oe(s,a);return{loop:function(t){if(!function(e){return 1===e?o(n.get()):-1===e&&i(n.get())}(t))return;const s=e*(-1*t);r.forEach(e=>e.add(s))}}}function fe(e,t,n,r,s){const{reachedAny:a,removeOffset:i,constrain:o}=r;function c(e){return e.concat().sort((e,t)=>J(e)-J(t))[0]}function l(t,r){const s=[t,t+n,t-n];if(!e)return t;if(!r)return c(s);const a=s.filter(e=>U(e)===r);return a.length?c(a):X(s)-n}return{byDistance:function(n,r){const c=s.get()+n,{index:d,distance:u}=function(n){const r=e?i(n):o(n),s=t.map((e,t)=>({diff:l(e-r,0),index:t})).sort((e,t)=>J(e.diff)-J(t.diff)),{index:a}=s[0];return{index:a,distance:r}}(c),g=!e&&a(c);return!r||g?{index:d,distance:n}:{index:d,distance:n+l(t[d]-u,0)}},byIndex:function(e,n){return{index:e,distance:l(t[e]-s.get(),n)}},shortcut:l}}function xe(e,t,n,r,s,a,i,o){const c={passive:!0,capture:!0};let l=0;function d(e){"Tab"===e.code&&(l=(new Date).getTime())}return{init:function(u){o&&(a.add(document,"keydown",d,!1),t.forEach((t,d)=>{a.add(t,"focus",t=>{(G(o)||o(u,t))&&function(t){if((new Date).getTime()-l>10)return;i.emit("slideFocusStart"),e.scrollLeft=0;const a=n.findIndex(e=>e.includes(t));K(a)&&(s.useDuration(0),r.index(a,0),i.emit("slideFocus"))}(d)},c)}))}}}function he(e){let t=e;function n(e){return K(e)?e:e.get()}return{get:function(){return t},set:function(e){t=n(e)},add:function(e){t+=n(e)},subtract:function(e){t-=n(e)}}}function ye(e,t){const n="x"===e.scroll?function(e){return`translate3d(${e}px,0px,0px)`}:function(e){return`translate3d(0px,${e}px,0px)`},r=t.style;let s=null,a=!1;return{clear:function(){a||(r.transform="",t.getAttribute("style")||t.removeAttribute("style"))},to:function(t){if(a)return;const i=(o=e.direction(t),Math.round(100*o)/100);var o;i!==s&&(r.transform=n(i),s=i)},toggleActive:function(e){a=!e}}}function pe(e,t,n,r,s,a,i,o,c){const l=Y(s),d=Y(s).reverse(),u=function(){const e=i[0];return f(m(d,e),n,!1)}().concat(function(){const e=t-i[0]-1;return f(m(l,e),-n,!0)}());function g(e,t){return e.reduce((e,t)=>e-s[t],t)}function m(e,t){return e.reduce((e,n)=>g(e,t)>0?e.concat([n]):e,[])}function f(s,i,l){const d=function(e){return a.map((n,s)=>({start:n-r[s]+.5+e,end:n+t-.5+e}))}(i);return s.map(t=>{const r=l?0:-n,s=l?n:0,a=l?"end":"start",i=d[t][a];return{index:t,loopPoint:i,slideLocation:he(-1),translate:ye(e,c[t]),target:()=>o.get()>i?r:s}})}return{canLoop:function(){return u.every(({index:e})=>g(l.filter(t=>t!==e),t)<=.1)},clear:function(){u.forEach(e=>e.translate.clear())},loop:function(){u.forEach(e=>{const{target:t,translate:n,slideLocation:r}=e,s=t();s!==r.get()&&(n.to(s),r.set(s))})},loopPoints:u}}function be(e,t,n){let r,s=!1;return{init:function(a){n&&(r=new MutationObserver(e=>{s||(G(n)||n(a,e))&&function(e){for(const n of e)if("childList"===n.type){a.reInit(),t.emit("slidesChanged");break}}(e)}),r.observe(e,{childList:!0}))},destroy:function(){r&&r.disconnect(),s=!0}}}function je(e,t,n,r){const s={};let a,i=null,o=null,c=!1;return{init:function(){a=new IntersectionObserver(e=>{c||(e.forEach(e=>{const n=t.indexOf(e.target);s[n]=e}),i=null,o=null,n.emit("slidesInView"))},{root:e.parentElement,threshold:r}),t.forEach(e=>a.observe(e))},destroy:function(){a&&a.disconnect(),c=!0},get:function(e=!0){if(e&&i)return i;if(!e&&o)return o;const t=function(e){return ne(s).reduce((t,n)=>{const r=parseInt(n),{isIntersecting:a}=s[r];return(e&&a||!e&&!a)&&t.push(r),t},[])}(e);return e&&(i=t),e||(o=t),t}}}function ve(e,t,n,r,s,a,i,o,c){const{startEdge:l,endEdge:d,direction:u}=e,g=K(n);return{groupSlides:function(e){return g?function(e,t){return Y(e).filter(e=>e%t===0).map(n=>e.slice(n,n+t))}(e,n):function(e){return e.length?Y(e).reduce((n,g,m)=>{const f=X(n)||0,x=0===f,h=g===Z(e),y=s[l]-a[f][l],p=s[l]-a[g][d],b=!r&&x?u(i):0,j=J(p-(!r&&h?u(o):0)-(y+b));return m&&j>t+c&&n.push(g),h&&n.push(e.length),n},[]).map((t,n,r)=>{const s=Math.max(r[n-1]||0);return e.slice(s,t)}):[]}(e)}}}function ke(e,t,n,r,s,a,i){const{align:o,axis:c,direction:l,startIndex:d,loop:u,duration:g,dragFree:m,dragThreshold:f,inViewThreshold:x,slidesToScroll:h,skipSnaps:y,containScroll:p,watchResize:b,watchSlides:j,watchDrag:v,watchFocus:k}=a,N={measure:function(e){const{offsetTop:t,offsetLeft:n,offsetWidth:r,offsetHeight:s}=e;return{top:t,right:n+r,bottom:t+s,left:n,width:r,height:s}}},w=N.measure(t),S=n.map(N.measure),C=function(e,t){const n="rtl"===t,r="y"===e,s=!r&&n?-1:1;return{scroll:r?"y":"x",cross:r?"x":"y",startEdge:r?"top":n?"right":"left",endEdge:r?"bottom":n?"left":"right",measureSize:function(e){const{height:t,width:n}=e;return r?t:n},direction:function(e){return e*s}}}(c,l),M=C.measureSize(w),_=function(e){return{measure:function(t){return e*(t/100)}}}(M),E=function(e,t){const n={start:function(){return 0},center:function(e){return r(e)/2},end:r};function r(e){return t-e}return{measure:function(r,s){return V(e)?n[e](r):e(t,r,s)}}}(o,M),D=!u&&!!p,F=u||!!p,{slideSizes:I,slideSizesWithGaps:L,startGap:T,endGap:z}=function(e,t,n,r,s,a){const{measureSize:i,startEdge:o,endEdge:c}=e,l=n[0]&&s,d=function(){if(!l)return 0;const e=n[0];return J(t[o]-e[o])}(),u=function(){if(!l)return 0;const e=a.getComputedStyle(X(r));return parseFloat(e.getPropertyValue(`margin-${c}`))}(),g=n.map(i),m=n.map((e,t,n)=>{const r=!t,s=ee(n,t);return r?g[t]+d:s?g[t]+u:n[t+1][o]-e[o]}).map(J);return{slideSizes:g,slideSizesWithGaps:m,startGap:d,endGap:u}}(C,w,S,n,F,s),A=ve(C,M,h,u,w,S,T,z,2),{snaps:O,snapsAligned:P}=function(e,t,n,r,s){const{startEdge:a,endEdge:i}=e,{groupSlides:o}=s,c=o(r).map(e=>X(e)[i]-e[0][a]).map(J).map(t.measure),l=r.map(e=>n[a]-e[a]).map(e=>-J(e)),d=o(l).map(e=>e[0]).map((e,t)=>e+c[t]);return{snaps:l,snapsAligned:d}}(C,E,w,S,A),B=-X(O)+X(L),{snapsContained:$,scrollContainLimit:q}=function(e,t,n,r,s){const a=oe(-t+e,0),i=n.map((e,t)=>{const{min:r,max:s}=a,i=a.constrain(e),o=!t,l=ee(n,t);return o?s:l||c(r,i)?r:c(s,i)?s:i}).map(e=>parseFloat(e.toFixed(3))),o=function(){const e=i[0],t=X(i);return oe(i.lastIndexOf(e),i.indexOf(t)+1)}();function c(e,t){return W(e,t)<=1}return{snapsContained:function(){if(t<=e+s)return[a.max];if("keepSnaps"===r)return i;const{min:n,max:c}=o;return i.slice(n,c)}(),scrollContainLimit:o}}(M,B,P,p,2),H=D?$:P,{limit:R}=function(e,t,n){const r=t[0];return{limit:oe(n?r-e:X(t),r)}}(B,H,u),K=ce(Z(H),d,u),G=K.clone(),Q=Y(n),ne=ie(r,s,()=>(({dragHandler:e,scrollBody:t,scrollBounds:n,options:{loop:r}})=>{r||n.constrain(e.pointerDown()),t.seek()})(Le),e=>(({scrollBody:e,translate:t,location:n,offsetLocation:r,previousLocation:s,scrollLooper:a,slideLooper:i,dragHandler:o,animation:c,eventHandler:l,scrollBounds:d,options:{loop:u}},g)=>{const m=e.settled(),f=!d.shouldConstrain(),x=u?m:m&&f,h=x&&!o.pointerDown();h&&c.stop();const y=n.get()*g+s.get()*(1-g);r.set(y),u&&(a.loop(e.direction()),i.loop()),t.to(r.get()),h&&l.emit("settle"),x||l.emit("scroll")})(Le,e)),re=H[K.get()],se=he(re),ke=he(re),Ne=he(re),we=he(re),Se=function(e,t,n,r,s,a){let i=0,o=0,c=s,l=a,d=e.get(),u=0;function g(e){return c=e,f}function m(e){return l=e,f}const f={direction:function(){return o},duration:function(){return c},velocity:function(){return i},seek:function(){const t=r.get()-e.get();let s=0;return c?(n.set(e),i+=t/c,i*=l,d+=i,e.add(i),s=d-u):(i=0,n.set(r),e.set(r),s=t),o=U(s),u=d,f},settled:function(){return J(r.get()-t.get())<.001},useBaseFriction:function(){return m(a)},useBaseDuration:function(){return g(s)},useFriction:m,useDuration:g};return f}(se,Ne,ke,we,g,.68),Ce=fe(u,H,B,R,we),Me=function(e,t,n,r,s,a,i){function o(s){const o=s.distance,c=s.index!==t.get();a.add(o),o&&(r.duration()?e.start():(e.update(),e.render(1),e.update())),c&&(n.set(t.get()),t.set(s.index),i.emit("select"))}return{distance:function(e,t){o(s.byDistance(e,t))},index:function(e,n){const r=t.clone().set(e);o(s.byIndex(r.get(),n))}}}(ne,K,G,Se,Ce,we,i),_e=function(e){const{max:t,length:n}=e;return{get:function(e){return n?(e-t)/-n:0}}}(R),Ee=ae(),De=je(t,n,i,x),{slideRegistry:Fe}=function(e,t,n,r,s,a){const{groupSlides:i}=s,{min:o,max:c}=r;return{slideRegistry:function(){const r=i(a),s=!e||"keepSnaps"===t;return 1===n.length?[a]:s?r:r.slice(o,c).map((e,t,n)=>{const r=!t,s=ee(n,t);return r?te(X(n[0])+1):s?te(Z(a)-X(n)[0]+1,X(n)[0]):e})}()}}(D,p,H,q,A,Q),Ie=xe(e,n,Fe,Me,Se,Ee,i,k),Le={ownerDocument:r,ownerWindow:s,eventHandler:i,containerRect:w,slideRects:S,animation:ne,axis:C,dragHandler:le(C,e,r,s,we,de(C,s),se,ne,Me,Se,Ce,K,i,_,m,f,y,.68,v),eventStore:Ee,percentOfView:_,index:K,indexPrevious:G,limit:R,location:se,offsetLocation:Ne,previousLocation:ke,options:a,resizeHandler:ue(t,i,s,n,C,b,N),scrollBody:Se,scrollBounds:ge(R,Ne,we,Se,_),scrollLooper:me(B,R,Ne,[se,Ne,ke,we]),scrollProgress:_e,scrollSnapList:H.map(_e.get),scrollSnaps:H,scrollTarget:Ce,scrollTo:Me,slideLooper:pe(C,M,B,I,L,O,H,Ne,n),slideFocus:Ie,slidesHandler:be(t,i,j),slidesInView:De,slideIndexes:Q,slideRegistry:Fe,slidesToScroll:A,target:we,translate:ye(C,t)};return Le}const Ne={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,inViewThreshold:0,breakpoints:{},dragFree:!1,dragThreshold:10,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0,watchFocus:!0};function we(e){function t(e,t){return re(e,t||{})}return{mergeOptions:t,optionsAtMedia:function(n){const r=n.breakpoints||{},s=ne(r).filter(t=>e.matchMedia(t).matches).map(e=>r[e]).reduce((e,n)=>t(e,n),{});return t(n,s)},optionsMediaQueries:function(t){return t.map(e=>ne(e.breakpoints||{})).reduce((e,t)=>e.concat(t),[]).map(e.matchMedia)}}}function Se(e,t,n){const r=e.ownerDocument,s=r.defaultView,a=we(s),i=function(e){let t=[];return{init:function(n,r){return t=r.filter(({options:t})=>!1!==e.optionsAtMedia(t).active),t.forEach(t=>t.init(n,e)),r.reduce((e,t)=>Object.assign(e,{[t.name]:t}),{})},destroy:function(){t=t.filter(e=>e.destroy())}}}(a),o=ae(),c=function(){let e,t={};function n(e){return t[e]||[]}const r={init:function(t){e=t},emit:function(t){return n(t).forEach(n=>n(e,t)),r},off:function(e,s){return t[e]=n(e).filter(e=>e!==s),r},on:function(e,s){return t[e]=n(e).concat([s]),r},clear:function(){t={}}};return r}(),{mergeOptions:l,optionsAtMedia:d,optionsMediaQueries:u}=a,{on:g,off:m,emit:f}=c,x=C;let h,y,p,b,j=!1,v=l(Ne,Se.globalOptions),k=l(v),N=[];function w(t){const n=ke(e,p,b,r,s,t,c);if(t.loop&&!n.slideLooper.canLoop()){return w(Object.assign({},t,{loop:!1}))}return n}function S(t,n){j||(v=l(v,t),k=d(v),N=n||N,function(){const{container:t,slides:n}=k,r=V(t)?e.querySelector(t):t;p=r||e.children[0];const s=V(n)?p.querySelectorAll(n):n;b=[].slice.call(s||p.children)}(),h=w(k),u([v,...N.map(({options:e})=>e)]).forEach(e=>o.add(e,"change",C)),k.active&&(h.translate.to(h.location.get()),h.animation.init(),h.slidesInView.init(),h.slideFocus.init(D),h.eventHandler.init(D),h.resizeHandler.init(D),h.slidesHandler.init(D),h.options.loop&&h.slideLooper.loop(),p.offsetParent&&b.length&&h.dragHandler.init(D),y=i.init(D,N)))}function C(e,t){const n=E();M(),S(l({startIndex:n},e),t),c.emit("reInit")}function M(){h.dragHandler.destroy(),h.eventStore.clear(),h.translate.clear(),h.slideLooper.clear(),h.resizeHandler.destroy(),h.slidesHandler.destroy(),h.slidesInView.destroy(),h.animation.destroy(),i.destroy(),o.clear()}function _(e,t,n){k.active&&!j&&(h.scrollBody.useBaseFriction().useDuration(!0===t?0:k.duration),h.scrollTo.index(e,n||0))}function E(){return h.index.get()}const D={canScrollNext:function(){return h.index.add(1).get()!==E()},canScrollPrev:function(){return h.index.add(-1).get()!==E()},containerNode:function(){return p},internalEngine:function(){return h},destroy:function(){j||(j=!0,o.clear(),M(),c.emit("destroy"),c.clear())},off:m,on:g,emit:f,plugins:function(){return y},previousScrollSnap:function(){return h.indexPrevious.get()},reInit:x,rootNode:function(){return e},scrollNext:function(e){_(h.index.add(1).get(),e,-1)},scrollPrev:function(e){_(h.index.add(-1).get(),e,1)},scrollProgress:function(){return h.scrollProgress.get(h.offsetLocation.get())},scrollSnapList:function(){return h.scrollSnapList},scrollTo:_,selectedScrollSnap:E,slideNodes:function(){return b},slidesInView:function(){return h.slidesInView.get()},slidesNotInView:function(){return h.slidesInView.get(!1)}};return S(t,n),setTimeout(()=>c.emit("init"),0),D}function Ce(e={},t=[]){const n=i.useRef(e),r=i.useRef(t),[s,a]=i.useState(),[o,c]=i.useState(),l=i.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return i.useEffect(()=>{H(n.current,e)||(n.current=e,l())},[e,l]),i.useEffect(()=>{(function(e,t){if(e.length!==t.length)return!1;const n=R(e),r=R(t);return n.every((e,t)=>H(e,r[t]))})(r.current,t)||(r.current=t,l())},[t,l]),i.useEffect(()=>{if("undefined"!=typeof window&&window.document&&window.document.createElement&&o){Se.globalOptions=Ce.globalOptions;const e=Se(o,n.current,r.current);return a(e),()=>e.destroy()}a(void 0)},[o,a]),[c,s]}Se.globalOptions=void 0,Ce.globalOptions=void 0;const Me={spike:"âš ï¸",trend:"ðŸ“ˆ",unusual:"ðŸ“Š",budget:"ðŸ’°",saving:"ðŸŽ‰"},_e={warning:"border-l-amber-500 bg-amber-50 dark:bg-amber-900/20",success:"border-l-green-500 bg-green-50 dark:bg-green-900/20",info:"border-l-blue-500 bg-blue-50 dark:bg-blue-900/20"};function Ee({insight:e,displayCurrency:n="JPY",onScrollToChart:r}){const{t:a}=w("common"),i=s();return t.jsx("div",{className:x("rounded-xl p-4 border-l-4 min-w-0","bg-white dark:bg-gray-800","shadow-sm",_e[e.severity]||_e.info),children:t.jsxs("div",{className:"flex items-start gap-3",children:[t.jsx("span",{className:"text-2xl flex-shrink-0",children:Me[e.type]||"ðŸ’¡"}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h4",{className:"font-semibold text-gray-900 dark:text-gray-100 truncate",children:e.title}),t.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:e.message}),e.amount&&t.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mt-1",children:[u(e.amount,n),e.percentage_change&&t.jsxs("span",{className:x("ml-2",e.percentage_change>0?"text-red-600":"text-green-600"),children:[e.percentage_change>0?"+":"",e.percentage_change,"%"]})]}),t.jsxs(f,{variant:"ghost",className:"mt-2 p-0 h-auto text-sm text-primary-600 hover:text-primary-700",onClick:()=>{e.category?i({to:"/transactions",search:{categories:e.category}}):"trend"!==e.type&&"unusual"!==e.type||null==r||r()},children:[e.category?a("analytics.viewTransactions",{category:e.category}):"trend"===e.type||"unusual"===e.type?a("analytics.viewBreakdown"):a("analytics.learnMore")," â†’"]})]})]})})}function De({insights:e,displayCurrency:n="JPY",onScrollToChart:r}){const{t:s}=w("common"),[a,o]=i.useState(0),[c,l]=Ce({loop:!1,align:"start",containScroll:"trimSnaps"}),d=i.useCallback(()=>{l&&o(l.selectedScrollSnap())},[l]);return i.useEffect(()=>{if(l)return d(),l.on("select",d),()=>{l.off("select",d)}},[l,d]),e&&0!==e.length?t.jsxs("div",{className:"relative",children:[e.length>1&&t.jsx("p",{className:"text-xs text-gray-400 text-center mb-2",children:s("analytics.swipeHint")}),t.jsx("div",{className:"overflow-hidden",ref:c,children:t.jsx("div",{className:"flex gap-3",children:e.map((e,s)=>t.jsx("div",{className:"flex-shrink-0 w-full min-w-0",children:t.jsx(Ee,{insight:e,displayCurrency:n,onScrollToChart:r})},`${e.type}-${e.category||s}`))})}),e.length>1&&t.jsx("div",{className:"flex justify-center gap-1.5 mt-3",children:e.map((e,n)=>t.jsx("button",{"aria-label":`Go to insight ${n+1}`,className:x("w-2 h-2 rounded-full transition-all",n===a?"bg-primary-600 w-4":"bg-gray-300 dark:bg-gray-600"),onClick:()=>null==l?void 0:l.scrollTo(n)},n))})]}):null}function Fe({selectedMonth:e,onChange:n,className:r}){const{i18n:s}=w(),a=S(e,1)>new Date;return t.jsxs("div",{className:x("flex items-center gap-2",r),children:[t.jsx("button",{onClick:()=>{n(C(e,1))},className:x("p-2 rounded-lg text-gray-600 dark:text-gray-400","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors"),"aria-label":"Previous month",children:"â†"}),t.jsx("span",{className:"min-w-[140px] text-center font-medium text-gray-900 dark:text-gray-100",children:(e=>{const t=s.language;return"ja"===t?M(e,"yyyyå¹´Mæœˆ"):"vi"===t?`ThÃ¡ng ${M(e,"M/yyyy")}`:M(e,"MMMM yyyy")})(e)}),t.jsx("button",{onClick:()=>{const t=S(e,1);t<=new Date&&n(t)},disabled:a,className:x("p-2 rounded-lg text-gray-600 dark:text-gray-400","hover:bg-gray-100 dark:hover:bg-gray-700","transition-colors",a&&"opacity-50 cursor-not-allowed"),"aria-label":"Next month",children:"â†’"})]})}const Ie=[{value:"current-month",labelKey:"analytics.currentMonth"},{value:"3-months",labelKey:"analytics.3months"},{value:"6-months",labelKey:"analytics.6months"},{value:"1-year",labelKey:"analytics.1year"}];function Le({selected:e,onChange:n,className:r}){const{t:s}=w("common");return t.jsx("div",{className:x("inline-flex rounded-lg bg-gray-100 dark:bg-gray-800 p-1",r),children:Ie.map(({value:r,labelKey:a})=>t.jsx("button",{onClick:()=>n(r),className:x("px-3 py-1.5 text-sm font-medium rounded-md transition-all",r===e?"bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-gray-200"),children:s(a)},r))})}const Te=a("/analytics")({component:function(){const{t:n}=w("common"),r=i.useRef(null),[s,a]=i.useState(new Date),[l,d]=i.useState("current-month"),[u,m]=i.useState(!1),f=function(e,t){const n=_(t),r=M(n>new Date?new Date:n,"yyyy-MM-dd");switch(e){case"current-month":return{start:M(E(t),"yyyy-MM-dd"),end:r};case"3-months":return{start:M(C(E(t),2),"yyyy-MM-dd"),end:r};case"6-months":return{start:M(C(E(t),5),"yyyy-MM-dd"),end:r};case"1-year":return{start:M(C(E(t),11),"yyyy-MM-dd"),end:r};default:return h()}}(l,s),{data:S,isLoading:D}=e({queryKey:["analytics",f],queryFn:()=>y(f)}),{data:F}=e({queryKey:["insights"],queryFn:g}),{data:I}=e({queryKey:["goals"],queryFn:p}),L=I&&I.length>0?Math.round(I[0].target_amount/(12*I[0].years)):null,z=i.useCallback(()=>{var e;null==(e=r.current)||e.scrollIntoView({behavior:"smooth"})},[]);return t.jsxs("div",{className:"max-w-3xl mx-auto px-4 py-6 sm:py-8",children:[t.jsxs("div",{className:"mb-6",children:[t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 dark:text-gray-100",children:n("analytics.title")}),t.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:n("analytics.subtitle")})]}),t.jsxs("div",{className:"mb-6 space-y-3",children:[t.jsx(Fe,{selectedMonth:s,onChange:e=>{a(e)},className:"justify-center"}),t.jsx("div",{className:"flex justify-center",children:t.jsx(Le,{selected:l,onChange:e=>{d(e)}})})]}),D?t.jsx("div",{className:"flex justify-center py-12",children:t.jsx(c,{size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[S&&t.jsx($,{analytics:S}),(null==F?void 0:F.insights)&&F.insights.length>0&&t.jsx(De,{insights:F.insights,onScrollToChart:z}),t.jsxs("div",{ref:r,className:"space-y-6",children:[t.jsxs(o,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("analytics.incomeVsExpense")}),t.jsx(N,{className:"h-64 sm:h-80",children:(null==S?void 0:S.monthly_trends)&&S.monthly_trends.length>0?t.jsx(b,{data:S.monthly_trends}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:n("analytics.noData")})})]}),t.jsxs(o,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("analytics.categoryBreakdown")}),t.jsx(N,{className:"h-64 sm:h-80",children:(null==S?void 0:S.category_breakdown)&&S.category_breakdown.length>0?t.jsx(j,{data:S.category_breakdown}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:n("analytics.noData")})})]}),t.jsxs(o,{children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4",children:n("analytics.monthlyCashFlow")}),t.jsx("div",{className:"h-64 sm:h-80",children:(null==S?void 0:S.monthly_trends)&&S.monthly_trends.length>0?S.monthly_trends.length<3?t.jsx(k,{data:S.monthly_trends,savingsGoal:L}):t.jsx(N,{className:"h-full",children:t.jsx(v,{data:S.monthly_trends,dataKey:"net"})}):t.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:n("analytics.noData")})})]})]}),t.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-xl overflow-hidden",children:[t.jsxs("button",{onClick:()=>m(!u),className:x("w-full px-4 py-3 flex items-center justify-between","bg-gray-50 dark:bg-gray-800","text-left font-medium text-gray-900 dark:text-gray-100"),children:[t.jsxs("span",{className:"flex items-center gap-2",children:[t.jsx("span",{children:"ðŸ¤–"}),n("analytics.aiTools")]}),t.jsx("span",{className:x("transform transition-transform",u?"rotate-180":""),children:"â–¼"})]}),u&&t.jsxs("div",{className:"p-4 space-y-4 bg-white dark:bg-gray-900",children:[t.jsx(P,{}),t.jsx(T,{})]})]})]})]})}});export{Te as Route};
