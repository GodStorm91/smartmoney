const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/gamification.lazy-BCHxKPun.js","assets/vendor-tanstack-DaKcK1QW.js","assets/vendor-react-Bx4JnVfy.js","assets/vendor-recharts-CdX2WCa7.js","assets/vendor-icons-ALW4ipAx.js","assets/Badge-zlubGKgD.js","assets/vendor-i18n-BrrOrGm_.js","assets/vendor-date-Be-7Lppd.js","assets/upload.lazy-831JX8Qz.js","assets/transactions.lazy-Ctg1KnGM.js","assets/Select-C9VGBjyK.js","assets/TransactionFormModal-DRsUobGD.js","assets/recurring-service-DPFqCjNp.js","assets/useCategories-D0wiQusU.js","assets/RecurringOptions-vWMPKTA5.js","assets/useXPGain-DyT_xoUD.js","assets/settings.lazy-D5YC21Yw.js","assets/crypto-BYIh_Q_q.js","assets/RecurringTransactionsList-B2FadOnj.js","assets/recurring.lazy-C-0iq7U4.js","assets/goals.lazy-CavBpunn.js","assets/budget.lazy-DqCkmJbw.js","assets/analytics.lazy-Bh-soQ6k.js","assets/accounts.lazy-CjU1mugI.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);import{h as r,d as n,j as a,Q as o,I as s,u as i,a as c,t as l,L as u,b as d,c as f,e as h,O as m,f as p,g,k as y,l as b,R as v}from"./vendor-tanstack-DaKcK1QW.js";import{a as x,r as w,c as k,g as j,$ as N,b as E,R as _}from"./vendor-react-Bx4JnVfy.js";import{c as S,_ as C}from"./vendor-recharts-CdX2WCa7.js";import{I as P,C as O,a as R,b as A,X as T,S as M,M as D,c as I,T as L,E as K,d as F,e as q,f as B,g as z,h as U,U as $,L as W,H as V,W as G,R as H,P as Y,i as J,j as X,k as Q,l as Z,m as ee,n as te,o as re,p as ne,B as ae,G as oe,q as se,r as ie,s as ce,t as le,u as ue,D as de,v as fe,w as he,x as me,y as pe,z as ge,A as ye,F as be,J as ve}from"./vendor-icons-ALW4ipAx.js";import{u as xe,i as we,B as ke,a as je,b as Ne}from"./vendor-i18n-BrrOrGm_.js";import{b as Ee,a as _e,c as Se,d as Ce,s as Pe,e as Oe,f as Re,g as Ae,h as Te,i as Me,j as De,k as Ie,l as Le,m as Ke,n as Fe,o as qe,p as Be,q as ze}from"./vendor-date-Be-7Lppd.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var Ue={},$e=x;Ue.createRoot=$e.createRoot,Ue.hydrateRoot=$e.hydrateRoot;var We=["added","removed","updated"];function Ve(e){return We.includes(e)}async function Ge({queryClient:e,persister:t,buster:r="",dehydrateOptions:a}){const o={buster:r,timestamp:Date.now(),clientState:n(e,a)};await t.persistClient(o)}var He=({children:e,persistOptions:t,onSuccess:n,onError:i,...c})=>{const[l,u]=w.useState(!0),d=w.useRef({persistOptions:t,onSuccess:n,onError:i}),f=w.useRef(!1);return w.useEffect(()=>{d.current={persistOptions:t,onSuccess:n,onError:i}}),w.useEffect(()=>{const e={...d.current.persistOptions,queryClient:c.client};return f.current||(f.current=!0,async function({queryClient:e,persister:t,maxAge:n=864e5,buster:a="",hydrateOptions:o}){try{const s=await t.restoreClient();if(s){if(!s.timestamp)return t.removeClient();{const i=Date.now()-s.timestamp>n,c=s.buster!==a;if(i||c)return t.removeClient();r(e,s.clientState,o)}}}catch(s){throw await t.removeClient(),s}}(e).then(()=>{var e,t;return null==(t=(e=d.current).onSuccess)?void 0:t.call(e)}).catch(()=>{var e,t;return null==(t=(e=d.current).onError)?void 0:t.call(e)}).finally(()=>{u(!1)})),l?void 0:function(e){const t=e.queryClient.getQueryCache().subscribe(t=>{Ve(t.type)&&Ge(e)}),r=e.queryClient.getMutationCache().subscribe(t=>{Ve(t.type)&&Ge(e)});return()=>{t(),r()}}(e)},[c.client,l]),a.jsx(o,{...c,children:a.jsx(s,{value:l,children:e})})};function Ye(e,t){return function(){return e.apply(t,arguments)}}const{toString:Je}=Object.prototype,{getPrototypeOf:Xe}=Object,{iterator:Qe,toStringTag:Ze}=Symbol,et=(e=>t=>{const r=Je.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),tt=e=>(e=e.toLowerCase(),t=>et(t)===e),rt=e=>t=>typeof t===e,{isArray:nt}=Array,at=rt("undefined");function ot(e){return null!==e&&!at(e)&&null!==e.constructor&&!at(e.constructor)&&ct(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const st=tt("ArrayBuffer");const it=rt("string"),ct=rt("function"),lt=rt("number"),ut=e=>null!==e&&"object"==typeof e,dt=e=>{if("object"!==et(e))return!1;const t=Xe(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Ze in e||Qe in e)},ft=tt("Date"),ht=tt("File"),mt=tt("Blob"),pt=tt("FileList"),gt=tt("URLSearchParams"),[yt,bt,vt,xt]=["ReadableStream","Request","Response","Headers"].map(tt);function wt(e,t,{allOwnKeys:r=!1}={}){if(null==e)return;let n,a;if("object"!=typeof e&&(e=[e]),nt(e))for(n=0,a=e.length;n<a;n++)t.call(null,e[n],n,e);else{if(ot(e))return;const a=r?Object.getOwnPropertyNames(e):Object.keys(e),o=a.length;let s;for(n=0;n<o;n++)s=a[n],t.call(null,e[s],s,e)}}function kt(e,t){if(ot(e))return null;t=t.toLowerCase();const r=Object.keys(e);let n,a=r.length;for(;a-- >0;)if(n=r[a],t===n.toLowerCase())return n;return null}const jt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Nt=e=>!at(e)&&e!==jt;const Et=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Xe(Uint8Array)),_t=tt("HTMLFormElement"),St=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),Ct=tt("RegExp"),Pt=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};wt(r,(r,a)=>{let o;!1!==(o=t(r,a,e))&&(n[a]=o||r)}),Object.defineProperties(e,n)};const Ot=tt("AsyncFunction"),Rt=(At="function"==typeof setImmediate,Tt=ct(jt.postMessage),At?setImmediate:Tt?(Mt=`axios@${Math.random()}`,Dt=[],jt.addEventListener("message",({source:e,data:t})=>{e===jt&&t===Mt&&Dt.length&&Dt.shift()()},!1),e=>{Dt.push(e),jt.postMessage(Mt,"*")}):e=>setTimeout(e));var At,Tt,Mt,Dt;const It="undefined"!=typeof queueMicrotask?queueMicrotask.bind(jt):"undefined"!=typeof process&&process.nextTick||Rt,Lt={isArray:nt,isArrayBuffer:st,isBuffer:ot,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||ct(e.append)&&("formdata"===(t=et(e))||"object"===t&&ct(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&st(e.buffer),t},isString:it,isNumber:lt,isBoolean:e=>!0===e||!1===e,isObject:ut,isPlainObject:dt,isEmptyObject:e=>{if(!ut(e)||ot(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:yt,isRequest:bt,isResponse:vt,isHeaders:xt,isUndefined:at,isDate:ft,isFile:ht,isBlob:mt,isRegExp:Ct,isFunction:ct,isStream:e=>ut(e)&&ct(e.pipe),isURLSearchParams:gt,isTypedArray:Et,isFileList:pt,forEach:wt,merge:function e(){const{caseless:t,skipUndefined:r}=Nt(this)&&this||{},n={},a=(a,o)=>{const s=t&&kt(n,o)||o;dt(n[s])&&dt(a)?n[s]=e(n[s],a):dt(a)?n[s]=e({},a):nt(a)?n[s]=a.slice():r&&at(a)||(n[s]=a)};for(let o=0,s=arguments.length;o<s;o++)arguments[o]&&wt(arguments[o],a);return n},extend:(e,t,r,{allOwnKeys:n}={})=>(wt(t,(t,n)=>{r&&ct(t)?e[n]=Ye(t,r):e[n]=t},{allOwnKeys:n}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},toFlatObject:(e,t,r,n)=>{let a,o,s;const i={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),o=a.length;o-- >0;)s=a[o],n&&!n(s,e,t)||i[s]||(t[s]=e[s],i[s]=!0);e=!1!==r&&Xe(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},kindOf:et,kindOfTest:tt,endsWith:(e,t,r)=>{e=String(e),(void 0===r||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return-1!==n&&n===r},toArray:e=>{if(!e)return null;if(nt(e))return e;let t=e.length;if(!lt(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},forEachEntry:(e,t)=>{const r=(e&&e[Qe]).call(e);let n;for(;(n=r.next())&&!n.done;){const r=n.value;t.call(e,r[0],r[1])}},matchAll:(e,t)=>{let r;const n=[];for(;null!==(r=e.exec(t));)n.push(r);return n},isHTMLForm:_t,hasOwnProperty:St,hasOwnProp:St,reduceDescriptors:Pt,freezeMethods:e=>{Pt(e,(t,r)=>{if(ct(e)&&-1!==["arguments","caller","callee"].indexOf(r))return!1;const n=e[r];ct(n)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")}))})},toObjectSet:(e,t)=>{const r={},n=e=>{e.forEach(e=>{r[e]=!0})};return nt(e)?n(e):n(String(e).split(t)),r},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,r){return t.toUpperCase()+r}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:kt,global:jt,isContextDefined:Nt,isSpecCompliantForm:function(e){return!!(e&&ct(e.append)&&"FormData"===e[Ze]&&e[Qe])},toJSONObject:e=>{const t=new Array(10),r=(e,n)=>{if(ut(e)){if(t.indexOf(e)>=0)return;if(ot(e))return e;if(!("toJSON"in e)){t[n]=e;const a=nt(e)?[]:{};return wt(e,(e,t)=>{const o=r(e,n+1);!at(o)&&(a[t]=o)}),t[n]=void 0,a}}return e};return r(e,0)},isAsyncFn:Ot,isThenable:e=>e&&(ut(e)||ct(e))&&ct(e.then)&&ct(e.catch),setImmediate:Rt,asap:It,isIterable:e=>null!=e&&ct(e[Qe])};function Kt(e,t,r,n,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),a&&(this.response=a,this.status=a.status?a.status:null)}Lt.inherits(Kt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Lt.toJSONObject(this.config),code:this.code,status:this.status}}});const Ft=Kt.prototype,qt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{qt[e]={value:e}}),Object.defineProperties(Kt,qt),Object.defineProperty(Ft,"isAxiosError",{value:!0}),Kt.from=(e,t,r,n,a,o)=>{const s=Object.create(Ft);Lt.toFlatObject(e,s,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const i=e&&e.message?e.message:"Error",c=null==t&&e?e.code:t;return Kt.call(s,i,c,r,n,a),e&&null==s.cause&&Object.defineProperty(s,"cause",{value:e,configurable:!0}),s.name=e&&e.name||"Error",o&&Object.assign(s,o),s};function Bt(e){return Lt.isPlainObject(e)||Lt.isArray(e)}function zt(e){return Lt.endsWith(e,"[]")?e.slice(0,-2):e}function Ut(e,t,r){return e?e.concat(t).map(function(e,t){return e=zt(e),!r&&t?"["+e+"]":e}).join(r?".":""):t}const $t=Lt.toFlatObject(Lt,{},null,function(e){return/^is[A-Z]/.test(e)});function Wt(e,t,r){if(!Lt.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const n=(r=Lt.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Lt.isUndefined(t[e])})).metaTokens,a=r.visitor||l,o=r.dots,s=r.indexes,i=(r.Blob||"undefined"!=typeof Blob&&Blob)&&Lt.isSpecCompliantForm(t);if(!Lt.isFunction(a))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Lt.isDate(e))return e.toISOString();if(Lt.isBoolean(e))return e.toString();if(!i&&Lt.isBlob(e))throw new Kt("Blob is not supported. Use a Buffer instead.");return Lt.isArrayBuffer(e)||Lt.isTypedArray(e)?i&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,r,a){let i=e;if(e&&!a&&"object"==typeof e)if(Lt.endsWith(r,"{}"))r=n?r:r.slice(0,-2),e=JSON.stringify(e);else if(Lt.isArray(e)&&function(e){return Lt.isArray(e)&&!e.some(Bt)}(e)||(Lt.isFileList(e)||Lt.endsWith(r,"[]"))&&(i=Lt.toArray(e)))return r=zt(r),i.forEach(function(e,n){!Lt.isUndefined(e)&&null!==e&&t.append(!0===s?Ut([r],n,o):null===s?r:r+"[]",c(e))}),!1;return!!Bt(e)||(t.append(Ut(a,r,o),c(e)),!1)}const u=[],d=Object.assign($t,{defaultVisitor:l,convertValue:c,isVisitable:Bt});if(!Lt.isObject(e))throw new TypeError("data must be an object");return function e(r,n){if(!Lt.isUndefined(r)){if(-1!==u.indexOf(r))throw Error("Circular reference detected in "+n.join("."));u.push(r),Lt.forEach(r,function(r,o){!0===(!(Lt.isUndefined(r)||null===r)&&a.call(t,r,Lt.isString(o)?o.trim():o,n,d))&&e(r,n?n.concat(o):[o])}),u.pop()}}(e),t}function Vt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Gt(e,t){this._pairs=[],e&&Wt(e,this,t)}const Ht=Gt.prototype;function Yt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Jt(e,t,r){if(!t)return e;const n=r&&r.encode||Yt;Lt.isFunction(r)&&(r={serialize:r});const a=r&&r.serialize;let o;if(o=a?a(t,r):Lt.isURLSearchParams(t)?t.toString():new Gt(t,r).toString(n),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}Ht.append=function(e,t){this._pairs.push([e,t])},Ht.toString=function(e){const t=e?function(t){return e.call(this,t,Vt)}:Vt;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Xt{constructor(){this.handlers=[]}use(e,t,r){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Lt.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Qt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Zt={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Gt,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},er="undefined"!=typeof window&&"undefined"!=typeof document,tr="object"==typeof navigator&&navigator||void 0,rr=er&&(!tr||["ReactNative","NativeScript","NS"].indexOf(tr.product)<0),nr="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,ar=er&&window.location.href||"http://localhost",or={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:er,hasStandardBrowserEnv:rr,hasStandardBrowserWebWorkerEnv:nr,navigator:tr,origin:ar},Symbol.toStringTag,{value:"Module"})),...Zt};function sr(e){function t(e,r,n,a){let o=e[a++];if("__proto__"===o)return!0;const s=Number.isFinite(+o),i=a>=e.length;if(o=!o&&Lt.isArray(n)?n.length:o,i)return Lt.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!s;n[o]&&Lt.isObject(n[o])||(n[o]=[]);return t(e,r,n[o],a)&&Lt.isArray(n[o])&&(n[o]=function(e){const t={},r=Object.keys(e);let n;const a=r.length;let o;for(n=0;n<a;n++)o=r[n],t[o]=e[o];return t}(n[o])),!s}if(Lt.isFormData(e)&&Lt.isFunction(e.entries)){const r={};return Lt.forEachEntry(e,(e,n)=>{t(function(e){return Lt.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),n,r,0)}),r}return null}const ir={transitional:Qt,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const r=t.getContentType()||"",n=r.indexOf("application/json")>-1,a=Lt.isObject(e);a&&Lt.isHTMLForm(e)&&(e=new FormData(e));if(Lt.isFormData(e))return n?JSON.stringify(sr(e)):e;if(Lt.isArrayBuffer(e)||Lt.isBuffer(e)||Lt.isStream(e)||Lt.isFile(e)||Lt.isBlob(e)||Lt.isReadableStream(e))return e;if(Lt.isArrayBufferView(e))return e.buffer;if(Lt.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Wt(e,new or.classes.URLSearchParams,{visitor:function(e,t,r,n){return or.isNode&&Lt.isBuffer(e)?(this.append(t,e.toString("base64")),!1):n.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((o=Lt.isFileList(e))||r.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Wt(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||n?(t.setContentType("application/json",!1),function(e,t,r){if(Lt.isString(e))try{return(t||JSON.parse)(e),Lt.trim(e)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ir.transitional,r=t&&t.forcedJSONParsing,n="json"===this.responseType;if(Lt.isResponse(e)||Lt.isReadableStream(e))return e;if(e&&Lt.isString(e)&&(r&&!this.responseType||n)){const r=!(t&&t.silentJSONParsing)&&n;try{return JSON.parse(e,this.parseReviver)}catch(a){if(r){if("SyntaxError"===a.name)throw Kt.from(a,Kt.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:or.classes.FormData,Blob:or.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Lt.forEach(["delete","get","head","post","put","patch"],e=>{ir.headers[e]={}});const cr=Lt.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),lr=Symbol("internals");function ur(e){return e&&String(e).trim().toLowerCase()}function dr(e){return!1===e||null==e?e:Lt.isArray(e)?e.map(dr):String(e)}function fr(e,t,r,n,a){return Lt.isFunction(n)?n.call(this,t,r):(a&&(t=r),Lt.isString(t)?Lt.isString(n)?-1!==t.indexOf(n):Lt.isRegExp(n)?n.test(t):void 0:void 0)}let hr=class{constructor(e){e&&this.set(e)}set(e,t,r){const n=this;function a(e,t,r){const a=ur(t);if(!a)throw new Error("header name must be a non-empty string");const o=Lt.findKey(n,a);(!o||void 0===n[o]||!0===r||void 0===r&&!1!==n[o])&&(n[o||t]=dr(e))}const o=(e,t)=>Lt.forEach(e,(e,r)=>a(e,r,t));if(Lt.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Lt.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let r,n,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),r=e.substring(0,a).trim().toLowerCase(),n=e.substring(a+1).trim(),!r||t[r]&&cr[r]||("set-cookie"===r?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t})(e),t);else if(Lt.isObject(e)&&Lt.isIterable(e)){let r,n,a={};for(const t of e){if(!Lt.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[n=t[0]]=(r=a[n])?Lt.isArray(r)?[...r,t[1]]:[r,t[1]]:t[1]}o(a,t)}else null!=e&&a(t,e,r);return this}get(e,t){if(e=ur(e)){const r=Lt.findKey(this,e);if(r){const e=this[r];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}(e);if(Lt.isFunction(t))return t.call(this,e,r);if(Lt.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=ur(e)){const r=Lt.findKey(this,e);return!(!r||void 0===this[r]||t&&!fr(0,this[r],r,t))}return!1}delete(e,t){const r=this;let n=!1;function a(e){if(e=ur(e)){const a=Lt.findKey(r,e);!a||t&&!fr(0,r[a],a,t)||(delete r[a],n=!0)}}return Lt.isArray(e)?e.forEach(a):a(e),n}clear(e){const t=Object.keys(this);let r=t.length,n=!1;for(;r--;){const a=t[r];e&&!fr(0,this[a],a,e,!0)||(delete this[a],n=!0)}return n}normalize(e){const t=this,r={};return Lt.forEach(this,(n,a)=>{const o=Lt.findKey(r,a);if(o)return t[o]=dr(n),void delete t[a];const s=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,r)=>t.toUpperCase()+r)}(a):String(a).trim();s!==a&&delete t[a],t[s]=dr(n),r[s]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Lt.forEach(this,(r,n)=>{null!=r&&!1!==r&&(t[n]=e&&Lt.isArray(r)?r.join(", "):r)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const r=new this(e);return t.forEach(e=>r.set(e)),r}static accessor(e){const t=(this[lr]=this[lr]={accessors:{}}).accessors,r=this.prototype;function n(e){const n=ur(e);t[n]||(!function(e,t){const r=Lt.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(e,r,a){return this[n].call(this,t,e,r,a)},configurable:!0})})}(r,e),t[n]=!0)}return Lt.isArray(e)?e.forEach(n):n(e),this}};function mr(e,t){const r=this||ir,n=t||r,a=hr.from(n.headers);let o=n.data;return Lt.forEach(e,function(e){o=e.call(r,o,a.normalize(),t?t.status:void 0)}),a.normalize(),o}function pr(e){return!(!e||!e.__CANCEL__)}function gr(e,t,r){Kt.call(this,null==e?"canceled":e,Kt.ERR_CANCELED,t,r),this.name="CanceledError"}function yr(e,t,r){const n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(new Kt("Request failed with status code "+r.status,[Kt.ERR_BAD_REQUEST,Kt.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r)):e(r)}hr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Lt.reduceDescriptors(hr.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[r]=e}}}),Lt.freezeMethods(hr),Lt.inherits(gr,Kt,{__CANCEL__:!0});const br=(e,t,r=3)=>{let n=0;const a=function(e,t){e=e||10;const r=new Array(e),n=new Array(e);let a,o=0,s=0;return t=void 0!==t?t:1e3,function(i){const c=Date.now(),l=n[s];a||(a=c),r[o]=i,n[o]=c;let u=s,d=0;for(;u!==o;)d+=r[u++],u%=e;if(o=(o+1)%e,o===s&&(s=(s+1)%e),c-a<t)return;const f=l&&c-l;return f?Math.round(1e3*d/f):void 0}}(50,250);return function(e,t){let r,n,a=0,o=1e3/t;const s=(t,o=Date.now())=>{a=o,r=null,n&&(clearTimeout(n),n=null),e(...t)};return[(...e)=>{const t=Date.now(),i=t-a;i>=o?s(e,t):(r=e,n||(n=setTimeout(()=>{n=null,s(r)},o-i)))},()=>r&&s(r)]}(r=>{const o=r.loaded,s=r.lengthComputable?r.total:void 0,i=o-n,c=a(i);n=o;e({loaded:o,total:s,progress:s?o/s:void 0,bytes:i,rate:c||void 0,estimated:c&&s&&o<=s?(s-o)/c:void 0,event:r,lengthComputable:null!=s,[t?"download":"upload"]:!0})},r)},vr=(e,t)=>{const r=null!=e;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},xr=e=>(...t)=>Lt.asap(()=>e(...t)),wr=or.hasStandardBrowserEnv?((e,t)=>r=>(r=new URL(r,or.origin),e.protocol===r.protocol&&e.host===r.host&&(t||e.port===r.port)))(new URL(or.origin),or.navigator&&/(msie|trident)/i.test(or.navigator.userAgent)):()=>!0,kr=or.hasStandardBrowserEnv?{write(e,t,r,n,a,o,s){if("undefined"==typeof document)return;const i=[`${e}=${encodeURIComponent(t)}`];Lt.isNumber(r)&&i.push(`expires=${new Date(r).toUTCString()}`),Lt.isString(n)&&i.push(`path=${n}`),Lt.isString(a)&&i.push(`domain=${a}`),!0===o&&i.push("secure"),Lt.isString(s)&&i.push(`SameSite=${s}`),document.cookie=i.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function jr(e,t,r){let n=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(n||0==r)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Nr=e=>e instanceof hr?{...e}:e;function Er(e,t){t=t||{};const r={};function n(e,t,r,n){return Lt.isPlainObject(e)&&Lt.isPlainObject(t)?Lt.merge.call({caseless:n},e,t):Lt.isPlainObject(t)?Lt.merge({},t):Lt.isArray(t)?t.slice():t}function a(e,t,r,a){return Lt.isUndefined(t)?Lt.isUndefined(e)?void 0:n(void 0,e,0,a):n(e,t,0,a)}function o(e,t){if(!Lt.isUndefined(t))return n(void 0,t)}function s(e,t){return Lt.isUndefined(t)?Lt.isUndefined(e)?void 0:n(void 0,e):n(void 0,t)}function i(r,a,o){return o in t?n(r,a):o in e?n(void 0,r):void 0}const c={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:i,headers:(e,t,r)=>a(Nr(e),Nr(t),0,!0)};return Lt.forEach(Object.keys({...e,...t}),function(n){const o=c[n]||a,s=o(e[n],t[n],n);Lt.isUndefined(s)&&o!==i||(r[n]=s)}),r}const _r=e=>{const t=Er({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:a,xsrfCookieName:o,headers:s,auth:i}=t;if(t.headers=s=hr.from(s),t.url=Jt(jr(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),i&&s.set("Authorization","Basic "+btoa((i.username||"")+":"+(i.password?unescape(encodeURIComponent(i.password)):""))),Lt.isFormData(r))if(or.hasStandardBrowserEnv||or.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(Lt.isFunction(r.getHeaders)){const e=r.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,r])=>{t.includes(e.toLowerCase())&&s.set(e,r)})}if(or.hasStandardBrowserEnv&&(n&&Lt.isFunction(n)&&(n=n(t)),n||!1!==n&&wr(t.url))){const e=a&&o&&kr.read(o);e&&s.set(a,e)}return t},Sr="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,r){const n=_r(e);let a=n.data;const o=hr.from(n.headers).normalize();let s,i,c,l,u,{responseType:d,onUploadProgress:f,onDownloadProgress:h}=n;function m(){l&&l(),u&&u(),n.cancelToken&&n.cancelToken.unsubscribe(s),n.signal&&n.signal.removeEventListener("abort",s)}let p=new XMLHttpRequest;function g(){if(!p)return;const n=hr.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());yr(function(e){t(e),m()},function(e){r(e),m()},{data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:n,config:e,request:p}),p=null}p.open(n.method.toUpperCase(),n.url,!0),p.timeout=n.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(r(new Kt("Request aborted",Kt.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const n=new Kt(t&&t.message?t.message:"Network Error",Kt.ERR_NETWORK,e,p);n.event=t||null,r(n),p=null},p.ontimeout=function(){let t=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const a=n.transitional||Qt;n.timeoutErrorMessage&&(t=n.timeoutErrorMessage),r(new Kt(t,a.clarifyTimeoutError?Kt.ETIMEDOUT:Kt.ECONNABORTED,e,p)),p=null},void 0===a&&o.setContentType(null),"setRequestHeader"in p&&Lt.forEach(o.toJSON(),function(e,t){p.setRequestHeader(t,e)}),Lt.isUndefined(n.withCredentials)||(p.withCredentials=!!n.withCredentials),d&&"json"!==d&&(p.responseType=n.responseType),h&&([c,u]=br(h,!0),p.addEventListener("progress",c)),f&&p.upload&&([i,l]=br(f),p.upload.addEventListener("progress",i),p.upload.addEventListener("loadend",l)),(n.cancelToken||n.signal)&&(s=t=>{p&&(r(!t||t.type?new gr(null,e,p):t),p.abort(),p=null)},n.cancelToken&&n.cancelToken.subscribe(s),n.signal&&(n.signal.aborted?s():n.signal.addEventListener("abort",s)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(n.url);y&&-1===or.protocols.indexOf(y)?r(new Kt("Unsupported protocol "+y+":",Kt.ERR_BAD_REQUEST,e)):p.send(a||null)})},Cr=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let r,n=new AbortController;const a=function(e){if(!r){r=!0,s();const t=e instanceof Error?e:this.reason;n.abort(t instanceof Kt?t:new gr(t instanceof Error?t.message:t))}};let o=t&&setTimeout(()=>{o=null,a(new Kt(`timeout ${t} of ms exceeded`,Kt.ETIMEDOUT))},t);const s=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:i}=n;return i.unsubscribe=()=>Lt.asap(s),i}},Pr=function*(e,t){let r=e.byteLength;if(r<t)return void(yield e);let n,a=0;for(;a<r;)n=a+t,yield e.slice(a,n),a=n},Or=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:r}=await t.read();if(e)break;yield r}}finally{await t.cancel()}},Rr=(e,t,r,n)=>{const a=async function*(e,t){for await(const r of Or(e))yield*Pr(r,t)}(e,t);let o,s=0,i=e=>{o||(o=!0,n&&n(e))};return new ReadableStream({async pull(e){try{const{done:t,value:n}=await a.next();if(t)return i(),void e.close();let o=n.byteLength;if(r){let e=s+=o;r(e)}e.enqueue(new Uint8Array(n))}catch(t){throw i(t),t}},cancel:e=>(i(e),a.return())},{highWaterMark:2})},{isFunction:Ar}=Lt,Tr=(({Request:e,Response:t})=>({Request:e,Response:t}))(Lt.global),{ReadableStream:Mr,TextEncoder:Dr}=Lt.global,Ir=(e,...t)=>{try{return!!e(...t)}catch(r){return!1}},Lr=e=>{e=Lt.merge.call({skipUndefined:!0},Tr,e);const{fetch:t,Request:r,Response:n}=e,a=t?Ar(t):"function"==typeof fetch,o=Ar(r),s=Ar(n);if(!a)return!1;const i=a&&Ar(Mr),c=a&&("function"==typeof Dr?(e=>t=>e.encode(t))(new Dr):async e=>new Uint8Array(await new r(e).arrayBuffer())),l=o&&i&&Ir(()=>{let e=!1;const t=new r(or.origin,{body:new Mr,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=s&&i&&Ir(()=>Lt.isReadableStream(new n("").body)),d={stream:u&&(e=>e.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,r)=>{let n=t&&t[e];if(n)return n.call(t);throw new Kt(`Response type '${e}' is not supported`,Kt.ERR_NOT_SUPPORT,r)})});const f=async(e,t)=>{const n=Lt.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Lt.isBlob(e))return e.size;if(Lt.isSpecCompliantForm(e)){const t=new r(or.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Lt.isArrayBufferView(e)||Lt.isArrayBuffer(e)?e.byteLength:(Lt.isURLSearchParams(e)&&(e+=""),Lt.isString(e)?(await c(e)).byteLength:void 0)})(t):n};return async e=>{let{url:a,method:s,data:i,signal:c,cancelToken:h,timeout:m,onDownloadProgress:p,onUploadProgress:g,responseType:y,headers:b,withCredentials:v="same-origin",fetchOptions:x}=_r(e),w=t||fetch;y=y?(y+"").toLowerCase():"text";let k=Cr([c,h&&h.toAbortSignal()],m),j=null;const N=k&&k.unsubscribe&&(()=>{k.unsubscribe()});let E;try{if(g&&l&&"get"!==s&&"head"!==s&&0!==(E=await f(b,i))){let e,t=new r(a,{method:"POST",body:i,duplex:"half"});if(Lt.isFormData(i)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,r]=vr(E,br(xr(g)));i=Rr(t.body,65536,e,r)}}Lt.isString(v)||(v=v?"include":"omit");const t=o&&"credentials"in r.prototype,c={...x,signal:k,method:s.toUpperCase(),headers:b.normalize().toJSON(),body:i,duplex:"half",credentials:t?v:void 0};j=o&&new r(a,c);let h=await(o?w(j,x):w(a,c));const m=u&&("stream"===y||"response"===y);if(u&&(p||m&&N)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});const t=Lt.toFiniteNumber(h.headers.get("content-length")),[r,a]=p&&vr(t,br(xr(p),!0))||[];h=new n(Rr(h.body,65536,r,()=>{a&&a(),N&&N()}),e)}y=y||"text";let _=await d[Lt.findKey(d,y)||"text"](h,e);return!m&&N&&N(),await new Promise((t,r)=>{yr(t,r,{data:_,headers:hr.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:j})})}catch(_){if(N&&N(),_&&"TypeError"===_.name&&/Load failed|fetch/i.test(_.message))throw Object.assign(new Kt("Network Error",Kt.ERR_NETWORK,e,j),{cause:_.cause||_});throw Kt.from(_,_&&_.code,e,j)}}},Kr=new Map,Fr=e=>{let t=e&&e.env||{};const{fetch:r,Request:n,Response:a}=t,o=[n,a,r];let s,i,c=o.length,l=Kr;for(;c--;)s=o[c],i=l.get(s),void 0===i&&l.set(s,i=c?new Map:Lr(t)),l=i;return i};Fr();const qr={http:null,xhr:Sr,fetch:{get:Fr}};Lt.forEach(qr,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(r){}Object.defineProperty(e,"adapterName",{value:t})}});const Br=e=>`- ${e}`,zr=e=>Lt.isFunction(e)||null===e||!1===e;const Ur={getAdapter:function(e,t){e=Lt.isArray(e)?e:[e];const{length:r}=e;let n,a;const o={};for(let s=0;s<r;s++){let r;if(n=e[s],a=n,!zr(n)&&(a=qr[(r=String(n)).toLowerCase()],void 0===a))throw new Kt(`Unknown adapter '${r}'`);if(a&&(Lt.isFunction(a)||(a=a.get(t))))break;o[r||"#"+s]=a}if(!a){const e=Object.entries(o).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new Kt("There is no suitable adapter to dispatch the request "+(r?e.length>1?"since :\n"+e.map(Br).join("\n"):" "+Br(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return a},adapters:qr};function $r(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new gr(null,e)}function Wr(e){$r(e),e.headers=hr.from(e.headers),e.data=mr.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ur.getAdapter(e.adapter||ir.adapter,e)(e).then(function(t){return $r(e),t.data=mr.call(e,e.transformResponse,t),t.headers=hr.from(t.headers),t},function(t){return pr(t)||($r(e),t&&t.response&&(t.response.data=mr.call(e,e.transformResponse,t.response),t.response.headers=hr.from(t.response.headers))),Promise.reject(t)})}const Vr="1.13.2",Gr={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Gr[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Hr={};Gr.transitional=function(e,t,r){return(n,a,o)=>{if(!1===e)throw new Kt(function(e,t){return"[Axios v"+Vr+"] Transitional option '"+e+"'"+t+(r?". "+r:"")}(a," has been removed"+(t?" in "+t:"")),Kt.ERR_DEPRECATED);return t&&!Hr[a]&&(Hr[a]=!0),!e||e(n,a,o)}},Gr.spelling=function(e){return(e,t)=>!0};const Yr={assertOptions:function(e,t,r){if("object"!=typeof e)throw new Kt("options must be an object",Kt.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let a=n.length;for(;a-- >0;){const o=n[a],s=t[o];if(s){const t=e[o],r=void 0===t||s(t,o,e);if(!0!==r)throw new Kt("option "+o+" must be "+r,Kt.ERR_BAD_OPTION_VALUE);continue}if(!0!==r)throw new Kt("Unknown option "+o,Kt.ERR_BAD_OPTION)}},validators:Gr},Jr=Yr.validators;let Xr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Xt,response:new Xt}}async request(e,t){try{return await this._request(e,t)}catch(r){if(r instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{r.stack?t&&!String(r.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(r.stack+="\n"+t):r.stack=t}catch(n){}}throw r}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Er(this.defaults,t);const{transitional:r,paramsSerializer:n,headers:a}=t;void 0!==r&&Yr.assertOptions(r,{silentJSONParsing:Jr.transitional(Jr.boolean),forcedJSONParsing:Jr.transitional(Jr.boolean),clarifyTimeoutError:Jr.transitional(Jr.boolean)},!1),null!=n&&(Lt.isFunction(n)?t.paramsSerializer={serialize:n}:Yr.assertOptions(n,{encode:Jr.function,serialize:Jr.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Yr.assertOptions(t,{baseUrl:Jr.spelling("baseURL"),withXsrfToken:Jr.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=a&&Lt.merge(a.common,a[t.method]);a&&Lt.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=hr.concat(o,a);const s=[];let i=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(i=i&&e.synchronous,s.unshift(e.fulfilled,e.rejected))});const c=[];let l;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u,d=0;if(!i){const e=[Wr.bind(this),void 0];for(e.unshift(...s),e.push(...c),u=e.length,l=Promise.resolve(t);d<u;)l=l.then(e[d++],e[d++]);return l}u=s.length;let f=t;for(;d<u;){const e=s[d++],t=s[d++];try{f=e(f)}catch(h){t.call(this,h);break}}try{l=Wr.call(this,f)}catch(h){return Promise.reject(h)}for(d=0,u=c.length;d<u;)l=l.then(c[d++],c[d++]);return l}getUri(e){return Jt(jr((e=Er(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Lt.forEach(["delete","get","head","options"],function(e){Xr.prototype[e]=function(t,r){return this.request(Er(r||{},{method:e,url:t,data:(r||{}).data}))}}),Lt.forEach(["post","put","patch"],function(e){function t(t){return function(r,n,a){return this.request(Er(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}Xr.prototype[e]=t(),Xr.prototype[e+"Form"]=t(!0)});const Qr={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Qr).forEach(([e,t])=>{Qr[t]=e});const Zr=function e(t){const r=new Xr(t),n=Ye(Xr.prototype.request,r);return Lt.extend(n,Xr.prototype,r,{allOwnKeys:!0}),Lt.extend(n,r,null,{allOwnKeys:!0}),n.create=function(r){return e(Er(t,r))},n}(ir);Zr.Axios=Xr,Zr.CanceledError=gr,Zr.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const r=this;this.promise.then(e=>{if(!r._listeners)return;let t=r._listeners.length;for(;t-- >0;)r._listeners[t](e);r._listeners=null}),this.promise.then=e=>{let t;const n=new Promise(e=>{r.subscribe(e),t=e}).then(e);return n.cancel=function(){r.unsubscribe(t)},n},e(function(e,n,a){r.reason||(r.reason=new gr(e,n,a),t(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},Zr.isCancel=pr,Zr.VERSION=Vr,Zr.toFormData=Wt,Zr.AxiosError=Kt,Zr.Cancel=Zr.CanceledError,Zr.all=function(e){return Promise.all(e)},Zr.spread=function(e){return function(t){return e.apply(null,t)}},Zr.isAxiosError=function(e){return Lt.isObject(e)&&!0===e.isAxiosError},Zr.mergeConfig=Er,Zr.AxiosHeaders=hr,Zr.formToJSON=e=>sr(Lt.isHTMLForm(e)?new FormData(e):e),Zr.getAdapter=Ur.getAdapter,Zr.HttpStatusCode=Qr,Zr.default=Zr;const{Axios:en,AxiosError:tn,CanceledError:rn,isCancel:nn,CancelToken:an,VERSION:on,all:sn,Cancel:cn,isAxiosError:ln,spread:un,toFormData:dn,AxiosHeaders:fn,HttpStatusCode:hn,formToJSON:mn,getAdapter:pn,mergeConfig:gn}=Zr,yn=Zr.create({baseURL:"",timeout:6e4,headers:{"Content-Type":"application/json"}});yn.interceptors.response.use(e=>e,e=>Promise.reject(e));const bn=w.createContext(void 0),vn="smartmoney_access_token",xn="smartmoney_refresh_token";function wn({children:e}){const[t,r]=w.useState(null),[n,o]=w.useState(!0),s=w.useCallback(()=>{localStorage.removeItem(vn),localStorage.removeItem(xn),r(null),o(!1)},[]),i=w.useCallback(async()=>{const e=localStorage.getItem(xn);if(!e)return!1;try{const t="",n=await Zr.post(`${t}/api/auth/refresh`,{refresh_token:e}),{access_token:a,refresh_token:o}=n.data;localStorage.setItem(vn,a),localStorage.setItem(xn,o);const s=await yn.get("/api/auth/me",{headers:{Authorization:`Bearer ${a}`}});return r(s.data),!0}catch{return localStorage.removeItem(vn),localStorage.removeItem(xn),!1}},[]);w.useEffect(()=>{const e=yn.interceptors.request.use(e=>{const t=localStorage.getItem(vn);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),t=yn.interceptors.response.use(e=>e,async e=>{var t,r;const n=e.config,a=null==(t=null==n?void 0:n.url)?void 0:t.includes("/api/auth/");if(401===(null==(r=e.response)?void 0:r.status)&&!n._retry&&!a){n._retry=!0;if(await i()){const e=localStorage.getItem(vn);return n.headers.Authorization=`Bearer ${e}`,yn(n)}s()}return Promise.reject(e)});return()=>{yn.interceptors.request.eject(e),yn.interceptors.response.eject(t)}},[i,s]),w.useEffect(()=>{(async()=>{if(localStorage.getItem(vn))try{const e=await yn.get("/api/auth/me");r(e.data)}catch{await i()||r(null)}o(!1)})()},[i]);return a.jsx(bn.Provider,{value:{user:t,isLoading:n,isAuthenticated:!!t,login:async(e,t)=>{const n=new URLSearchParams;n.append("username",e),n.append("password",t);const a=await yn.post("/api/auth/login",n,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}),{access_token:o,refresh_token:s}=a.data;localStorage.setItem(vn,o),localStorage.setItem(xn,s);const i=await yn.get("/api/auth/me",{headers:{Authorization:`Bearer ${o}`}});r(i.data)},logout:s,refreshToken:i},children:e})}function kn(){const e=w.useContext(bn);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}async function jn(){return(await yn.get("/api/settings")).data}async function Nn(e){return(await yn.put("/api/settings",e)).data}const En=w.createContext(void 0);function _n({children:e}){const{data:t,isLoading:r}=i({queryKey:["settings"],queryFn:jn}),n={settings:t,isLoading:r,currency:(null==t?void 0:t.currency)||"JPY",baseDate:(null==t?void 0:t.base_date)||25};return a.jsx(En.Provider,{value:n,children:e})}function Sn(){const e=w.useContext(En);if(void 0===e)throw new Error("useSettings must be used within a SettingsProvider");return e}const Cn=w.createContext(void 0),Pn="smartmoney_privacy_mode";function On({children:e}){const[t,r]=w.useState(()=>"true"===localStorage.getItem(Pn));w.useEffect(()=>{localStorage.setItem(Pn,String(t))},[t]);return a.jsx(Cn.Provider,{value:{isPrivacyMode:t,togglePrivacyMode:()=>{r(e=>!e)}},children:e})}function Rn(){const e=w.useContext(Cn);if(void 0===e)throw new Error("usePrivacy must be used within a PrivacyProvider");return e}const An=w.createContext(void 0),Tn="smartmoney-theme";function Mn(){return"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function Dn(){if("undefined"!=typeof window){const e=localStorage.getItem(Tn);if("light"===e||"dark"===e||"system"===e)return e}return"system"}function In({children:e}){const[t,r]=w.useState(()=>Dn()),[n,o]=w.useState(()=>{const e=Dn();return"system"===e?Mn():e});w.useEffect(()=>{const e=()=>{const e="system"===t?Mn():t;o(e);const r=document.documentElement;r.classList.remove("light","dark"),r.classList.add(e)};if(e(),"system"===t){const t=window.matchMedia("(prefers-color-scheme: dark)"),r=()=>e();return t.addEventListener("change",r),()=>t.removeEventListener("change",r)}},[t]);const s=e=>{r(e),localStorage.setItem(Tn,e)};return a.jsx(An.Provider,{value:{theme:t,resolvedTheme:n,setTheme:s,toggleTheme:()=>{s("dark"===n?"light":"dark")}},children:e})}function Ln(){const e=w.useContext(An);if(void 0===e)throw new Error("useTheme must be used within a ThemeProvider");return e}const Kn=e=>{const t=zn(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{const r=e.split("-");return""===r[0]&&1!==r.length&&r.shift(),Fn(r,t)||Bn(e)},getConflictingClassGroupIds:(e,t)=>{const a=r[e]||[];return t&&n[e]?[...a,...n[e]]:a}}},Fn=(e,t)=>{var r;if(0===e.length)return t.classGroupId;const n=e[0],a=t.nextPart.get(n),o=a?Fn(e.slice(1),a):void 0;if(o)return o;if(0===t.validators.length)return;const s=e.join("-");return null==(r=t.validators.find(({validator:e})=>e(s)))?void 0:r.classGroupId},qn=/^\[(.+)\]$/,Bn=e=>{if(qn.test(e)){const t=qn.exec(e)[1],r=null==t?void 0:t.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},zn=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return Vn(Object.entries(e.classGroups),r).forEach(([e,r])=>{Un(r,n,e,t)}),n},Un=(e,t,r,n)=>{e.forEach(e=>{if("string"==typeof e){return void((""===e?t:$n(t,e)).classGroupId=r)}if("function"==typeof e)return Wn(e)?void Un(e(n),t,r,n):void t.validators.push({validator:e,classGroupId:r});Object.entries(e).forEach(([e,a])=>{Un(a,$n(t,e),r,n)})})},$n=(e,t)=>{let r=e;return t.split("-").forEach(e=>{r.nextPart.has(e)||r.nextPart.set(e,{nextPart:new Map,validators:[]}),r=r.nextPart.get(e)}),r},Wn=e=>e.isThemeGetter,Vn=(e,t)=>t?e.map(([e,r])=>[e,r.map(e=>"string"==typeof e?t+e:"object"==typeof e?Object.fromEntries(Object.entries(e).map(([e,r])=>[t+e,r])):e)]):e,Gn=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(e){let t=r.get(e);return void 0!==t?t:void 0!==(t=n.get(e))?(a(e,t),t):void 0},set(e,t){r.has(e)?r.set(e,t):a(e,t)}}},Hn=e=>{const{separator:t,experimentalParseClassName:r}=e,n=1===t.length,a=t[0],o=t.length,s=e=>{const r=[];let s,i=0,c=0;for(let d=0;d<e.length;d++){let l=e[d];if(0===i){if(l===a&&(n||e.slice(d,d+o)===t)){r.push(e.slice(c,d)),c=d+o;continue}if("/"===l){s=d;continue}}"["===l?i++:"]"===l&&i--}const l=0===r.length?e:e.substring(c),u=l.startsWith("!");return{modifiers:r,hasImportantModifier:u,baseClassName:u?l.substring(1):l,maybePostfixModifierPosition:s&&s>c?s-c:void 0}};return r?e=>r({className:e,parseClassName:s}):s},Yn=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(e=>{"["===e[0]?(t.push(...r.sort(),e),r=[]):r.push(e)}),t.push(...r.sort()),t},Jn=/\s+/;function Xn(){let e,t,r=0,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=Qn(e))&&(n&&(n+=" "),n+=t);return n}const Qn=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=Qn(e[n]))&&(r&&(r+=" "),r+=t);return r};function Zn(e,...t){let r,n,a,o=function(i){const c=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:Gn(e.cacheSize),parseClassName:Hn(e),...Kn(e)}))(c),n=r.cache.get,a=r.cache.set,o=s,s(i)};function s(e){const t=n(e);if(t)return t;const o=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,o=[],s=e.trim().split(Jn);let i="";for(let c=s.length-1;c>=0;c-=1){const e=s[c],{modifiers:t,hasImportantModifier:l,baseClassName:u,maybePostfixModifierPosition:d}=r(e);let f=Boolean(d),h=n(f?u.substring(0,d):u);if(!h){if(!f){i=e+(i.length>0?" "+i:i);continue}if(h=n(u),!h){i=e+(i.length>0?" "+i:i);continue}f=!1}const m=Yn(t).join(":"),p=l?m+"!":m,g=p+h;if(o.includes(g))continue;o.push(g);const y=a(h,f);for(let r=0;r<y.length;++r){const e=y[r];o.push(p+e)}i=e+(i.length>0?" "+i:i)}return i})(e,r);return a(e,o),o}return function(){return o(Xn.apply(null,arguments))}}const ea=e=>{const t=t=>t[e]||[];return t.isThemeGetter=!0,t},ta=/^\[(?:([a-z-]+):)?(.+)\]$/i,ra=/^\d+\/\d+$/,na=new Set(["px","full","screen"]),aa=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,oa=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sa=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,ia=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,ca=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,la=e=>da(e)||na.has(e)||ra.test(e),ua=e=>Na(e,"length",Ea),da=e=>Boolean(e)&&!Number.isNaN(Number(e)),fa=e=>Na(e,"number",da),ha=e=>Boolean(e)&&Number.isInteger(Number(e)),ma=e=>e.endsWith("%")&&da(e.slice(0,-1)),pa=e=>ta.test(e),ga=e=>aa.test(e),ya=new Set(["length","size","percentage"]),ba=e=>Na(e,ya,_a),va=e=>Na(e,"position",_a),xa=new Set(["image","url"]),wa=e=>Na(e,xa,Ca),ka=e=>Na(e,"",Sa),ja=()=>!0,Na=(e,t,r)=>{const n=ta.exec(e);return!!n&&(n[1]?"string"==typeof t?n[1]===t:t.has(n[1]):r(n[2]))},Ea=e=>oa.test(e)&&!sa.test(e),_a=()=>!1,Sa=e=>ia.test(e),Ca=e=>ca.test(e),Pa=Zn(()=>{const e=ea("colors"),t=ea("spacing"),r=ea("blur"),n=ea("brightness"),a=ea("borderColor"),o=ea("borderRadius"),s=ea("borderSpacing"),i=ea("borderWidth"),c=ea("contrast"),l=ea("grayscale"),u=ea("hueRotate"),d=ea("invert"),f=ea("gap"),h=ea("gradientColorStops"),m=ea("gradientColorStopPositions"),p=ea("inset"),g=ea("margin"),y=ea("opacity"),b=ea("padding"),v=ea("saturate"),x=ea("scale"),w=ea("sepia"),k=ea("skew"),j=ea("space"),N=ea("translate"),E=()=>["auto",pa,t],_=()=>[pa,t],S=()=>["",la,ua],C=()=>["auto",da,pa],P=()=>["","0",pa],O=()=>[da,pa];return{cacheSize:500,separator:":",theme:{colors:[ja],spacing:[la,ua],blur:["none","",ga,pa],brightness:O(),borderColor:[e],borderRadius:["none","","full",ga,pa],borderSpacing:_(),borderWidth:S(),contrast:O(),grayscale:P(),hueRotate:O(),invert:P(),gap:_(),gradientColorStops:[e],gradientColorStopPositions:[ma,ua],inset:E(),margin:E(),opacity:O(),padding:_(),saturate:O(),scale:O(),sepia:P(),skew:O(),space:_(),translate:_()},classGroups:{aspect:[{aspect:["auto","square","video",pa]}],container:["container"],columns:[{columns:[ga]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",pa]}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[p]}],"inset-x":[{"inset-x":[p]}],"inset-y":[{"inset-y":[p]}],start:[{start:[p]}],end:[{end:[p]}],top:[{top:[p]}],right:[{right:[p]}],bottom:[{bottom:[p]}],left:[{left:[p]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",ha,pa]}],basis:[{basis:E()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",pa]}],grow:[{grow:P()}],shrink:[{shrink:P()}],order:[{order:["first","last","none",ha,pa]}],"grid-cols":[{"grid-cols":[ja]}],"col-start-end":[{col:["auto",{span:["full",ha,pa]},pa]}],"col-start":[{"col-start":C()}],"col-end":[{"col-end":C()}],"grid-rows":[{"grid-rows":[ja]}],"row-start-end":[{row:["auto",{span:[ha,pa]},pa]}],"row-start":[{"row-start":C()}],"row-end":[{"row-end":C()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",pa]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",pa]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal","start","end","center","between","around","evenly","stretch"]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[g]}],mx:[{mx:[g]}],my:[{my:[g]}],ms:[{ms:[g]}],me:[{me:[g]}],mt:[{mt:[g]}],mr:[{mr:[g]}],mb:[{mb:[g]}],ml:[{ml:[g]}],"space-x":[{"space-x":[j]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[j]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",pa,t]}],"min-w":[{"min-w":[pa,t,"min","max","fit"]}],"max-w":[{"max-w":[pa,t,"none","full","min","max","fit","prose",{screen:[ga]},ga]}],h:[{h:[pa,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[pa,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[pa,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[pa,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ga,ua]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",fa]}],"font-family":[{font:[ja]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",pa]}],"line-clamp":[{"line-clamp":["none",da,fa]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",la,pa]}],"list-image":[{"list-image":["none",pa]}],"list-style-type":[{list:["none","disc","decimal",pa]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","none","wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",la,ua]}],"underline-offset":[{"underline-offset":["auto",la,pa]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:_()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",pa]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",pa]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top",va]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",ba]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},wa]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[m]}],"gradient-via-pos":[{via:[m]}],"gradient-to-pos":[{to:[m]}],"gradient-from":[{from:[h]}],"gradient-via":[{via:[h]}],"gradient-to":[{to:[h]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[i]}],"border-w-x":[{"border-x":[i]}],"border-w-y":[{"border-y":[i]}],"border-w-s":[{"border-s":[i]}],"border-w-e":[{"border-e":[i]}],"border-w-t":[{"border-t":[i]}],"border-w-r":[{"border-r":[i]}],"border-w-b":[{"border-b":[i]}],"border-w-l":[{"border-l":[i]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:["solid","dashed","dotted","double","none","hidden"]}],"divide-x":[{"divide-x":[i]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[i]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:["solid","dashed","dotted","double","none"]}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["","solid","dashed","dotted","double","none"]}],"outline-offset":[{"outline-offset":[la,pa]}],"outline-w":[{outline:[la,ua]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:S()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[la,ua]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ga,ka]}],"shadow-color":[{shadow:[ja]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ga,pa]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[d]}],saturate:[{saturate:[v]}],sepia:[{sepia:[w]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[d]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[w]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",pa]}],duration:[{duration:O()}],ease:[{ease:["linear","in","out","in-out",pa]}],delay:[{delay:O()}],animate:[{animate:["none","spin","ping","pulse","bounce",pa]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[x]}],"scale-x":[{"scale-x":[x]}],"scale-y":[{"scale-y":[x]}],rotate:[{rotate:[ha,pa]}],"translate-x":[{"translate-x":[N]}],"translate-y":[{"translate-y":[N]}],"skew-x":[{"skew-x":[k]}],"skew-y":[{"skew-y":[k]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",pa]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",pa]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":_()}],"scroll-mx":[{"scroll-mx":_()}],"scroll-my":[{"scroll-my":_()}],"scroll-ms":[{"scroll-ms":_()}],"scroll-me":[{"scroll-me":_()}],"scroll-mt":[{"scroll-mt":_()}],"scroll-mr":[{"scroll-mr":_()}],"scroll-mb":[{"scroll-mb":_()}],"scroll-ml":[{"scroll-ml":_()}],"scroll-p":[{"scroll-p":_()}],"scroll-px":[{"scroll-px":_()}],"scroll-py":[{"scroll-py":_()}],"scroll-ps":[{"scroll-ps":_()}],"scroll-pe":[{"scroll-pe":_()}],"scroll-pt":[{"scroll-pt":_()}],"scroll-pr":[{"scroll-pr":_()}],"scroll-pb":[{"scroll-pb":_()}],"scroll-pl":[{"scroll-pl":_()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",pa]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[la,ua,fa]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}});function Oa(...e){return Pa(S(e))}const Ra=w.createContext(null);let Aa=0;const Ta={success:A,error:R,warning:O,info:P},Ma={success:"bg-green-50 dark:bg-green-900/90 border-green-200 dark:border-green-700 text-green-800 dark:text-green-100",error:"bg-red-50 dark:bg-red-900/90 border-red-200 dark:border-red-700 text-red-800 dark:text-red-100",warning:"bg-yellow-50 dark:bg-yellow-900/90 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-100",info:"bg-blue-50 dark:bg-blue-900/90 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-100"},Da={success:"text-green-500 dark:text-green-400",error:"text-red-500 dark:text-red-400",warning:"text-yellow-500 dark:text-yellow-400",info:"text-blue-500 dark:text-blue-400"};function Ia({children:e}){const[t,r]=w.useState([]),n=w.useCallback(e=>{r(t=>t.map(t=>t.id===e?{...t,exiting:!0}:t)),setTimeout(()=>{r(t=>t.filter(t=>t.id!==e))},200)},[]),o=w.useCallback((e,t="info",a=4e3)=>{const o=++Aa;r(r=>[...r,{id:o,message:e,type:t,duration:a}]),a>0&&setTimeout(()=>n(o),a)},[n]),s=w.useCallback((e,t)=>o(e,"success",t),[o]),i=w.useCallback((e,t)=>o(e,"error",t),[o]),c=w.useCallback((e,t)=>o(e,"warning",t),[o]),l=w.useCallback((e,t)=>o(e,"info",t),[o]);return a.jsxs(Ra.Provider,{value:{showToast:o,success:s,error:i,warning:c,info:l},children:[e,x.createPortal(a.jsx("div",{className:"fixed top-4 right-4 z-[100] flex flex-col gap-2 max-w-sm w-full pointer-events-none",children:t.map(e=>{const t=Ta[e.type];return a.jsxs("div",{className:Oa("flex items-start gap-3 p-4 rounded-lg border shadow-lg pointer-events-auto",Ma[e.type],e.exiting?"animate-toast-out":"animate-toast-in"),children:[a.jsx(t,{className:Oa("w-5 h-5 flex-shrink-0 mt-0.5",Da[e.type])}),a.jsx("p",{className:"flex-1 text-sm font-medium",children:e.message}),a.jsx("button",{onClick:()=>n(e.id),className:"flex-shrink-0 p-1 hover:bg-black/10 dark:hover:bg-white/10 rounded",children:a.jsx(T,{className:"w-4 h-4"})})]},e.id)})}),document.body)]})}function La(){const e=w.useContext(Ra);if(!e)throw new Error("useToast must be used within a ToastProvider");return e}var Ka={exports:{}};const Fa=j(Ka.exports=function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)},t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)};function r(e,t,r){for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||((n=n||Array.prototype.slice.call(t,0,a))[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:k,a=Object.keys,o=Array.isArray;function s(e,t){return"object"!=typeof t||a(t).forEach(function(r){e[r]=t[r]}),e}"undefined"==typeof Promise||n.Promise||(n.Promise=Promise);var i=Object.getPrototypeOf,c={}.hasOwnProperty;function l(e,t){return c.call(e,t)}function u(e,t){"function"==typeof t&&(t=t(i(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach(function(r){f(e,r,t[r])})}var d=Object.defineProperty;function f(e,t,r,n){d(e,t,s(r&&l(r,"get")&&"function"==typeof r.get?{get:r.get,set:r.set,configurable:!0}:{value:r,configurable:!0,writable:!0},n))}function h(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:u.bind(null,e.prototype)}}}}var m=Object.getOwnPropertyDescriptor,p=[].slice;function g(e,t,r){return p.call(e,t,r)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function v(e){n.setImmediate?setImmediate(e):setTimeout(e,0)}function x(e,t){if("string"==typeof t&&l(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var r=[],n=0,a=t.length;n<a;++n){var o=x(e,t[n]);r.push(o)}return r}var s=t.indexOf(".");if(-1!==s){var i=e[t.substr(0,s)];return null==i?void 0:x(i,t.substr(s+1))}}function w(e,t,r){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof r&&"length"in r);for(var n=0,a=t.length;n<a;++n)w(e,t[n],r[n])}else{var s,i,c=t.indexOf(".");-1!==c?(s=t.substr(0,c),""===(i=t.substr(c+1))?void 0===r?o(e)&&!isNaN(parseInt(s))?e.splice(s,1):delete e[s]:e[s]=r:w(c=(c=e[s])&&l(e,s)?c:e[s]={},i,r)):void 0===r?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=r}}function j(e){var t,r={};for(t in e)l(e,t)&&(r[t]=e[t]);return r}var N=[].concat;function E(e){return N.apply([],e)}var _="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(E([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return n[e]}),S=new Set(_.map(function(e){return n[e]})),C=null;function P(e){return C=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var r=C.get(t);if(r)return r;if(o(t)){r=[],C.set(t,r);for(var n=0,a=t.length;n<a;++n)r.push(e(t[n]))}else if(S.has(t.constructor))r=t;else{var s,c=i(t);for(s in r=c===Object.prototype?{}:Object.create(c),C.set(t,r),t)l(t,s)&&(r[s]=e(t[s]))}return r}(e),C=null,e}var O={}.toString;function R(e){return O.call(e).slice(8,-1)}var A="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",T="symbol"==typeof A?function(e){var t;return null!=e&&(t=e[A])&&t.apply(e)}:function(){return null};function M(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function I(e){var t,r,n,a;if(1===arguments.length){if(o(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(a=T(e)){for(r=[];!(n=a.next()).done;)r.push(n.value);return r}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(r=new Array(t);t--;)r[t]=e[t];return r}for(t=arguments.length,r=new Array(t);t--;)r[t]=arguments[t];return r}var L="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},K=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(ce=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),F={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function q(e,t){this.name=e,this.message=t}function B(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,r){return r.indexOf(e)===t}).join("\n")}function z(e,t,r,n){this.failures=t,this.failedKeys=n,this.successCount=r,this.message=B(e,t)}function U(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=B(e,this.failures)}h(q).from(Error).extend({toString:function(){return this.name+": "+this.message}}),h(z).from(q),h(U).from(q);var $=K.reduce(function(e,t){return e[t]=t+"Error",e},{}),W=q,V=K.reduce(function(e,t){var r=t+"Error";function n(e,n){this.name=r,e?"string"==typeof e?(this.message="".concat(e).concat(n?"\n "+n:""),this.inner=n||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=F[t]||r,this.inner=null)}return h(n).from(W),e[t]=n,e},{});V.Syntax=SyntaxError,V.Type=TypeError,V.Range=RangeError;var G=ce.reduce(function(e,t){return e[t+"Error"]=V[t],e},{}),H=K.reduce(function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=V[t]),e},{});function Y(){}function J(e){return e}function X(e,t){return null==e||e===J?t:function(r){return t(e(r))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function Z(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);void 0!==r&&(arguments[0]=r);var n=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),a&&(this.onerror=this.onerror?Q(a,this.onerror):a),void 0!==o?o:r}}function ee(e,t){return e===Y?t:function(){e.apply(this,arguments);var r=this.onsuccess,n=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),n&&(this.onerror=this.onerror?Q(n,this.onerror):n)}}function te(e,t){return e===Y?t:function(r){var n=e.apply(this,arguments);s(r,n);var a=this.onsuccess,o=this.onerror;return this.onsuccess=null,this.onerror=null,r=t.apply(this,arguments),a&&(this.onsuccess=this.onsuccess?Q(a,this.onsuccess):a),o&&(this.onerror=this.onerror?Q(o,this.onerror):o),void 0===n?void 0===r?void 0:r:s(n,r)}}function re(e,t){return e===Y?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function ne(e,t){return e===Y?t:function(){var r=e.apply(this,arguments);if(r&&"function"==typeof r.then){for(var n=this,a=arguments.length,o=new Array(a);a--;)o[a]=arguments[a];return r.then(function(){return t.apply(n,o)})}return t.apply(this,arguments)}}H.ModifyError=z,H.DexieError=q,H.BulkError=U;var ae="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(e){ae=e}var se={},ie=100,ce=(_="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,i(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,i(t),e]}())[0],le=(K=_[1],_=_[2],K=K&&K.then,ce&&ce.constructor),ue=!!_,de=function(e,t){ve.push([e,t]),he&&(queueMicrotask(Pe),he=!1)},fe=!0,he=!0,me=[],pe=[],ge=J,ye={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Y,pgp:!1,env:{},finalize:Y},be=ye,ve=[],xe=0,we=[];function ke(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=be;if("function"!=typeof e){if(e!==se)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ee(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,r){try{r(function(r){if(null===t._state){if(r===t)throw new TypeError("A promise cannot be resolved with itself.");var n=t._lib&&Oe();r&&"function"==typeof r.then?e(t,function(e,t){r instanceof ke?r._then(e,t):r.then(e,t)}):(t._state=!0,t._value=r,_e(t)),n&&Re()}},Ee.bind(null,t))}catch(n){Ee(t,n)}}(this,e)}var je={get:function(){var e=be,t=Fe;function r(r,n){var a=this,o=!e.global&&(e!==be||t!==Fe),s=o&&!Ue(),i=new ke(function(t,i){Se(a,new Ne(Ye(r,e,o,s),Ye(n,e,o,s),t,i,e))});return this._consoleTask&&(i._consoleTask=this._consoleTask),i}return r.prototype=se,r},set:function(e){f(this,"then",e&&e.prototype===se?je:{get:function(){return e},set:je.set})}};function Ne(e,t,r,n,a){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=r,this.reject=n,this.psd=a}function Ee(e,t){var r,n;pe.push(t),null===e._state&&(r=e._lib&&Oe(),t=ge(t),e._state=!1,e._value=t,n=e,me.some(function(e){return e._value===n._value})||me.push(n),_e(e),r&&Re())}function _e(e){var t=e._listeners;e._listeners=[];for(var r=0,n=t.length;r<n;++r)Se(e,t[r]);var a=e._PSD;--a.ref||a.finalize(),0===xe&&(++xe,de(function(){0==--xe&&Ae()},[]))}function Se(e,t){if(null!==e._state){var r=e._state?t.onFulfilled:t.onRejected;if(null===r)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++xe,de(Ce,[r,e,t])}else e._listeners.push(t)}function Ce(e,t,r){try{var n,a=t._value;!t._state&&pe.length&&(pe=[]),n=ae&&t._consoleTask?t._consoleTask.run(function(){return e(a)}):e(a),t._state||-1!==pe.indexOf(a)||function(e){for(var t=me.length;t;)if(me[--t]._value===e._value)return me.splice(t,1)}(t),r.resolve(n)}catch(o){r.reject(o)}finally{0==--xe&&Ae(),--r.psd.ref||r.psd.finalize()}}function Pe(){He(ye,function(){Oe()&&Re()})}function Oe(){var e=fe;return he=fe=!1,e}function Re(){var e,t,r;do{for(;0<ve.length;)for(e=ve,ve=[],r=e.length,t=0;t<r;++t){var n=e[t];n[0].apply(null,n[1])}}while(0<ve.length);he=fe=!0}function Ae(){var e=me;me=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=we.slice(0),r=t.length;r;)t[--r]()}function Te(e){return new ke(se,!1,e)}function Me(e,t){var r=be;return function(){var n=Oe(),a=be;try{return Ve(r,!0),e.apply(this,arguments)}catch(o){t&&t(o)}finally{Ve(a,!1),n&&Re()}}}u(ke.prototype,{then:je,_then:function(e,t){Se(this,new Ne(null,null,e,t,be))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,r=arguments[1];return"function"==typeof t?this.then(null,function(e){return(e instanceof t?r:Te)(e)}):this.then(null,function(e){return(e&&e.name===t?r:Te)(e)})},finally:function(e){return this.then(function(t){return ke.resolve(e()).then(function(){return t})},function(t){return ke.resolve(e()).then(function(){return Te(t)})})},timeout:function(e,t){var r=this;return e<1/0?new ke(function(n,a){var o=setTimeout(function(){return a(new V.Timeout(t))},e);r.then(n,a).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(ke.prototype,Symbol.toStringTag,"Dexie.Promise"),ye.env=Ge(),u(ke,{all:function(){var e=I.apply(null,arguments).map($e);return new ke(function(t,r){0===e.length&&t([]);var n=e.length;e.forEach(function(a,o){return ke.resolve(a).then(function(r){e[o]=r,--n||t(e)},r)})})},resolve:function(e){return e instanceof ke?e:e&&"function"==typeof e.then?new ke(function(t,r){e.then(t,r)}):new ke(se,!0,e)},reject:Te,race:function(){var e=I.apply(null,arguments).map($e);return new ke(function(t,r){e.map(function(e){return ke.resolve(e).then(t,r)})})},PSD:{get:function(){return be},set:function(e){return be=e}},totalEchoes:{get:function(){return Fe}},newPSD:Be,usePSD:He,scheduler:{get:function(){return de},set:function(e){de=e}},rejectionMapper:{get:function(){return ge},set:function(e){ge=e}},follow:function(e,t){return new ke(function(r,n){return Be(function(t,r){var n=be;n.unhandleds=[],n.onunhandled=r,n.finalize=Q(function(){var e,n=this;e=function(){0===n.unhandleds.length?t():r(n.unhandleds[0])},we.push(function t(){e(),we.splice(we.indexOf(t),1)}),++xe,de(function(){0==--xe&&Ae()},[])},n.finalize),e()},t,r,n)})}}),le&&(le.allSettled&&f(ke,"allSettled",function(){var e=I.apply(null,arguments).map($e);return new ke(function(t){0===e.length&&t([]);var r=e.length,n=new Array(r);e.forEach(function(e,a){return ke.resolve(e).then(function(e){return n[a]={status:"fulfilled",value:e}},function(e){return n[a]={status:"rejected",reason:e}}).then(function(){return--r||t(n)})})})}),le.any&&"undefined"!=typeof AggregateError&&f(ke,"any",function(){var e=I.apply(null,arguments).map($e);return new ke(function(t,r){0===e.length&&r(new AggregateError([]));var n=e.length,a=new Array(n);e.forEach(function(e,o){return ke.resolve(e).then(function(e){return t(e)},function(e){a[o]=e,--n||r(new AggregateError(a))})})})}),le.withResolvers&&(ke.withResolvers=le.withResolvers));var De={awaits:0,echoes:0,id:0},Ie=0,Le=[],Ke=0,Fe=0,qe=0;function Be(e,t,r,n){var a=be,o=Object.create(a);return o.parent=a,o.ref=0,o.global=!1,o.id=++qe,ye.env,o.env=ue?{Promise:ke,PromiseProp:{value:ke,configurable:!0,writable:!0},all:ke.all,race:ke.race,allSettled:ke.allSettled,any:ke.any,resolve:ke.resolve,reject:ke.reject}:{},t&&s(o,t),++a.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},n=He(o,e,r,n),0===o.ref&&o.finalize(),n}function ze(){return De.id||(De.id=++Ie),++De.awaits,De.echoes+=ie,De.id}function Ue(){return!!De.awaits&&(0==--De.awaits&&(De.id=0),De.echoes=De.awaits*ie,!0)}function $e(e){return De.echoes&&e&&e.constructor===le?(ze(),e.then(function(e){return Ue(),e},function(e){return Ue(),Xe(e)})):e}function We(){var e=Le[Le.length-1];Le.pop(),Ve(e,!1)}function Ve(e,t){var r,a=be;(t?!De.echoes||Ke++&&e===be:!Ke||--Ke&&e===be)||queueMicrotask(t?function(e){++Fe,De.echoes&&0!=--De.echoes||(De.echoes=De.awaits=De.id=0),Le.push(be),Ve(e,!0)}.bind(null,e):We),e!==be&&(be=e,a===ye&&(ye.env=Ge()),ue&&(r=ye.env.Promise,t=e.env,(a.global||e.global)&&(Object.defineProperty(n,"Promise",t.PromiseProp),r.all=t.all,r.race=t.race,r.resolve=t.resolve,r.reject=t.reject,t.allSettled&&(r.allSettled=t.allSettled),t.any&&(r.any=t.any))))}function Ge(){var e=n.Promise;return ue?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function He(e,t,r,n,a){var o=be;try{return Ve(e,!0),t(r,n,a)}finally{Ve(o,!1)}}function Ye(e,t,r,n){return"function"!=typeof e?e:function(){var a=be;r&&ze(),Ve(t,!0);try{return e.apply(this,arguments)}finally{Ve(a,!1),n&&queueMicrotask(Ue)}}}function Je(e){Promise===le&&0===De.echoes?0===Ke?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+K).indexOf("[native code]")&&(ze=Ue=Y);var Xe=ke.reject,Qe=String.fromCharCode(65535),Ze="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],rt="__dbnames",nt="readonly",at="readwrite";function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var st={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function it(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=P(t))[e],t}}function ct(){throw V.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function lt(e,t){try{var r=ut(e),n=ut(t);if(r!==n)return"Array"===r?1:"Array"===n?-1:"binary"===r?1:"binary"===n?-1:"string"===r?1:"string"===n?-1:"Date"===r?1:"Date"!==n?NaN:-1;switch(r){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,o=0;o<a;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return r===n?0:r<n?-1:1}(dt(e),dt(t));case"Array":return function(e,t){for(var r=e.length,n=t.length,a=r<n?r:n,o=0;o<a;++o){var s=lt(e[o],t[o]);if(0!==s)return s}return r===n?0:r<n?-1:1}(e,t)}}catch(a){}return NaN}function ut(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=R(e))?"binary":e}function dt(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}function ft(e,t,r){var n=e.schema.yProps;return n?(t&&0<r.numFailures&&(t=t.filter(function(e,t){return!r.failures[t]})),Promise.all(n.map(function(r){return r=r.updatesTable,t?e.db.table(r).where("k").anyOf(t).delete():e.db.table(r).clear()})).then(function(){return r})):r}var ht=(mt.prototype.execute=function(e){var t=this["@@propmod"];if(void 0!==t.add){var n=t.add;if(o(n))return r(r([],o(e)?e:[],!0),n).sort();if("number"==typeof n)return(Number(e)||0)+n;if("bigint"==typeof n)try{return BigInt(e)+n}catch(s){return BigInt(0)+n}throw new TypeError("Invalid term ".concat(n))}if(void 0!==t.remove){var a=t.remove;if(o(a))return o(e)?e.filter(function(e){return!a.includes(e)}).sort():[];if("number"==typeof a)return Number(e)-a;if("bigint"==typeof a)try{return BigInt(e)-a}catch(s){return BigInt(0)-a}throw new TypeError("Invalid subtrahend ".concat(a))}return(n=null===(n=t.replacePrefix)||void 0===n?void 0:n[0])&&"string"==typeof e&&e.startsWith(n)?t.replacePrefix[1]+e.substring(n.length):e},mt);function mt(e){this["@@propmod"]=e}function pt(e,t){for(var r=a(t),n=r.length,o=!1,s=0;s<n;++s){var i=r[s],c=t[i],l=x(e,i);c instanceof ht?(w(e,i,c.execute(l)),o=!0):l!==c&&(w(e,i,c),o=!0)}return o}var gt=(yt.prototype._trans=function(e,t,r){var n=this._tx||be.trans,a=this.name,o=ae&&"undefined"!=typeof console&&console.createTask&&void 0;function s(e,r,n){if(!n.schema[a])throw new V.NotFound("Table "+a+" not part of transaction");return t(n.idbtrans,n)}var i=Oe();try{var c=n&&n.db._novip===this.db._novip?n===be.trans?n._promise(e,s,r):Be(function(){return n._promise(e,s,r)},{trans:n,transless:be.transless||be}):function e(t,r,n,a){if(t.idbdb&&(t._state.openComplete||be.letThrough||t._vip)){var o=t._createTransaction(r,n,t._dbSchema);try{o.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,a)})):Xe(s)}return o._promise(r,function(e,t){return Be(function(){return be.trans=o,a(e,t,o)})}).then(function(e){if("readwrite"===r)try{o.idbtrans.commit()}catch(t){}return"readonly"===r?e:o._completion.then(function(){return e})})}if(t._state.openComplete)return Xe(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return Xe(new V.DatabaseClosed);t.open().catch(Y)}return t._state.dbReadyPromise.then(function(){return e(t,r,n,a)})}(this.db,e,[this.name],s);return o&&(c._consoleTask=o,c=c.catch(function(e){return Xe(e)})),c}finally{i&&Re()}},yt.prototype.get=function(e,t){var r=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Xe(new V.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return r.core.get({trans:t,key:e}).then(function(e){return r.hook.reading.fire(e)})}).then(t)},yt.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var r=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return 0<=e.keyPath.indexOf(t)})){for(var r=0;r<t.length;++r)if(-1===t.indexOf(e.keyPath[r]))return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(r&&this.db._maxKey!==Qe){var n=r.keyPath.slice(0,t.length);return this.where(n).equals(n.map(function(t){return e[t]}))}var s=this.schema.idxByName;function i(e,t){return 0===lt(e,t)}n=(c=t.reduce(function(t,r){var n=t[0],a=t[1],c=(t=s[r],e[r]);return[n||t,n||!t?ot(a,t&&t.multi?function(e){return e=x(e,r),o(e)&&e.some(function(e){return i(c,e)})}:function(e){return i(c,x(e,r))}):a]},[null,null]))[0];var c=c[1];return n?this.where(n.name).equals(e[n.keyPath]).filter(c):r?this.filter(c):this.where(t).equals("")},yt.prototype.filter=function(e){return this.toCollection().and(e)},yt.prototype.count=function(e){return this.toCollection().count(e)},yt.prototype.offset=function(e){return this.toCollection().offset(e)},yt.prototype.limit=function(e){return this.toCollection().limit(e)},yt.prototype.each=function(e){return this.toCollection().each(e)},yt.prototype.toArray=function(e){return this.toCollection().toArray(e)},yt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},yt.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"[".concat(e.join("+"),"]"):e))},yt.prototype.reverse=function(){return this.toCollection().reverse()},yt.prototype.mapToClass=function(t){var r,n=this.db,a=this.name;function o(){return null!==r&&r.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof ct&&(function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}(o,r=t),Object.defineProperty(o.prototype,"db",{get:function(){return n},enumerable:!1,configurable:!0}),o.prototype.table=function(){return a},t=o);for(var s=new Set,c=t.prototype;c;c=i(c))Object.getOwnPropertyNames(c).forEach(function(e){return s.add(e)});function l(e){if(!e)return e;var r,n=Object.create(t.prototype);for(r in e)if(!s.has(r))try{n[r]=e[r]}catch(a){}return n}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),t},yt.prototype.defineClass=function(){return this.mapToClass(function(e){s(this,e)})},yt.prototype.add=function(e,t){var r=this,n=this.schema.primKey,a=n.auto,o=n.keyPath,s=e;return o&&a&&(s=it(o)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[s]})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{w(e,o,t)}catch(r){}return t})},yt.prototype.upsert=function(e,t){var r=this,n=this.schema.primKey.keyPath;return this._trans("readwrite",function(a){return r.core.get({trans:a,key:e}).then(function(o){var s=null!=o?o:{};return pt(s,t),n&&w(s,n,e),r.core.mutate({trans:a,type:"put",values:[s],keys:[e],upsert:!0,updates:{keys:[e],changeSpecs:[t]}}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):!!o})})})},yt.prototype.update=function(e,t){return"object"!=typeof e||o(e)?this.where(":id").equals(e).modify(t):void 0===(e=x(e,this.schema.primKey.keyPath))?Xe(new V.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},yt.prototype.put=function(e,t){var r=this,n=this.schema.primKey,a=n.auto,o=n.keyPath,s=e;return o&&a&&(s=it(o)(e)),this._trans("readwrite",function(e){return r.core.mutate({trans:e,type:"put",values:[s],keys:null!=t?[t]:null})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):e.lastResult}).then(function(t){if(o)try{w(e,o,t)}catch(r){}return t})},yt.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:[e]}).then(function(r){return ft(t,[e],r)}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})})},yt.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:st}).then(function(t){return ft(e,null,t)})}).then(function(e){return e.numFailures?ke.reject(e.failures[0]):void 0})},yt.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(r){return t.core.getMany({keys:e,trans:r}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},yt.prototype.bulkAdd=function(e,t,r){var n=this,a=Array.isArray(t)?t:void 0,o=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(i=n.schema.primKey).auto;if((i=i.keyPath)&&a)throw new V.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,i=i&&r?e.map(it(i)):e;return n.core.mutate({trans:t,type:"add",keys:a,values:i,wantResults:o}).then(function(e){var t=e.numFailures,r=e.results,a=e.lastResult;if(e=e.failures,0===t)return o?r:a;throw new U("".concat(n.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),e)})})},yt.prototype.bulkPut=function(e,t,r){var n=this,a=Array.isArray(t)?t:void 0,o=(r=r||(a?void 0:t))?r.allKeys:void 0;return this._trans("readwrite",function(t){var r=(i=n.schema.primKey).auto;if((i=i.keyPath)&&a)throw new V.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(a&&a.length!==e.length)throw new V.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,i=i&&r?e.map(it(i)):e;return n.core.mutate({trans:t,type:"put",keys:a,values:i,wantResults:o}).then(function(e){var t=e.numFailures,r=e.results,a=e.lastResult;if(e=e.failures,0===t)return o?r:a;throw new U("".concat(n.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),e)})})},yt.prototype.bulkUpdate=function(e){var t=this,r=this.core,n=e.map(function(e){return e.key}),a=e.map(function(e){return e.changes}),o=[];return this._trans("readwrite",function(s){return r.getMany({trans:s,keys:n,cache:"clone"}).then(function(i){var c=[],l=[];e.forEach(function(e,r){var n=e.key,a=e.changes,s=i[r];if(s){for(var u=0,d=Object.keys(a);u<d.length;u++){var f=d[u],h=a[f];if(f===t.schema.primKey.keyPath){if(0!==lt(h,n))throw new V.Constraint("Cannot update primary key in bulkUpdate()")}else w(s,f,h)}o.push(r),c.push(n),l.push(s)}});var u=c.length;return r.mutate({trans:s,type:"put",keys:c,values:l,updates:{keys:n,changeSpecs:a}}).then(function(e){var r=e.numFailures,n=e.failures;if(0===r)return u;for(var a=0,s=Object.keys(n);a<s.length;a++){var i,c=s[a],l=o[Number(c)];null!=l&&(i=n[c],delete n[c],n[l]=i)}throw new U("".concat(t.name,".bulkUpdate(): ").concat(r," of ").concat(u," operations failed"),n)})})})},yt.prototype.bulkDelete=function(e){var t=this,r=e.length;return this._trans("readwrite",function(r){return t.core.mutate({trans:r,type:"delete",keys:e}).then(function(r){return ft(t,e,r)})}).then(function(e){var n=e.numFailures,a=e.lastResult;if(e=e.failures,0===n)return a;throw new U("".concat(t.name,".bulkDelete(): ").concat(n," of ").concat(r," operations failed"),e)})},yt);function yt(){}function bt(e){function t(t,n){if(n){for(var a=arguments.length,o=new Array(a-1);--a;)o[a-1]=arguments[a];return r[t].subscribe.apply(null,o),e}if("string"==typeof t)return r[t]}var r={};t.addEventType=i;for(var n=1,s=arguments.length;n<s;++n)i(arguments[n]);return t;function i(e,n,s){if("object"!=typeof e){var c;n=n||re;var l={subscribers:[],fire:s=s||Y,subscribe:function(e){-1===l.subscribers.indexOf(e)&&(l.subscribers.push(e),l.fire=n(l.fire,e))},unsubscribe:function(e){l.subscribers=l.subscribers.filter(function(t){return t!==e}),l.fire=l.subscribers.reduce(n,s)}};return r[e]=t[e]=l}a(c=e).forEach(function(e){var t=c[e];if(o(t))i(e,c[e][0],c[e][1]);else{if("asap"!==t)throw new V.InvalidArgument("Invalid event config");var r=i(e,J,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){v(function(){e.apply(null,t)})})})}})}}function vt(e,t){return h(t).from({prototype:e}),t}function xt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function wt(e,t){e.filter=ot(e.filter,t)}function kt(e,t,r){var n=e.replayFilter;e.replayFilter=n?function(){return ot(n(),t())}:t,e.justLimit=r&&!n}function jt(e,t){if(e.isPrimKey)return t.primaryKey;var r=t.getIndexByKeyPath(e.index);if(!r)throw new V.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return r}function Nt(e,t,r){var n=jt(e,t.schema);return t.openCursor({trans:r,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:n,range:e.range}})}function Et(e,t,r,n){var a=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},s=function(e,r,n){var s,i;a&&!a(r,n,function(e){return r.stop(e)},function(e){return r.fail(e)})||("[object ArrayBuffer]"==(i=""+(s=r.primaryKey))&&(i=""+new Uint8Array(s)),l(o,i)||(o[i]=!0,t(e,r,n)))};return Promise.all([e.or._iterate(s,r),_t(Nt(e,n,r),e.algorithm,s,!e.keysOnly&&e.valueMapper)])}return _t(Nt(e,n,r),ot(e.algorithm,a),t,!e.keysOnly&&e.valueMapper)}function _t(e,t,r,n){var a=Me(n?function(e,t,a){return r(n(e),t,a)}:r);return e.then(function(e){if(e)return e.start(function(){var r=function(){return e.continue()};t&&!t(e,function(e){return r=e},function(t){e.stop(t),r=Y},function(t){e.fail(t),r=Y})||a(e.value,e,function(e){return r=e}),r()})})}var St=(Ct.prototype._read=function(e,t){var r=this._ctx;return r.error?r.table._trans(null,Xe.bind(null,r.error)):r.table._trans("readonly",e).then(t)},Ct.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Xe.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},Ct.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ot(t.algorithm,e)},Ct.prototype._iterate=function(e,t){return Et(this._ctx,e,t,this._ctx.table.core)},Ct.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&s(r,e),t._ctx=r,t},Ct.prototype.raw=function(){return this._ctx.valueMapper=null,this},Ct.prototype.each=function(e){var t=this._ctx;return this._read(function(r){return Et(t,e,r,t.table.core)})},Ct.prototype.count=function(e){var t=this;return this._read(function(e){var r=t._ctx,n=r.table.core;if(xt(r,!0))return n.count({trans:e,query:{index:jt(r,n.schema),range:r.range}}).then(function(e){return Math.min(e,r.limit)});var a=0;return Et(r,function(){return++a,!1},e,n).then(function(){return a})}).then(e)},Ct.prototype.sortBy=function(e,t){var r=e.split(".").reverse(),n=r[0],a=r.length-1;function o(e,t){return t?o(e[r[t]],t-1):e[n]}var s="next"===this._ctx.dir?1:-1;function i(e,t){return lt(o(e,a),o(t,a))*s}return this.toArray(function(e){return e.sort(i)}).then(t)},Ct.prototype.toArray=function(e){var t=this;return this._read(function(e){var r=t._ctx;if("next"===r.dir&&xt(r,!0)&&0<r.limit){var n=r.valueMapper,a=jt(r,r.table.core.schema);return r.table.core.query({trans:e,limit:r.limit,values:!0,query:{index:a,range:r.range}}).then(function(e){return e=e.result,n?e.map(n):e})}var o=[];return Et(r,function(e){return o.push(e)},e,r.table.core).then(function(){return o})},e)},Ct.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,xt(t)?kt(t,function(){var t=e;return function(e,r){return 0===t||(1===t?--t:r(function(){e.advance(t),t=0}),!1)}}):kt(t,function(){var t=e;return function(){return--t<0}})),this},Ct.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),kt(this._ctx,function(){var t=e;return function(e,r,n){return--t<=0&&r(n),0<=t}},!0),this},Ct.prototype.until=function(e,t){return wt(this._ctx,function(r,n,a){return!e(r.value)||(n(a),t)}),this},Ct.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},Ct.prototype.last=function(e){return this.reverse().first(e)},Ct.prototype.filter=function(e){var t;return wt(this._ctx,function(t){return e(t.value)}),(t=this._ctx).isMatch=ot(t.isMatch,e),this},Ct.prototype.and=function(e){return this.filter(e)},Ct.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},Ct.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Ct.prototype.desc=function(){return this.reverse()},Ct.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.key,r)})},Ct.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},Ct.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,r){e(r.primaryKey,r)})},Ct.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.key)}).then(function(){return r}).then(e)},Ct.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&xt(t,!0)&&0<t.limit)return this._read(function(e){var r=jt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:r,range:t.range}})}).then(function(e){return e.result}).then(e);t.keysOnly=!t.isMatch;var r=[];return this.each(function(e,t){r.push(t.primaryKey)}).then(function(){return r}).then(e)},Ct.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},Ct.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},Ct.prototype.lastKey=function(e){return this.reverse().firstKey(e)},Ct.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return wt(this._ctx,function(e){var r=e.primaryKey.toString();return e=l(t,r),t[r]=!0,!e}),this},Ct.prototype.modify=function(e){var t=this,r=this._ctx;return this._write(function(n){var o,s="function"==typeof e?e:function(t){return pt(t,e)},i=r.table.core,c=(o=i.schema.primaryKey).outbound,l=o.extractKey,u=200;function d(e,t){var r=t.failures;t=t.numFailures,h+=e-t;for(var n=0,o=a(r);n<o.length;n++){var s=o[n];f.push(r[s])}}(o=t.db._options.modifyChunkSize)&&(u="object"==typeof o?o[i.name]||o["*"]||200:o);var f=[],h=0,m=[],p=e===Pt;return t.clone().primaryKeys().then(function(t){function a(f){var h=Math.min(u,t.length-f),m=t.slice(f,f+h);return(p?Promise.resolve([]):i.getMany({trans:n,keys:m,cache:"immutable"})).then(function(g){var y=[],b=[],v=c?[]:null,x=p?m:[];if(!p)for(var w=0;w<h;++w){var k=g[w],j={value:P(k),primKey:t[f+w]};!1!==s.call(j,j.value,j)&&(null==j.value?x.push(t[f+w]):c||0===lt(l(k),l(j.value))?(b.push(j.value),c&&v.push(t[f+w])):(x.push(t[f+w]),y.push(j.value)))}return Promise.resolve(0<y.length&&i.mutate({trans:n,type:"add",values:y}).then(function(e){for(var t in e.failures)x.splice(parseInt(t),1);d(y.length,e)})).then(function(){return(0<b.length||o&&"object"==typeof e)&&i.mutate({trans:n,type:"put",keys:v,values:b,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<f}).then(function(e){return d(b.length,e)})}).then(function(){return(0<x.length||o&&p)&&i.mutate({trans:n,type:"delete",keys:x,criteria:o,isAdditionalChunk:0<f}).then(function(e){return ft(r.table,x,e)}).then(function(e){return d(x.length,e)})}).then(function(){return t.length>f+h&&a(f+u)})})}var o=xt(r)&&r.limit===1/0&&("function"!=typeof e||p)&&{index:r.index,range:r.range};return a(0).then(function(){if(0<f.length)throw new z("Error modifying one or more objects",f,h,m);return t.length})})})},Ct.prototype.delete=function(){var e=this._ctx,t=e.range;return!xt(e)||e.table.schema.yProps||!e.isPrimKey&&3!==t.type?this.modify(Pt):this._write(function(r){var n=e.table.core.schema.primaryKey,a=t;return e.table.core.count({trans:r,query:{index:n,range:a}}).then(function(t){return e.table.core.mutate({trans:r,type:"deleteRange",range:a}).then(function(e){var r=e.failures;if(e=e.numFailures)throw new z("Could not delete some values",Object.keys(r).map(function(e){return r[e]}),t-e);return t-e})})})},Ct);function Ct(){}var Pt=function(e,t){return t.value=null};function Ot(e,t){return e<t?-1:e===t?0:1}function Rt(e,t){return t<e?-1:e===t?0:1}function At(e,t,r){return(e=e instanceof Lt?new e.Collection(e):e)._ctx.error=new(r||TypeError)(t),e}function Tt(e){return new e.Collection(e,function(){return It("")}).limit(0)}function Mt(e,t,r,n){var a,o,s,i,c,l,u,d=r.length;if(!r.every(function(e){return"string"==typeof e}))return At(e,et);function f(e){a="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},o="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},s="next"===e?Ot:Rt;var t=r.map(function(e){return{lower:o(e),upper:a(e)}}).sort(function(e,t){return s(e.lower,t.lower)});i=t.map(function(e){return e.upper}),c=t.map(function(e){return e.lower}),u="next"===(l=e)?"":n}f("next"),(e=new e.Collection(e,function(){return Dt(i[0],c[d-1]+n)}))._ondirectionchange=function(e){f(e)};var h=0;return e._addAlgorithm(function(e,r,n){var a=e.key;if("string"!=typeof a)return!1;var f=o(a);if(t(f,c,h))return!0;for(var m=null,p=h;p<d;++p){var g=function(e,t,r,n,a,o){for(var s=Math.min(e.length,n.length),i=-1,c=0;c<s;++c){var l=t[c];if(l!==n[c])return a(e[c],r[c])<0?e.substr(0,c)+r[c]+r.substr(c+1):a(e[c],n[c])<0?e.substr(0,c)+n[c]+r.substr(c+1):0<=i?e.substr(0,i)+t[i]+r.substr(i+1):null;a(e[c],l)<0&&(i=c)}return s<n.length&&"next"===o?e+r.substr(e.length):s<e.length&&"prev"===o?e.substr(0,r.length):i<0?null:e.substr(0,i)+n[i]+r.substr(i+1)}(a,f,i[p],c[p],s,l);null===g&&null===m?h=p+1:(null===m||0<s(m,g))&&(m=g)}return r(null!==m?function(){e.continue(m+u)}:n),!1}),e}function Dt(e,t,r,n){return{type:2,lower:e,upper:t,lowerOpen:r,upperOpen:n}}function It(e){return{type:1,lower:e,upper:e}}var Lt=(Object.defineProperty(Kt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Kt.prototype.between=function(e,t,r,n){r=!1!==r,n=!0===n;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(r||n)&&(!r||!n)?Tt(this):new this.Collection(this,function(){return Dt(e,t,!r,!n)})}catch(a){return At(this,Ze)}},Kt.prototype.equals=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return It(e)})},Kt.prototype.above=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Dt(e,void 0,!0)})},Kt.prototype.aboveOrEqual=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Dt(e,void 0,!1)})},Kt.prototype.below=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Dt(void 0,e,!1,!0)})},Kt.prototype.belowOrEqual=function(e){return null==e?At(this,Ze):new this.Collection(this,function(){return Dt(void 0,e)})},Kt.prototype.startsWith=function(e){return"string"!=typeof e?At(this,et):this.between(e,e+Qe,!0,!0)},Kt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Mt(this,function(e,t){return 0===e.indexOf(t[0])},[e],Qe)},Kt.prototype.equalsIgnoreCase=function(e){return Mt(this,function(e,t){return e===t[0]},[e],"")},Kt.prototype.anyOfIgnoreCase=function(){var e=I.apply(D,arguments);return 0===e.length?Tt(this):Mt(this,function(e,t){return-1!==t.indexOf(e)},e,"")},Kt.prototype.startsWithAnyOfIgnoreCase=function(){var e=I.apply(D,arguments);return 0===e.length?Tt(this):Mt(this,function(e,t){return t.some(function(t){return 0===e.indexOf(t)})},e,Qe)},Kt.prototype.anyOf=function(){var e=this,t=I.apply(D,arguments),r=this._cmp;try{t.sort(r)}catch(o){return At(this,Ze)}if(0===t.length)return Tt(this);var n=new this.Collection(this,function(){return Dt(t[0],t[t.length-1])});n._ondirectionchange=function(n){r="next"===n?e._ascending:e._descending,t.sort(r)};var a=0;return n._addAlgorithm(function(e,n,o){for(var s=e.key;0<r(s,t[a]);)if(++a===t.length)return n(o),!1;return 0===r(s,t[a])||(n(function(){e.continue(t[a])}),!1)}),n},Kt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Kt.prototype.noneOf=function(){var e=I.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(r){return At(this,Ze)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Kt.prototype.inAnyRange=function(e,t){var r=this,n=this._cmp,a=this._ascending,o=this._descending,s=this._min,i=this._max;if(0===e.length)return Tt(this);if(!e.every(function(e){return void 0!==e[0]&&void 0!==e[1]&&a(e[0],e[1])<=0}))return At(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",V.InvalidArgument);var c,l=!t||!1!==t.includeLowers,u=t&&!0===t.includeUppers,d=a;function f(e,t){return d(e[0],t[0])}try{(c=e.reduce(function(e,t){for(var r=0,a=e.length;r<a;++r){var o=e[r];if(n(t[0],o[1])<0&&0<n(t[1],o[0])){o[0]=s(o[0],t[0]),o[1]=i(o[1],t[1]);break}}return r===a&&e.push(t),e},[])).sort(f)}catch(y){return At(this,Ze)}var h=0,m=u?function(e){return 0<a(e,c[h][1])}:function(e){return 0<=a(e,c[h][1])},p=l?function(e){return 0<o(e,c[h][0])}:function(e){return 0<=o(e,c[h][0])},g=m;return(e=new this.Collection(this,function(){return Dt(c[0][0],c[c.length-1][1],!l,!u)}))._ondirectionchange=function(e){d="next"===e?(g=m,a):(g=p,o),c.sort(f)},e._addAlgorithm(function(e,t,n){for(var o,s=e.key;g(s);)if(++h===c.length)return t(n),!1;return!m(o=s)&&!p(o)||(0===r._cmp(s,c[h][1])||0===r._cmp(s,c[h][0])||t(function(){d===a?e.continue(c[h][0]):e.continue(c[h][1])}),!1)}),e},Kt.prototype.startsWithAnyOf=function(){var e=I.apply(D,arguments);return e.every(function(e){return"string"==typeof e})?0===e.length?Tt(this):this.inAnyRange(e.map(function(e){return[e,e+Qe]})):At(this,"startsWithAnyOf() only works with strings")},Kt);function Kt(){}function Ft(e){return Me(function(t){return qt(t),e(t.target.error),!1})}function qt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Bt="storagemutated",zt="x-storagemutated-1",Ut=bt(null,Bt),$t=(Wt.prototype._lock=function(){return b(!be.global),++this._reculock,1!==this._reculock||be.global||(be.lockOwnerFor=this),this},Wt.prototype._unlock=function(){if(b(!be.global),0==--this._reculock)for(be.global||(be.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{He(e[1],e[0])}catch(t){}}return this},Wt.prototype._locked=function(){return this._reculock&&be.lockOwnerFor!==this},Wt.prototype.create=function(e){var t=this;if(!this.mode)return this;var r=this.db.idbdb,n=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!r)switch(n&&n.name){case"DatabaseClosedError":throw new V.DatabaseClosed(n);case"MissingAPIError":throw new V.MissingAPI(n.message,n);default:throw new V.OpenFailed(n)}if(!this.active)throw new V.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||r).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Me(function(r){qt(r),t._reject(e.error)}),e.onabort=Me(function(r){qt(r),t.active&&t._reject(new V.Abort(e.error)),t.active=!1,t.on("abort").fire(r)}),e.oncomplete=Me(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&Ut.storagemutated.fire(e.mutatedParts)}),this},Wt.prototype._promise=function(e,t,r){var n=this;if("readwrite"===e&&"readwrite"!==this.mode)return Xe(new V.ReadOnly("Transaction is readonly"));if(!this.active)return Xe(new V.TransactionInactive);if(this._locked())return new ke(function(a,o){n._blockedFuncs.push([function(){n._promise(e,t,r).then(a,o)},be])});if(r)return Be(function(){var e=new ke(function(e,r){n._lock();var a=t(e,r,n);a&&a.then&&a.then(e,r)});return e.finally(function(){return n._unlock()}),e._lib=!0,e});var a=new ke(function(e,r){var a=t(e,r,n);a&&a.then&&a.then(e,r)});return a._lib=!0,a},Wt.prototype._root=function(){return this.parent?this.parent._root():this},Wt.prototype.waitFor=function(e){var t,r=this._root(),n=ke.resolve(e);r._waitingFor?r._waitingFor=r._waitingFor.then(function(){return n}):(r._waitingFor=n,r._waitingQueue=[],t=r.idbtrans.objectStore(r.storeNames[0]),function e(){for(++r._spinCount;r._waitingQueue.length;)r._waitingQueue.shift()();r._waitingFor&&(t.get(-1/0).onsuccess=e)}());var a=r._waitingFor;return new ke(function(e,t){n.then(function(t){return r._waitingQueue.push(Me(e.bind(null,t)))},function(e){return r._waitingQueue.push(Me(t.bind(null,e)))}).finally(function(){r._waitingFor===a&&(r._waitingFor=null)})})},Wt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new V.Abort))},Wt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(l(t,e))return t[e];var r=this.schema[e];if(!r)throw new V.NotFound("Table "+e+" not part of transaction");return(r=new this.db.Table(e,r,this)).core=this.db.core.table(e),t[e]=r},Wt);function Wt(){}function Vt(e,t,r,n,a,o,s,i){return{name:e,keyPath:t,unique:r,multi:n,auto:a,compound:o,src:(r&&!s?"&":"")+(n?"*":"")+(a?"++":"")+Gt(t),type:i}}function Gt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Ht(e,t,r){return{name:e,primKey:t,indexes:r,mappedClass:null,idxByName:(n=function(e){return[e.name,e]},r.reduce(function(e,t,r){return(r=n(t,r))&&(e[r[0]]=r[1]),e},{}))};var n}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(t){return Yt=function(){return Qe},Qe}};function Jt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return x(e,t)}:function(t){return x(t,e)};var t}function Xt(e){return[].slice.call(e)}var Qt=0;function Zt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function er(e,t,r){function n(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var r=e.lower,n=e.upper,a=e.lowerOpen;return e=e.upperOpen,void 0===r?void 0===n?null:t.upperBound(n,!!e):void 0===n?t.lowerBound(r,!!a):t.bound(r,n,!!a,!!e)}function a(e){var t,r=e.name;return{name:r,schema:e,mutate:function(e){var t=e.trans,a=e.type,o=e.keys,s=e.values,i=e.range;return new Promise(function(e,c){e=Me(e);var l=t.objectStore(r),u=null==l.keyPath,d="put"===a||"add"===a;if(!d&&"delete"!==a&&"deleteRange"!==a)throw new Error("Invalid operation type: "+a);var f,h=(o||s||{length:1}).length;if(o&&s&&o.length!==s.length)throw new Error("Given keys array must have same length as given values array.");if(0===h)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function m(e){++y,qt(e)}var p=[],g=[],y=0;if("deleteRange"===a){if(4===i.type)return e({numFailures:y,failures:g,results:[],lastResult:void 0});3===i.type?p.push(f=l.clear()):p.push(f=l.delete(n(i)))}else{var b=(u=d?u?[s,o]:[s,null]:[o,null])[0],v=u[1];if(d)for(var x=0;x<h;++x)p.push(f=v&&void 0!==v[x]?l[a](b[x],v[x]):l[a](b[x])),f.onerror=m;else for(x=0;x<h;++x)p.push(f=l[a](b[x])),f.onerror=m}function w(t){t=t.target.result,p.forEach(function(e,t){return null!=e.error&&(g[t]=e.error)}),e({numFailures:y,failures:g,results:"delete"===a?o:p.map(function(e){return e.result}),lastResult:t})}f.onerror=function(e){m(e),w(e)},f.onsuccess=w})},getMany:function(e){var t=e.trans,n=e.keys;return new Promise(function(e,a){e=Me(e);for(var o,s=t.objectStore(r),i=n.length,c=new Array(i),l=0,u=0,d=function(t){t=t.target,c[t._pos]=t.result,++u===l&&e(c)},f=Ft(a),h=0;h<i;++h)null!=n[h]&&((o=s.get(n[h]))._pos=h,o.onsuccess=d,o.onerror=f,++l);0===l&&e(c)})},get:function(e){var t=e.trans,n=e.key;return new Promise(function(e,a){e=Me(e);var o=t.objectStore(r).get(n);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Ft(a)})},query:(t=l,function(e){return new Promise(function(a,o){a=Me(a);var s,i,c,l=e.trans,u=e.values,d=e.limit,f=e.query,h=d===1/0?void 0:d,m=f.index;if(f=f.range,l=l.objectStore(r),m=m.isPrimaryKey?l:l.index(m.name),f=n(f),0===d)return a({result:[]});t?((h=u?m.getAll(f,h):m.getAllKeys(f,h)).onsuccess=function(e){return a({result:e.target.result})},h.onerror=Ft(o)):(s=0,i=!u&&"openKeyCursor"in m?m.openKeyCursor(f):m.openCursor(f),c=[],i.onsuccess=function(e){var t=i.result;return t?(c.push(u?t.value:t.primaryKey),++s===d?a({result:c}):void t.continue()):a({result:c})},i.onerror=Ft(o))})}),openCursor:function(e){var t=e.trans,a=e.values,o=e.query,s=e.reverse,i=e.unique;return new Promise(function(e,c){e=Me(e);var l=o.index,u=o.range,d=t.objectStore(r),f=(d=l.isPrimaryKey?d:d.index(l.name),l=s?i?"prevunique":"prev":i?"nextunique":"next",!a&&"openKeyCursor"in d?d.openKeyCursor(n(u),l):d.openCursor(n(u),l));f.onerror=Ft(c),f.onsuccess=Me(function(r){var n,a,o,s,i=f.result;i?(i.___id=++Qt,i.done=!1,n=i.continue.bind(i),a=(a=i.continuePrimaryKey)&&a.bind(i),o=i.advance.bind(i),s=function(){throw new Error("Cursor not stopped")},i.trans=t,i.stop=i.continue=i.continuePrimaryKey=i.advance=function(){throw new Error("Cursor not started")},i.fail=Me(c),i.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},i.start=function(e){function t(){if(f.result)try{e()}catch(t){i.fail(t)}else i.done=!0,i.start=function(){throw new Error("Cursor behind last entry")},i.stop()}var r=new Promise(function(e,t){e=Me(e),f.onerror=Ft(t),i.fail=t,i.stop=function(t){i.stop=i.continue=i.continuePrimaryKey=i.advance=s,e(t)}});return f.onsuccess=Me(function(e){f.onsuccess=t,t()}),i.continue=n,i.continuePrimaryKey=a,i.advance=o,t(),r},e(i)):e(null)},c)})},count:function(e){var t=e.query,a=e.trans,o=t.index,s=t.range;return new Promise(function(e,t){var i=a.objectStore(r),c=o.isPrimaryKey?i:i.index(o.name);(c=(i=n(s))?c.count(i):c.count()).onsuccess=Me(function(t){return e(t.target.result)}),c.onerror=Ft(t)})}}}r=(i=r,c=Xt((s=e).objectStoreNames),u={schema:{name:s.name,tables:c.map(function(e){return i.objectStore(e)}).map(function(e){var t=e.keyPath,r=e.autoIncrement,n=o(t),a={};return r={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:n,keyPath:t,autoIncrement:r,unique:!0,extractKey:Jt(t)},indexes:Xt(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,r=e.unique,n=e.multiEntry;return e=e.keyPath,n={name:t,compound:o(e),keyPath:e,unique:r,multiEntry:n,extractKey:Jt(e)},a[Zt(e)]=n}),getIndexByKeyPath:function(e){return a[Zt(e)]}},a[":id"]=r.primaryKey,null!=t&&(a[Zt(t)]=r.primaryKey),r})},hasGetAll:0<c.length&&"getAll"in i.objectStore(c[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}).schema;var s,i,c,l=u.hasGetAll,u=r.tables.map(a),d={};return u.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!d[e])throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:r}}function tr(e,r,n,a){var o=n.IDBKeyRange;return n.indexedDB,{dbcore:(a=er(r,o,a),e.dbcore.reduce(function(e,r){return r=r.create,t(t({},e),r(e))},a))}}function rr(e,t){var r=t.db;t=tr(e._middlewares,r,e._deps,t),e.core=t.dbcore,e.tables.forEach(function(t){var r=t.name;e.core.schema.tables.some(function(e){return e.name===r})&&(t.core=e.core.table(r),e[r]instanceof e.Table&&(e[r].core=t.core))})}function nr(e,t,r,n){r.forEach(function(r){var a=n[r];t.forEach(function(t){var n=function e(t,r){return m(t,r)||(t=i(t))&&e(t,r)}(t,r);(!n||"value"in n&&void 0===n.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,r,{get:function(){return this.table(r)},set:function(e){d(this,r,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[r]=new e.Table(r,a))})})}function ar(e,t){t.forEach(function(t){for(var r in t)t[r]instanceof e.Table&&delete t[r]})}function or(e,t){return e._cfg.version-t._cfg.version}function sr(e,t,r,n){var o=e._dbSchema;r.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Ht("$meta",mr("")[0],[]),e._storeNames.push("$meta"));var s=e._createTransaction("readwrite",e._storeNames,o);s.create(r),s._completion.catch(n);var i=s._reject.bind(s),c=be.transless||be;Be(function(){return be.trans=s,be.transless=c,0!==t?(rr(e,r),l=t,((n=s).storeNames.includes("$meta")?n.table("$meta").get("version").then(function(e){return null!=e?e:l}):ke.resolve(l)).then(function(t){return o=t,i=s,c=r,l=[],t=(n=e)._versions,u=n._dbSchema=fr(0,n.idbdb,c),0!==(t=t.filter(function(e){return e._cfg.version>=o})).length?(t.forEach(function(e){l.push(function(){var t=u,r=e._cfg.dbschema;hr(n,t,c),hr(n,r,c),u=n._dbSchema=r;var s=cr(t,r);s.add.forEach(function(e){lr(c,e[0],e[1].primKey,e[1].indexes)}),s.change.forEach(function(e){if(e.recreate)throw new V.Upgrade("Not yet support for changing primary key");var t=c.objectStore(e.name);e.add.forEach(function(e){return dr(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),dr(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var l=e._cfg.contentUpgrade;if(l&&e._cfg.version>o){rr(n,c),i._memoizedTables={};var d=j(r);s.del.forEach(function(e){d[e]=t[e]}),ar(n,[n.Transaction.prototype]),nr(n,[n.Transaction.prototype],a(d),d),i.schema=d;var f,h=L(l);return h&&ze(),s=ke.follow(function(){var e;(f=l(i))&&h&&(e=Ue.bind(null,null),f.then(e,e))}),f&&"function"==typeof f.then?ke.resolve(f):s.then(function(){return f})}}),l.push(function(t){var r,a,o=e._cfg.dbschema;r=o,a=t,[].slice.call(a.db.objectStoreNames).forEach(function(e){return null==r[e]&&a.db.deleteObjectStore(e)}),ar(n,[n.Transaction.prototype]),nr(n,[n.Transaction.prototype],n._storeNames,n._dbSchema),i.schema=n._dbSchema}),l.push(function(t){n.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(n.idbdb.version/10)===e._cfg.version?(n.idbdb.deleteObjectStore("$meta"),delete n._dbSchema.$meta,n._storeNames=n._storeNames.filter(function(e){return"$meta"!==e})):t.objectStore("$meta").put(e._cfg.version,"version"))})}),function e(){return l.length?ke.resolve(l.shift()(i.idbtrans)).then(e):ke.resolve()}().then(function(){ur(u,c)})):ke.resolve();var n,o,i,c,l,u}).catch(i)):(a(o).forEach(function(e){lr(r,e,o[e].primKey,o[e].indexes)}),rr(e,r),void ke.follow(function(){return e.on.populate.fire(s)}).catch(i));var n,l})}function ir(e,t){ur(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var r=fr(0,e.idbdb,t);hr(e,e._dbSchema,t);for(var n=0,a=cr(r,e._dbSchema).change;n<a.length;n++){var o=function(e){if(e.change.length||e.recreate)return{value:void 0};var r=t.objectStore(e.name);e.add.forEach(function(e){dr(r,e)})}(a[n]);if("object"==typeof o)return o.value}}function cr(e,t){var r,n={del:[],add:[],change:[]};for(r in e)t[r]||n.del.push(r);for(r in t){var a=e[r],o=t[r];if(a){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(a.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||a.primKey.auto!==o.primKey.auto)s.recreate=!0,n.change.push(s);else{var i=a.idxByName,c=o.idxByName,l=void 0;for(l in i)c[l]||s.del.push(l);for(l in c){var u=i[l],d=c[l];u?u.src!==d.src&&s.change.push(d):s.add.push(d)}(0<s.del.length||0<s.add.length||0<s.change.length)&&n.change.push(s)}}else n.add.push([r,o])}return n}function lr(e,t,r,n){var a=e.db.createObjectStore(t,r.keyPath?{keyPath:r.keyPath,autoIncrement:r.auto}:{autoIncrement:r.auto});return n.forEach(function(e){return dr(a,e)}),a}function ur(e,t){a(e).forEach(function(r){t.db.objectStoreNames.contains(r)||lr(t,r,e[r].primKey,e[r].indexes)})}function dr(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function fr(e,t,r){var n={};return g(t.objectStoreNames,0).forEach(function(e){for(var t=r.objectStore(e),a=Vt(Gt(i=t.keyPath),i||"",!0,!1,!!t.autoIncrement,i&&"string"!=typeof i,!0),o=[],s=0;s<t.indexNames.length;++s){var i=(c=t.index(t.indexNames[s])).keyPath,c=Vt(c.name,i,!!c.unique,!!c.multiEntry,!1,i&&"string"!=typeof i,!1);o.push(c)}n[e]=Ht(e,a,o)}),n}function hr(e,t,r){for(var a=r.db.objectStoreNames,o=0;o<a.length;++o){var s=a[o],i=r.objectStore(s);e._hasGetAll="getAll"in i;for(var c=0;c<i.indexNames.length;++c){var l=i.indexNames[c],u=i.index(l).keyPath,d="string"==typeof u?u:"["+g(u).join("+")+"]";!t[s]||(u=t[s].idxByName[d])&&(u.name=l,delete t[s].idxByName[d],t[s].idxByName[l]=u)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function mr(e){return e.split(",").map(function(e,t){var r=null===(n=(a=e.split(":"))[1])||void 0===n?void 0:n.trim(),n=(e=a[0].trim()).replace(/([&*]|\+\+)/g,""),a=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Vt(n,a||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(a),0===t,r)})}var pr=(gr.prototype._createTableSchema=Ht,gr.prototype._parseIndexSyntax=mr,gr.prototype._parseStoresSpec=function(e,t){var r=this;a(e).forEach(function(n){if(null!==e[n]){var a=r._parseIndexSyntax(e[n]),o=a.shift();if(!o)throw new V.Schema("Invalid schema for table "+n+": "+e[n]);if(o.unique=!0,o.multi)throw new V.Schema("Primary key cannot be multiEntry*");a.forEach(function(e){if(e.auto)throw new V.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new V.Schema("Index must have a name and cannot be an empty string")}),a=r._createTableSchema(n,o,a),t[n]=a}})},gr.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var r={},n={};return e.forEach(function(e){s(r,e._cfg.storesSource),n=e._cfg.dbschema={},e._parseStoresSpec(r,n)}),t._dbSchema=n,ar(t,[t._allTables,t,t.Transaction.prototype]),nr(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(n),n),t._storeNames=a(n),this},gr.prototype.upgrade=function(e){return this._cfg.contentUpgrade=ne(this._cfg.contentUpgrade||Y,e),this},gr);function gr(){}function yr(e,t){var r=e._dbNamesDB;return r||(r=e._dbNamesDB=new rn(rt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),r.table("dbnames")}function br(e){return e&&"function"==typeof e.databases}function vr(e){return Be(function(){return be.letThrough=!0,e()})}function xr(e){return!("from"in e)}var wr=function(e,t){if(!this){var r=new wr;return e&&"d"in e&&s(r,e),r}s(this,arguments.length?{d:1,from:e,to:1<arguments.length?t:e}:{d:0})};function kr(e,t,r){var n=lt(t,r);if(!isNaN(n)){if(0<n)throw RangeError();if(xr(e))return s(e,{from:t,to:r,d:1});var a=e.l;if(n=e.r,lt(r,e.from)<0)return a?kr(a,t,r):e.l={from:t,to:r,d:1,l:null,r:null},_r(e);if(0<lt(t,e.to))return n?kr(n,t,r):e.r={from:t,to:r,d:1,l:null,r:null},_r(e);lt(t,e.from)<0&&(e.from=t,e.l=null,e.d=n?n.d+1:1),0<lt(r,e.to)&&(e.to=r,e.r=null,e.d=e.l?e.l.d+1:1),r=!e.r,a&&!e.l&&jr(e,a),n&&r&&jr(e,n)}}function jr(e,t){xr(t)||function e(t,r){var n=r.from,a=r.to,o=r.l;r=r.r,kr(t,n,a),o&&e(t,o),r&&e(t,r)}(e,t)}function Nr(e,t){var r=Er(t),n=r.next();if(n.done)return!1;for(var a=n.value,o=Er(e),s=o.next(a.from),i=s.value;!n.done&&!s.done;){if(lt(i.from,a.to)<=0&&0<=lt(i.to,a.from))return!0;lt(a.from,i.from)<0?a=(n=r.next(i.from)).value:i=(s=o.next(a.from)).value}return!1}function Er(e){var t=xr(e)?null:{s:0,n:e};return{next:function(e){for(var r=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,r)for(;t.n.l&&lt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!r||lt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function _r(e){var r,n,a=((null===(r=e.r)||void 0===r?void 0:r.d)||0)-((null===(n=e.l)||void 0===n?void 0:n.d)||0),o=1<a?"r":a<-1?"l":"";o&&(r="r"==o?"l":"r",n=t({},e),a=e[o],e.from=a.from,e.to=a.to,e[o]=a[o],n[o]=a[r],(e[r]=n).d=Sr(n)),e.d=Sr(e)}function Sr(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cr(e,t){return a(t).forEach(function(r){e[r]?jr(e[r],t[r]):e[r]=function e(t){var r,n,a={};for(r in t)l(t,r)&&(n=t[r],a[r]=!n||"object"!=typeof n||S.has(n.constructor)?n:e(n));return a}(t[r])}),e}function Pr(e,t){return e.all||t.all||Object.keys(e).some(function(r){return t[r]&&Nr(t[r],e[r])})}u(wr.prototype,((K={add:function(e){return jr(this,e),this},addKey:function(e){return kr(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return kr(t,e,e)}),this},hasKey:function(e){var t=Er(this).next(e).value;return t&&lt(t.from,e)<=0&&0<=lt(t.to,e)}})[A]=function(){return Er(this)},K));var Or={},Rr={},Ar=!1;function Tr(e){Cr(Rr,e),Ar||(Ar=!0,setTimeout(function(){Ar=!1,Mr(Rr,!(Rr={}))},0))}function Mr(e,t){void 0===t&&(t=!1);var r=new Set;if(e.all)for(var n=0,a=Object.values(Or);n<a.length;n++)Dr(s=a[n],e,r,t);else for(var o in e){var s,i=/^idb\:\/\/(.*)\/(.*)\//.exec(o);i&&(o=i[1],i=i[2],(s=Or["idb://".concat(o,"/").concat(i)])&&Dr(s,e,r,t))}r.forEach(function(e){return e()})}function Dr(e,t,r,n){for(var a=[],o=0,s=Object.entries(e.queries.query);o<s.length;o++){for(var i=s[o],c=i[0],l=[],u=0,d=i[1];u<d.length;u++){var f=d[u];Pr(t,f.obsSet)?f.subscribers.forEach(function(e){return r.add(e)}):n&&l.push(f)}n&&a.push([c,l])}if(n)for(var h=0,m=a;h<m.length;h++){var p=m[h];c=p[0],l=p[1],e.queries.query[c]=l}}function Ir(e){var t=e._state,r=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?Xe(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var n=t.openCanceller,o=Math.round(10*e.verno),s=!1;function i(){if(t.openCanceller!==n)throw new V.DatabaseClosed("db.open() was cancelled")}function c(){return new ke(function(n,l){if(i(),!r)throw new V.MissingAPI;var u=e.name,h=t.autoSchema||!o?r.open(u):r.open(u,o);if(!h)throw new V.MissingAPI;h.onerror=Ft(l),h.onblocked=Me(e._fireOnBlocked),h.onupgradeneeded=Me(function(n){var a;d=h.transaction,t.autoSchema&&!e._options.allowEmptyDB?(h.onerror=qt,d.abort(),h.result.close(),(a=r.deleteDatabase(u)).onsuccess=a.onerror=Me(function(){l(new V.NoSuchDatabase("Database ".concat(u," doesnt exist")))})):(d.onerror=Ft(l),n=n.oldVersion>Math.pow(2,62)?0:n.oldVersion,f=n<1,e.idbdb=h.result,s&&ir(e,d),sr(e,n/10,d,l))},l),h.onsuccess=Me(function(){d=null;var r,i,l,m,p,y=e.idbdb=h.result,b=g(y.objectStoreNames);if(0<b.length)try{var v=y.transaction(1===(m=b).length?m[0]:m,"readonly");if(t.autoSchema)i=y,l=v,(r=e).verno=i.version/10,l=r._dbSchema=fr(0,i,l),r._storeNames=g(i.objectStoreNames,0),nr(r,[r._allTables],a(l),l);else if(hr(e,e._dbSchema,v),((p=cr(fr(0,(p=e).idbdb,v),p._dbSchema)).add.length||p.change.some(function(e){return e.add.length||e.change.length}))&&!s)return y.close(),o=y.version+1,s=!0,n(c());rr(e,v)}catch(x){}tt.push(e),y.onversionchange=Me(function(r){t.vcFired=!0,e.on("versionchange").fire(r)}),y.onclose=Me(function(){e.close({disableAutoOpen:!1})}),f&&(p=e._deps,v=u,y=p.indexedDB,p=p.IDBKeyRange,br(y)||v===rt||yr(y,p).put({name:v}).catch(Y)),n()},l)}).catch(function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,c();break;case"VersionError":if(0<o)return o=0,c()}return ke.reject(e)})}var l,u=t.dbReadyResolve,d=null,f=!1;return ke.race([n,("undefined"==typeof navigator?ke.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){function t(){return indexedDB.databases().finally(e)}l=setInterval(t,100),t()}).finally(function(){return clearInterval(l)}):Promise.resolve()).then(c)]).then(function(){return i(),t.onReadyBeingFired=[],ke.resolve(vr(function(){return e.on.ready.fire(e.vip)})).then(function r(){if(0<t.onReadyBeingFired.length){var n=t.onReadyBeingFired.reduce(ne,Y);return t.onReadyBeingFired=[],ke.resolve(vr(function(){return n(e.vip)})).then(r)}})}).finally(function(){t.openCanceller===n&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(r){t.dbOpenError=r;try{d&&d.abort()}catch(a){}return n===t.openCanceller&&e._close(),Xe(r)}).finally(function(){t.openComplete=!0,u()}).then(function(){var t;return f&&(t={},e.tables.forEach(function(r){r.schema.indexes.forEach(function(n){n.name&&(t["idb://".concat(e.name,"/").concat(r.name,"/").concat(n.name)]=new wr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(r.name,"/")]=t["idb://".concat(e.name,"/").concat(r.name,"/:dels")]=new wr(-1/0,[[[]]])}),Ut(Bt).fire(t),Mr(t,!0)),e})}function Lr(e){function t(t){return e.next(t)}var r=a(t),n=a(function(t){return e.throw(t)});function a(e){return function(t){var a=e(t);return t=a.value,a.done?t:t&&"function"==typeof t.then?t.then(r,n):o(t)?Promise.all(t).then(r,n):r(t)}}return a(t)()}function Kr(e,t,r){for(var n=o(e)?e.slice():[e],a=0;a<r;++a)n.push(t);return n}var Fr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(r){var n=e.table(r),a=n.schema,o={},s=[];function i(e,r,n){var a=Zt(e),c=o[a]=o[a]||[],l=null==e?0:"string"==typeof e?1:e.length,u=0<r;return u=t(t({},n),{name:u?"".concat(a,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:u,keyTail:r,keyLength:l,extractKey:Jt(e),unique:!u&&n.unique}),c.push(u),u.isPrimaryKey||s.push(u),1<l&&i(2===l?e[0]:e.slice(0,l-1),r+1,n),c.sort(function(e,t){return e.keyTail-t.keyTail}),u}r=i(a.primaryKey.keyPath,0,a.primaryKey),o[":id"]=[r];for(var c=0,l=a.indexes;c<l.length;c++){var u=l[c];i(u.keyPath,0,u)}function d(r){var n,a=r.query.index;return a.isVirtual?t(t({},r),{query:{index:a.lowLevelIndex,range:(n=r.query.range,a=a.keyTail,{type:1===n.type?2:n.type,lower:Kr(n.lower,n.lowerOpen?e.MAX_KEY:e.MIN_KEY,a),lowerOpen:!0,upper:Kr(n.upper,n.upperOpen?e.MIN_KEY:e.MAX_KEY,a),upperOpen:!0})}}):r}return t(t({},n),{schema:t(t({},a),{primaryKey:r,indexes:s,getIndexByKeyPath:function(e){return(e=o[Zt(e)])&&e[0]}}),count:function(e){return n.count(d(e))},query:function(e){return n.query(d(e))},openCursor:function(t){var r=t.query.index,a=r.keyTail,o=r.isVirtual,s=r.keyLength;return o?n.openCursor(d(t)).then(function(e){return e&&i(e)}):n.openCursor(t);function i(r){return Object.create(r,{continue:{value:function(n){null!=n?r.continue(Kr(n,t.reverse?e.MAX_KEY:e.MIN_KEY,a)):t.unique?r.continue(r.key.slice(0,s).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,a)):r.continue()}},continuePrimaryKey:{value:function(t,n){r.continuePrimaryKey(Kr(t,e.MAX_KEY,a),n)}},primaryKey:{get:function(){return r.primaryKey}},key:{get:function(){var e=r.key;return 1===s?e[0]:e.slice(0,s)}},value:{get:function(){return r.value}}})}}})}})}};function qr(e,t,r,n){return r=r||{},n=n||"",a(e).forEach(function(a){var o,s,i;l(t,a)?(o=e[a],s=t[a],"object"==typeof o&&"object"==typeof s&&o&&s?(i=R(o))!==R(s)?r[n+a]=t[a]:"Object"===i?qr(o,s,r,n+a+"."):o!==s&&(r[n+a]=t[a]):o!==s&&(r[n+a]=t[a])):r[n+a]=void 0}),a(t).forEach(function(a){l(e,a)||(r[n+a]=t[a])}),r}function Br(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var zr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var a=e.table(n),o=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var s=be.trans,i=s.table(n).hook,c=i.deleting,u=i.creating,d=i.updating;switch(e.type){case"add":if(u.fire===Y)break;return s._promise("readwrite",function(){return f(e)},!0);case"put":if(u.fire===Y&&d.fire===Y)break;return s._promise("readwrite",function(){return f(e)},!0);case"delete":if(c.fire===Y)break;return s._promise("readwrite",function(){return f(e)},!0);case"deleteRange":if(c.fire===Y)break;return s._promise("readwrite",function(){return function e(r,n,s){return a.query({trans:r,values:!1,query:{index:o,range:n},limit:s}).then(function(a){var o=a.result;return f({type:"delete",keys:o,trans:r}).then(function(a){return 0<a.numFailures?Promise.reject(a.failures[0]):o.length<s?{failures:[],numFailures:0,lastResult:void 0}:e(r,t(t({},n),{lower:o[o.length-1],lowerOpen:!0}),s)})})}(e.trans,e.range,1e4)},!0)}return a.mutate(e);function f(e){var n,s,i,f=be.trans,h=e.keys||Br(o,e);if(!h)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:h}):t({},e)).type&&(e.values=r([],e.values)),e.keys&&(e.keys=r([],e.keys)),n=a,i=h,("add"===(s=e).type?Promise.resolve([]):n.getMany({trans:s.trans,keys:i,cache:"immutable"})).then(function(t){var r=h.map(function(r,n){var a,s,i,h=t[n],m={onerror:null,onsuccess:null};return"delete"===e.type?c.fire.call(m,r,h,f):"add"===e.type||void 0===h?(a=u.fire.call(m,r,e.values[n],f),null==r&&null!=a&&(e.keys[n]=r=a,o.outbound||w(e.values[n],o.keyPath,r))):(a=qr(h,e.values[n]),(s=d.fire.call(m,a,r,h,f))&&(i=e.values[n],Object.keys(s).forEach(function(e){l(i,e)?i[e]=s[e]:w(i,e,s[e])}))),m});return a.mutate(e).then(function(n){for(var a=n.failures,o=n.results,s=n.numFailures,i=(n=n.lastResult,0);i<h.length;++i){var c=(o||h)[i],l=r[i];null==c?l.onerror&&l.onerror(a[i]):l.onsuccess&&l.onsuccess("put"===e.type&&t[i]?e.values[i]:c)}return{failures:a,results:o,numFailures:s,lastResult:n}}).catch(function(e){return r.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}}})}})}};function Ur(e,t,r){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var n=[],a=0,o=0;a<t.keys.length&&o<e.length;++a)0===lt(t.keys[a],e[o])&&(n.push(r?P(t.values[a]):t.values[a]),++o);return n.length===e.length?n:null}catch(s){return null}}var $r={stack:"dbcore",level:-1,create:function(e){return{table:function(r){var n=e.table(r);return t(t({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Ur(e.keys,e.trans._cache,"clone"===e.cache);return t?ke.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?P(t):t},t})},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),n.mutate(e)}})}}}};function Wr(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Vr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Gr={stack:"dbcore",level:0,name:"Observability",create:function(e){var r=e.schema.name,n=new wr(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,r,n){if(be.subscr&&"readonly"!==r)throw new V.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(be.querier));return e.transaction(t,r,n)},table:function(s){var i=e.table(s),c=i.schema,l=c.primaryKey,u=c.indexes,d=l.extractKey,f=l.outbound,h=l.autoIncrement&&u.filter(function(e){return e.compound&&e.keyPath.includes(l.keyPath)}),m=t(t({},i),{mutate:function(t){function a(e){return e="idb://".concat(r,"/").concat(s,"/").concat(e),p[e]||(p[e]=new wr)}var u,d,f,m=t.trans,p=t.mutatedParts||(t.mutatedParts={}),g=a(""),y=a(":dels"),b=t.type,v=(w="deleteRange"===t.type?[t.range]:"delete"===t.type?[t.keys]:t.values.length<50?[Br(l,t).filter(function(e){return e}),t.values]:[])[0],x=w[1],w=t.trans._cache;return o(v)?(g.addKeys(v),(w="delete"===b||v.length===x.length?Ur(v,w):null)||y.addKeys(v),(w||x)&&(u=a,d=w,f=x,c.indexes.forEach(function(e){var t=u(e.name||"");function r(t){return null!=t?e.extractKey(t):null}function n(r){return e.multiEntry&&o(r)?r.forEach(function(e){return t.addKey(e)}):t.addKey(r)}(d||f).forEach(function(e,t){var a=d&&r(d[t]);0!==lt(a,t=f&&r(f[t]))&&(null!=a&&n(a),null!=t&&n(t))})}))):v?(x={from:null!==(x=v.lower)&&void 0!==x?x:e.MIN_KEY,to:null!==(x=v.upper)&&void 0!==x?x:e.MAX_KEY},y.add(x),g.add(x)):(g.add(n),y.add(n),c.indexes.forEach(function(e){return a(e.name).add(n)})),i.mutate(t).then(function(e){return!v||"add"!==t.type&&"put"!==t.type||(g.addKeys(e.results),h&&h.forEach(function(r){for(var n=t.values.map(function(e){return r.extractKey(e)}),o=r.keyPath.findIndex(function(e){return e===l.keyPath}),s=0,i=e.results.length;s<i;++s)n[s][o]=e.results[s];a(r.name).addKeys(n)})),m.mutatedParts=Cr(m.mutatedParts||{},p),e})}}),p={get:function(e){return[l,new wr(e.key)]},getMany:function(e){return[l,(new wr).addKeys(e.keys)]},count:u=function(t){t=(r=t.query).index;var r=r.range;return[t,new wr(null!==(t=r.lower)&&void 0!==t?t:e.MIN_KEY,null!==(r=r.upper)&&void 0!==r?r:e.MAX_KEY)]},query:u,openCursor:u};return a(p).forEach(function(e){m[e]=function(a){var o=!!(m=be.subscr),c=Wr(be,i)&&Vr(e,a)?a.obsSet={}:m;if(o){var l=function(e){return e="idb://".concat(r,"/").concat(s,"/").concat(e),c[e]||(c[e]=new wr)},u=l(""),h=l(":dels"),m=(o=(m=p[e](a))[0],m[1]);if(("query"===e&&o.isPrimaryKey&&!a.values?h:l(o.name||"")).add(m),!o.isPrimaryKey){if("count"!==e){var g="query"===e&&f&&a.values&&i.query(t(t({},a),{values:!1}));return i[e].apply(this,arguments).then(function(t){if("query"===e){if(f&&a.values)return g.then(function(e){return e=e.result,u.addKeys(e),t});var r=a.values?t.result.map(d):t.result;(a.values?u:h).addKeys(r)}else if("openCursor"===e){var n=t,o=a.values;return n&&Object.create(n,{key:{get:function(){return h.addKey(n.primaryKey),n.key}},primaryKey:{get:function(){var e=n.primaryKey;return h.addKey(e),e}},value:{get:function(){return o&&u.addKey(n.primaryKey),n.value}}})}return t})}h.add(n)}}return i[e].apply(this,arguments)}}),m}})}};function Hr(e,r,n){if(0===n.numFailures)return r;if("deleteRange"===r.type)return null;var a=r.keys?r.keys.length:"values"in r&&r.values?r.values.length:1;return n.numFailures===a?null:(r=t({},r),o(r.keys)&&(r.keys=r.keys.filter(function(e,t){return!(t in n.failures)})),"values"in r&&o(r.values)&&(r.values=r.values.filter(function(e,t){return!(t in n.failures)})),r)}function Yr(e,t){return r=e,(void 0===(n=t).lower||(n.lowerOpen?0<lt(r,n.lower):0<=lt(r,n.lower)))&&(void 0===t.upper||(t.upperOpen?lt(e,t.upper)<0:lt(e,t.upper)<=0));var r,n}function Jr(e,t,r,n,a,s){if(!r||0===r.length)return e;var i=t.query.index,c=i.multiEntry,l=t.query.range,u=n.schema.primaryKey.extractKey,d=i.extractKey,f=(i.lowLevelIndex||i).extractKey;return(r=r.reduce(function(e,r){var n=e,a=[];if("add"===r.type||"put"===r.type)for(var s=new wr,i=r.values.length-1;0<=i;--i){var f,h=r.values[i],m=u(h);s.hasKey(m)||(f=d(h),(c&&o(f)?f.some(function(e){return Yr(e,l)}):Yr(f,l))&&(s.addKey(m),a.push(h)))}switch(r.type){case"add":var p=(new wr).addKeys(t.values?e.map(function(e){return u(e)}):e);n=e.concat(t.values?a.filter(function(e){return e=u(e),!p.hasKey(e)&&(p.addKey(e),!0)}):a.map(function(e){return u(e)}).filter(function(e){return!p.hasKey(e)&&(p.addKey(e),!0)}));break;case"put":var g=(new wr).addKeys(r.values.map(function(e){return u(e)}));n=e.filter(function(e){return!g.hasKey(t.values?u(e):e)}).concat(t.values?a:a.map(function(e){return u(e)}));break;case"delete":var y=(new wr).addKeys(r.keys);n=e.filter(function(e){return!y.hasKey(t.values?u(e):e)});break;case"deleteRange":var b=r.range;n=e.filter(function(e){return!Yr(u(e),b)})}return n},e))===e?e:(r.sort(function(e,t){return lt(f(e),f(t))||lt(u(e),u(t))}),t.limit&&t.limit<1/0&&(r.length>t.limit?r.length=t.limit:e.length===t.limit&&r.length<t.limit&&(a.dirty=!0)),s?Object.freeze(r):r)}function Xr(e,t){return 0===lt(e.lower,t.lower)&&0===lt(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Qr(e,t){return function(e,t,r,n){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=lt(e,t))){if(r&&n)return 0;if(r)return 1;if(n)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,r,n){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=lt(e,t))){if(r&&n)return 0;if(r)return-1;if(n)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Zr(e,t,r,n){e.subscribers.add(r),n.addEventListener("abort",function(){var n,a;e.subscribers.delete(r),0===e.subscribers.size&&(n=e,a=t,setTimeout(function(){0===n.subscribers.size&&M(a,n)},3e3))})}var en={stack:"dbcore",level:0,name:"Cache",create:function(e){var r=e.schema.name;return t(t({},e),{transaction:function(t,n,a){var o,s,i=e.transaction(t,n,a);return"readwrite"===n&&(s=(o=new AbortController).signal,a=function(a){return function(){if(o.abort(),"readwrite"===n){for(var s=new Set,c=0,l=t;c<l.length;c++){var u=l[c],d=Or["idb://".concat(r,"/").concat(u)];if(d){var f=e.table(u),h=d.optimisticOps.filter(function(e){return e.trans===i});if(i._explicit&&a&&i.mutatedParts)for(var m=0,p=Object.values(d.queries.query);m<p.length;m++)for(var g=0,y=(x=p[m]).slice();g<y.length;g++)Pr((w=y[g]).obsSet,i.mutatedParts)&&(M(x,w),w.subscribers.forEach(function(e){return s.add(e)}));else if(0<h.length){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==i});for(var b=0,v=Object.values(d.queries.query);b<v.length;b++)for(var x,w,k,j=0,N=(x=v[b]).slice();j<N.length;j++)null!=(w=N[j]).res&&i.mutatedParts&&(a&&!w.dirty?(k=Object.isFrozen(w.res),k=Jr(w.res,w.req,h,f,w,k),w.dirty?(M(x,w),w.subscribers.forEach(function(e){return s.add(e)})):k!==w.res&&(w.res=k,w.promise=ke.resolve({result:k}))):(w.dirty&&M(x,w),w.subscribers.forEach(function(e){return s.add(e)})))}}}s.forEach(function(e){return e()})}}},i.addEventListener("abort",a(!1),{signal:s}),i.addEventListener("error",a(!1),{signal:s}),i.addEventListener("complete",a(!0),{signal:s})),i},table:function(n){var a=e.table(n),o=a.schema.primaryKey;return t(t({},a),{mutate:function(e){var s=be.trans;if(o.outbound||"disabled"===s.db._options.cache||s.explicit||"readwrite"!==s.idbtrans.mode)return a.mutate(e);var i=Or["idb://".concat(r,"/").concat(n)];return i?(s=a.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Br(o,e).some(function(e){return null==e}))?(i.optimisticOps.push(e),e.mutatedParts&&Tr(e.mutatedParts),s.then(function(t){0<t.numFailures&&(M(i.optimisticOps,e),(t=Hr(0,e,t))&&i.optimisticOps.push(t),e.mutatedParts&&Tr(e.mutatedParts))}),s.catch(function(){M(i.optimisticOps,e),e.mutatedParts&&Tr(e.mutatedParts)})):s.then(function(r){var n=Hr(0,t(t({},e),{values:e.values.map(function(e,n){var a;return r.failures[n]||w(e=null!==(a=o.keyPath)&&void 0!==a&&a.includes(".")?P(e):t({},e),o.keyPath,r.results[n]),e})}),r);i.optimisticOps.push(n),queueMicrotask(function(){return e.mutatedParts&&Tr(e.mutatedParts)})}),s):a.mutate(e)},query:function(e){if(!Wr(be,a)||!Vr("query",e))return a.query(e);var t="immutable"===(null===(i=be.trans)||void 0===i?void 0:i.db._options.cache),o=(l=be).requery,s=l.signal,i=function(e,t,r,n){var a=Or["idb://".concat(e,"/").concat(t)];if(!a)return[];if(!(t=a.queries[r]))return[null,!1,a,null];var o=t[(n.query?n.query.index.name:null)||""];if(!o)return[null,!1,a,null];switch(r){case"query":var s=o.find(function(e){return e.req.limit===n.limit&&e.req.values===n.values&&Xr(e.req.query.range,n.query.range)});return s?[s,!0,a,o]:[o.find(function(e){return("limit"in e.req?e.req.limit:1/0)>=n.limit&&(!n.values||e.req.values)&&Qr(e.req.query.range,n.query.range)}),!1,a,o];case"count":return[s=o.find(function(e){return Xr(e.req.query.range,n.query.range)}),!!s,a,o]}}(r,n,"query",e),c=i[0],l=i[1],u=i[2],d=i[3];return c&&l?c.obsSet=e.obsSet:(l=a.query(e).then(function(e){var r=e.result;if(c&&(c.res=r),t){for(var n=0,a=r.length;n<a;++n)Object.freeze(r[n]);Object.freeze(r)}else e.result=P(r);return e}).catch(function(e){return d&&c&&M(d,c),Promise.reject(e)}),c={obsSet:e.obsSet,promise:l,subscribers:new Set,type:"query",req:e,dirty:!1},d?d.push(c):(d=[c],(u=u||(Or["idb://".concat(r,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=d)),Zr(c,d,o,s),c.promise.then(function(r){return{result:Jr(r.result,e,null==u?void 0:u.optimisticOps,a,c,t)}})}})}})}};function tn(e,t){return new Proxy(e,{get:function(e,r,n){return"db"===r?t:Reflect.get(e,r,n)}})}var rn=(nn.prototype.version=function(e){if(isNaN(e)||e<.1)throw new V.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new V.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,r=t.filter(function(t){return t._cfg.version===e})[0];return r||(r=new this.Version(e),t.push(r),t.sort(or),r.stores({}),this._state.autoSchema=!1,r)},nn.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||be.letThrough||this._vip)?e():new ke(function(e,r){if(t._state.openComplete)return r(new V.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void r(new V.DatabaseClosed);t.open().catch(Y)}t._state.dbReadyPromise.then(e,r)}).then(e)},nn.prototype.use=function(e){var t=e.stack,r=e.create,n=e.level,a=e.name;return a&&this.unuse({stack:t,name:a}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:r,level:null==n?10:n,name:a}),e.sort(function(e,t){return e.level-t.level}),this},nn.prototype.unuse=function(e){var t=e.stack,r=e.name,n=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return n?e.create!==n:!!r&&e.name!==r})),this},nn.prototype.open=function(){var e=this;return He(ye,function(){return Ir(e)})},nn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(r){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new ke(function(t){e.dbReadyResolve=t}),e.openCanceller=new ke(function(t,r){e.cancelOpen=r}))},nn.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new V.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new V.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nn.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var r=0<arguments.length&&"object"!=typeof arguments[0],n=this._state;return new ke(function(a,o){function s(){t.close(e);var r=t._deps.indexedDB.deleteDatabase(t.name);r.onsuccess=Me(function(){var e,r,n;e=t._deps,r=t.name,n=e.indexedDB,e=e.IDBKeyRange,br(n)||r===rt||yr(n,e).delete(r).catch(Y),a()}),r.onerror=Ft(o),r.onblocked=t._fireOnBlocked}if(r)throw new V.InvalidArgument("Invalid closeOptions argument to db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})},nn.prototype.backendDB=function(){return this.idbdb},nn.prototype.isOpen=function(){return null!==this.idbdb},nn.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nn.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nn.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),nn.prototype.transaction=function(){var e=function(e,t,r){var n=arguments.length;if(n<2)throw new V.InvalidArgument("Too few arguments");for(var a=new Array(n-1);--n;)a[n-1]=arguments[n];return r=a.pop(),[e,E(a),r]}.apply(this,arguments);return this._transaction.apply(this,e)},nn.prototype._transaction=function(e,t,r){var n=this,a=be.trans;a&&a.db===this&&-1===e.indexOf("!")||(a=null);var o,s,i=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(s=t.map(function(e){if("string"!=typeof(e=e instanceof n.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}),"r"==e||e===nt)o=nt;else{if("rw"!=e&&e!=at)throw new V.InvalidArgument("Invalid transaction mode: "+e);o=at}if(a){if(a.mode===nt&&o===at){if(!i)throw new V.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");a=null}a&&s.forEach(function(e){if(a&&-1===a.storeNames.indexOf(e)){if(!i)throw new V.SubTransaction("Table "+e+" not included in parent transaction.");a=null}}),i&&a&&!a.active&&(a=null)}}catch(l){return a?a._promise(null,function(e,t){t(l)}):Xe(l)}var c=function e(t,r,n,a,o){return ke.resolve().then(function(){var s=be.transless||be,i=t._createTransaction(r,n,t._dbSchema,a);if(i.explicit=!0,s={trans:i,transless:s},a)i.idbtrans=a.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(u){return u.name===$.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then(function(){return e(t,r,n,null,o)})):Xe(u)}var c,l=L(o);return l&&ze(),s=ke.follow(function(){var e;(c=o.call(i,i))&&(l?(e=Ue.bind(null,null),c.then(e,e)):"function"==typeof c.next&&"function"==typeof c.throw&&(c=Lr(c)))},s),(c&&"function"==typeof c.then?ke.resolve(c).then(function(e){return i.active?e:Xe(new V.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):s.then(function(){return c})).then(function(e){return a&&i._resolve(),i._completion.then(function(){return e})}).catch(function(e){return i._reject(e),Xe(e)})})}.bind(null,this,o,s,a,r);return a?a._promise(o,c,"lock"):be.trans?He(be.transless,function(){return n._whenReady(c)}):this._whenReady(c)},nn.prototype.table=function(e){if(!l(this._allTables,e))throw new V.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nn);function nn(e,r){var n=this;this._middlewares={},this.verno=0;var a=nn.dependencies;this._options=r=t({addons:nn.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},r),this._deps={indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange},a=r.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,s,i,c,l,u={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Y,dbReadyPromise:null,cancelOpen:Y,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:r.autoOpen};u.dbReadyPromise=new ke(function(e){u.dbReadyResolve=e}),u.openCanceller=new ke(function(e,t){u.cancelOpen=t}),this._state=u,this.name=e,this.on=bt(this,"populate","blocked","versionchange","close",{ready:[ne,Y]}),this.once=function(e,t){var r=function(){for(var a=[],o=0;o<arguments.length;o++)a[o]=arguments[o];n.on(e).unsubscribe(r),t.apply(n,a)};return n.on(e,r)},this.on.ready.subscribe=y(this.on.ready.subscribe,function(e){return function(t,r){nn.vip(function(){var a,o=n._state;o.openComplete?(o.dbOpenError||ke.resolve().then(t),r&&e(t)):o.onReadyBeingFired?(o.onReadyBeingFired.push(t),r&&e(t)):(e(t),a=n,r||e(function e(){a.on.ready.unsubscribe(t),a.on.ready.unsubscribe(e)}))})}}),this.Collection=(o=this,vt(St.prototype,function(e,t){this.db=o;var r=st,n=null;if(t)try{r=t()}catch(s){n=s}var a=e._ctx;e=(t=a.table).hook.reading.fire,this._ctx={table:t,index:a.index,isPrimKey:!a.index||t.schema.primKey.keyPath&&a.index===t.schema.primKey.name,range:r,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:n,or:a.or,valueMapper:e!==J?e:null}})),this.Table=(s=this,vt(gt.prototype,function(e,t,r){this.db=s,this._tx=r,this.name=e,this.schema=t,this.hook=s._allTables[e]?s._allTables[e].hook:bt(null,{creating:[Z,Y],reading:[X,J],updating:[te,Y],deleting:[ee,Y]})})),this.Transaction=(i=this,vt($t.prototype,function(e,t,r,n,a){var o=this;"readonly"!==e&&t.forEach(function(e){(e=null===(e=r[e])||void 0===e?void 0:e.yProps)&&(t=t.concat(e.map(function(e){return e.updatesTable})))}),this.db=i,this.mode=e,this.storeNames=t,this.schema=r,this.chromeTransactionDurability=n,this.idbtrans=null,this.on=bt(this,"complete","error","abort"),this.parent=a||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ke(function(e,t){o._resolve=e,o._reject=t}),this._completion.then(function(){o.active=!1,o.on.complete.fire()},function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),Xe(e)})})),this.Version=(c=this,vt(pr.prototype,function(e){this.db=c,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(l=this,vt(Lt.prototype,function(e,t,r){if(this.db=l,this._ctx={table:e,index:":id"===t?null:t,or:r},this._cmp=this._ascending=lt,this._descending=function(e,t){return lt(t,e)},this._max=function(e,t){return 0<lt(e,t)?e:t},this._min=function(e,t){return lt(e,t)<0?e:t},this._IDBKeyRange=l._deps.IDBKeyRange,!this._IDBKeyRange)throw new V.MissingAPI})),this.on("versionchange",function(e){e.newVersion,n.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||(e.newVersion,e.oldVersion)}),this._maxKey=Yt(r.IDBKeyRange),this._createTransaction=function(e,t,r,a){return new n.Transaction(e,t,r,n._options.chromeTransactionDurability,a)},this._fireOnBlocked=function(e){n.on("blocked").fire(e),tt.filter(function(e){return e.name===n.name&&e!==n&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use($r),this.use(en),this.use(Gr),this.use(Fr),this.use(zr);var d=new Proxy(this,{get:function(e,t,r){if("_vip"===t)return!0;if("table"===t)return function(e){return tn(n.table(e),d)};var a=Reflect.get(e,t,r);return a instanceof gt?tn(a,d):"tables"===t?a.map(function(e){return tn(e,d)}):"_createTransaction"===t?function(){return tn(a.apply(this,arguments),d)}:a}});this.vip=d,a.forEach(function(e){return e(n)})}K="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var an,on=(sn.prototype.subscribe=function(e,t,r){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:r})},sn.prototype[K]=function(){return this},sn);function sn(e){this._subscribe=e}try{an={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch(mn){an={indexedDB:null,IDBKeyRange:null}}function cn(e){var t,r=!1,n=new on(function(n){var a,o=L(e),s=!1,i={},c={},u={get closed(){return s},unsubscribe:function(){s||(s=!0,a&&a.abort(),d&&Ut.storagemutated.unsubscribe(h))}};n.start&&n.start(u);var d=!1,f=function(){return Je(m)},h=function(e){Cr(i,e),Pr(c,i)&&f()},m=function(){var u,m,p;!s&&an.indexedDB&&(i={},u={},a&&a.abort(),a=new AbortController,p=function(t){var r=Oe();try{o&&ze();var n=Be(e,t);return n=o?n.finally(Ue):n}finally{r&&Re()}}(m={subscr:u,signal:a.signal,requery:f,querier:e,trans:null}),Promise.resolve(p).then(function(e){r=!0,t=e,s||m.signal.aborted||(i={},function(e){for(var t in e)if(l(e,t))return;return 1}(c=u)||d||(Ut(Bt,h),d=!0),Je(function(){return!s&&n.next&&n.next(e)}))},function(e){r=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||s||Je(function(){s||n.error&&n.error(e)})}))};return setTimeout(f,0),u});return n.hasValue=function(){return r},n.getValue=function(){return t},n}var ln=rn;function un(e){var t=fn;try{fn=!0,Ut.storagemutated.fire(e),Mr(e,!0)}finally{fn=t}}u(ln,t(t({},H),{delete:function(e){return new ln(e,{addons:[]}).delete()},exists:function(e){return new ln(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return r=(t=ln.dependencies).indexedDB,t=t.IDBKeyRange,(br(r)?Promise.resolve(r.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==rt})}):yr(r,t).toCollection().primaryKeys()).then(e)}catch(n){return Xe(new V.MissingAPI)}var t,r},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return be.trans?He(be.transless,e):e()},vip:vr,async:function(e){return function(){try{var t=Lr(e.apply(this,arguments));return t&&"function"==typeof t.then?t:ke.resolve(t)}catch(r){return Xe(r)}}},spawn:function(e,t,r){try{var n=Lr(e.apply(r,t||[]));return n&&"function"==typeof n.then?n:ke.resolve(n)}catch(a){return Xe(a)}},currentTransaction:{get:function(){return be.trans||null}},waitFor:function(e,t){return t=ke.resolve("function"==typeof e?ln.ignoreTransaction(e):e).timeout(t||6e4),be.trans?be.trans.waitFor(t):t},Promise:ke,debug:{get:function(){return ae},set:function(e){oe(e)}},derive:h,extend:s,props:u,override:y,Events:bt,on:Ut,liveQuery:cn,extendObservabilitySet:Cr,getByKeyPath:x,setByKeyPath:w,delByKeyPath:function(e,t){"string"==typeof t?w(e,t,void 0):"length"in t&&[].map.call(t,function(t){w(e,t,void 0)})},shallowClone:j,deepClone:P,getObjectDiff:qr,cmp:lt,asap:v,minKey:-1/0,addons:[],connections:tt,errnames:$,dependencies:an,cache:Or,semVer:"4.2.1",version:"4.2.1".split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,r){return e+t/Math.pow(10,2*r)})})),ln.maxKey=Yt(ln.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(Ut(Bt,function(e){fn||(e=new CustomEvent(zt,{detail:e}),fn=!0,dispatchEvent(e),fn=!1)}),addEventListener(zt,function(e){e=e.detail,fn||un(e)}));var dn,fn=!1,hn=function(){};return"undefined"!=typeof BroadcastChannel&&((hn=function(){(dn=new BroadcastChannel(zt)).onmessage=function(e){return e.data&&un(e.data)}})(),"function"==typeof dn.unref&&dn.unref(),Ut(Bt,function(e){fn||dn.postMessage(e)})),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",function(e){if(!rn.disableBfCache&&e.persisted){null!=dn&&dn.close();for(var t=0,r=tt;t<r.length;t++)r[t].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(e){!rn.disableBfCache&&e.persisted&&(hn(),un({all:new wr(-1/0,[[]])}))})),ke.rejectionMapper=function(e,t){return!e||e instanceof q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!G[e.name]?e:(t=new G[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},oe(ae),t(rn,Object.freeze({__proto__:null,Dexie:rn,liveQuery:cn,Entity:ct,cmp:lt,PropModification:ht,replacePrefix:function(e,t){return new ht({replacePrefix:[e,t]})},add:function(e){return new ht({add:e})},remove:function(e){return new ht({remove:e})},default:rn,RangeSet:wr,mergeRanges:jr,rangesOverlap:Nr}),{default:rn}),rn}()),qa=Symbol.for("Dexie"),Ba=globalThis[qa]||(globalThis[qa]=Fa);if(Fa.semVer!==Ba.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${Fa.semVer} and ${Ba.semVer}`);const{liveQuery:za,mergeRanges:Ua,rangesOverlap:$a,RangeSet:Wa,cmp:Va,Entity:Ga,PropModification:Ha,replacePrefix:Ya,add:Ja,remove:Xa,DexieYProvider:Qa}=Ba;const Za=new class extends Ba{constructor(){super("smartmoney-db"),t(this,"transactions"),t(this,"accounts"),t(this,"budgets"),t(this,"goals"),t(this,"sync_queue"),t(this,"app_meta"),this.version(1).stores({transactions:"++id, date, category, source, type, account_id, [date+category], [date+account_id]",accounts:"++id, name, type, is_active, currency",budgets:"++id, month",goals:"++id, status, end_date",sync_queue:"++id, timestamp, retry_count, status, entity_type",app_meta:"id"})}};const eo=[1e3,2e3,4e3,8e3,16e3];async function to(e,t,r,n){const a={operation_type:e,entity_type:t,entity_id:r,payload:n,timestamp:Date.now(),retry_count:0,status:"pending"};return await Za.sync_queue.add(a)}async function ro(e){const t=function(e,t){const r=`/api/${e}s`;return"number"==typeof t&&t>0?`${r}/${t}`:r}(e.entity_type,e.entity_id),r=function(e){switch(e){case"CREATE":return"POST";case"UPDATE":return"PUT";case"DELETE":return"DELETE"}}(e.operation_type),n=await yn.request({method:r,url:t,data:"DELETE"!==e.operation_type?e.payload:void 0});if(n.status>=400)throw new Error(`Sync failed: ${n.status}`)}async function no(){return await Za.sync_queue.where("status").equals("pending").count()}let ao=null,oo=!1;const so=new Set;let io={isOnline:navigator.onLine,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null};function co(e){io={...io,...e},so.forEach(e=>e(io))}async function lo(){if(!oo&&navigator.onLine){oo=!0,co({isSyncing:!0});try{const e=await async function(){const e=await Za.sync_queue.where("status").equals("pending").and(e=>e.retry_count<5).sortBy("timestamp");let t=0,r=0;for(const a of e)try{if(await Za.sync_queue.update(a.id,{status:"processing"}),a.retry_count>0){const e=eo[Math.min(a.retry_count-1,eo.length-1)];await new Promise(t=>setTimeout(t,e))}await ro(a),await Za.sync_queue.delete(a.id),t++}catch(n){const e=n instanceof Error?n.message:"Unknown error",t=a.retry_count+1;await Za.sync_queue.update(a.id,{status:t>=5?"failed":"pending",retry_count:t,last_error:e}),r++}return{processed:t,failed:r}}();co({isSyncing:!1,pendingCount:await no(),lastSyncAt:new Date,lastError:e.failed>0?`${e.failed} operations failed`:null})}catch(e){co({isSyncing:!1,lastError:e instanceof Error?e.message:"Sync failed"})}finally{oo=!1}}}const uo={isOnline:!0,isSyncing:!1,pendingCount:0,lastSyncAt:null,lastError:null},fo=w.createContext({...uo,triggerSync:async()=>{}});function ho({children:e}){const[t,r]=w.useState(uo);w.useEffect(()=>{window.addEventListener("online",async()=>{co({isOnline:!0}),await lo()}),window.addEventListener("offline",()=>{co({isOnline:!1})}),document.addEventListener("visibilitychange",async()=>{!document.hidden&&navigator.onLine&&await lo()}),ao=setInterval(async()=>{if(navigator.onLine){const e=await no();co({pendingCount:e}),e>0&&await lo()}},3e4),no().then(e=>co({pendingCount:e}));const e=(t=r,so.add(t),t(io),()=>so.delete(t));var t;return()=>{e(),ao&&(clearInterval(ao),ao=null)}},[]);const n=w.useCallback(async()=>{await lo()},[]);return a.jsx(fo.Provider,{value:{...t,triggerSync:n},children:e})}const mo=["auth","user","session","credit"],po=new c({defaultOptions:{queries:{gcTime:864e5,staleTime:3e5,retry:2,refetchOnWindowFocus:!1,networkMode:"offlineFirst"},mutations:{retry:1,networkMode:"offlineFirst"}}});function go(){}function yo(e,{interval:t=1e3,onError:r=go}={}){if("function"!=typeof e)throw new Error("argument is not function.");let n=0,a=null,o=!1,s=!1;return async(...i)=>{if(a=i,!s){for(s=!0;o;)await new Promise(e=>l.setTimeout(e,t));for(;Date.now()<n;)await new Promise(e=>l.setTimeout(e,n-Date.now()));s=!1,o=!0;try{await e(...a)}catch(c){try{r(c)}catch{}}n=Date.now()+t,o=!1}}}const bo=(({storage:e,key:t="REACT_QUERY_OFFLINE_CACHE",throttleTime:r=1e3,serialize:n=JSON.stringify,deserialize:a=JSON.parse,retry:o})=>{if(e){const s=async r=>{try{const a=await n(r);return void(await e.setItem(t,a))}catch(a){return a}};return{persistClient:yo(async e=>{let t=e,r=await s(t),n=0;for(;r&&t;)n++,t=await(null==o?void 0:o({persistedClient:t,error:r,errorCount:n})),t&&(r=await s(t))},{interval:r}),restoreClient:async()=>{const r=await e.getItem(t);if(r)return await a(r)},removeClient:()=>e.removeItem(t)}}return{persistClient:go,restoreClient:()=>Promise.resolve(void 0),removeClient:go}})({storage:{getItem:async e=>{try{const t=await Za.app_meta.get(e);return t?JSON.stringify(t):null}catch(t){return null}},setItem:async(e,t)=>{try{const r=JSON.parse(t);await Za.app_meta.put({id:e,...r})}catch(r){}},removeItem:async e=>{try{await Za.app_meta.delete(e)}catch(t){}}},throttleTime:1e4,key:"tanstack-query-cache"}),vo={},xo=function(e,t,r){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in vo)return;vo[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),t?new Promise((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function a(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&a(e.reason);return e().catch(a)})},wo=[{code:"ja",name:"",flag:""},{code:"en",name:"English",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function ko(){const{i18n:e,t:t}=xe("common"),[r,n]=w.useState(!1),o=w.useRef(null),s=wo.find(t=>t.code===e.language)||wo[0];return w.useEffect(()=>{function e(e){o.current&&!o.current.contains(e.target)&&n(!1)}return r&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[r]),a.jsxs("div",{className:"relative",ref:o,children:[a.jsxs("button",{onClick:()=>n(!r),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus-ring","aria-label":t("language.selectLanguage"),"aria-expanded":r,"aria-haspopup":"true",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:s.flag}),a.jsx("span",{className:"text-sm font-medium hidden sm:inline text-gray-700 dark:text-gray-200",children:s.name}),a.jsx("svg",{className:Oa("w-4 h-4 transition-transform",r&&"rotate-180"),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 z-50",children:wo.map(t=>a.jsxs("button",{onClick:()=>{return r=t.code,e.changeLanguage(r),void n(!1);var r},className:Oa("w-full flex items-center gap-3 px-4 py-3 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors","first:rounded-t-lg last:rounded-b-lg","text-gray-700 dark:text-gray-200",e.language===t.code&&"bg-primary-50 dark:bg-primary-900/30 text-primary-700 dark:text-primary-400"),role:"menuitem",children:[a.jsx("span",{className:"text-xl","aria-hidden":"true",children:t.flag}),a.jsx("span",{className:"text-sm font-medium flex-1 text-left",children:t.name}),e.language===t.code&&a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20","aria-label":"Selected",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},t.code))})]})}function jo(){const{t:e}=xe("common"),{resolvedTheme:t,setTheme:r}=Ln();return a.jsx("button",{onClick:()=>{r("dark"===t?"light":"dark")},className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-800 focus-ring","aria-label":e("dark"===t?"aria.lightMode":"aria.darkMode"),title:e("dark"===t?"aria.lightMode":"aria.darkMode"),children:"dark"===t?a.jsx(M,{className:"w-5 h-5","aria-hidden":"true"}):a.jsx(D,{className:"w-5 h-5","aria-hidden":"true"})})}function No(){return i({queryKey:["gamification","stats"],queryFn:async()=>(await yn.get("/api/gamification/stats")).data,staleTime:6e4})}const Eo=new class{async trackAction(e,t){return(await yn.post("/api/gamification/action",{action:e,metadata:t||{}})).data}async trackLogin(){return(await yn.post("/api/gamification/login")).data}async getStats(){return(await yn.get("/api/gamification/stats")).data}async getAchievements(){return(await yn.get("/api/gamification/achievements")).data}async initializeAchievements(){return(await yn.post("/api/gamification/initialize-achievements")).data}calculateLevelProgress(e,t,r){const n=[0,100,250,500,1e3,1750,2750,4e3,5500,7500,1e4,13e3,16500,20500,25e3,3e4,36e3,43e3,51e3,6e4,7e4,81e3,93e3,106e3,12e4,135e3,151e3,168e3,186e3,205e3];if(t>=n.length){return(e-(205e3+25e3*(t-30)))/25e3*100}const a=n[t-1];return(e-a)/(n[t]-a)*100}},_o=Object.freeze(Object.defineProperty({__proto__:null,gamificationService:Eo,useAchievements:function(){return i({queryKey:["gamification","achievements"],queryFn:async()=>(await yn.get("/api/gamification/achievements")).data,staleTime:6e4})},useGamificationStats:No},Symbol.toStringTag,{value:"Module"}));function So(){const{data:e,isLoading:t}=No();if(t||!e)return a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200/50 dark:border-amber-700/50",children:[a.jsx(I,{className:"w-3.5 h-3.5 text-amber-600 dark:text-amber-400"}),a.jsx("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:"Lv. -"})]});const r=e.current_level||1,n=e.total_xp||0,o=r>=20,s=r>=10;return a.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 rounded-full bg-gradient-to-r from-amber-100 to-orange-100 dark:from-amber-900/30 dark:to-orange-900/30 border border-amber-200/50 dark:border-amber-700/50 shadow-sm hover:shadow-md transition-shadow cursor-pointer",title:`Level ${r}  ${n.toLocaleString()} XP total`,children:[a.jsx(L,{className:"w-3.5 h-3.5 "+(o?"text-yellow-500":s?"text-amber-500":"text-amber-600")}),a.jsxs("span",{className:"text-xs font-bold text-amber-700 dark:text-amber-300",children:["Lv.",r]})]})}function Co(){const{t:e}=xe("common"),{logout:t}=kn(),{isPrivacyMode:r,togglePrivacyMode:n}=Rn(),[o,s]=w.useState(!1);return a.jsx("header",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"flex items-center justify-between h-14 sm:h-16",children:[a.jsxs(u,{to:"/",className:"flex items-center gap-2 hover:opacity-80 transition-opacity",children:[a.jsx("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-primary-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),a.jsx("h1",{className:"text-lg sm:text-xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"hidden md:flex items-center gap-4",children:[a.jsx(Po,{to:"/",children:e("header.dashboard")}),a.jsx(Po,{to:"/transactions",children:e("header.transactions")}),a.jsx(Po,{to:"/accounts",children:e("header.accounts")}),a.jsx(Po,{to:"/goals",children:e("header.goals")}),a.jsx(Po,{to:"/analytics",children:e("header.analytics")}),a.jsx(Po,{to:"/budget",children:e("header.budget")}),a.jsx(Po,{to:"/gamification",children:e("header.gamification")}),a.jsx(Po,{to:"/upload",children:e("header.upload")}),a.jsx(Po,{to:"/settings",children:e("header.settings")}),a.jsx(So,{})]}),a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsx("button",{onClick:n,className:"text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors p-1.5 sm:p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring","aria-label":e(r?"aria.showAmounts":"aria.hideAmounts"),title:e(r?"aria.showAmounts":"aria.hideAmounts"),children:r?a.jsx(K,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"}):a.jsx(F,{className:"w-4 h-4 sm:w-5 sm:h-5","aria-hidden":"true"})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx(jo,{})}),a.jsx("div",{className:"hidden sm:block",children:a.jsx(ko,{})}),a.jsx("button",{onClick:t,className:"hidden md:block text-gray-600 dark:text-gray-300 hover:text-red-600 dark:hover:text-red-400 transition-colors p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 focus-ring",title:e("auth.logout"),children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),a.jsx("button",{onClick:()=>s(!o),className:"md:hidden text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700","aria-label":"Menu",children:a.jsx(q,{className:"w-5 h-5"})})]})]}),o&&a.jsx("div",{className:"md:hidden py-3 border-t border-gray-200 dark:border-gray-700",children:a.jsxs("nav",{className:"flex flex-col space-y-1",children:[a.jsx(Oo,{to:"/",onClick:()=>s(!1),children:e("header.dashboard")}),a.jsx(Oo,{to:"/transactions",onClick:()=>s(!1),children:e("header.transactions")}),a.jsx(Oo,{to:"/accounts",onClick:()=>s(!1),children:e("header.accounts")}),a.jsx(Oo,{to:"/goals",onClick:()=>s(!1),children:e("header.goals")}),a.jsx(Oo,{to:"/analytics",onClick:()=>s(!1),children:e("header.analytics")}),a.jsx(Oo,{to:"/budget",onClick:()=>s(!1),children:e("header.budget")}),a.jsx(Oo,{to:"/gamification",onClick:()=>s(!1),children:e("header.gamification")}),a.jsx(Oo,{to:"/upload",onClick:()=>s(!1),children:e("header.upload")}),a.jsx(Oo,{to:"/settings",onClick:()=>s(!1),children:e("header.settings")}),a.jsxs("div",{className:"flex items-center gap-3 pt-3 mt-2 border-t border-gray-200 dark:border-gray-700",children:[a.jsx(jo,{}),a.jsx(ko,{}),a.jsxs("button",{onClick:()=>{s(!1),t()},className:"flex items-center gap-2 text-red-600 dark:text-red-400 px-3 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})]})})]})})}function Po({to:e,children:t}){return a.jsx(u,{to:e,className:Oa("text-sm xl:text-base text-gray-600 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors pb-1","focus-ring rounded"),activeProps:{className:"text-primary-600 dark:text-primary-400 font-medium border-b-2 border-primary-600 dark:border-primary-400"},children:t})}function Oo({to:e,onClick:t,children:r}){return a.jsx(u,{to:e,onClick:t,className:"flex items-center px-3 py-2.5 text-gray-700 dark:text-gray-200 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors font-medium",activeProps:{className:"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400"},children:r})}function Ro(){const e=(new Date).getFullYear();return a.jsx("footer",{className:"bg-white border-t border-gray-200 mt-16",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"text-center text-sm text-gray-500",children:a.jsxs("p",{children:[" ",e," SmartMoney. All rights reserved."]})})})})}const Ao=[{path:"/",icon:V,labelKey:"nav.home"},{path:"/budget",icon:B,labelKey:"nav.budget"},{path:"/accounts",icon:G,labelKey:"nav.accounts"},{path:"/transactions",icon:H,labelKey:"nav.transactions"}],To=[{path:"/analytics",icon:B,labelKey:"nav.analytics"},{path:"/goals",icon:z,labelKey:"nav.goals"},{path:"/settings",icon:U,labelKey:"nav.settings"},{path:"/upload",icon:$,labelKey:"header.upload"}];function Mo(){const{t:e}=xe("common"),t=d(),{logout:r}=kn(),[n,o]=w.useState(!1),s=e=>"/"===e?"/"===t.pathname:t.pathname.startsWith(e),i=To.some(e=>s(e.path));return a.jsxs(a.Fragment,{children:[n&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 md:hidden",onClick:()=>o(!1)}),n&&a.jsx("div",{className:"fixed bottom-20 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50 md:hidden rounded-t-2xl shadow-lg animate-slide-up",children:a.jsxs("div",{className:"p-4 space-y-2",children:[To.map(t=>a.jsxs(u,{to:t.path,onClick:()=>o(!1),className:Oa("flex items-center gap-3 px-4 py-3.5 rounded-xl transition-colors",s(t.path)?"bg-primary-50 dark:bg-primary-900/30 text-primary-600 dark:text-primary-400":"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700"),children:[a.jsx(t.icon,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e(t.labelKey)})]},t.path)),a.jsxs("button",{onClick:()=>{o(!1),r()},className:"w-full flex items-center gap-3 px-4 py-3.5 rounded-xl text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:[a.jsx(W,{className:"w-5 h-5"}),a.jsx("span",{className:"font-medium",children:e("auth.logout")})]})]})}),a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-40 md:hidden safe-area-bottom",children:a.jsxs("div",{className:"flex items-stretch justify-around h-16",children:[Ao.map(t=>{const r=s(t.path);return a.jsxs(u,{to:t.path,onClick:()=>o(!1),className:Oa("flex flex-col items-center justify-center flex-1 px-1 transition-all relative",r?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:[r&&a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-500 dark:bg-primary-400 rounded-full"}),a.jsx("div",{className:Oa("p-2 rounded-xl transition-colors",r&&"bg-primary-50 dark:bg-primary-900/20"),children:a.jsx(t.icon,{className:"w-6 h-6",strokeWidth:r?2.5:2})}),a.jsx("span",{className:"text-[10px] font-medium mt-1 truncate max-w-full px-0.5",children:e(t.labelKey)})]},t.path)}),a.jsxs("button",{onClick:()=>o(!n),className:Oa("flex flex-col items-center justify-center flex-1 px-1 transition-all relative",i||n?"text-primary-600 dark:text-primary-400":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200"),children:[n&&a.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-8 h-1 bg-primary-500 dark:bg-primary-400 rounded-full"}),a.jsx("div",{className:Oa("p-2 rounded-xl transition-colors",n&&"bg-primary-50 dark:bg-primary-900/20"),children:a.jsx(Y,{className:"w-6 h-6",strokeWidth:n?2.5:2})}),a.jsx("span",{className:"text-[10px] font-medium mt-1",children:e("nav.more")})]})]})})]})}const Do=["/transactions"];function Io({onAddTransaction:e}){const{t:t}=xe("common"),r=f(),n=d(),[o,s]=w.useState(!1);if(Do.includes(n.pathname))return null;const i=[{icon:a.jsx(J,{size:20}),label:t("transaction.addTransaction","Add Transaction"),onClick:()=>{s(!1),e?e():r({to:"/transactions",search:{action:"add-transaction"}})},color:"bg-green-500 hover:bg-green-600"},{icon:a.jsx(H,{size:20}),label:t("receipt.scanReceipt","Scan Receipt"),onClick:()=>{s(!1),r({to:"/transactions",search:{action:"scan-receipt"}})},color:"bg-purple-500 hover:bg-purple-600"},{icon:a.jsx($,{size:20}),label:t("header.upload","Upload CSV"),onClick:()=>{s(!1),r({to:"/upload"})},color:"bg-blue-500 hover:bg-blue-600"}];return a.jsxs(a.Fragment,{children:[o&&a.jsx("div",{className:"fixed inset-0 bg-black/30 z-[101] md:hidden",onClick:()=>s(!1)}),a.jsxs("div",{className:"fixed bottom-20 right-4 z-[102] md:hidden flex flex-col-reverse items-end gap-3",children:[o&&a.jsx("div",{className:"flex flex-col-reverse gap-3 mb-2",children:i.map((e,t)=>a.jsxs("button",{onClick:e.onClick,className:Oa("flex items-center gap-3 pl-4 pr-5 py-3 rounded-full text-white shadow-lg","transform transition-all duration-200","animate-in fade-in slide-in-from-bottom-2",e.color),style:{animationDelay:50*t+"ms",animationFillMode:"both"},children:[e.icon,a.jsx("span",{className:"text-sm font-medium whitespace-nowrap",children:e.label})]},t))}),a.jsx("button",{onClick:()=>s(!o),className:Oa("w-14 h-14 rounded-full shadow-lg flex items-center justify-center","transform transition-all duration-300","active:scale-95",o?"bg-gray-700 dark:bg-gray-600 rotate-45":"bg-primary-600 hover:bg-primary-700 dark:bg-primary-500 dark:hover:bg-primary-600"),"aria-label":o?t("close","Close"):t("fab.quickActions","Quick Actions"),children:o?a.jsx(T,{size:24,className:"text-white"}):a.jsx(Y,{size:24,className:"text-white"})})]})]})}function Lo({children:e,className:t}){const r=d(),[n,o]=w.useState(!1),[s,i]=w.useState(e);return w.useEffect(()=>{o(!1);const t=setTimeout(()=>{i(e),o(!0)},100);return()=>clearTimeout(t)},[r.pathname]),w.useEffect(()=>{i(e)},[e]),a.jsx("div",{className:Oa("transition-all duration-300 ease-out",n?"opacity-100 translate-y-0":"opacity-0 translate-y-2",t),children:s})}var Ko=.999,Fo=/[\\\/_+.#"@\[\(\{&]/,qo=/[\\\/_+.#"@\[\(\{&]/g,Bo=/[\s-]/,zo=/[\s-]/g;function Uo(e,t,r,n,a,o,s){if(o===t.length)return a===e.length?1:.99;var i=`${a},${o}`;if(void 0!==s[i])return s[i];for(var c,l,u,d,f=n.charAt(o),h=r.indexOf(f,a),m=0;h>=0;)(c=Uo(e,t,r,n,h+1,o+1,s))>m&&(h===a?c*=1:Fo.test(e.charAt(h-1))?(c*=.8,(u=e.slice(a,h-1).match(qo))&&a>0&&(c*=Math.pow(Ko,u.length))):Bo.test(e.charAt(h-1))?(c*=.9,(d=e.slice(a,h-1).match(zo))&&a>0&&(c*=Math.pow(Ko,d.length))):(c*=.17,a>0&&(c*=Math.pow(Ko,h-a))),e.charAt(h)!==t.charAt(o)&&(c*=.9999)),(c<.1&&r.charAt(h-1)===n.charAt(o+1)||n.charAt(o+1)===n.charAt(o)&&r.charAt(h-1)!==n.charAt(o))&&(.1*(l=Uo(e,t,r,n,h+1,o+2,s))>c&&(c=.1*l)),c>m&&(m=c),h=r.indexOf(f,h+1);return s[i]=m,m}function $o(e){return e.toLowerCase().replace(zo," ")}function Wo(e,t,r){return Uo(e=r&&r.length>0?""+(e+" "+r.join(" ")):e,t,$o(e),$o(t),0,0,{})}function Vo(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function Go(...e){return t=>e.forEach(e=>function(e,t){"function"==typeof e?e(t):null!=e&&(e.current=t)}(e,t))}function Ho(...e){return w.useCallback(Go(...e),e)}function Yo(...e){const t=e[0];if(1===e.length)return t;const r=()=>{const r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){const n=r.reduce((t,{useScope:r,scopeName:n})=>({...t,...r(e)[`__scope${n}`]}),{});return w.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}const Jo=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?w.useLayoutEffect:()=>{},Xo=N["useId".toString()]||(()=>{});let Qo=0;function Zo(e){const[t,r]=w.useState(Xo());return Jo(()=>{r(e=>null!=e?e:String(Qo++))},[e]),e||(t?`radix-${t}`:"")}function es(e){const t=w.useRef(e);return w.useEffect(()=>{t.current=e}),w.useMemo(()=>(...e)=>{var r;return null===(r=t.current)||void 0===r?void 0:r.call(t,...e)},[])}function ts({prop:e,defaultProp:t,onChange:r=()=>{}}){const[n,a]=function({defaultProp:e,onChange:t}){const r=w.useState(e),[n]=r,a=w.useRef(n),o=es(t);return w.useEffect(()=>{a.current!==n&&(o(n),a.current=n)},[n,a,o]),r}({defaultProp:t,onChange:r}),o=void 0!==e,s=o?e:n,i=es(r);return[s,w.useCallback(t=>{if(o){const r="function"==typeof t?t(e):t;r!==e&&i(r)}else a(t)},[o,e,a,i])]}const rs=w.forwardRef((e,t)=>{const{children:r,...n}=e,a=w.Children.toArray(r),o=a.find(os);if(o){const e=o.props.children,r=a.map(t=>t===o?w.Children.count(e)>1?w.Children.only(null):w.isValidElement(e)?e.props.children:null:t);return w.createElement(ns,C({},n,{ref:t}),w.isValidElement(e)?w.cloneElement(e,void 0,r):null)}return w.createElement(ns,C({},n,{ref:t}),r)});rs.displayName="Slot";const ns=w.forwardRef((e,t)=>{const{children:r,...n}=e;return w.isValidElement(r)?w.cloneElement(r,{...ss(n,r.props),ref:t?Go(t,r.ref):r.ref}):w.Children.count(r)>1?w.Children.only(null):null});ns.displayName="SlotClone";const as=({children:e})=>w.createElement(w.Fragment,null,e);function os(e){return w.isValidElement(e)&&e.type===as}function ss(e,t){const r={...t};for(const n in t){const a=e[n],o=t[n];/^on[A-Z]/.test(n)?a&&o?r[n]=(...e)=>{o(...e),a(...e)}:a&&(r[n]=a):"style"===n?r[n]={...a,...o}:"className"===n&&(r[n]=[a,o].filter(Boolean).join(" "))}return{...e,...r}}const is=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{const r=w.forwardRef((e,r)=>{const{asChild:n,...a}=e,o=n?rs:t;return w.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),w.createElement(o,C({},a,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});const cs="dismissableLayer.update",ls="dismissableLayer.pointerDownOutside",us="dismissableLayer.focusOutside";let ds;const fs=w.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),hs=w.forwardRef((e,t)=>{var r;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:s,onInteractOutside:i,onDismiss:c,...l}=e,u=w.useContext(fs),[d,f]=w.useState(null),h=null!==(r=null==d?void 0:d.ownerDocument)&&void 0!==r?r:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,m]=w.useState({}),p=Ho(t,e=>f(e)),g=Array.from(u.layers),[y]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),v=d?g.indexOf(d):-1,x=u.layersWithOutsidePointerEventsDisabled.size>0,k=v>=b,j=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=es(e),n=w.useRef(!1),a=w.useRef(()=>{});return w.useEffect(()=>{const e=e=>{if(e.target&&!n.current){let n=function(){ps(ls,r,o,{discrete:!0})};const o={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",a.current),a.current=n,t.addEventListener("click",a.current,{once:!0})):n()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",e),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{const t=e.target,r=[...u.branches].some(e=>e.contains(t));k&&!r&&(null==o||o(e),null==i||i(e),e.defaultPrevented||null==c||c())},h),N=function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=es(e),n=w.useRef(!1);return w.useEffect(()=>{const e=e=>{if(e.target&&!n.current){ps(us,r,{originalEvent:e},{discrete:!1})}};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{const t=e.target;[...u.branches].some(e=>e.contains(t))||(null==s||s(e),null==i||i(e),e.defaultPrevented||null==c||c())},h);return function(e,t=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const r=es(e);w.useEffect(()=>{const e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[r,t])}(e=>{v===u.layers.size-1&&(null==a||a(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},h),w.useEffect(()=>{if(d)return n&&(0===u.layersWithOutsidePointerEventsDisabled.size&&(ds=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),ms(),()=>{n&&1===u.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=ds)}},[d,h,n,u]),w.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),ms())},[d,u]),w.useEffect(()=>{const e=()=>m({});return document.addEventListener(cs,e),()=>document.removeEventListener(cs,e)},[]),w.createElement(is.div,C({},l,{ref:p,style:{pointerEvents:x?k?"auto":"none":void 0,...e.style},onFocusCapture:Vo(e.onFocusCapture,N.onFocusCapture),onBlurCapture:Vo(e.onBlurCapture,N.onBlurCapture),onPointerDownCapture:Vo(e.onPointerDownCapture,j.onPointerDownCapture)}))});function ms(){const e=new CustomEvent(cs);document.dispatchEvent(e)}function ps(e,t,r,{discrete:n}){const a=r.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?function(e,t){e&&x.flushSync(()=>e.dispatchEvent(t))}(a,o):a.dispatchEvent(o)}const gs="focusScope.autoFocusOnMount",ys="focusScope.autoFocusOnUnmount",bs={bubbles:!1,cancelable:!0},vs=w.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...s}=e,[i,c]=w.useState(null),l=es(a),u=es(o),d=w.useRef(null),f=Ho(t,e=>c(e)),h=w.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;w.useEffect(()=>{if(n){let e=function(e){if(h.paused||!i)return;const t=e.target;i.contains(t)?d.current=t:js(d.current,{select:!0})},t=function(e){if(h.paused||!i)return;const t=e.relatedTarget;null!==t&&(i.contains(t)||js(d.current,{select:!0}))},r=function(e){if(document.activeElement===document.body)for(const t of e)t.removedNodes.length>0&&js(i)};document.addEventListener("focusin",e),document.addEventListener("focusout",t);const n=new MutationObserver(r);return i&&n.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),n.disconnect()}}},[n,i,h.paused]),w.useEffect(()=>{if(i){Ns.add(h);const t=document.activeElement;if(!i.contains(t)){const r=new CustomEvent(gs,bs);i.addEventListener(gs,l),i.dispatchEvent(r),r.defaultPrevented||(!function(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(js(n,{select:t}),document.activeElement!==r)return}((e=xs(i),e.filter(e=>"A"!==e.tagName)),{select:!0}),document.activeElement===t&&js(i))}return()=>{i.removeEventListener(gs,l),setTimeout(()=>{const e=new CustomEvent(ys,bs);i.addEventListener(ys,u),i.dispatchEvent(e),e.defaultPrevented||js(null!=t?t:document.body,{select:!0}),i.removeEventListener(ys,u),Ns.remove(h)},0)}}var e},[i,l,u,h]);const m=w.useCallback(e=>{if(!r&&!n)return;if(h.paused)return;const t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,a=document.activeElement;if(t&&a){const t=e.currentTarget,[n,o]=function(e){const t=xs(e),r=ws(t,e),n=ws(t.reverse(),e);return[r,n]}(t);n&&o?e.shiftKey||a!==o?e.shiftKey&&a===n&&(e.preventDefault(),r&&js(o,{select:!0})):(e.preventDefault(),r&&js(n,{select:!0})):a===t&&e.preventDefault()}},[r,n,h.paused]);return w.createElement(is.div,C({tabIndex:-1},s,{ref:f,onKeyDown:m}))});function xs(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{const t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function ws(e,t){for(const r of e)if(!ks(r,{upTo:t}))return r}function ks(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e;){if(void 0!==t&&e===t)return!1;if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}function js(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&function(e){return e instanceof HTMLInputElement&&"select"in e}(e)&&t&&e.select()}}const Ns=function(){let e=[];return{add(t){const r=e[0];t!==r&&(null==r||r.pause()),e=Es(e,t),e.unshift(t)},remove(t){var r;e=Es(e,t),null===(r=e[0])||void 0===r||r.resume()}}}();function Es(e,t){const r=[...e],n=r.indexOf(t);return-1!==n&&r.splice(n,1),r}const _s=w.forwardRef((e,t)=>{var r;const{container:n=(null===globalThis||void 0===globalThis||null===(r=globalThis.document)||void 0===r?void 0:r.body),...a}=e;return n?E.createPortal(w.createElement(is.div,C({},a,{ref:t})),n):null});const Ss=e=>{const{present:t,children:r}=e,n=function(e){const[t,r]=w.useState(),n=w.useRef({}),a=w.useRef(e),o=w.useRef("none"),s=e?"mounted":"unmounted",[i,c]=function(e,t){return w.useReducer((e,r)=>{const n=t[e][r];return null!=n?n:e},e)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return w.useEffect(()=>{const e=Cs(n.current);o.current="mounted"===i?e:"none"},[i]),Jo(()=>{const t=n.current,r=a.current;if(r!==e){const n=o.current,s=Cs(t);if(e)c("MOUNT");else if("none"===s||"none"===(null==t?void 0:t.display))c("UNMOUNT");else{c(r&&n!==s?"ANIMATION_OUT":"UNMOUNT")}a.current=e}},[e,c]),Jo(()=>{if(t){const e=e=>{const r=Cs(n.current).includes(e.animationName);e.target===t&&r&&x.flushSync(()=>c("ANIMATION_END"))},r=e=>{e.target===t&&(o.current=Cs(n.current))};return t.addEventListener("animationstart",r),t.addEventListener("animationcancel",e),t.addEventListener("animationend",e),()=>{t.removeEventListener("animationstart",r),t.removeEventListener("animationcancel",e),t.removeEventListener("animationend",e)}}c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:w.useCallback(e=>{e&&(n.current=getComputedStyle(e)),r(e)},[])}}(t),a="function"==typeof r?r({present:n.isPresent}):w.Children.only(r),o=Ho(n.ref,a.ref);return"function"==typeof r||n.isPresent?w.cloneElement(a,{ref:o}):null};function Cs(e){return(null==e?void 0:e.animationName)||"none"}Ss.displayName="Presence";let Ps=0;function Os(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var Rs=function(){return Rs=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Rs.apply(this,arguments)};function As(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}"function"==typeof SuppressedError&&SuppressedError;var Ts="right-scroll-bar-position",Ms="width-before-scroll-bar";function Ds(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var Is="undefined"!=typeof window?w.useLayoutEffect:w.useEffect,Ls=new WeakMap;function Ks(e,t){var r,n,a,o=(r=null,n=function(t){return e.forEach(function(e){return Ds(e,t)})},(a=w.useState(function(){return{value:r,callback:n,facade:{get current(){return a.value},set current(e){var t=a.value;t!==e&&(a.value=e,a.callback(e,t))}}}})[0]).callback=n,a.facade);return Is(function(){var t=Ls.get(o);if(t){var r=new Set(t),n=new Set(e),a=o.current;r.forEach(function(e){n.has(e)||Ds(e,null)}),n.forEach(function(e){r.has(e)||Ds(e,a)})}Ls.set(o,e)},[e]),o}function Fs(e){return e}var qs=function(e){var t=e.sideCar,r=As(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return w.createElement(n,Rs({},r))};qs.isSideCarExport=!0;var Bs=function(e){void 0===e&&(e={});var t=function(e,t){void 0===t&&(t=Fs);var r=[],n=!1;return{read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(e){var a=t(e,n);return r.push(a),function(){r=r.filter(function(e){return e!==a})}},assignSyncMedium:function(e){for(n=!0;r.length;){var t=r;r=[],t.forEach(e)}r={push:function(t){return e(t)},filter:function(){return r}}},assignMedium:function(e){n=!0;var t=[];if(r.length){var a=r;r=[],a.forEach(e),t=r}var o=function(){var r=t;t=[],r.forEach(e)},s=function(){return Promise.resolve().then(o)};s(),r={push:function(e){t.push(e),s()},filter:function(e){return t=t.filter(e),r}}}}}(null);return t.options=Rs({async:!0,ssr:!1},e),t}(),zs=function(){},Us=w.forwardRef(function(e,t){var r=w.useRef(null),n=w.useState({onScrollCapture:zs,onWheelCapture:zs,onTouchMoveCapture:zs}),a=n[0],o=n[1],s=e.forwardProps,i=e.children,c=e.className,l=e.removeScrollBar,u=e.enabled,d=e.shards,f=e.sideCar,h=e.noIsolation,m=e.inert,p=e.allowPinchZoom,g=e.as,y=void 0===g?"div":g,b=As(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),v=f,x=Ks([r,t]),k=Rs(Rs({},b),a);return w.createElement(w.Fragment,null,u&&w.createElement(v,{sideCar:Bs,removeScrollBar:l,shards:d,noIsolation:h,inert:m,setCallbacks:o,allowPinchZoom:!!p,lockRef:r}),s?w.cloneElement(w.Children.only(i),Rs(Rs({},k),{ref:x})):w.createElement(y,Rs({},k,{className:c,ref:x}),i))});Us.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},Us.classNames={fullWidth:Ms,zeroRight:Ts};function $s(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=function(){if("undefined"!=typeof __webpack_nonce__)return __webpack_nonce__}();return t&&e.setAttribute("nonce",t),e}var Ws=function(){var e=0,t=null;return{add:function(r){var n,a;0==e&&(t=$s())&&(a=r,(n=t).styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)),function(e){(document.head||document.getElementsByTagName("head")[0]).appendChild(e)}(t)),e++},remove:function(){! --e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Vs=function(){var e,t=(e=Ws(),function(t,r){w.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])});return function(e){var r=e.styles,n=e.dynamic;return t(r,n),null}},Gs={left:0,top:0,right:0,gap:0},Hs=function(e){return parseInt(e||"",10)||0},Ys=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return Gs;var t=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],a=t["padding"===e?"paddingRight":"marginRight"];return[Hs(r),Hs(n),Hs(a)]}(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},Js=Vs(),Xs="data-scroll-locked",Qs=function(e,t,r,n){var a=e.left,o=e.top,s=e.right,i=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(i,"px ").concat(n,";\n  }\n  body[").concat(Xs,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(a,"px;\n    padding-top: ").concat(o,"px;\n    padding-right: ").concat(s,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Ts," {\n    right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(Ms," {\n    margin-right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(Ts," .").concat(Ts," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(Ms," .").concat(Ms," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(Xs,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},Zs=function(){var e=parseInt(document.body.getAttribute(Xs)||"0",10);return isFinite(e)?e:0},ei=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=void 0===n?"margin":n;w.useEffect(function(){return document.body.setAttribute(Xs,(Zs()+1).toString()),function(){var e=Zs()-1;e<=0?document.body.removeAttribute(Xs):document.body.setAttribute(Xs,e.toString())}},[]);var o=w.useMemo(function(){return Ys(a)},[a]);return w.createElement(Js,{styles:Qs(o,!t,a,r?"":"!important")})},ti=!1;if("undefined"!=typeof window)try{var ri=Object.defineProperty({},"passive",{get:function(){return ti=!0,!0}});window.addEventListener("test",ri,ri),window.removeEventListener("test",ri,ri)}catch(Uu){ti=!1}var ni=!!ti&&{passive:!1},ai=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&!function(e){return"TEXTAREA"===e.tagName}(e)&&"visible"===r[t])},oi=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),si(e,r)){var n=ii(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},si=function(e,t){return"v"===e?function(e){return ai(e,"overflowY")}(t):function(e){return ai(e,"overflowX")}(t)},ii=function(e,t){return"v"===e?[(r=t).scrollTop,r.scrollHeight,r.clientHeight]:function(e){return[e.scrollLeft,e.scrollWidth,e.clientWidth]}(t);var r},ci=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},li=function(e){return[e.deltaX,e.deltaY]},ui=function(e){return e&&"current"in e?e.current:e},di=function(e){return"\n  .block-interactivity-".concat(e," {pointer-events: none;}\n  .allow-interactivity-").concat(e," {pointer-events: all;}\n")},fi=0,hi=[];const mi=(pi=function(e){var t=w.useRef([]),r=w.useRef([0,0]),n=w.useRef(),a=w.useState(fi++)[0],o=w.useState(function(){return Vs()})[0],s=w.useRef(e);w.useEffect(function(){s.current=e},[e]),w.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var t=function(e,t,r){if(r||2===arguments.length)for(var n,a=0,o=t.length;a<o;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}([e.lockRef.current],(e.shards||[]).map(ui),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=w.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!s.current.allowPinchZoom;var a,o=ci(e),i=r.current,c="deltaX"in e?e.deltaX:i[0]-o[0],l="deltaY"in e?e.deltaY:i[1]-o[1],u=e.target,d=Math.abs(c)>Math.abs(l)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var f=oi(d,u);if(!f)return!0;if(f?a=d:(a="v"===d?"h":"v",f=oi(d,u)),!f)return!1;if(!n.current&&"changedTouches"in e&&(c||l)&&(n.current=a),!a)return!0;var h=n.current||a;return function(e,t,r,n){var a=function(e,t){return"h"===e&&"rtl"===t?-1:1}(e,window.getComputedStyle(t).direction),o=a*n,s=r.target,i=t.contains(s),c=!1,l=o>0,u=0,d=0;do{var f=ii(e,s),h=f[0],m=f[1]-f[2]-a*h;(h||m)&&si(e,s)&&(u+=m,d+=h),s=s.parentNode}while(!i&&s!==document.body||i&&(t.contains(s)||t===s));return l&&0===u?c=!0:l||0!==d||(c=!0),c}(h,t,e,"h"===h?c:l)},[]),c=w.useCallback(function(e){var r=e;if(hi.length&&hi[hi.length-1]===o){var n="deltaY"in r?li(r):ci(r),a=t.current.filter(function(e){return e.name===r.type&&e.target===r.target&&(t=e.delta,a=n,t[0]===a[0]&&t[1]===a[1]);var t,a})[0];if(a&&a.should)r.cancelable&&r.preventDefault();else if(!a){var c=(s.current.shards||[]).map(ui).filter(Boolean).filter(function(e){return e.contains(r.target)});(c.length>0?i(r,c[0]):!s.current.noIsolation)&&r.cancelable&&r.preventDefault()}}},[]),l=w.useCallback(function(e,r,n,a){var o={name:e,delta:r,target:n,should:a};t.current.push(o),setTimeout(function(){t.current=t.current.filter(function(e){return e!==o})},1)},[]),u=w.useCallback(function(e){r.current=ci(e),n.current=void 0},[]),d=w.useCallback(function(t){l(t.type,li(t),t.target,i(t,e.lockRef.current))},[]),f=w.useCallback(function(t){l(t.type,ci(t),t.target,i(t,e.lockRef.current))},[]);w.useEffect(function(){return hi.push(o),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:f}),document.addEventListener("wheel",c,ni),document.addEventListener("touchmove",c,ni),document.addEventListener("touchstart",u,ni),function(){hi=hi.filter(function(e){return e!==o}),document.removeEventListener("wheel",c,ni),document.removeEventListener("touchmove",c,ni),document.removeEventListener("touchstart",u,ni)}},[]);var h=e.removeScrollBar,m=e.inert;return w.createElement(w.Fragment,null,m?w.createElement(o,{styles:di(a)}):null,h?w.createElement(ei,{gapMode:"margin"}):null)},Bs.useMedium(pi),qs);var pi,gi=w.forwardRef(function(e,t){return w.createElement(Us,Rs({},e,{ref:t,sideCar:mi}))});gi.classNames=Us.classNames;var yi=new WeakMap,bi=new WeakMap,vi={},xi=0,wi=function(e){return e&&(e.host||wi(e.parentNode))},ki=function(e,t,r,n){var a=function(e,t){return t.map(function(t){if(e.contains(t))return t;var r=wi(t);return r&&e.contains(r)?r:null}).filter(function(e){return Boolean(e)})}(t,Array.isArray(e)?e:[e]);vi[r]||(vi[r]=new WeakMap);var o=vi[r],s=[],i=new Set,c=new Set(a),l=function(e){e&&!i.has(e)&&(i.add(e),l(e.parentNode))};a.forEach(l);var u=function(e){e&&!c.has(e)&&Array.prototype.forEach.call(e.children,function(e){if(i.has(e))u(e);else try{var t=e.getAttribute(n),a=null!==t&&"false"!==t,c=(yi.get(e)||0)+1,l=(o.get(e)||0)+1;yi.set(e,c),o.set(e,l),s.push(e),1===c&&a&&bi.set(e,!0),1===l&&e.setAttribute(r,"true"),a||e.setAttribute(n,"true")}catch(d){}})};return u(t),i.clear(),xi++,function(){s.forEach(function(e){var t=yi.get(e)-1,a=o.get(e)-1;yi.set(e,t),o.set(e,a),t||(bi.has(e)||e.removeAttribute(n),bi.delete(e)),a||e.removeAttribute(r)}),--xi||(yi=new WeakMap,yi=new WeakMap,bi=new WeakMap,vi={})}},ji=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=function(e){return"undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body}(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),ki(n,a,r,"aria-hidden")):function(){return null}};const Ni="Dialog",[Ei]=function(e,t=[]){let r=[];const n=()=>{const t=r.map(e=>w.createContext(e));return function(r){const n=(null==r?void 0:r[e])||t;return w.useMemo(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){const a=w.createContext(n),o=r.length;function s(t){const{scope:r,children:n,...s}=t,i=(null==r?void 0:r[e][o])||a,c=w.useMemo(()=>s,Object.values(s));return w.createElement(i.Provider,{value:c},n)}return r=[...r,n],s.displayName=t+"Provider",[s,function(r,s){const i=(null==s?void 0:s[e][o])||a,c=w.useContext(i);if(c)return c;if(void 0!==n)return n;throw new Error(`\`${r}\` must be used within \`${t}\``)}]},Yo(n,...t)]}(Ni),[_i,Si]=Ei(Ni),Ci="DialogPortal",[Pi,Oi]=Ei(Ci,{forceMount:void 0}),Ri="DialogOverlay",Ai=w.forwardRef((e,t)=>{const r=Oi(Ri,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=Si(Ri,e.__scopeDialog);return o.modal?w.createElement(Ss,{present:n||o.open},w.createElement(Ti,C({},a,{ref:t}))):null}),Ti=w.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Si(Ri,r);return w.createElement(gi,{as:rs,allowPinchZoom:!0,shards:[a.contentRef]},w.createElement(is.div,C({"data-state":qi(a.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),Mi="DialogContent",Di=w.forwardRef((e,t)=>{const r=Oi(Mi,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,o=Si(Mi,e.__scopeDialog);return w.createElement(Ss,{present:n||o.open},o.modal?w.createElement(Ii,C({},a,{ref:t})):w.createElement(Li,C({},a,{ref:t})))}),Ii=w.forwardRef((e,t)=>{const r=Si(Mi,e.__scopeDialog),n=w.useRef(null),a=Ho(t,r.contentRef,n);return w.useEffect(()=>{const e=n.current;if(e)return ji(e)},[]),w.createElement(Ki,C({},e,{ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Vo(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:Vo(e.onPointerDownOutside,e=>{const t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey;(2===t.button||r)&&e.preventDefault()}),onFocusOutside:Vo(e.onFocusOutside,e=>e.preventDefault())}))}),Li=w.forwardRef((e,t)=>{const r=Si(Mi,e.__scopeDialog),n=w.useRef(!1),a=w.useRef(!1);return w.createElement(Ki,C({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var o,s;(null===(o=e.onCloseAutoFocus)||void 0===o||o.call(e,t),t.defaultPrevented)||(n.current||null===(s=r.triggerRef.current)||void 0===s||s.focus(),t.preventDefault());n.current=!1,a.current=!1},onInteractOutside:t=>{var o,s;null===(o=e.onInteractOutside)||void 0===o||o.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(a.current=!0));const i=t.target;(null===(s=r.triggerRef.current)||void 0===s?void 0:s.contains(i))&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&a.current&&t.preventDefault()}}))}),Ki=w.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:o,...s}=e,i=Si(Mi,r),c=Ho(t,w.useRef(null));return w.useEffect(()=>{var e,t;const r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:Os()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:Os()),Ps++,()=>{1===Ps&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),Ps--}},[]),w.createElement(w.Fragment,null,w.createElement(vs,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:o},w.createElement(hs,C({role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":qi(i.open)},s,{ref:c,onDismiss:()=>i.onOpenChange(!1)}))),!1)}),Fi="DialogTitle";function qi(e){return e?"open":"closed"}!function(e,t){const r=w.createContext(t);function n(e){const{children:t,...n}=e,a=w.useMemo(()=>n,Object.values(n));return w.createElement(r.Provider,{value:a},t)}n.displayName=e+"Provider"}("DialogTitleWarning",{contentName:Mi,titleName:Fi,docsSlug:"dialog"});const Bi=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:o,modal:s=!0}=e,i=w.useRef(null),c=w.useRef(null),[l=!1,u]=ts({prop:n,defaultProp:a,onChange:o});return w.createElement(_i,{scope:t,triggerRef:i,contentRef:c,contentId:Zo(),titleId:Zo(),descriptionId:Zo(),open:l,onOpenChange:u,onOpenToggle:w.useCallback(()=>u(e=>!e),[u]),modal:s},r)},zi=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,o=Si(Ci,t);return w.createElement(Pi,{scope:t,forceMount:r},w.Children.map(n,e=>w.createElement(Ss,{present:r||o.open},w.createElement(_s,{asChild:!0,container:a},e))))},Ui=Ai,$i=Di;var Wi='[cmdk-group=""]',Vi='[cmdk-group-items=""]',Gi='[cmdk-item=""]',Hi=`${Gi}:not([aria-disabled="true"])`,Yi="cmdk-item-select",Ji="data-value",Xi=(e,t,r)=>Wo(e,t,r),Qi=w.createContext(void 0),Zi=()=>w.useContext(Qi),ec=w.createContext(void 0),tc=()=>w.useContext(ec),rc=w.createContext(void 0),nc=w.forwardRef((e,t)=>{let r=yc(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",filtered:{count:0,items:new Map,groups:new Set}}}),n=yc(()=>new Set),a=yc(()=>new Map),o=yc(()=>new Map),s=yc(()=>new Set),i=pc(e),{label:c,children:l,value:u,onValueChange:d,filter:f,shouldFilter:h,loop:m,disablePointerSelection:p=!1,vimBindings:g=!0,...y}=e,b=w.useId(),v=w.useId(),x=w.useId(),k=w.useRef(null),j=wc();gc(()=>{if(void 0!==u){let e=u.trim();r.current.value=e,N.emit()}},[u]),gc(()=>{j(6,O)},[]);let N=w.useMemo(()=>({subscribe:e=>(s.current.add(e),()=>s.current.delete(e)),snapshot:()=>r.current,setState:(e,t,n)=>{var a,o,s;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)P(),S(),j(1,C);else if("value"===e&&(n||j(5,O),void 0!==(null==(a=i.current)?void 0:a.value))){let e=null!=t?t:"";return void(null==(s=(o=i.current).onValueChange)||s.call(o,e))}N.emit()}},emit:()=>{s.current.forEach(e=>e())}}),[]),E=w.useMemo(()=>({value:(e,t,n)=>{var a;t!==(null==(a=o.current.get(e))?void 0:a.value)&&(o.current.set(e,{value:t,keywords:n}),r.current.filtered.items.set(e,_(t,n)),j(2,()=>{S(),N.emit()}))},item:(e,t)=>(n.current.add(e),t&&(a.current.has(t)?a.current.get(t).add(e):a.current.set(t,new Set([e]))),j(3,()=>{P(),S(),r.current.value||C(),N.emit()}),()=>{o.current.delete(e),n.current.delete(e),r.current.filtered.items.delete(e);let t=R();j(4,()=>{P(),(null==t?void 0:t.getAttribute("id"))===e&&C(),N.emit()})}),group:e=>(a.current.has(e)||a.current.set(e,new Set),()=>{o.current.delete(e),a.current.delete(e)}),filter:()=>i.current.shouldFilter,label:c||e["aria-label"],disablePointerSelection:p,listId:b,inputId:x,labelId:v,listInnerRef:k}),[]);function _(e,t){var n,a;let o=null!=(a=null==(n=i.current)?void 0:n.filter)?a:Xi;return e?o(e,r.current.search,t):0}function S(){if(!r.current.search||!1===i.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let n=a.current.get(r),o=0;n.forEach(t=>{let r=e.get(t);o=Math.max(r,o)}),t.push([r,o])});let n=k.current;A().sort((t,r)=>{var n,a;let o=t.getAttribute("id"),s=r.getAttribute("id");return(null!=(n=e.get(s))?n:0)-(null!=(a=e.get(o))?a:0)}).forEach(e=>{let t=e.closest(Vi);t?t.appendChild(e.parentElement===t?e:e.closest(`${Vi} > *`)):n.appendChild(e.parentElement===n?e:e.closest(`${Vi} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{let t=k.current.querySelector(`${Wi}[${Ji}="${encodeURIComponent(e[0])}"]`);null==t||t.parentElement.appendChild(t)})}function C(){let e=A().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(Ji);N.setState("value",t||void 0)}function P(){var e,t,s,c;if(!r.current.search||!1===i.current.shouldFilter)return void(r.current.filtered.count=n.current.size);r.current.filtered.groups=new Set;let l=0;for(let a of n.current){let n=_(null!=(t=null==(e=o.current.get(a))?void 0:e.value)?t:"",null!=(c=null==(s=o.current.get(a))?void 0:s.keywords)?c:[]);r.current.filtered.items.set(a,n),n>0&&l++}for(let[n,o]of a.current)for(let e of o)if(r.current.filtered.items.get(e)>0){r.current.filtered.groups.add(n);break}r.current.filtered.count=l}function O(){var e,t,r;let n=R();n&&((null==(e=n.parentElement)?void 0:e.firstChild)===n&&(null==(r=null==(t=n.closest(Wi))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),n.scrollIntoView({block:"nearest"}))}function R(){var e;return null==(e=k.current)?void 0:e.querySelector(`${Gi}[aria-selected="true"]`)}function A(){var e;return Array.from(null==(e=k.current)?void 0:e.querySelectorAll(Hi))}function T(e){let t=A()[e];t&&N.setState("value",t.getAttribute(Ji))}function M(e){var t;let r=R(),n=A(),a=n.findIndex(e=>e===r),o=n[a+e];null!=(t=i.current)&&t.loop&&(o=a+e<0?n[n.length-1]:a+e===n.length?n[0]:n[a+e]),o&&N.setState("value",o.getAttribute(Ji))}function D(e){let t,r=R(),n=null==r?void 0:r.closest(Wi);for(;n&&!t;)n=e>0?hc(n,Wi):mc(n,Wi),t=null==n?void 0:n.querySelector(Hi);t?N.setState("value",t.getAttribute(Ji)):M(e)}let I=()=>T(A().length-1),L=e=>{e.preventDefault(),e.metaKey?I():e.altKey?D(1):M(1)},K=e=>{e.preventDefault(),e.metaKey?T(0):e.altKey?D(-1):M(-1)};return w.createElement(is.div,{ref:t,tabIndex:-1,...y,"cmdk-root":"",onKeyDown:e=>{var t;if(null==(t=y.onKeyDown)||t.call(y,e),!e.defaultPrevented)switch(e.key){case"n":case"j":g&&e.ctrlKey&&L(e);break;case"ArrowDown":L(e);break;case"p":case"k":g&&e.ctrlKey&&K(e);break;case"ArrowUp":K(e);break;case"Home":e.preventDefault(),T(0);break;case"End":e.preventDefault(),I();break;case"Enter":if(!e.nativeEvent.isComposing&&229!==e.keyCode){e.preventDefault();let t=R();if(t){let e=new Event(Yi);t.dispatchEvent(e)}}}}},w.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:jc},c),kc(e,e=>w.createElement(ec.Provider,{value:N},w.createElement(Qi.Provider,{value:E},e))))}),ac=w.forwardRef((e,t)=>{var r,n;let a=w.useId(),o=w.useRef(null),s=w.useContext(rc),i=Zi(),c=pc(e),l=null!=(n=null==(r=c.current)?void 0:r.forceMount)?n:null==s?void 0:s.forceMount;gc(()=>{if(!l)return i.item(a,null==s?void 0:s.id)},[l]);let u=xc(a,o,[e.value,e.children,o],e.keywords),d=tc(),f=vc(e=>e.value&&e.value===u.current),h=vc(e=>!(!l&&!1!==i.filter())||(!e.search||e.filtered.items.get(a)>0));function m(){var e,t;p(),null==(t=(e=c.current).onSelect)||t.call(e,u.current)}function p(){d.setState("value",u.current,!0)}if(w.useEffect(()=>{let t=o.current;if(t&&!e.disabled)return t.addEventListener(Yi,m),()=>t.removeEventListener(Yi,m)},[h,e.onSelect,e.disabled]),!h)return null;let{disabled:g,value:y,onSelect:b,forceMount:v,keywords:x,...k}=e;return w.createElement(is.div,{ref:bc([o,t]),...k,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!f,"data-disabled":!!g,"data-selected":!!f,onPointerMove:g||i.disablePointerSelection?void 0:p,onClick:g?void 0:m},e.children)}),oc=w.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...o}=e,s=w.useId(),i=w.useRef(null),c=w.useRef(null),l=w.useId(),u=Zi(),d=vc(e=>!(!a&&!1!==u.filter())||(!e.search||e.filtered.groups.has(s)));gc(()=>u.group(s),[]),xc(s,i,[e.value,e.heading,c]);let f=w.useMemo(()=>({id:s,forceMount:a}),[a]);return w.createElement(is.div,{ref:bc([i,t]),...o,"cmdk-group":"",role:"presentation",hidden:!d||void 0},r&&w.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:l},r),kc(e,e=>w.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?l:void 0},w.createElement(rc.Provider,{value:f},e))))}),sc=w.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=w.useRef(null),o=vc(e=>!e.search);return r||o?w.createElement(is.div,{ref:bc([a,t]),...n,"cmdk-separator":"",role:"separator"}):null}),ic=w.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=null!=e.value,o=tc(),s=vc(e=>e.search),i=vc(e=>e.value),c=Zi(),l=w.useMemo(()=>{var e;let t=null==(e=c.listInnerRef.current)?void 0:e.querySelector(`${Gi}[${Ji}="${encodeURIComponent(i)}"]`);return null==t?void 0:t.getAttribute("id")},[]);return w.useEffect(()=>{null!=e.value&&o.setState("search",e.value)},[e.value]),w.createElement(is.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:a?e.value:s,onChange:e=>{a||o.setState("search",e.target.value),null==r||r(e.target.value)}})}),cc=w.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,o=w.useRef(null),s=w.useRef(null),i=Zi();return w.useEffect(()=>{if(s.current&&o.current){let e,t=s.current,r=o.current,n=new ResizeObserver(()=>{e=requestAnimationFrame(()=>{let e=t.offsetHeight;r.style.setProperty("--cmdk-list-height",e.toFixed(1)+"px")})});return n.observe(t),()=>{cancelAnimationFrame(e),n.unobserve(t)}}},[]),w.createElement(is.div,{ref:bc([o,t]),...a,"cmdk-list":"",role:"listbox","aria-label":n,id:i.listId},kc(e,e=>w.createElement("div",{ref:bc([s,i.listInnerRef]),"cmdk-list-sizer":""},e)))}),lc=w.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:o,container:s,...i}=e;return w.createElement(Bi,{open:r,onOpenChange:n},w.createElement(zi,{container:s},w.createElement(Ui,{"cmdk-overlay":"",className:a}),w.createElement($i,{"aria-label":e.label,"cmdk-dialog":"",className:o},w.createElement(nc,{ref:t,...i}))))}),uc=w.forwardRef((e,t)=>vc(e=>0===e.filtered.count)?w.createElement(is.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),dc=w.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...o}=e;return w.createElement(is.div,{ref:t,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},kc(e,e=>w.createElement("div",{"aria-hidden":!0},e)))}),fc=Object.assign(nc,{List:cc,Item:ac,Input:ic,Group:oc,Separator:sc,Dialog:lc,Empty:uc,Loading:dc});function hc(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function mc(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function pc(e){let t=w.useRef(e);return gc(()=>{t.current=e}),t}var gc="undefined"==typeof window?w.useEffect:w.useLayoutEffect;function yc(e){let t=w.useRef();return void 0===t.current&&(t.current=e()),t}function bc(e){return t=>{e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}}function vc(e){let t=tc(),r=()=>e(t.snapshot());return w.useSyncExternalStore(t.subscribe,r,r)}function xc(e,t,r,n=[]){let a=w.useRef(),o=Zi();return gc(()=>{var s;let i=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():a.current}})(),c=n.map(e=>e.trim());o.value(e,i,c),null==(s=t.current)||s.setAttribute(Ji,i),a.current=i}),a}var wc=()=>{let[e,t]=w.useState(),r=yc(()=>new Map);return gc(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,n)=>{r.current.set(e,n),t({})}};function kc({asChild:e,children:t},r){return e&&w.isValidElement(t)?w.cloneElement(function(e){let t=e.type;return"function"==typeof t?t(e.props):"render"in t?t.render(e.props):e}(t),{ref:t.ref},r(t.props.children)):r(t)}var jc={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};async function Nc(){return(await yn.get("/api/exchange-rates")).data}function Ec(){return i({queryKey:["exchange-rates"],queryFn:Nc,staleTime:864e5,gcTime:1728e5,refetchOnWindowFocus:!1,refetchOnReconnect:!1})}function _c(){const{data:e}=Ec();return(null==e?void 0:e.rates)||{}}function Sc(e){return{id:e.id,date:e.date,description:e.description,amount:e.amount,currency:e.currency||"JPY",category:e.category,source:e.source,type:e.is_income?"income":"expense",created_at:e.date,account_id:e.account_id,is_transfer:e.is_transfer,receipt_url:e.receipt_url}}async function Cc(e){var t;const r=new URLSearchParams;(null==e?void 0:e.start_date)&&r.append("start_date",e.start_date),(null==e?void 0:e.end_date)&&r.append("end_date",e.end_date),(null==(t=null==e?void 0:e.categories)?void 0:t.length)&&r.append("categories",e.categories.join(",")),(null==e?void 0:e.source)&&r.append("source",e.source),(null==e?void 0:e.type)&&"all"!==e.type&&r.append("is_income","income"===e.type?"true":"false"),(null==e?void 0:e.search)&&r.append("search",e.search),void 0!==(null==e?void 0:e.min_amount)&&r.append("min_amount",e.min_amount.toString()),void 0!==(null==e?void 0:e.max_amount)&&r.append("max_amount",e.max_amount.toString()),r.append("limit","5000");return(await yn.get(`/api/transactions/?${r.toString()}`)).data.transactions.map(Sc)}function Pc(e){const{type:t,...r}=e;return{...r,is_income:"income"===t}}async function Oc(e){const t=Pc(e);return Sc((await yn.post("/api/transactions/",t)).data)}async function Rc(e,t){const r=Pc(t);return Sc((await yn.put(`/api/transactions/${e}`,r)).data)}async function Ac(e){await yn.delete(`/api/transactions/${e}`)}async function Tc(e){const t=new URLSearchParams;e.forEach(e=>t.append("transaction_ids",e.toString()));return(await yn.delete(`/api/transactions/bulk/delete?${t.toString()}`)).data}async function Mc(e,t){const r=new URLSearchParams;e.forEach(e=>r.append("transaction_ids",e.toString())),r.append("category",t);return(await yn.patch(`/api/transactions/bulk/category?${r.toString()}`)).data}async function Dc(e,t=5){if(!e||e.length<2)return[];return(await yn.get(`/api/transactions/suggestions?q=${encodeURIComponent(e)}&limit=${t}`)).data}const Ic={JPY:1,USD:.00667,VND:160},Lc={JPY:0,VND:0,KRW:0,USD:2,EUR:2};function Kc(e,t){const r=Lc[t]??0;return Math.round(e*Math.pow(10,r))}function Fc(e,t,r){return e*(r[t]??Ic[t]??1)}function qc(e,t="JPY",r=Ic,n=!1){const a=n?e:Fc(e,t,r),o=Lc[t]??0,s=Math.pow(10,o),i={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP";return new Intl.NumberFormat(i,{style:"currency",currency:t,minimumFractionDigits:o,maximumFractionDigits:o}).format(a/s)}function Bc(e,t,r="JPY",n=Ic,a=!1){const o=qc(Math.abs(e),r,n,a);return"income"===t||e>0?`+${o}`:"expense"===t||e<0?`-${o}`:o}function zc(e="JPY"){return{JPY:"***",USD:"$***",VND:"***"}[e]||"***"}function Uc(e,t="JPY",r=Ic,n=!1,a=!1){return a?zc(t):qc(e,t,r,n)}function $c(e,t,r="JPY",n=Ic,a=!1,o=!1){if(o){const n=zc(r);return"income"===t||e>0?`+${n}`:"expense"===t||e<0?`-${n}`:n}return Bc(e,t,r,n,a)}function Wc(e,t="JPY",r=Ic,n=!1,a=!1){return a?zc(t):function(e,t="JPY",r=Ic,n=!1){const a=n?e:Fc(e,t,r),o=Lc[t]??0,s=Math.pow(10,o),i={JPY:"ja-JP",USD:"en-US",VND:"vi-VN"}[t]||"ja-JP",c=o>0?1:0;return new Intl.NumberFormat(i,{style:"currency",currency:t,notation:"compact",minimumFractionDigits:0,maximumFractionDigits:c}).format(a/s)}(e,t,r,n)}function Vc(e,t="JPY",r=Ic,n=!1,a=!1){if(a)return"****";const o=Lc[t]??0,s=e/Math.pow(10,o),i=qc(s,t,r,!0),c=qc(n?s*r[t]:s,"JPY",r,!0);return"JPY"===t?i:`${i} (${c})`}function Gc({open:e,onOpenChange:t,onNewTransaction:r,onUpload:n,onShowShortcuts:o}){const{t:s}=xe(),i=f(),{resolvedTheme:c,toggleTheme:l}=Ln(),{isPrivacyMode:u}=Rn(),{data:d}=Ec(),[h,m]=w.useState(""),[p,g]=w.useState([]),[y,b]=w.useState(!1);w.useEffect(()=>{if(!e||h.length<2)return void g([]);const t=setTimeout(async()=>{b(!0);try{const e=await Cc({search:h});g(e.slice(0,5))}catch(e){g([])}finally{b(!1)}},300);return()=>clearTimeout(t)},[h,e]),w.useEffect(()=>{e||(m(""),g([]))},[e]);const v=w.useCallback(e=>{if(t(!1),e.startsWith("/"))i({to:e});else switch(e){case"new-transaction":null==r||r();break;case"upload":null==n||n(),i({to:"/upload"});break;case"toggle-theme":l();break;case"shortcuts":null==o||o();break;case"transaction":i({to:"/transactions"})}},[i,t,r,n,l,o]),k=a.jsxs(fc.Dialog,{open:e,onOpenChange:t,label:s("commandPalette.label","Command Palette"),className:"fixed inset-0 z-[100001] overflow-hidden",style:{touchAction:"pan-y"},children:[a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>t(!1)}),a.jsx("div",{className:"fixed left-1/2 top-1/4 -translate-x-1/2 w-full max-w-lg",children:a.jsxs(fc,{className:"bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center border-b border-gray-200 dark:border-gray-700 px-4",children:[a.jsx(X,{className:"w-5 h-5 text-gray-400 dark:text-gray-500 mr-3"}),a.jsx(fc.Input,{value:h,onValueChange:m,placeholder:s("commandPalette.placeholder","Search pages, transactions, actions..."),className:"w-full py-4 bg-transparent outline-none text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500"}),a.jsx("kbd",{className:"hidden sm:inline-flex items-center gap-1 px-2 py-1 text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"})]}),a.jsxs(fc.List,{className:"max-h-80 overflow-y-auto p-2",children:[a.jsx(fc.Empty,{className:"py-6 text-center text-gray-500 dark:text-gray-400",children:y?s("commandPalette.searching","Searching..."):s("commandPalette.noResults","No results found.")}),p.length>0&&a.jsx(fc.Group,{heading:s("commandPalette.transactions","Transactions"),children:p.map(e=>{return a.jsxs(fc.Item,{value:`transaction-${e.id}`,onSelect:()=>v("transaction"),className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx(H,{className:"w-4 h-4 text-gray-400"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"truncate text-sm",children:e.description}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[e.date,"  ",e.category]})]}),a.jsx("span",{className:"text-sm font-medium "+("income"===e.type?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:u?"income"===e.type?"+***":"-***":(t=e.amount,r=e.currency||"JPY",Bc(t,void 0,r,(null==d?void 0:d.rates)||{},!0))})]},e.id);var t,r})}),a.jsxs(fc.Group,{heading:s("commandPalette.pages","Pages"),children:[a.jsx(Hc,{icon:a.jsx(V,{className:"w-4 h-4"}),label:s("nav.dashboard"),shortcut:"G D",value:"/dashboard",onSelect:v}),a.jsx(Hc,{icon:a.jsx(H,{className:"w-4 h-4"}),label:s("nav.transactions"),shortcut:"G T",value:"/transactions",onSelect:v}),a.jsx(Hc,{icon:a.jsx(G,{className:"w-4 h-4"}),label:s("nav.accounts"),shortcut:"G A",value:"/accounts",onSelect:v}),a.jsx(Hc,{icon:a.jsx(J,{className:"w-4 h-4"}),label:s("nav.budget"),shortcut:"G B",value:"/budget",onSelect:v}),a.jsx(Hc,{icon:a.jsx(Q,{className:"w-4 h-4"}),label:s("nav.analytics"),shortcut:"G N",value:"/analytics",onSelect:v}),a.jsx(Hc,{icon:a.jsx(z,{className:"w-4 h-4"}),label:s("nav.goals"),shortcut:"G G",value:"/goals",onSelect:v}),a.jsx(Hc,{icon:a.jsx(Z,{className:"w-4 h-4"}),label:s("nav.recurring"),value:"/recurring",onSelect:v}),a.jsx(Hc,{icon:a.jsx(U,{className:"w-4 h-4"}),label:s("nav.settings"),shortcut:"G S",value:"/settings",onSelect:v})]}),a.jsxs(fc.Group,{heading:s("commandPalette.actions","Actions"),children:[a.jsx(Hc,{icon:a.jsx(ee,{className:"w-4 h-4"}),label:s("commandPalette.newTransaction","New Transaction"),shortcut:"Ctrl+N",value:"new-transaction",onSelect:v}),a.jsx(Hc,{icon:a.jsx($,{className:"w-4 h-4"}),label:s("commandPalette.uploadCsv","Upload CSV"),shortcut:"Ctrl+U",value:"upload",onSelect:v}),a.jsx(Hc,{icon:"dark"===c?a.jsx(M,{className:"w-4 h-4"}):a.jsx(D,{className:"w-4 h-4"}),label:"dark"===c?s("commandPalette.lightMode","Switch to Light Mode"):s("commandPalette.darkMode","Switch to Dark Mode"),value:"toggle-theme",onSelect:v}),a.jsx(Hc,{icon:a.jsx(te,{className:"w-4 h-4"}),label:s("commandPalette.shortcuts","Keyboard Shortcuts"),shortcut:"?",value:"shortcuts",onSelect:v})]})]}),a.jsxs("div",{className:"border-t border-gray-200 dark:border-gray-700 px-4 py-2 flex items-center justify-between text-xs text-gray-400 dark:text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),s("commandPalette.navigate","Navigate")]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:""}),s("commandPalette.select","Select")]})]}),a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx("kbd",{className:"px-1.5 py-0.5 bg-gray-100 dark:bg-gray-700 rounded",children:"Esc"}),s("commandPalette.close","Close")]})]})]})})]});return"undefined"==typeof document?null:x.createPortal(k,document.body)}function Hc({icon:e,label:t,shortcut:r,value:n,onSelect:o}){return a.jsxs(fc.Item,{value:n,onSelect:o,className:"flex items-center gap-3 px-3 py-2 rounded-lg cursor-pointer text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/30",children:[a.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:e}),a.jsx("span",{className:"flex-1",children:t}),r&&a.jsx("kbd",{className:"text-xs text-gray-400 dark:text-gray-500 bg-gray-100 dark:bg-gray-700 px-1.5 py-0.5 rounded",children:r})]})}function Yc({open:e,onClose:t}){const{t:r}=xe(),n="undefined"!=typeof navigator&&/Mac/.test(navigator.userAgent),o=[{title:r("shortcuts.general","General"),shortcuts:[{keys:[n?"":"Ctrl","K"],description:r("shortcuts.commandPalette","Open command palette")},{keys:["Esc"],description:r("shortcuts.closeModal","Close modal/dialog")},{keys:["?"],description:r("shortcuts.showHelp","Show keyboard shortcuts")}]},{title:r("shortcuts.actions","Actions"),shortcuts:[{keys:[n?"":"Ctrl","N"],description:r("shortcuts.newTransaction","New transaction")},{keys:[n?"":"Ctrl","U"],description:r("shortcuts.uploadCsv","Upload CSV")},{keys:[n?"":"Ctrl","F"],description:r("shortcuts.focusSearch","Focus search")}]},{title:r("shortcuts.navigation","Navigation"),shortcuts:[{keys:["G","D"],description:r("shortcuts.gotoDashboard","Go to Dashboard")},{keys:["G","T"],description:r("shortcuts.gotoTransactions","Go to Transactions")},{keys:["G","A"],description:r("shortcuts.gotoAccounts","Go to Accounts")},{keys:["G","B"],description:r("shortcuts.gotoBudget","Go to Budget")},{keys:["G","N"],description:r("shortcuts.gotoAnalytics","Go to Analytics")},{keys:["G","G"],description:r("shortcuts.gotoGoals","Go to Goals")},{keys:["G","S"],description:r("shortcuts.gotoSettings","Go to Settings")}]}];if(!e)return null;const s=a.jsxs("div",{className:"fixed inset-0 z-[100001] flex items-center justify-center p-4",children:[a.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),a.jsxs("div",{className:"relative bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 w-full max-w-lg mx-4 max-h-[80vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200 dark:border-gray-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:r("shortcuts.title","Keyboard Shortcuts")}),a.jsx("button",{onClick:t,className:"p-1 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-500 dark:text-gray-400",children:a.jsx(T,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"px-6 py-4 overflow-y-auto max-h-[60vh] space-y-6",children:o.map(e=>a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-3",children:e.title}),a.jsx("div",{className:"space-y-2",children:e.shortcuts.map((e,t)=>a.jsxs("div",{className:"flex items-center justify-between py-1",children:[a.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-200",children:e.description}),a.jsx("div",{className:"flex items-center gap-1",children:e.keys.map((t,r)=>a.jsxs("span",{children:[a.jsx("kbd",{className:"px-2 py-1 text-xs font-mono bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded border border-gray-200 dark:border-gray-600",children:t}),r<e.keys.length-1&&a.jsx("span",{className:"text-gray-400 mx-0.5",children:"+"})]},r))})]},t))})]},e.title))}),a.jsx("div",{className:"px-6 py-3 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900/50",children:a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:r("shortcuts.hint","Press Esc to close")})})]})]});return"undefined"==typeof document?null:x.createPortal(s,document.body)}const Jc="Escape",Xc="k",Qc="f",Zc="n",el="u",tl="?";function rl({children:e}){const t=f(),[r,n]=w.useState(!1),[o,s]=w.useState(!1),[i,c]=w.useState(null),l=w.useCallback(e=>{const r={d:"/dashboard",t:"/transactions",a:"/accounts",b:"/budget",n:"/analytics",g:"/goals",s:"/settings"}[e.toLowerCase()];r&&t({to:r}),c(null)},[t]);return function(e,t={}){const{enabled:r=!0}=t,n=w.useCallback(t=>{if(!r)return;const n=t.target;if("INPUT"!==n.tagName&&"TEXTAREA"!==n.tagName&&!n.isContentEditable||"Escape"===t.key)for(const r of e){const e=t.key.toLowerCase()===r.key.toLowerCase(),n=r.ctrlKey||r.metaKey?t.ctrlKey||t.metaKey:!t.ctrlKey&&!t.metaKey,a=r.shiftKey?t.shiftKey:!t.shiftKey;if(e&&n&&a)return t.preventDefault(),void r.callback()}},[e,r]);w.useEffect(()=>(window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)),[n])}([{key:Xc,ctrlKey:!0,callback:()=>n(!0),description:"Open command palette"},{key:Jc,callback:()=>{r?n(!1):o&&s(!1),c(null)},description:"Close modal"},{key:tl,shiftKey:!0,callback:()=>s(!0),description:"Show shortcuts help"},{key:Zc,ctrlKey:!0,callback:()=>t({to:"/transactions"}),description:"New transaction"},{key:el,ctrlKey:!0,callback:()=>t({to:"/upload"}),description:"Upload CSV"},{key:Qc,ctrlKey:!0,callback:()=>n(!0),description:"Focus search"},{key:"g",callback:()=>c("g"),description:"Navigation prefix"},...["d","t","a","b","n","g","s"].map(e=>({key:e,callback:()=>{"g"===i&&l(e)},description:`Navigate to ${e}`}))]),w.useEffect(()=>{if(i){const e=setTimeout(()=>c(null),1500);return()=>clearTimeout(e)}},[i]),a.jsxs("div",{className:"min-h-screen flex flex-col",children:[a.jsx(Co,{}),a.jsx("main",{className:"flex-1 pb-20 md:pb-0",children:a.jsx(Lo,{children:e})}),a.jsx(Ro,{}),a.jsx(Mo,{}),a.jsx(Io,{}),a.jsx(Gc,{open:r,onOpenChange:n,onShowShortcuts:()=>s(!0)}),a.jsx(Yc,{open:o,onClose:()=>s(!1)})]})}function nl({size:e="md",className:t}){return a.jsxs("div",{className:Oa("inline-flex items-center justify-center",{"h-4 w-4":"sm"===e,"h-8 w-8":"md"===e,"h-12 w-12":"lg"===e},t),role:"status","aria-label":"",children:[a.jsxs("svg",{className:"animate-spin text-primary-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",width:"sm"===e?16:"md"===e?24:48,height:"sm"===e?16:"md"===e?24:48,children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{className:"sr-only",children:"..."})]})}const al=h({component:function(){const{isAuthenticated:e,isLoading:t}=kn(),r=d(),n=f();return w.useEffect(()=>{t||e||["/login","/register","/landing"].includes(r.pathname)||n({to:"/login"})},[e,t,r.pathname,n]),t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(nl,{size:"lg"})}):"/login"===r.pathname||"/register"===r.pathname||"/landing"===r.pathname?a.jsx(m,{}):e?a.jsx(rl,{children:a.jsx(m,{})}):null}}),ol=p("/upload")({}),sl=p("/transactions")({validateSearch:e=>({categories:"string"==typeof e.categories?e.categories:void 0,month:"string"==typeof e.month?e.month:void 0,accountId:"number"==typeof e.accountId?e.accountId:"string"!=typeof e.accountId||isNaN(Number(e.accountId))?void 0:Number(e.accountId),fromAccounts:!0===e.fromAccounts||"true"===e.fromAccounts,type:"income"===e.type||"expense"===e.type?e.type:void 0,action:"add-transaction"===e.action||"scan-receipt"===e.action?e.action:void 0})}),il=p("/settings")({}),cl=w.forwardRef(({variant:e="primary",size:t="md",loading:r=!1,className:n,children:o,disabled:s,...i},c)=>{const l=s||r;return a.jsxs("button",{ref:c,disabled:l,className:Oa("inline-flex items-center justify-center gap-2 font-medium rounded-lg","transition-all duration-200 ease-out focus-ring","active:scale-[0.97] active:transition-none","disabled:opacity-50 disabled:cursor-not-allowed disabled:active:scale-100",{"bg-primary-500 text-white hover:bg-primary-600 shadow-sm hover:shadow-md hover:-translate-y-0.5":"primary"===e,"bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-100 hover:bg-gray-200 dark:hover:bg-gray-600 hover:-translate-y-0.5":"secondary"===e,"border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800":"outline"===e,"text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-800 hover:-translate-y-0.5":"ghost"===e,"bg-red-600 text-white hover:bg-red-700 shadow-sm hover:shadow-md":"danger"===e},{"px-3 py-1.5 text-sm":"sm"===t,"px-5 py-2.5":"md"===t,"px-8 py-4 text-lg":"lg"===t},n),...i,children:[r&&a.jsx(re,{className:Oa("animate-spin","sm"===t?"w-3 h-3":"lg"===t?"w-5 h-5":"w-4 h-4")}),o]})});cl.displayName="Button";const ll=w.forwardRef(({label:e,error:t,className:r,...n},o)=>a.jsxs("div",{className:"w-full",children:[e&&a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",htmlFor:n.id,children:e}),a.jsx("input",{ref:o,className:Oa("w-full px-4 py-2.5 rounded-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100","transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent","disabled:opacity-50 disabled:cursor-not-allowed disabled:bg-gray-100 dark:disabled:bg-gray-800","placeholder:text-gray-400 dark:placeholder:text-gray-500",t?"border-red-500 focus:ring-red-500":"border-gray-300 dark:border-gray-600 hover:border-gray-400 dark:hover:border-gray-500",r),...n}),t&&a.jsx("p",{className:"mt-1.5 text-sm text-red-600 dark:text-red-400",children:t})]}));function ul({children:e,className:t,hover:r=!1,variant:n="default",onClick:o,...s}){return a.jsx("div",{className:Oa("rounded-xl border transition-all duration-200 p-4 sm:p-5","default"===n&&"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700 shadow-sm","glass"===n&&"bg-white/70 dark:bg-gray-800/70 backdrop-blur-xl border-white/20 dark:border-gray-700/50 shadow-sm","gradient"===n&&"bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-900 border-gray-200/50 dark:border-gray-700/50 shadow-sm","elevated"===n&&"bg-white dark:bg-gray-800 border-gray-100 dark:border-gray-700 shadow-md hover:shadow-lg",r&&"hover:shadow-md hover:border-gray-300 dark:hover:border-gray-600 cursor-pointer",o&&"cursor-pointer",t),onClick:o,...s,children:e})}ll.displayName="Input";const dl=p("/register")({component:function(){const{t:e}=xe("common"),t=f(),[r,n]=w.useState(""),[o,s]=w.useState(""),[i,c]=w.useState(""),[l,d]=w.useState(""),[h,m]=w.useState(!1);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(ul,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.registerDescription")})]}),a.jsxs("form",{onSubmit:async n=>{var a,s;if(n.preventDefault(),d(""),o===i)if(o.length<6)d(e("auth.passwordTooShort"));else{m(!0);try{await yn.post("/api/auth/register",{email:r,password:o}),t({to:"/login"})}catch(Uu){const r=(null==(s=null==(a=null==Uu?void 0:Uu.response)?void 0:a.data)?void 0:s.detail)||e("auth.registerFailed");d(r)}finally{m(!1)}}else d(e("auth.passwordMismatch"))},className:"space-y-6",children:[l&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:l}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(ll,{id:"email",type:"email",value:r,onChange:e=>n(e.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(ll,{id:"password",type:"password",value:o,onChange:e=>s(e.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.confirmPassword")}),a.jsx(ll,{id:"confirmPassword",type:"password",value:i,onChange:e=>c(e.target.value),placeholder:"********",required:!0,autoComplete:"new-password"})]}),a.jsx(cl,{type:"submit",className:"w-full",disabled:h,children:e(h?"auth.registering":"auth.register")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.hasAccount")," ",a.jsx(u,{to:"/login",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.login")})]})]})]})})}}),fl=p("/recurring")({});const hl=p("/login")({component:function(){const{t:e}=xe("common"),t=f(),{login:r}=kn(),[n,o]=w.useState(""),[s,i]=w.useState(""),[c,l]=w.useState(""),[d,h]=w.useState(!1);return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900 px-4",children:a.jsxs(ul,{className:"w-full max-w-md p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"SmartMoney"}),a.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:e("auth.loginDescription")})]}),a.jsxs("form",{onSubmit:async a=>{var o,i;a.preventDefault(),l(""),h(!0);try{await r(n,s),t({to:"/"})}catch(Uu){const r=Uu instanceof Error?Uu.message:(null==(i=null==(o=null==Uu?void 0:Uu.response)?void 0:o.data)?void 0:i.detail)||e("auth.loginFailed");l(r)}finally{h(!1)}},className:"space-y-6",children:[c&&a.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 dark:bg-red-900/20 dark:text-red-400 rounded-md",children:c}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.email")}),a.jsx(ll,{id:"email",type:"email",value:n,onChange:e=>o(e.target.value),placeholder:"you@example.com",required:!0,autoComplete:"email"})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:e("auth.password")}),a.jsx(ll,{id:"password",type:"password",value:s,onChange:e=>i(e.target.value),placeholder:"********",required:!0,autoComplete:"current-password"})]}),a.jsx(cl,{type:"submit",className:"w-full",disabled:d,children:e(d?"auth.loggingIn":"auth.login")}),a.jsxs("p",{className:"text-center text-sm text-gray-600 dark:text-gray-400",children:[e("auth.noAccount")," ",a.jsx(u,{to:"/register",className:"text-primary-600 hover:text-primary-500 font-medium",children:e("auth.register")})]})]})]})})}});function ml(){const e=f(),{t:t}=xe("landing");return a.jsxs("section",{className:"relative overflow-hidden bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"40px 40px"}})}),a.jsx("div",{className:"relative max-w-7xl mx-auto px-6 py-16 lg:py-24",children:a.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-4xl lg:text-5xl font-bold mb-4 leading-tight",children:t("hero.headline")}),a.jsx("p",{className:"text-lg text-green-100 mb-6 leading-relaxed",children:t("hero.subheadline")}),a.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(ne,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp1")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(ae,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp2")})]}),a.jsxs("div",{className:"flex items-center gap-2 bg-white/10 px-3 py-2 rounded-full",children:[a.jsx(oe,{className:"h-4 w-4 text-green-300"}),a.jsx("span",{className:"text-sm",children:t("hero.valueProp3")})]})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[a.jsx(cl,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("hero.cta")}),a.jsx(cl,{onClick:()=>e({to:"/login"}),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:t("hero.seeLiveDemo")})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"relative bg-white/10 backdrop-blur-lg rounded-2xl p-4 border border-white/20 shadow-2xl",children:a.jsx("img",{src:"/screenshots/dashboard-light.webp",alt:"SmartMoney Dashboard",className:"rounded-lg shadow-lg w-full",loading:"eager"})}),a.jsx("div",{className:"absolute -bottom-8 -left-8 w-32 lg:w-40 hidden md:block",children:a.jsx("img",{src:"/screenshots/dashboard-mobile.webp",alt:"SmartMoney Mobile",className:"rounded-xl shadow-2xl border-4 border-white",loading:"eager"})})]})]})})]})}const pl=[{id:"dashboard",screenshot:"/screenshots/dashboard-light.webp",screenshotAlt:"Dashboard Screenshot"},{id:"transactions",screenshot:"/screenshots/transactions.webp",screenshotAlt:"Transactions Screenshot"},{id:"budget",screenshot:"/screenshots/budget.webp",screenshotAlt:"Budget Screenshot"},{id:"analytics",screenshot:"/screenshots/analytics.webp",screenshotAlt:"Analytics Screenshot"}];function gl(){const{t:e}=xe("landing");return a.jsx("section",{className:"py-16 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("features.title")}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:e("features.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-2 gap-8",children:pl.map(t=>a.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden hover:shadow-lg transition-shadow",children:[a.jsx("div",{className:"aspect-video bg-gray-100 overflow-hidden",children:a.jsx("img",{src:t.screenshot,alt:t.screenshotAlt,className:"w-full h-full object-cover object-top",loading:"lazy"})}),a.jsxs("div",{className:"p-5",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`features.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`features.${t.id}.description`)})]})]},t.id))})]})})}const yl=[{id:"step1",icon:$,color:"bg-blue-100 text-blue-700"},{id:"step2",icon:Q,color:"bg-green-100 text-green-700"},{id:"step3",icon:ae,color:"bg-purple-100 text-purple-700"}];function bl(){const{t:e}=xe("landing");return a.jsx("section",{id:"how-it-works",className:"py-16 bg-white",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-6",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-3",children:e("howItWorks.title")}),a.jsx("p",{className:"text-lg text-gray-600",children:e("howItWorks.subtitle")})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:yl.map((t,r)=>a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"relative inline-flex items-center justify-center mb-4",children:[a.jsx("div",{className:`h-16 w-16 rounded-full ${t.color} flex items-center justify-center`,children:a.jsx(t.icon,{className:"h-8 w-8"})}),a.jsx("div",{className:"absolute -top-2 -right-2 h-6 w-6 rounded-full bg-gray-900 text-white text-sm font-bold flex items-center justify-center",children:r+1})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e(`howItWorks.${t.id}.title`)}),a.jsx("p",{className:"text-gray-600 text-sm",children:e(`howItWorks.${t.id}.description`)})]},t.id))}),a.jsx("div",{className:"hidden md:flex items-center justify-center mt-8",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-blue-300 to-green-300 rounded"}),a.jsx("div",{className:"h-1 w-24 bg-gradient-to-r from-green-300 to-purple-300 rounded"})]})})]})})}function vl(){const e=f(),{t:t}=xe("landing");return a.jsx("section",{className:"py-16 bg-gradient-to-br from-green-600 via-green-700 to-green-800 text-white",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[a.jsx("h2",{className:"text-3xl lg:text-4xl font-bold mb-4",children:t("cta.title")}),a.jsx("p",{className:"text-lg text-green-100 mb-8",children:t("cta.subtitle")}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-6",children:[a.jsx(cl,{onClick:()=>e({to:"/register"}),size:"lg",className:"bg-white text-green-700 hover:bg-green-50 shadow-xl",children:t("cta.button")}),a.jsxs(cl,{onClick:()=>window.open("https://github.com/GodStorm91/smartmoney","_blank"),size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10",children:[a.jsx(se,{className:"h-5 w-5 mr-2"}),t("cta.openSource")]})]}),a.jsx("p",{className:"text-sm text-green-200",children:t("cta.noAccount")})]})})}const xl=[{code:"en",name:"English",flag:""},{code:"ja",name:"",flag:""},{code:"vi",name:"Ting Vit",flag:""}];function wl(){const e=f(),{t:t,i18n:r}=xe("landing"),[n,o]=w.useState(!1),s=xl.find(e=>e.code===r.language)||xl[0];return a.jsx("header",{className:"bg-white border-b border-gray-200",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{className:"h-8 w-8 text-green-600"}),a.jsx("span",{className:"text-xl font-bold text-gray-900",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:()=>o(!n),className:"flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsx(oe,{className:"h-4 w-4 text-gray-500"}),a.jsx("span",{className:"text-sm",children:s.flag})]}),n&&a.jsx("div",{className:"absolute right-0 mt-2 w-40 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:xl.map(e=>a.jsxs("button",{onClick:()=>{return t=e.code,r.changeLanguage(t),void o(!1);var t},className:"w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-gray-100 "+(r.language===e.code?"bg-green-50 text-green-700":"text-gray-700"),children:[a.jsx("span",{children:e.flag}),a.jsx("span",{children:e.name})]},e.code))})]}),a.jsx(cl,{onClick:()=>e({to:"/login"}),variant:"outline",size:"sm",children:"Login"}),a.jsx(cl,{onClick:()=>e({to:"/register"}),size:"sm",children:t("hero.cta")})]})]})})})}function kl(){const{t:e}=xe("landing");return a.jsx("footer",{className:"bg-gray-900 text-gray-400 py-12",children:a.jsx("div",{className:"max-w-7xl mx-auto px-6",children:a.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(B,{className:"h-6 w-6 text-green-500"}),a.jsx("span",{className:"text-lg font-bold text-white",children:"SmartMoney"})]}),a.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[a.jsxs("a",{href:"https://github.com/GodStorm91/smartmoney",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 hover:text-white transition-colors",children:[a.jsx(se,{className:"h-4 w-4"}),"GitHub"]}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.privacy")}),a.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:e("footer.terms")})]}),a.jsx("p",{className:"text-sm",children:e("footer.copyright")})]})})})}const jl=p("/landing")({component:function(){return a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx(wl,{}),a.jsx(ml,{}),a.jsx(gl,{}),a.jsx(bl,{}),a.jsx(vl,{}),a.jsx(kl,{})]})}}),Nl=p("/goals")({}),El=p("/budget")({}),_l=p("/analytics")({}),Sl=p("/accounts")({});function Cl({className:e}){return a.jsx("div",{className:Oa("animate-pulse bg-gray-200 dark:bg-gray-700 rounded-lg",e)})}function Pl(){return a.jsxs("tr",{className:"animate-pulse",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsx(Cl,{className:"w-20 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Cl,{className:"w-32 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Cl,{className:"w-16 h-6 rounded-full"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Cl,{className:"w-24 h-4"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Cl,{className:"w-20 h-4 ml-auto"})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx(Cl,{className:"w-16 h-6 mx-auto"})})]})}function Ol(){return a.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 shadow-sm border border-gray-100 dark:border-gray-700 animate-pulse",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx(Cl,{className:"w-32 h-5 mb-2"}),a.jsx(Cl,{className:"w-20 h-4"})]}),a.jsx(Cl,{className:"w-24 h-6"})]})})}function Rl({className:e}){return a.jsxs("div",{className:Oa("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700",e),children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Cl,{className:"w-10 h-10 rounded-xl"}),a.jsx(Cl,{className:"w-20 h-4"})]}),a.jsx(Cl,{className:"w-32 h-8 mb-2"}),a.jsx(Cl,{className:"w-16 h-4"})]})}function Al({className:e}){return a.jsx("div",{className:Oa("space-y-4",e),children:[...Array(4)].map((e,t)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Cl,{className:"w-8 h-8 rounded-full"}),a.jsxs("div",{className:"flex-1",children:[a.jsx(Cl,{className:"w-24 h-4 mb-1"}),a.jsx(Cl,{className:"w-full h-2 rounded-full"})]}),a.jsx(Cl,{className:"w-16 h-4"})]},t))})}function Tl({className:e}){return a.jsxs("div",{className:Oa("space-y-3",e),children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Cl,{className:"w-28 h-4"}),a.jsx(Cl,{className:"w-16 h-4"})]}),a.jsx(Cl,{className:"w-full h-3 rounded-full"}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx(Cl,{className:"w-20 h-3"}),a.jsx(Cl,{className:"w-20 h-3"})]})]})}function Ml({className:e}){return a.jsxs("div",{className:Oa("bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700 text-center",e),children:[a.jsx(Cl,{className:"w-24 h-4 mx-auto mb-2"}),a.jsx(Cl,{className:"w-48 h-10 mx-auto mb-3"}),a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx(Cl,{className:"w-16 h-4"}),a.jsx(Cl,{className:"w-24 h-5"}),a.jsx(Cl,{className:"w-12 h-5 rounded-full"})]})]})}function Dl(){return a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx(Cl,{className:"w-40 h-8 mb-2"}),a.jsx(Cl,{className:"w-56 h-5"})]}),a.jsx(Ml,{className:"mb-6"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[a.jsx(Rl,{}),a.jsx(Rl,{}),a.jsx(Rl,{})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-12",children:[a.jsxs(ul,{className:"lg:col-span-2 h-80",children:[a.jsx(Cl,{className:"w-32 h-5 mb-4"}),a.jsx(Cl,{className:"w-full h-56"})]}),a.jsxs(ul,{children:[a.jsx(Cl,{className:"w-28 h-5 mb-4"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Cl,{className:"w-full h-12 rounded-lg"}),a.jsx(Cl,{className:"w-full h-12 rounded-lg"}),a.jsx(Cl,{className:"w-full h-12 rounded-lg"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ul,{children:[a.jsx(Cl,{className:"w-40 h-5 mb-6"}),a.jsx(Al,{})]}),a.jsxs(ul,{children:[a.jsx(Cl,{className:"w-36 h-5 mb-6"}),a.jsxs("div",{className:"space-y-6",children:[a.jsx(Tl,{}),a.jsx(Tl,{})]})]})]})]})}const Il={lessThanXSeconds:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xSeconds:{one:"1",other:"{{count}}"},halfAMinute:"30",lessThanXMinutes:{one:"1",other:"{{count}}",oneWithSuffix:"1",otherWithSuffix:"{{count}}"},xMinutes:{one:"1",other:"{{count}}"},aboutXHours:{one:"1",other:"{{count}}"},xHours:{one:"1",other:"{{count}}"},xDays:{one:"1",other:"{{count}}"},aboutXWeeks:{one:"1",other:"{{count}}"},xWeeks:{one:"1",other:"{{count}}"},aboutXMonths:{one:"1",other:"{{count}}"},xMonths:{one:"1",other:"{{count}}"},aboutXYears:{one:"1",other:"{{count}}"},xYears:{one:"1",other:"{{count}}"},overXYears:{one:"1",other:"{{count}}"},almostXYears:{one:"1",other:"{{count}}"}},Ll={date:Ee({formats:{full:"yMdEEEE",long:"yMd",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:Ee({formats:{full:"Hmmss zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:Ee({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},Kl={lastWeek:"eeeep",yesterday:"p",today:"p",tomorrow:"p",nextWeek:"eeeep",other:"P"},Fl={ordinalNumber:(e,t)=>{const r=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${r}`;case"quarter":return`${r}`;case"month":return`${r}`;case"week":return`${r}`;case"date":return`${r}`;case"hour":return`${r}`;case"minute":return`${r}`;case"second":return`${r}`;default:return`${r}`}},era:_e({values:{narrow:["BC","AC"],abbreviated:["",""],wide:["",""]},defaultWidth:"wide"}),quarter:_e({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1","2","3","4"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:_e({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1","2","3","4","5","6","7","8","9","10","11","12"],wide:["1","2","3","4","5","6","7","8","9","10","11","12"]},defaultWidth:"wide"}),day:_e({values:{narrow:["","","","","","",""],short:["","","","","","",""],abbreviated:["","","","","","",""],wide:["","","","","","",""]},defaultWidth:"wide"}),dayPeriod:_e({values:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultWidth:"wide",formattingValues:{narrow:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},abbreviated:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""},wide:{am:"",pm:"",midnight:"",noon:"",morning:"",afternoon:"",evening:"",night:""}},defaultFormattingWidth:"wide"})},ql={code:"ja",formatDistance:(e,t,r)=>{let n;r=r||{};const a=Il[e];return n="string"==typeof a?a:1===t?r.addSuffix&&a.oneWithSuffix?a.oneWithSuffix:a.one:r.addSuffix&&a.otherWithSuffix?a.otherWithSuffix.replace("{{count}}",String(t)):a.other.replace("{{count}}",String(t)),r.addSuffix?r.comparison&&r.comparison>0?n+"":n+"":n},formatLong:Ll,formatRelative:(e,t,r,n)=>Kl[e],localize:Fl,match:{ordinalNumber:Ce({matchPattern:/^?\d+(|||||||)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:Se({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^([]|)/i,wide:/^([]|)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^()/i,/^(|)/i]},defaultParseWidth:"any"}),quarter:Se({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^[1234]/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1||)/i,/(2||)/i,/(3||)/i,/(4||)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Se({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])/i,wide:/^([123456789]|1[012])/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:Se({matchPatterns:{narrow:/^[]/,short:/^[]/,abbreviated:/^[]/,wide:/^[]/},defaultMatchWidth:"wide",parsePatterns:{any:[/^/,/^/,/^/,/^/,/^/,/^/,/^/]},defaultParseWidth:"any"}),dayPeriod:Se({matchPatterns:{any:/^(AM|PM|||||||)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|)/i,pm:/^(P|)/i,midnight:/^|/i,noon:/^/i,morning:/^/i,afternoon:/^/i,evening:/^/i,night:/^/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Bl=[{threshold:0,color:"bg-gray-50 dark:bg-gray-800",border:"border-gray-100 dark:border-gray-700",text:"text-gray-400"},{threshold:1e3,color:"bg-green-50 dark:bg-green-900/20",border:"border-green-200 dark:border-green-800",text:"text-green-600 dark:text-green-400"},{threshold:5e3,color:"bg-yellow-50 dark:bg-yellow-900/20",border:"border-yellow-200 dark:border-yellow-800",text:"text-yellow-600 dark:text-yellow-400"},{threshold:1e4,color:"bg-orange-50 dark:bg-orange-900/20",border:"border-orange-200 dark:border-orange-800",text:"text-orange-600 dark:text-orange-400"},{threshold:2e4,color:"bg-red-50 dark:bg-red-900/20",border:"border-red-200 dark:border-red-800",text:"text-red-600 dark:text-red-400"},{threshold:5e4,color:"bg-red-100 dark:bg-red-900/30",border:"border-red-300 dark:border-red-700",text:"text-red-700 dark:text-red-300"}];function zl({className:e,onDayClick:t}){const{t:r}=xe("common"),{currency:n}=Sn(),{isPrivacyMode:o}=Rn(),s=_c(),[c,l]=w.useState(new Date),[u,d]=w.useState(null),f=Pe(c),h=Oe(f),m=Re(f,{weekStartsOn:0}),p=Ae(h,{weekStartsOn:0}),{data:g,isLoading:y}=i({queryKey:["transactions-calendar",Te(c,"yyyy-MM")],queryFn:async()=>await Cc()}),b=w.useMemo(()=>{if(!g)return new Map;const e=new Map;return g.forEach(t=>{if("income"===t.type)return;if(t.is_transfer)return;const r=Te(new Date(t.date),"yyyy-MM-dd"),n=e.get(r)||{date:new Date(t.date),totalSpending:0,transactionCount:0,transactions:[]},a=t.amount;n.totalSpending+=Math.abs(a),n.transactionCount+=1,n.transactions.push(t),e.set(r,n)}),e},[g]),v=w.useMemo(()=>Me({start:m,end:p}),[m,p]),x=e=>Uc(e,n,s,!1,o),k=w.useMemo(()=>{let e=0;return b.forEach(t=>{De(t.date,c)&&(e+=t.totalSpending)}),e},[b,c]),j=w.useMemo(()=>{const e=Ie(h);return e>0?k/e:0},[k,h]),N=w.useMemo(()=>{let e=0,t=null;return b.forEach(r=>{De(r.date,c)&&r.totalSpending>e&&(e=r.totalSpending,t=r)}),t},[b,c]);return a.jsxs(ul,{className:Oa("p-4",e),children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-5 h-5 text-primary-500"}),a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:r("spendingCalendar.title","Spending Calendar")})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>l(Fe(c,1)),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(ce,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 min-w-[100px] text-center",children:Te(c,"yyyyM",{locale:ql})}),a.jsx("button",{onClick:()=>l(qe(c,1)),className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:a.jsx(le,{className:"w-4 h-4 text-gray-600 dark:text-gray-400"})})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4",children:[a.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsx(ue,{className:"w-3.5 h-3.5 text-red-500"}),a.jsx("span",{className:"text-xs text-red-600 dark:text-red-400",children:r("spendingCalendar.monthlyTotal","Monthly")})]}),a.jsx("p",{className:"text-sm font-bold text-red-700 dark:text-red-300 font-numbers",children:x(k)})]}),a.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsx(de,{className:"w-3.5 h-3.5 text-blue-500"}),a.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:r("spendingCalendar.dailyAvg","Daily Avg")})]}),a.jsx("p",{className:"text-sm font-bold text-blue-700 dark:text-blue-300 font-numbers",children:x(j)})]}),a.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center gap-1.5 mb-1",children:[a.jsx(ie,{className:"w-3.5 h-3.5 text-purple-500"}),a.jsx("span",{className:"text-xs text-purple-600 dark:text-purple-400",children:r("spendingCalendar.highestDay","Highest")})]}),a.jsx("p",{className:"text-sm font-bold text-purple-700 dark:text-purple-300 font-numbers",children:N?x(N.totalSpending):"-"})]})]}),y?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"grid grid-cols-7 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>a.jsx("div",{className:"text-center text-xs font-medium text-gray-500 dark:text-gray-400 py-1",children:e},e))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:v.map(e=>{const r=Te(e,"yyyy-MM-dd"),n=b.get(r),o=De(e,c),s=Le(e),i=0===(l=(null==n?void 0:n.totalSpending)||0)?Bl[0]:l<1e3?Bl[1]:l<5e3?Bl[2]:l<1e4?Bl[3]:l<2e4?Bl[4]:Bl[5];var l;return a.jsxs("div",{className:Oa("relative aspect-square p-1 rounded-lg border cursor-pointer transition-all duration-200",i.color,i.border,o?"opacity-100":"opacity-40",s&&"ring-2 ring-primary-500 ring-offset-1 dark:ring-offset-gray-800",t&&"hover:scale-105 hover:shadow-md"),onMouseEnter:()=>d(e),onMouseLeave:()=>d(null),onClick:()=>null==t?void 0:t(e,(null==n?void 0:n.transactions)||[]),children:[a.jsxs("div",{className:Oa("w-full h-full flex flex-col items-center justify-center",s&&"font-bold"),children:[a.jsx("span",{className:Oa("text-xs",s?"text-primary-600 dark:text-primary-400":i.text),children:Ie(e)}),n&&n.totalSpending>0&&a.jsx("span",{className:Oa("text-[10px] font-medium mt-0.5",i.text),children:x(n.totalSpending)})]}),u&&Ke(e,u)&&n&&a.jsxs("div",{className:"absolute z-10 bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 dark:bg-gray-700 text-white text-xs rounded-lg shadow-lg whitespace-nowrap",children:[a.jsx("div",{className:"font-medium mb-1",children:Te(e,"yyyyMd (EEE)",{locale:ql})}),a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("span",{children:[n.transactionCount," transactions"]}),a.jsxs("span",{className:"font-bold text-red-300",children:["-",x(n.totalSpending)]})]}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1 w-2 h-2 bg-gray-900 dark:bg-gray-700 rotate-45"})]})]},r)})}),a.jsxs("div",{className:"flex items-center justify-center gap-3 mt-4 pt-3 border-t border-gray-100 dark:border-gray-700",children:[a.jsx("span",{className:"text-xs text-gray-500",children:r("spendingCalendar.legend","Less")}),Bl.slice(0,5).map((e,t)=>a.jsx("div",{className:Oa("w-4 h-4 rounded",e.color,"border",4===t&&"ring-1 ring-gray-400")},t)),a.jsx("span",{className:"text-xs text-gray-500",children:r("spendingCalendar.legendMore","More")})]})]})]})}function Ul({isOpen:e,onClose:t,date:r,transactions:n}){const{t:o}=xe("common"),{currency:s}=Sn(),{isPrivacyMode:i}=Rn(),c=_c();if(!e)return null;const l=n.reduce((e,t)=>e+("income"===t.type?0:Math.abs(t.amount)),0),u=e=>Uc(e,s,c,!1,i);return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-40 bg-black/50 animate-in fade-in",onClick:t}),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 sm:p-6 animate-in zoom-in-95 duration-200",onClick:e=>{e.target===e.currentTarget&&t()},children:a.jsxs("div",{className:"relative bg-white dark:bg-gray-900 rounded-2xl shadow-xl w-full max-w-md max-h-[85dvh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"sticky top-0 bg-white dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700 px-4 py-3 flex items-center justify-between z-10 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ie,{className:"w-5 h-5 text-primary-500"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:Te(r,"yyyyMd",{locale:ql})}),a.jsxs("p",{className:"text-xs text-gray-500",children:[n.length," ",o("transactions.count","transactions")]})]})]}),a.jsx("button",{onClick:t,className:"p-1.5 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:a.jsx(T,{className:"w-5 h-5 text-gray-500"})})]}),a.jsx("div",{className:"px-4 py-3 bg-red-50 dark:bg-red-900/20 border-b border-gray-200 dark:border-gray-700 shrink-0",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ue,{className:"w-4 h-4 text-red-500"}),a.jsx("span",{className:"text-sm text-red-600 dark:text-red-400",children:o("spendingCalendar.totalSpending","Total Spending")})]}),a.jsxs("span",{className:"text-lg font-bold text-red-700 dark:text-red-300 font-numbers",children:["-",u(l)]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2 min-h-0",children:n.map(e=>a.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-gray-50 dark:bg-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:Oa("w-8 h-8 rounded-full flex items-center justify-center text-sm","income"===e.type?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"),children:"income"===e.type?"+":"-"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.description||e.category}),a.jsx("p",{className:"text-xs text-gray-500",children:e.source})]})]}),a.jsxs("span",{className:Oa("text-sm font-semibold font-numbers","income"===e.type?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-gray-100"),children:["income"===e.type?"+":"-",u(Math.abs(e.amount))]})]},e.id))}),a.jsx("div",{className:"sticky bottom-0 bg-white dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 px-4 py-3 shrink-0",children:a.jsx(cl,{onClick:t,className:"w-full",children:o("close")})})]})})]})}async function $l(e){const t=new URLSearchParams;(null==e?void 0:e.includeInactive)&&t.append("include_inactive","true");const r="/api/accounts"+(t.toString()?`?${t.toString()}`:"");return(await yn.get(r)).data}async function Wl(){return(await yn.get("/api/goals/")).data}async function Vl(e){return(await yn.get(`/api/goals/${e}`)).data}async function Gl(e){return(await yn.post("/api/goals/",e)).data}async function Hl(e,t){return(await yn.put(`/api/goals/${e}`,t)).data}async function Yl(e){await yn.delete(`/api/goals/${e}`)}async function Jl(e,t=!0,r=3){const n=new URLSearchParams;t&&(n.append("include_achievability","true"),n.append("trend_months",r.toString()));return(await yn.get(`/api/goals/${e}/progress?${n.toString()}`)).data}async function Xl(){return(await yn.get("/api/goals/status/has-emergency-fund")).data.has_emergency_fund}function Ql(){const{t:e}=xe("common"),[t,r]=w.useState(!1);w.useEffect(()=>{"true"===localStorage.getItem("onboarding_dismissed")&&r(!0)},[]);const{data:n=[]}=i({queryKey:["accounts"],queryFn:()=>$l()}),{data:o=[]}=i({queryKey:["transactions-check"],queryFn:()=>Cc()}),{data:s=[]}=i({queryKey:["goals"],queryFn:Wl}),c=n.length>0,l=o.length>0,d=s.length>0,f=[{id:"account",titleKey:"onboarding.steps.account.title",descriptionKey:"onboarding.steps.account.description",icon:a.jsx(G,{className:"h-5 w-5"}),link:"/accounts",isComplete:c},{id:"upload",titleKey:"onboarding.steps.upload.title",descriptionKey:"onboarding.steps.upload.description",icon:a.jsx($,{className:"h-5 w-5"}),link:"/upload",isComplete:l},{id:"goals",titleKey:"onboarding.steps.goals.title",descriptionKey:"onboarding.steps.goals.description",icon:a.jsx(z,{className:"h-5 w-5"}),link:"/goals",isComplete:d}],h=f.filter(e=>e.isComplete).length,m=h===f.length,p=Math.round(h/f.length*100);if(t||m)return null;return a.jsxs(ul,{className:"mb-6 bg-gradient-to-r from-primary-50 to-blue-50 dark:from-primary-950 dark:to-blue-950 border-primary-200 dark:border-primary-800",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-primary-100 dark:bg-primary-900 rounded-lg",children:a.jsx(fe,{className:"h-5 w-5 text-primary-600 dark:text-primary-400"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:e("onboarding.title")}),a.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:e("onboarding.subtitle",{completed:h,total:f.length})})]})]}),a.jsx("button",{onClick:()=>{localStorage.setItem("onboarding_dismissed","true"),r(!0)},className:"p-1 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 transition-colors","aria-label":e("button.close"),children:a.jsx(T,{className:"h-5 w-5"})})]}),a.jsx("div",{className:"mb-4",children:a.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-primary-500 transition-all duration-500",style:{width:`${p}%`}})})}),a.jsx("div",{className:"space-y-2",children:f.map(t=>a.jsxs(u,{to:t.link,className:"flex items-center gap-3 p-3 rounded-lg transition-colors "+(t.isComplete?"bg-green-50 dark:bg-green-950/50":"bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-750"),children:[a.jsx("div",{className:"p-2 rounded-full "+(t.isComplete?"bg-green-100 dark:bg-green-900 text-green-600 dark:text-green-400":"bg-gray-100 dark:bg-gray-700 text-gray-500 dark:text-gray-400"),children:t.isComplete?a.jsx(he,{className:"h-5 w-5"}):t.icon}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"font-medium "+(t.isComplete?"text-green-700 dark:text-green-400 line-through":"text-gray-900 dark:text-gray-100"),children:e(t.titleKey)}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:e(t.descriptionKey)})]}),!t.isComplete&&a.jsx(le,{className:"h-5 w-5 text-gray-400 flex-shrink-0"})]},t.id))})]})}function Zl(e,t="yyyy/MM/dd"){try{const r="string"==typeof e?Be(e):e;return ze(r)?Te(r,t,{locale:ql}):"---"}catch{return"---"}}function eu(e){return Zl(e,"yyyyMd HH:mm")}function tu(e){return Zl(e,"yyyyM")}function ru(){const e=new Date,t=e.getFullYear();return{start:`${t}-${String(e.getMonth()+1).padStart(2,"0")}-01`,end:Te(new Date(t,e.getMonth()+1,0),"yyyy-MM-dd")}}function nu(e){return Zl(e,"MMM d (EEE)")}async function au(e){const t=new URLSearchParams;(null==e?void 0:e.start)&&t.append("start_date",e.start),(null==e?void 0:e.end)&&t.append("end_date",e.end);return(await yn.get(`/api/analytics?${t.toString()}`)).data}async function ou(e){const t=new URLSearchParams;(null==e?void 0:e.start)&&t.append("start_date",e.start),(null==e?void 0:e.end)&&t.append("end_date",e.end);return(await yn.get(`/api/analytics/categories?${t.toString()}`)).data}async function su(){return(await yn.get("/api/analytics/insights")).data}function iu(e=!1){return i({queryKey:["accounts",{includeInactive:e}],queryFn:()=>$l({includeInactive:e}),staleTime:3e5})}function cu(e){return i({queryKey:["accounts",e],queryFn:()=>async function(e){return(await yn.get(`/api/accounts/${e}`)).data}(e),staleTime:3e5,enabled:!!e})}function lu(){const e=g();return y({mutationFn:e=>async function(e){return(await yn.post("/api/accounts/",e)).data}(e),onSuccess:()=>{e.invalidateQueries({queryKey:["accounts"]})}})}function uu(){const e=g();return y({mutationFn:({id:e,data:t})=>async function(e,t){return(await yn.patch(`/api/accounts/${e}`,t)).data}(e,t),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["accounts",r.id]}),e.invalidateQueries({queryKey:["accounts"]})}})}function du({summary:e}){const{t:t}=xe("common"),{currency:r}=Sn(),{data:n}=Ec(),{isPrivacyMode:o}=Rn(),[s,i]=w.useState(!1),c=(null==e?void 0:e.net)||0,l=(null==e?void 0:e.net_change)||0,u=e=>Uc(e,r,(null==n?void 0:n.rates)||{},!1,o);return a.jsxs(ul,{variant:"gradient",className:Oa("cursor-pointer transition-all duration-300",s&&"shadow-lg"),onClick:()=>i(!s),children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("div",{className:"p-1.5 bg-primary-100 dark:bg-primary-900/30 rounded-lg",children:a.jsx(G,{className:"w-4 h-4 text-primary-600 dark:text-primary-400"})}),a.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:t("dashboard.netWorth","Net Worth")})]}),a.jsx("p",{className:Oa("text-3xl sm:text-4xl font-bold font-numbers tracking-tight",c>=0?"text-gray-900 dark:text-gray-100":"text-red-600 dark:text-red-400"),children:u(c)}),0!==l&&a.jsxs("div",{className:Oa("inline-flex items-center gap-1 mt-2 px-2 py-0.5 rounded-full text-xs font-medium",l>=0?"bg-green-100 text-green-700 dark:bg-green-900/40 dark:text-green-400":"bg-red-100 text-red-700 dark:bg-red-900/40 dark:text-red-400"),children:[l>=0?a.jsx(B,{className:"w-3 h-3"}):a.jsx(ue,{className:"w-3 h-3"}),l>=0?"+":"",u(l)]}),s&&a.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:t("dashboard.assets","Assets")}),a.jsx("p",{className:"font-semibold text-green-600 dark:text-green-400",children:u((null==e?void 0:e.total_income)||0)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-xs",children:t("dashboard.expenses","Expenses")}),a.jsx("p",{className:"font-semibold text-red-600 dark:text-red-400",children:u((null==e?void 0:e.total_expense)||0)})]})]})})]})}function fu({label:e,value:t,change:r,isPositive:n,formatCurrency:o}){return a.jsxs(ul,{className:"p-4",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:e}),a.jsx("p",{className:"text-xl font-bold font-numbers text-gray-900 dark:text-gray-100",children:o(t)}),0!==r&&a.jsxs("div",{className:Oa("flex items-center gap-1 mt-1 text-xs font-medium",n&&r>0||!n&&r<0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[r>0?a.jsx(B,{className:"w-3 h-3"}):a.jsx(ue,{className:"w-3 h-3"}),Math.abs(r),"%"]})]})}function hu({rate:e}){const{t:t}=xe("common"),r=e>=20?{color:"text-green-600 dark:text-green-400",bg:"bg-green-100 dark:bg-green-900/30",label:t("dashboard.savingsGood","Healthy")}:e>=10?{color:"text-amber-600 dark:text-amber-400",bg:"bg-amber-100 dark:bg-amber-900/30",label:t("dashboard.savingsFair","Fair")}:{color:"text-red-600 dark:text-red-400",bg:"bg-red-100 dark:bg-red-900/30",label:t("dashboard.savingsLow","Low")};return a.jsxs(ul,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t("dashboard.savingsRate","Savings Rate")}),a.jsx("span",{className:Oa("text-xs font-medium px-2 py-0.5 rounded-full",r.bg,r.color),children:r.label})]}),a.jsxs("div",{className:"flex items-end gap-2",children:[a.jsxs("span",{className:"text-3xl font-bold font-numbers text-gray-900 dark:text-gray-100",children:[Math.round(e),"%"]}),a.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:t("dashboard.ofIncome","of income")})]}),a.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-gray-700 rounded-full mt-3 overflow-hidden",children:a.jsx("div",{className:Oa("h-full rounded-full transition-all",e>=20?"bg-green-500":e>=10?"bg-amber-500":"bg-red-500"),style:{width:`${Math.min(100,e)}%`}})})]})}function mu({years:e,progress:t,formatCurrency:r}){var n,o;const{t:s}=xe("common"),i=t.target_amount>0?Math.min(100,t.total_saved/t.target_amount*100):0,c=(null==(n=t.achievability)?void 0:n.current_monthly_net)>=(null==(o=t.achievability)?void 0:o.required_monthly);return a.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-50 dark:bg-gray-700/50 rounded-lg",children:[a.jsx("div",{className:Oa("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",c?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-amber-100 text-amber-600 dark:bg-amber-900/30 dark:text-amber-400"),children:i>=100?"":`${Math.round(i)}%`}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:[s("goals.yearGoal",{years:e}),"  ",r(t.total_saved)]}),a.jsx("div",{className:"w-full h-1.5 bg-gray-200 dark:bg-gray-600 rounded-full mt-1 overflow-hidden",children:a.jsx("div",{className:Oa("h-full rounded-full",c?"bg-green-500":"bg-amber-500"),style:{width:`${i}%`}})})]}),a.jsx(ye,{className:"w-4 h-4 text-gray-400"})]})}function pu({summary:e,formatCurrency:t,accounts:r}){const n=["bank","cash","investment","receivable","crypto"],o=(null==r?void 0:r.filter(e=>n.includes(e.type)).reduce((e,t)=>e+t.current_balance,0))||0,s=(null==r?void 0:r.filter(e=>!n.includes(e.type)).reduce((e,t)=>e+Math.abs(t.current_balance),0))||0;return a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Assets"}),a.jsx("p",{className:"text-sm font-semibold font-numbers text-green-600 dark:text-green-400",children:t(o)})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Liabilities"}),a.jsx("p",{className:"text-sm font-semibold font-numbers text-red-600 dark:text-red-400",children:t(s)})]}),a.jsxs("div",{className:"text-center p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Transactions"}),a.jsx("p",{className:"text-sm font-semibold font-numbers text-gray-900 dark:text-gray-100",children:(null==e?void 0:e.transaction_count)||0})]})]})}const gu=p("/")({component:function(){const{t:e}=xe("common"),{currency:t}=Sn(),{data:r}=Ec(),{isPrivacyMode:n}=Rn(),[o,s]=w.useState(new Date),{data:c,isLoading:l}=i({queryKey:["dashboard-summary"],queryFn:()=>async function(){return(await yn.get("/api/dashboard/summary")).data}()}),{data:d,isLoading:f}=i({queryKey:["monthly-trends",12],queryFn:()=>async function(e=12){return(await yn.get(`/api/analytics/monthly?months=${e}`)).data}(12)}),{data:h,isLoading:m}=i({queryKey:["category-breakdown"],queryFn:()=>ou()}),{data:p,isLoading:g}=i({queryKey:["goals"],queryFn:Wl}),{data:y}=i({queryKey:["goals-progress",null==p?void 0:p.map(e=>e.id)],queryFn:async()=>p&&0!==p.length?Promise.all(p.map(e=>Jl(e.id,!0))):[],enabled:!!p&&p.length>0}),{data:b}=i({queryKey:["recent-transactions"],queryFn:async()=>(await Cc()).slice(0,5)}),{data:v}=iu(),[x,k]=w.useState(null),[j,N]=w.useState(null),E=l||f||m||g,_=null==d?void 0:d[d.length-1],S=_&&_.income>0?(_.income-_.expenses)/_.income*100:0,C=[{icon:Y,label:e("quickActions.add","Add"),color:"bg-primary-500",to:"/transactions?action=add-transaction"},{icon:me,label:e("quickActions.scan","Scan"),color:"bg-purple-500",to:"/transactions?action=scan-receipt"},{icon:$,label:e("quickActions.upload","Upload"),color:"bg-blue-500",to:"/upload"},{icon:pe,label:e("quickActions.analytics","Analytics"),color:"bg-green-500",to:"/analytics"},{icon:G,label:e("quickActions.accounts","Accounts"),color:"bg-orange-500",to:"/accounts"},{icon:z,label:e("quickActions.goals","Goals"),color:"bg-pink-500",to:"/goals"}],P=[];if(_&&_.expenses>_.income&&_.income>0&&P.push({type:"danger",message:e("alerts.overspending","Overspending")}),S<10&&S>=0&&P.push({type:"warning",message:e("alerts.lowSavings","Low savings")}),E)return a.jsx(Dl,{});const O=e=>Uc(e,t,(null==r?void 0:r.rates)||{},!1,n),R=(e,t="JPY")=>Uc(e,t,(null==r?void 0:r.rates)||{},!0,n);return a.jsxs("div",{className:"min-h-screen pb-32",children:[a.jsx("div",{className:"sticky top-0 z-10 bg-white/80 dark:bg-gray-900/80 backdrop-blur-lg border-b border-gray-200 dark:border-gray-700",children:a.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("button",{onClick:()=>{const e=new Date(o);e.setMonth(e.getMonth()-1),s(e)},className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:a.jsx(ce,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),a.jsx("h1",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:tu(o)}),a.jsx("button",{onClick:()=>{const e=new Date(o);e.setMonth(e.getMonth()+1),s(e)},className:"p-1.5 hover:bg-gray-100 dark:hover:bg-gray-800 rounded-lg",children:a.jsx(le,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 dark:text-white",children:e("dashboard.title")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("dashboard.subtitle",{month:tu(new Date)})})]})]})}),a.jsxs("div",{className:"max-w-2xl mx-auto px-4 py-4 space-y-4",children:[a.jsx(Ql,{}),a.jsx(du,{summary:c}),P.length>0&&a.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide",children:P.map((e,t)=>a.jsxs("div",{className:Oa("flex-shrink-0 px-3 py-2 rounded-lg text-xs font-medium flex items-center gap-1.5","danger"===e.type?"bg-red-100 text-red-700 dark:bg-red-900/30 dark:text-red-400":"bg-amber-100 text-amber-700 dark:bg-amber-900/30 dark:text-amber-400"),children:[a.jsx(ge,{className:"w-3.5 h-3.5"}),e.message]},t))}),a.jsx("div",{className:"overflow-x-auto scrollbar-hide -mx-4 px-4",children:a.jsx("div",{className:"flex gap-3 pb-2 min-w-max",children:C.map((e,t)=>{const r=e.icon;return a.jsxs(u,{to:e.to,className:"flex flex-col items-center gap-1.5 p-1",children:[a.jsx("div",{className:Oa("w-12 h-12 rounded-xl flex items-center justify-center","transition-transform active:scale-95",e.color),children:a.jsx(r,{className:"w-5 h-5 text-white"})}),a.jsx("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:e.label})]},t)})})}),a.jsx(pu,{summary:c,formatCurrency:O,accounts:v||[]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsx(fu,{label:e("dashboard.income","Income"),value:(null==_?void 0:_.income)||0,change:5.2,isPositive:!0,formatCurrency:O}),a.jsx(fu,{label:e("dashboard.expenses","Expenses"),value:(null==_?void 0:_.expenses)||0,change:-2.1,isPositive:!1,formatCurrency:O})]}),a.jsx(hu,{rate:S}),a.jsxs(ul,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.recentTransactions","Recent")}),a.jsxs(u,{to:"/transactions",className:"text-xs font-medium text-primary-600 dark:text-primary-400 flex items-center gap-0.5",children:[e("viewAll")," ",a.jsx(ye,{className:"w-3 h-3"})]})]}),b&&b.length>0?a.jsx("div",{className:"space-y-2",children:b.slice(0,4).map(e=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-700 last:border-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:Oa("w-8 h-8 rounded-full flex items-center justify-center text-sm","income"===e.type?"bg-green-100 text-green-600 dark:bg-green-900/30 dark:text-green-400":"bg-red-100 text-red-600 dark:bg-red-900/30 dark:text-red-400"),children:"income"===e.type?"+":"-"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:e.description||e.category}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:Zl(e.date,"MM/dd")})]})]}),a.jsxs("span",{className:Oa("text-sm font-semibold font-numbers","income"===e.type?"text-green-600 dark:text-green-400":"text-gray-900 dark:text-gray-100"),children:["income"===e.type?"+":"-",R(Math.abs(e.amount),e.currency||"JPY")]})]},e.id))}):a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:e("dashboard.noTransactions","No transactions yet")})]}),a.jsx(zl,{onDayClick:(e,t)=>{t.length>0&&(N(e.toISOString()),k(t))}}),h&&h.length>0&&a.jsxs(ul,{className:"p-4",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-3",children:e("dashboard.spendingByCategory","Spending")}),a.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-1 -mx-1 px-1",children:h.slice(0,8).map((e,t)=>a.jsxs("span",{className:"flex-shrink-0 px-3 py-1.5 bg-gray-100 dark:bg-gray-700 rounded-full text-xs font-medium text-gray-700 dark:text-gray-300",children:[e.category,"  ",O(e.amount)]},t))})]}),y&&y.length>0&&a.jsxs(ul,{className:"p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e("dashboard.goals","Goals")}),a.jsxs(u,{to:"/goals",className:"text-xs font-medium text-primary-600 dark:text-primary-400 flex items-center gap-0.5",children:[e("viewAll")," ",a.jsx(ye,{className:"w-3 h-3"})]})]}),a.jsx("div",{className:"space-y-3",children:y.slice(0,2).map(e=>e.achievability&&a.jsx(mu,{years:e.years,progress:e,formatCurrency:R},e.goal_id))})]}),(!y||0===y.length)&&p&&0===p.length&&a.jsx(u,{to:"/goals",children:a.jsx(ul,{className:"p-4 hover:shadow-md transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-pink-100 dark:bg-pink-900/30 rounded-lg",children:a.jsx(z,{className:"w-5 h-5 text-pink-600 dark:text-pink-400"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:e("dashboard.createFirstGoal","Create your first goal")}),a.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:e("dashboard.goalMotivation","Track your savings progress")})]})]})})})]}),x&&j&&a.jsx(Ul,{isOpen:!!x,onClose:()=>{k(null),N(null)},date:new Date(j),transactions:x})]})}}),yu=p("/gamification")().update({id:"/gamification",path:"/gamification",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./gamification.lazy-BCHxKPun.js"),__vite__mapDeps([0,1,2,3,4,5,6,7])).then(e=>e.Route)),bu=ol.update({id:"/upload",path:"/upload",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./upload.lazy-831JX8Qz.js"),__vite__mapDeps([8,1,2,6,3,4,7])).then(e=>e.Route)),vu=sl.update({id:"/transactions",path:"/transactions",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./transactions.lazy-Ctg1KnGM.js"),__vite__mapDeps([9,1,2,10,4,5,11,12,13,6,14,15,3,7])).then(e=>e.Route)),xu=il.update({id:"/settings",path:"/settings",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./settings.lazy-D5YC21Yw.js"),__vite__mapDeps([16,1,2,17,4,10,18,12,6,13,3,7])).then(e=>e.Route)),wu=dl.update({id:"/register",path:"/register",getParentRoute:()=>al}),ku=fl.update({id:"/recurring",path:"/recurring",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./recurring.lazy-C-0iq7U4.js"),__vite__mapDeps([19,1,2,18,12,6,4,10,14,13,3,7])).then(e=>e.Route)),ju=hl.update({id:"/login",path:"/login",getParentRoute:()=>al}),Nu=jl.update({id:"/landing",path:"/landing",getParentRoute:()=>al}),Eu=Nl.update({id:"/goals",path:"/goals",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./goals.lazy-CavBpunn.js"),__vite__mapDeps([20,1,2,6,4,15,3,7])).then(e=>e.Route)),_u=El.update({id:"/budget",path:"/budget",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./budget.lazy-DqCkmJbw.js"),__vite__mapDeps([21,1,2,6,13,4,15,3,7])).then(e=>e.Route)),Su=_l.update({id:"/analytics",path:"/analytics",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./analytics.lazy-Bh-soQ6k.js"),__vite__mapDeps([22,1,2,6,3,4,7])).then(e=>e.Route)),Cu=Sl.update({id:"/accounts",path:"/accounts",getParentRoute:()=>al}).lazy(()=>xo(()=>import("./accounts.lazy-CjU1mugI.js"),__vite__mapDeps([23,1,2,6,17,4,3,11,12,13,14,15,7])).then(e=>e.Route)),Pu={IndexRoute:gu.update({id:"/",path:"/",getParentRoute:()=>al}),AccountsRoute:Cu,AnalyticsRoute:Su,BudgetRoute:_u,GoalsRoute:Eu,LandingRoute:Nu,LoginRoute:ju,RecurringRoute:ku,RegisterRoute:wu,SettingsRoute:xu,TransactionsRoute:vu,UploadRoute:bu,GamificationLazyRoute:yu},Ou=al._addFileChildren(Pu)._addFileTypes();function Ru(){const{isOnline:e,isSyncing:t,pendingCount:r,lastError:n}=w.useContext(fo),{t:o}=xe(),[s,i]=w.useState(!1);if(w.useEffect(()=>{if(e&&!t&&0===r&&!n){i(!0);const e=setTimeout(()=>i(!1),3e3);return()=>clearTimeout(e)}},[e,t,r,n]),e&&!t&&0===r&&!s&&!n)return null;return a.jsx("div",{className:"fixed top-4 right-4 z-[9999]",role:"status","aria-live":"polite",children:a.jsxs("div",{className:`\n        flex items-center gap-2 px-3 py-2 rounded-lg shadow-lg\n        ${e?n?"bg-red-500 dark:bg-red-600":t?"bg-blue-500 dark:bg-blue-600":"bg-green-500 dark:bg-green-600":"bg-gray-600 dark:bg-gray-700"}\n        text-white text-sm font-medium\n        transition-all duration-300 ease-in-out\n      `,children:[!e&&a.jsxs(a.Fragment,{children:[a.jsx(be,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:o("sync.offline","Offline")}),r>0&&a.jsx("span",{className:"bg-white/20 px-2 py-0.5 rounded text-xs",children:r})]}),e&&n&&a.jsxs(a.Fragment,{children:[a.jsx(O,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:o("sync.error","Sync error")})]}),e&&t&&a.jsxs(a.Fragment,{children:[a.jsx(ve,{size:16,className:"animate-spin","aria-hidden":"true"}),a.jsxs("span",{children:[o("sync.syncing","Syncing"),r>0&&` (${r})`]})]}),e&&!t&&!n&&s&&a.jsxs(a.Fragment,{children:[a.jsx(A,{size:16,"aria-hidden":"true"}),a.jsx("span",{children:o("sync.synced","All synced")})]})]})})}const Au=w.createContext(void 0);function Tu(){const e=w.useContext(Au);if(!e)throw new Error("useXPToast must be used within an XPToastProvider");return e}function Mu({children:e}){const[t,r]=w.useState([]),n=w.useCallback((e,t)=>{const n={amount:e,source:t,timestamp:Date.now()};r(e=>[...e.slice(-2),n]),setTimeout(()=>{r(e=>e.filter(e=>e.timestamp!==n.timestamp))},3e3)},[]),o=w.useCallback(e=>{r(t=>t.filter(t=>t.timestamp!==e))},[]);return a.jsxs(Au.Provider,{value:{addXPGain:n,toasts:t,dismissToast:o},children:[e,a.jsx(Du,{toasts:t,onDismiss:o})]})}function Du({toasts:e,onDismiss:t}){return 0===e.length?null:a.jsx("div",{className:"fixed bottom-4 right-4 z-50 flex flex-col gap-2 pointer-events-none",children:e.map(e=>a.jsx(Iu,{toast:e,onDismiss:t},e.timestamp))})}function Iu({toast:e,onDismiss:t}){return a.jsxs("div",{className:Oa("pointer-events-auto flex items-center gap-3 px-4 py-3 rounded-xl shadow-lg","bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-950/90 dark:to-orange-950/90","border border-amber-200/50 dark:border-amber-800/50","animate-in slide-in-from-bottom-5 fade-in duration-300"),children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 rounded-full bg-amber-100 dark:bg-amber-900/50 flex items-center justify-center",children:a.jsx(fe,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("p",{className:"text-sm font-semibold text-amber-800 dark:text-amber-200",children:["+",e.amount," XP"]}),a.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400 truncate",children:e.source})]}),a.jsx("button",{onClick:()=>t(e.timestamp),className:"flex-shrink-0 p-1 rounded-lg hover:bg-amber-200/50 dark:hover:bg-amber-800/50 transition-colors",children:a.jsx(T,{className:"w-4 h-4 text-amber-600 dark:text-amber-400"})})]})}const Lu="default",Ku="smartmoney-theme";function Fu(){const[e,t]=w.useState(Lu),[r,n]=w.useState(!0),[a,o]=w.useState([]),[s,i]=w.useState([]);w.useEffect(()=>{const e=localStorage.getItem(Ku);e&&(t(e),l(e))},[]);const c=w.useCallback(async()=>{try{n(!0);const[e,r]=await Promise.all([yn.get("/api/rewards/themes/my"),yn.get("/api/rewards/themes?level=1")]);o(e.data),i(r.data);const a=e.data.find(e=>e.is_active);if(a){const e=qu(a.code);t(e),l(e),localStorage.setItem(Ku,e)}}catch(e){l(Lu)}finally{n(!1)}},[]),l=w.useCallback(e=>{const t=qu(e);document.documentElement.setAttribute("data-theme",t)},[]),u=w.useCallback(async e=>{try{await yn.post(`/api/rewards/themes/${e}/activate`,{});const r=s.find(t=>t.id===e);if(r){const n=qu(r.code);t(n),l(n),localStorage.setItem(Ku,n),o(t=>t.map(t=>({...t,is_active:t.id===e})))}}catch(r){}},[s,l]);return w.useEffect(()=>{c()},[c]),{activeTheme:e,isLoading:r,myThemes:a,availableThemes:s,activateTheme:u,refreshThemes:c}}function qu(e){return{default:"default",dark:"dark",emerald:"emerald",sunset:"sunset",purple:"purple",rainbow:"rainbow","gold-premium":"gold-premium",gold_premium:"gold-premium","neon-night":"neon-night",neon_night:"neon-night",rose:"rose"}[e.toLowerCase()]||"default"}const Bu=b({routeTree:Ou});function zu(){return Fu(),a.jsxs(Mu,{children:[a.jsx(Ru,{}),a.jsx(v,{router:Bu})]})}we.use(ke).use(je).use(Ne).init({fallbackLng:"ja",supportedLngs:["ja","en","vi"],defaultNS:"common",ns:["common","landing"],backend:{loadPath:"/locales/{{lng}}/{{ns}}.json"},detection:{order:["localStorage","navigator"],caches:["localStorage"],lookupLocalStorage:"i18nextLng"},interpolation:{escapeValue:!1},debug:!1}),async function(){if(!function(){try{return"undefined"!=typeof indexedDB&&null!==indexedDB}catch{return!1}}())return!1;try{await Za.open();return await Za.app_meta.get("app-state")||await Za.app_meta.put({id:"app-state",schema_version:1}),!0}catch(e){return!1}}().then(e=>{}),Ue.createRoot(document.getElementById("root")).render(a.jsx(_.StrictMode,{children:a.jsx(In,{children:a.jsx(He,{client:po,persistOptions:{persister:bo,maxAge:864e5,dehydrateOptions:{shouldDehydrateQuery:e=>"success"===e.state.status&&function(e){const t=e[0];return"string"!=typeof t||!mo.includes(t)}([...e.queryKey])}},children:a.jsx(ho,{children:a.jsx(wn,{children:a.jsx(_n,{children:a.jsx(On,{children:a.jsx(Ia,{children:a.jsx(zu,{})})})})})})})})}));export{to as $,Oc as A,cl as B,ul as C,Cc as D,Nn as E,jn as F,Wc as G,Hl as H,ll as I,Gl as J,Xl as K,nl as L,Vl as M,Yl as N,Wl as O,Jl as P,ou as Q,qc as R,Pl as S,Ln as T,su as U,au as V,lu as W,uu as X,cu as Y,lo as Z,xo as _,yn as a,Dc as a0,La as a1,_o as a2,Tu as b,$l as c,Oa as d,iu as e,eu as f,Eo as g,Rc as h,Ac as i,Rn as j,Ec as k,Vc as l,qu as m,Zl as n,_c as o,$c as p,Sn as q,ru as r,Uc as s,Ol as t,Fu as u,nu as v,Lc as w,Mc as x,Tc as y,Kc as z};
