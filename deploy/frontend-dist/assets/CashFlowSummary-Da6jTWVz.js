import{j as e}from"./vendor-tanstack-DOuiVnRb.js";import{p as v,a4 as w,ac as C,Y as c,c as x}from"./index-C4UxDUME.js";import{u as B}from"./vendor-i18n-CtQU9zWU.js";import{R as E,g as F,X as S,Y as A,T as D,i as T,B as z,f as $}from"./vendor-recharts-BfEtinVu.js";import"./vendor-react-B9eo89kj.js";import"./vendor-icons-Boynwk5e.js";import"./vendor-date-fteVm545.js";function H({data:l,savingsGoal:s}){const{t:r}=B("common"),{currency:n}=v(),{data:t}=w(),{resolvedTheme:b}=C(),m=b==="dark",k=m?"#1e1e2e":"#fff",N=m?"#45475a":"#E5E7EB",y=m?"#cdd6f4":"#374151",f=l.length>0?l[l.length-1]:null,a=(f==null?void 0:f.net)||0,h=l.length>1?l.slice(0,-1):l,d=h.length>0?h.reduce((o,u)=>o+u.net,0)/h.length:a,p=[{name:r("analytics.thisMonth"),value:a,color:a>=0?"#4CAF50":"#F44336"},{name:r("analytics.average"),value:d,color:"#9E9E9E"}],g=d!==0?(a-d)/Math.abs(d)*100:0,j=g>=0,i=s&&s>0?Math.min(a/s*100,100):null;return l.length===1?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full py-8",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-2",children:r("analytics.netCashFlow")}),e.jsx("p",{className:x("text-3xl font-bold",a>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:c(a,n,(t==null?void 0:t.rates)||{},!1)}),a>=0&&e.jsx("p",{className:"text-sm text-green-600 dark:text-green-400 mt-1",children:r("analytics.positiveCashFlow")}),s&&s>0&&e.jsxs("div",{className:"mt-4 w-full max-w-xs",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:r("analytics.savingsGoal")}),e.jsxs("span",{children:[(i??0).toFixed(0),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:x("h-full rounded-full transition-all duration-700 ease-out",i&&i>=100?"bg-green-500":"bg-primary-500"),style:{width:`${i||0}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-center",children:[c(s,n,(t==null?void 0:t.rates)||{},!1)," ",r("analytics.target")]})]})]}):e.jsxs("div",{className:"w-full h-full flex flex-col",children:[e.jsx("div",{className:"flex-1 min-h-[150px]",children:e.jsx(E,{width:"100%",height:"100%",children:e.jsxs(F,{data:p,layout:"vertical",margin:{top:10,right:60,left:10,bottom:10},children:[e.jsx(S,{type:"number",hide:!0}),e.jsx(A,{type:"category",dataKey:"name",width:80,tick:{fill:y,fontSize:12},axisLine:!1,tickLine:!1}),e.jsx(D,{contentStyle:{backgroundColor:k,border:`1px solid ${N}`,borderRadius:"8px",fontSize:"14px",color:y},formatter:o=>[c(o,n,(t==null?void 0:t.rates)||{},!1),r("analytics.netCashFlow")]}),s&&s>0&&e.jsx(T,{x:s,stroke:"#9C27B0",strokeDasharray:"3 3",label:{value:r("analytics.goal"),position:"top",fill:"#9C27B0",fontSize:10}}),e.jsx(z,{dataKey:"value",radius:[0,4,4,0],maxBarSize:32,isAnimationActive:!0,animationBegin:0,animationDuration:800,animationEasing:"ease-out",children:p.map((o,u)=>e.jsx($,{fill:o.color},`cell-${u}`))})]})})}),e.jsxs("div",{className:"flex items-center justify-center gap-2 py-2 border-t border-gray-100 dark:border-gray-800",children:[e.jsxs("span",{className:x("text-sm font-medium",j?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"),children:[j?"▲":"▼"," ",Math.abs(g).toFixed(1),"%"]}),e.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:r("analytics.vsAverage")})]}),s&&s>0&&e.jsxs("div",{className:"px-4 pb-2",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-1",children:[e.jsx("span",{children:r("analytics.savingsGoal")}),e.jsxs("span",{children:[c(a,n,(t==null?void 0:t.rates)||{},!1)," / ",c(s,n,(t==null?void 0:t.rates)||{},!1)]})]}),e.jsx("div",{className:"h-2 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:x("h-full rounded-full transition-all duration-700 ease-out",i&&i>=100?"bg-green-500":"bg-primary-500"),style:{width:`${i||0}%`}})})]})]})}export{H as CashFlowSummary};
